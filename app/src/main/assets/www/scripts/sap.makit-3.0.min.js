/*
Copyright (c) 2003-2008 Terence Parr. All rights reserved.
Code licensed under the BSD License:
http://www.antlr.org/license.html

Some parts of the ANTLR class:
Copyright (c) 2008, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
*/
if(typeof org=="undefined"||!org){var org={}}if(typeof org.antlr=="undefined"||!org.antlr){org.antlr={}}org.antlr.global=(function(){return this}).call(null);org.antlr.namespace=function(){var A=arguments,E=null,C,B,D;for(C=0;C<A.length;C=C+1){D=A[C].split(".");E=org.antlr.global;for(B=0;B<D.length;B=B+1){E[D[B]]=E[D[B]]||{};E=E[D[B]]}}return E};org.antlr.env=org.antlr.env||{};org.antlr.env.ua=function(){var D={ie:0,opera:0,gecko:0,webkit:0,mobile:null,air:0,rhino:false};var B,A;try{B=navigator.userAgent;if((/KHTML/).test(B)){D.webkit=1}A=B.match(/AppleWebKit\/([^\s]*)/);if(A&&A[1]){D.webkit=parseFloat(A[1]);if(/ Mobile\//.test(B)){D.mobile="Apple"}else{A=B.match(/NokiaN[^\/]*/);if(A){D.mobile=A[0]}}A=B.match(/AdobeAIR\/([^\s]*)/);if(A){D.air=A[0]}}if(!D.webkit){A=B.match(/Opera[\s\/]([^\s]*)/);if(A&&A[1]){D.opera=parseFloat(A[1]);A=B.match(/Opera Mini[^;]*/);if(A){D.mobile=A[0]}}else{A=B.match(/MSIE\s([^;]*)/);if(A&&A[1]){D.ie=parseFloat(A[1])}else{A=B.match(/Gecko\/([^\s]*)/);if(A){D.gecko=1;A=B.match(/rv:([^\s\)]*)/);if(A&&A[1]){D.gecko=parseFloat(A[1])}}}}}}catch(C){}try{if(typeof window=="undefined"&&loadClass){D.rhino=true}}catch(C){}return D}();org.antlr.namespace("org.antlr.runtime.tree");org.antlr.lang=org.antlr.lang||{isArray:function(B){if(B){var A=org.antlr.lang;return A.isNumber(B.length)&&A.isFunction(B.splice)}return false},isBoolean:function(A){return typeof A==="boolean"},isFunction:function(A){return typeof A==="function"},isNull:function(A){return A===null},isNumber:function(A){return typeof A==="number"&&isFinite(A)},isObject:function(A){return(A&&(typeof A==="object"||org.antlr.lang.isFunction(A)))||false},isString:function(A){return typeof A==="string"},isUndefined:function(A){return typeof A==="undefined"},_IEEnumFix:function(C,B){if(org.antlr.env.ua.ie){var E=["toString","valueOf"],A;for(A=0;A<E.length;A=A+1){var F=E[A],D=B[F];if(org.antlr.lang.isFunction(D)&&D!=Object.prototype[F]){C[F]=D}}}},extend:function(D,E,C){if(!E||!D){throw new Error("org.antlr.lang.extend failed, please check that all dependencies are included.")}var B=function(){};B.prototype=E.prototype;D.prototype=new B();D.prototype.constructor=D;D.superclass=E.prototype;if(E.prototype.constructor==Object.prototype.constructor){E.prototype.constructor=E}if(C){for(var A in C){D.prototype[A]=C[A]}org.antlr.lang._IEEnumFix(D.prototype,C)}},augmentObject:function(E,D){if(!D||!E){throw new Error("Absorb failed, verify dependencies.")}var A=arguments,C,F,B=A[2];if(B&&B!==true){for(C=2;C<A.length;C=C+1){E[A[C]]=D[A[C]]}}else{for(F in D){if(B||!E[F]){E[F]=D[F]}}org.antlr.lang._IEEnumFix(E,D)}},augmentProto:function(D,C){if(!C||!D){throw new Error("Augment failed, verify dependencies.")}var A=[D.prototype,C.prototype];for(var B=2;B<arguments.length;B=B+1){A.push(arguments[B])}org.antlr.lang.augmentObject.apply(this,A)},merge:function(){var D={},B=arguments;for(var C=0,A=B.length;C<A;C=C+1){org.antlr.lang.augmentObject(D,B[C],true)}return D},isValue:function(B){var A=org.antlr.lang;return(A.isObject(B)||A.isString(B)||A.isNumber(B)||A.isBoolean(B))},array:{peek:function(B){if(!org.antlr.lang.isArray(B)){throw new Error("org.antlr.lang.array.peek: a is not an array.")}var A=B.length;if(A<=0){throw new Error("org.antlr.lang.array.peek: a is empty.")}return B[A-1]}}};org.antlr.runtime.RecognizerSharedState=function(){this.following=[];this._fsp=-1;this.errorRecovery=false;this.lastErrorIndex=-1;this.failed=false;this.syntaxErrors=0;this.backtracking=0;this.ruleMemo=null;this.token=null;this.tokenStartCharIndex=-1;this.text=null};org.antlr.runtime.IndexOutOfBoundsException=function(A){org.antlr.runtime.IndexOutOfBoundsException.superclass.constructor.call(this,A)};org.antlr.lang.extend(org.antlr.runtime.IndexOutOfBoundsException,Error,{name:"org.antlr.runtime.IndexOutOfBoundsException"});org.antlr.runtime.RecognitionException=function(A){org.antlr.runtime.RecognitionException.superclass.constructor.call(this);this.input=A;this.index=A.index();if(A instanceof org.antlr.runtime.CommonTokenStream){this.token=A.LT(1);this.line=this.token.getLine();this.charPositionInLine=this.token.getCharPositionInLine()}if(A instanceof org.antlr.runtime.tree.TreeNodeStream){this.extractInformationFromTreeNodeStream(A)}else{if(A instanceof org.antlr.runtime.ANTLRStringStream){this.c=A.LA(1);this.line=A.getLine();this.charPositionInLine=A.getCharPositionInLine()}else{this.c=A.LA(1)}}this.message=this.toString()};org.antlr.lang.extend(org.antlr.runtime.RecognitionException,Error,{input:null,index:null,token:null,node:null,c:null,line:null,name:"org.antlr.runtime.RecognitionException",charPositionInLine:null,approximateLineInfo:null,extractInformationFromTreeNodeStream:function(F){var A=F,E,I,D,H,C;this.node=A.LT(1);var B=A.getTreeAdaptor(),G=B.getToken(this.node);if(G){this.token=G;if(G.getLine()<=0){C=-1;E=A.LT(C);while(E){priorPayload=B.getToken(E);if(priorPayload&&priorPayload.getLine()>0){this.line=priorPayload.getLine();this.charPositionInLine=priorPayload.getCharPositionInLine();this.approximateLineInfo=true;break}--C;E=A.LT(C)}}else{this.line=G.getLine();this.charPositionInLine=G.getCharPositionInLine()}}else{if(this.node instanceof org.antlr.runtime.tree.CommonTree){this.line=this.node.getLine();this.charPositionInLine=this.node.getCharPositionInLine();if(this.node instanceof org.antlr.runtime.tree.CommonTree){this.token=this.node.token}}else{D=B.getType(this.node);H=B.getText(this.node);this.token=new org.antlr.runtime.CommonToken(D,H)}}},getUnexpectedType:function(){if(this.input instanceof org.antlr.runtime.CommonTokenStream){return this.token.getType()}else{if(this.input instanceof org.antlr.runtime.tree.TreeNodeStream){var A=this.input;var B=A.getTreeAdaptor();return B.getType(this.node)}else{return this.c}}}});org.antlr.runtime.MismatchedTokenException=function(B,A){if(arguments.length===0){this.expecting=org.antlr.runtime.Token.INVALID_TOKEN_TYPE}else{org.antlr.runtime.MismatchedTokenException.superclass.constructor.call(this,A);this.expecting=B}};org.antlr.lang.extend(org.antlr.runtime.MismatchedTokenException,org.antlr.runtime.RecognitionException,{toString:function(){return"MismatchedTokenException("+this.getUnexpectedType()+"!="+this.expecting+")"},name:"org.antlr.runtime.MismatchedTokenException"});org.antlr.runtime.UnwantedTokenException=function(B,A){if(arguments.length>0){org.antlr.runtime.UnwantedTokenException.superclass.constructor.call(this,B,A)}};org.antlr.lang.extend(org.antlr.runtime.UnwantedTokenException,org.antlr.runtime.MismatchedTokenException,{getUnexpectedToken:function(){return this.token},toString:function(){var A=", expected "+this.expecting;if(this.expecting===org.antlr.runtime.Token.INVALID_TOKEN_TYPE){A=""}if(!org.antlr.lang.isValue(this.token)){return"UnwantedTokenException(found="+A+")"}return"UnwantedTokenException(found="+this.token.getText()+A+")"},name:"org.antlr.runtime.UnwantedTokenException"});org.antlr.runtime.MissingTokenException=function(B,A,C){if(arguments.length>0){org.antlr.runtime.MissingTokenException.superclass.constructor.call(this,B,A);this.inserted=C}};org.antlr.lang.extend(org.antlr.runtime.MissingTokenException,org.antlr.runtime.MismatchedTokenException,{getMissingType:function(){return this.expecting},toString:function(){if(org.antlr.lang.isValue(this.inserted)&&org.antlr.lang.isValue(this.token)){return"MissingTokenException(inserted "+this.inserted+" at "+this.token.getText()+")"}if(org.antlr.lang.isValue(this.token)){return"MissingTokenException(at "+this.token.getText()+")"}return"MissingTokenException"},name:"org.antlr.runtime.MissingTokenException"});org.antlr.runtime.NoViableAltException=function(C,B,D,A){org.antlr.runtime.NoViableAltException.superclass.constructor.call(this,A);this.grammarDecisionDescription=C;this.decisionNumber=B;this.stateNumber=D};org.antlr.lang.extend(org.antlr.runtime.NoViableAltException,org.antlr.runtime.RecognitionException,{toString:function(){if(this.input instanceof org.antlr.runtime.ANTLRStringStream){return"NoViableAltException('"+this.getUnexpectedType()+"'@["+this.grammarDecisionDescription+"])"}else{return"NoViableAltException("+this.getUnexpectedType()+"@["+this.grammarDecisionDescription+"])"}},name:"org.antlr.runtime.NoViableAltException"});org.antlr.runtime.EarlyExitException=function(B,A){org.antlr.runtime.EarlyExitException.superclass.constructor.call(this,A);this.decisionNumber=B};org.antlr.lang.extend(org.antlr.runtime.EarlyExitException,org.antlr.runtime.RecognitionException,{name:"org.antlr.runtime.EarlyExitException"});org.antlr.runtime.MismatchedSetException=function(B,A){org.antlr.runtime.MismatchedSetException.superclass.constructor.call(this,A);this.expecting=B};org.antlr.lang.extend(org.antlr.runtime.MismatchedSetException,org.antlr.runtime.RecognitionException,{toString:function(){return"MismatchedSetException("+this.getUnexpectedType()+"!="+this.expecting+")"},name:"org.antlr.runtime.MismatchedSetException"});org.antlr.runtime.MismatchedNotSetException=function(B,A){org.antlr.runtime.MismatchedNotSetException.superclass.constructor.call(this,B,A)};org.antlr.lang.extend(org.antlr.runtime.MismatchedNotSetException,org.antlr.runtime.MismatchedSetException,{toString:function(){return"MismatchedNotSetException("+this.getUnexpectedType()+"!="+this.expecting+")"},name:"org.antlr.runtime.MismatchedNotSetException"});org.antlr.runtime.MismatchedRangeException=function(B,A,C){if(arguments.length===0){return this}org.antlr.runtime.MismatchedRangeException.superclass.constructor.call(this,C);this.a=B;this.b=A};org.antlr.lang.extend(org.antlr.runtime.MismatchedRangeException,org.antlr.runtime.RecognitionException,{toString:function(){return"MismatchedRangeException("+this.getUnexpectedType()+" not in ["+this.a+","+this.b+"])"},name:"org.antlr.runtime.MismatchedRangeException"});org.antlr.runtime.FailedPredicateException=function(A,C,B){org.antlr.runtime.FailedPredicateException.superclass.constructor.call(this,A);this.ruleName=C;this.predicateText=B};org.antlr.lang.extend(org.antlr.runtime.FailedPredicateException,org.antlr.runtime.RecognitionException,{toString:function(){return"FailedPredicateException("+this.ruleName+",{"+this.predicateText+"}?)"},name:"org.antlr.runtime.FailedPredicateException"});org.antlr.runtime.BitSet=function(A){if(!A){A=org.antlr.runtime.BitSet.BITS}if(org.antlr.lang.isArray(A)){this.bits=A}else{if(org.antlr.lang.isNumber(A)){this.bits=[]}}};org.antlr.lang.augmentObject(org.antlr.runtime.BitSet,{BITS:32,LOG_BITS:5,MOD_MASK:31,bitMask:function(B){var A=B&org.antlr.runtime.BitSet.MOD_MASK;return 1<<A},numWordsToHold:function(A){return(A>>org.antlr.runtime.BitSet.LOG_BITS)+1},wordNumber:function(A){return A>>org.antlr.runtime.BitSet.LOG_BITS},of:function(D,A){var B,F,C,E;if(org.antlr.lang.isNumber(D)){if(org.antlr.lang.isNumber(A)){C=new org.antlr.runtime.BitSet(A+1);for(B=D;B<=A;B++){F=org.antlr.runtime.BitSet.wordNumber(B);C.bits[F]|=org.antlr.runtime.BitSet.bitMask(B)}return C}else{C=new org.antlr.runtime.BitSet(D+1);C.add(D);return C}}else{if(org.antlr.lang.isArray(D)){C=new org.antlr.runtime.BitSet();for(B=D.length-1;B>=0;B--){C.add(D[B])}return C}else{if(D instanceof org.antlr.runtime.BitSet){if(!D){return null}return D}else{if(D instanceof org.antlr.runtime.IntervalSet){if(!D){return null}C=new org.antlr.runtime.BitSet();C.addAll(D);return C}else{if(org.antlr.lang.isObject(D)){E=[];for(B in D){if(org.antlr.lang.isNumber(B)){E.push(B)}}return org.antlr.runtime.BitSet.of(E)}}}}}}});org.antlr.runtime.BitSet.prototype={add:function(A){var B=org.antlr.runtime.BitSet.wordNumber(A);if(B>=this.bits.length){this.growToInclude(A)}this.bits[B]|=org.antlr.runtime.BitSet.bitMask(A)},addAll:function(C){var A,B,D;if(C instanceof org.antlr.runtime.BitSet){this.orInPlace(C)}else{if(C instanceof org.antlr.runtime.IntervalSet){A=C}else{if(org.antlr.lang.isArray(C)){for(B=0;B<C.length;B++){D=C[B];this.add(D)}}else{return }}}},and:function(A){var B=this.clone();B.andInPlace(A);return B},andInPlace:function(A){var C=Math.min(this.bits.length,A.bits.length),B;for(B=C-1;B>=0;B--){this.bits[B]&=A.bits[B]}for(B=C;B<this.bits.length;B++){this.bits[B]=0}},clear:function(B){if(arguments.length===0){var A;for(A=this.bits.length-1;A>=0;A--){this.bits[A]=0}return }var C=org.antlr.runtime.BitSet.wordNumber(B);if(C>=this.bits.length){this.growToInclude(B)}this.bits[C]&=~org.antlr.runtime.BitSet.bitMask(B)},clone:function(){var C,B,A=[];for(C=0,B=this.bits.length;C<B;C++){A[C]=this.bits[C]}return new org.antlr.runtime.BitSet(A)},size:function(){var B=0,A,C,D;for(A=this.bits.length-1;A>=0;A--){C=this.bits[A];if(C!==0){for(D=org.antlr.runtime.BitSet.BITS-1;D>=0;D--){if((C&(1<<D))!==0){B++}}}}return B},equals:function(A){if(!A||!(A instanceof org.antlr.runtime.BitSet)){return false}var B=A,C,D=Math.min(this.bits.length,B.bits.length);for(C=0;C<D;C++){if(this.bits[C]!=B.bits[C]){return false}}if(this.bits.length>D){for(C=D+1;C<this.bits.length;C++){if(this.bits[C]!==0){return false}}}else{if(B.bits.length>D){for(C=D+1;C<B.bits.length;C++){if(B.bits[C]!==0){return false}}}}return true},growToInclude:function(D){var A=Math.max(this.bits.length<<1,org.antlr.runtime.BitSet.numWordsToHold(D)),C=[],B;for(B=0,len=this.bits.length;B<len;B++){C[B]=this.bits[B]}this.bits=C},member:function(A){var B=org.antlr.runtime.BitSet.wordNumber(A);if(B>=this.bits.length){return false}return(this.bits[B]&org.antlr.runtime.BitSet.bitMask(A))!==0},getSingleElement:function(){var A;for(A=0;A<(this.bits.length<<org.antlr.runtime.BitSet.LOG_BITS);A++){if(this.member(A)){return A}}return -1},isNil:function(){var A;for(A=this.bits.length-1;A>=0;A--){if(this.bits[A]!==0){return false}}return true},complement:function(B){if(B){return B.subtract(this)}else{var A=this.clone();A.notInPlace();return A}},notInPlace:function(){var A,D,B,C;if(arguments.length===0){for(B=this.bits.length-1;B>=0;B--){this.bits[B]=~this.bits[B]}}else{if(arguments.length===1){A=0;D=arguments[0]}else{A=arguments[0];D=arguments[1]}this.growToInclude(D);for(B=A;B<=D;B++){C=org.antlr.runtime.BitSet.wordNumber(B);this.bits[C]^=org.antlr.runtime.BitSet.bitMask(B)}}},or:function(A){if(!A){return this}var B=this.clone();B.orInPlace(A);return B},orInPlace:function(A){if(!A){return }if(A.bits.length>this.bits.length){this.setSize(A.bits.length)}var C=Math.min(this.bits.length,A.bits.length),B;for(B=C-1;B>=0;B--){this.bits[B]|=A.bits[B]}},remove:function(A){var B=org.antlr.runtime.BitSet.wordNumber(A);if(B>=this.bits.length){this.growToInclude(A)}this.bits[B]&=~org.antlr.runtime.BitSet.bitMask(A)},setSize:function(A){var B=A-this.bits.length;while(B>=0){this.bits.push(0);B--}},numBits:function(){return this.bits.length<<org.antlr.runtime.BitSet.LOG_BITS},lengthInLongWords:function(){return this.bits.length},subset:function(A){if(!A){return false}return this.and(A).equals(this)},subtractInPlace:function(A){if(!A){return }var B;for(B=0;B<this.bits.length&&B<A.bits.length;B++){this.bits[B]&=~A.bits[B]}},subtract:function(A){if(!A||!(A instanceof org.antlr.runtime.BitSet)){return null}var B=this.clone();B.subtractInPlace(A);return B},toArray:function(){var A=[],C,B=0;for(C=0;C<(this.bits.length<<org.antlr.runtime.BitSet.LOG_BITS);C++){if(this.member(C)){A[B++]=C}}return A},toPackedArray:function(){return this.bits},toString:function(){if(arguments.length===0){return this.toString1(null)}else{if(org.antlr.lang.isString(arguments[0])){if(!org.antlr.lang.isValue(arguments[1])){return this.toString1(null)}else{return this.toString2(arguments[0],arguments[1])}}else{return this.toString1(arguments[0])}}},toString1:function(D){var A="{",E=",",B,C=false;for(B=0;B<(this.bits.length<<org.antlr.runtime.BitSet.LOG_BITS);B++){if(this.member(B)){if(B>0&&C){A+=E}if(D){A+=D.getTokenDisplayName(B)}else{A+=B.toString()}C=true}}return A+"}"},toString2:function(C,B){var D="",A;for(A=0;A<(this.bits.length<<org.antlr.runtime.BitSet.LOG_BITS);A++){if(this.member(A)){if(D.length>0){D+=C}if(A>=B.size()){D+="'"+A+"'"}else{if(!org.antlr.lang.isValue(B.get(A))){D+="'"+A+"'"}else{D+=B.get(A)}}}}return D}};org.antlr.runtime.CharStream={EOF:-1};org.antlr.runtime.CommonToken=function(){var A;this.charPositionInLine=-1;this.channel=0;this.index=-1;if(arguments.length==1){if(org.antlr.lang.isNumber(arguments[0])){this.type=arguments[0]}else{A=arguments[0];this.text=A.getText();this.type=A.getType();this.line=A.getLine();this.index=A.getTokenIndex();this.charPositionInLine=A.getCharPositionInLine();this.channel=A.getChannel();if(A instanceof org.antlr.runtime.CommonToken){this.start=A.start;this.stop=A.stop}}}else{if(arguments.length==2){this.type=arguments[0];this.text=arguments[1];this.channel=0}else{if(arguments.length==5){this.input=arguments[0];this.type=arguments[1];this.channel=arguments[2];this.start=arguments[3];this.stop=arguments[4]}}}};org.antlr.runtime.CommonToken.prototype={getType:function(){return this.type},setLine:function(A){this.line=A},getText:function(){if(org.antlr.lang.isString(this.text)){return this.text}if(!this.input){return null}this.text=this.input.substring(this.start,this.stop);return this.text},setText:function(A){this.text=A},getLine:function(){return this.line},getCharPositionInLine:function(){return this.charPositionInLine},setCharPositionInLine:function(A){this.charPositionInLine=A},getChannel:function(){return this.channel},setChannel:function(A){this.channel=A},setType:function(A){this.type=A},getStartIndex:function(){return this.start},setStartIndex:function(A){this.start=A},getStopIndex:function(){return this.stop},setStopIndex:function(A){this.stop=A},getTokenIndex:function(){return this.index},setTokenIndex:function(A){this.index=A},getInputStream:function(){return this.input},setInputStream:function(A){this.input=A},toString:function(){var B="";if(this.channel>0){B=",channel="+this.channel}var A=this.getText();if(!org.antlr.lang.isNull(A)){A=A.replace(/\n/g,"\\\\n");A=A.replace(/\r/g,"\\\\r");A=A.replace(/\t/g,"\\\\t")}else{A="<no text>"}return"[@"+this.getTokenIndex()+","+this.start+":"+this.stop+"='"+A+"',<"+this.type+">"+B+","+this.line+":"+this.getCharPositionInLine()+"]"}};org.antlr.runtime.Token=function(){};org.antlr.lang.augmentObject(org.antlr.runtime.Token,{EOR_TOKEN_TYPE:1,DOWN:2,UP:3,MIN_TOKEN_TYPE:4,EOF:org.antlr.runtime.CharStream.EOF,EOF_TOKEN:new org.antlr.runtime.CommonToken(org.antlr.runtime.CharStream.EOF),INVALID_TOKEN_TYPE:0,INVALID_TOKEN:new org.antlr.runtime.CommonToken(0),SKIP_TOKEN:new org.antlr.runtime.CommonToken(0),DEFAULT_CHANNEL:0,HIDDEN_CHANNEL:99});org.antlr.lang.augmentObject(org.antlr.runtime.CommonToken,org.antlr.runtime.Token);org.antlr.runtime.tree.RewriteCardinalityException=function(A){this.elementDescription=A};org.antlr.lang.extend(org.antlr.runtime.tree.RewriteCardinalityException,Error,{getMessage:function(){if(org.antlr.lang.isString(this.elementDescription)){return this.elementDescription}return null},name:function(){return"org.antlr.runtime.tree.RewriteCardinalityException"}});org.antlr.runtime.tree.RewriteEmptyStreamException=function(B){var A=org.antlr.runtime.tree.RewriteEmptyStreamException.superclass;A.constructor.call(this,B)};org.antlr.lang.extend(org.antlr.runtime.tree.RewriteEmptyStreamException,org.antlr.runtime.tree.RewriteCardinalityException,{name:function(){return"org.antlr.runtime.tree.RewriteEmptyStreamException"}});org.antlr.runtime.tree.RewriteEarlyExitException=function(B){var A=org.antlr.runtime.tree.RewriteEarlyExitException.superclass;if(org.antlr.lang.isUndefined(B)){B=null}A.constructor.call(this,B)};org.antlr.lang.extend(org.antlr.runtime.tree.RewriteEarlyExitException,org.antlr.runtime.tree.RewriteCardinalityException,{name:function(){return"org.antlr.runtime.tree.RewriteEarlyExitException"}});org.antlr.runtime.MismatchedTreeNodeException=function(B,A){if(B&&A){org.antlr.runtime.MismatchedTreeNodeException.superclass.constructor.call(this,A);this.expecting=B}};org.antlr.lang.extend(org.antlr.runtime.MismatchedTreeNodeException,org.antlr.runtime.RecognitionException,{toString:function(){return"MismatchedTreeNodeException("+this.getUnexpectedType()+"!="+this.expecting+")"},name:"org.antlr.runtime.MismatchedTreeNodeException"});org.antlr.runtime.tree.BaseTree=function(){};org.antlr.runtime.tree.BaseTree.prototype={getChild:function(A){if(!this.children||A>=this.children.length){return null}return this.children[A]},getChildren:function(){return this.children},getFirstChildWithType:function(C){var B,A;for(B=0;this.children&&B<this.children.length;B++){A=this.children[B];if(A.getType()===C){return A}}return null},getChildCount:function(){if(!this.children){return 0}return this.children.length},addChild:function(B){if(!org.antlr.lang.isValue(B)){return }var C=B,E,A,D;if(C.isNil()){if(this.children&&this.children==C.children){throw new Error("attempt to add child list to itself")}if(C.children){if(this.children){E=C.children.length;for(A=0;A<E;A++){D=C.children[A];this.children.push(D);D.setParent(this);D.setChildIndex(this.children.length-1)}}else{this.children=C.children;this.freshenParentAndChildIndexes()}}}else{if(!this.children){this.children=this.createChildrenList()}this.children.push(B);C.setParent(this);C.setChildIndex(this.children.length-1)}},addChildren:function(A){var C,B;for(C=0;C<A.length;C++){B=A[C];this.addChild(B)}},setChild:function(B,A){if(!A){return }if(A.isNil()){throw new Error("Can't set single child to a list")}if(!this.children){this.children=this.createChildrenList()}this.children[B]=A;A.setParent(this);A.setChildIndex(B)},deleteChild:function(B){if(!this.children){return null}if(B<0||B>=this.children.length){throw new Error("Index out of bounds.")}var A=this.children.splice(B,1)[0];this.freshenParentAndChildIndexes(B);return A},replaceChildren:function(H,I,P){if(!this.children){throw new Error("indexes invalid; no children in list")}var O=I-H+1;var A;var K=P;var D=null;if(K.isNil()){D=K.children}else{D=[];D.push(K)}A=D.length;var B=D.length;var N=O-A;var F,G,C,E,M,J,L;if(N===0){F=0;for(G=H;G<=I;G++){C=D[F];this.children[G]=C;C.setParent(this);C.setChildIndex(G);F++}}else{if(N>0){for(F=0;F<B;F++){this.children[H+F]=D[F]}E=H+B;for(M=E;M<=I;M++){J=this.children.splice(E,1)[0]}this.freshenParentAndChildIndexes(H)}else{for(F=0;F<O;F++){this.children[H+F]=D[F]}L=A-O;for(F=O;F<A;F++){this.children.splice(H+F,0,D[F])}this.freshenParentAndChildIndexes(H)}}},createChildrenList:function(){return[]},isNil:function(){return false},freshenParentAndChildIndexes:function(A){if(!org.antlr.lang.isNumber(A)){A=0}var D=this.getChildCount(),C,B;for(C=A;C<D;C++){B=this.getChild(C);B.setChildIndex(C);B.setParent(this)}},sanityCheckParentAndChildIndexes:function(B,A){if(arguments.length===0){B=null;A=-1}if(B!==this.getParent()){throw new Error("parents don't match; expected "+B+" found "+this.getParent())}if(A!==this.getChildIndex()){throw new Error("child indexes don't match; expected "+A+" found "+this.getChildIndex())}var E=this.getChildCount(),D,C;for(D=0;D<E;D++){C=this.getChild(D);C.sanityCheckParentAndChildIndexes(this,D)}},getChildIndex:function(){return 0},setChildIndex:function(A){},getParent:function(){return null},setParent:function(A){},getTree:function(){return this},toStringTree:function(){if(!this.children||this.children.length===0){return this.toString()}var A="",C,B;if(!this.isNil()){A+="(";A+=this.toString();A+=" "}for(C=0;this.children&&C<this.children.length;C++){B=this.children[C];if(C>0){A+=" "}A+=B.toStringTree()}if(!this.isNil()){A+=")"}return A},getLine:function(){return 0},getCharPositionInLine:function(){return 0}};org.antlr.runtime.tree.CommonTree=function(A){this.startIndex=-1;this.stopIndex=-1;this.childIndex=-1;this.parent=null;this.token=null;if(A instanceof org.antlr.runtime.tree.CommonTree){org.antlr.runtime.tree.CommonTree.superclass.constructor.call(this,A);this.token=A.token;this.startIndex=A.startIndex;this.stopIndex=A.stopIndex}else{if(A instanceof org.antlr.runtime.CommonToken){this.token=A}}};org.antlr.lang.extend(org.antlr.runtime.tree.CommonTree,org.antlr.runtime.tree.BaseTree,{getToken:function(){return this.token},dupNode:function(){return new org.antlr.runtime.tree.CommonTree(this)},isNil:function(){return !this.token},getType:function(){if(!this.token){return org.antlr.runtime.Token.INVALID_TOKEN_TYPE}return this.token.getType()},getText:function(){if(!this.token){return null}return this.token.getText()},getLine:function(){if(!this.token||this.token.getLine()===0){if(this.getChildCount()>0){return this.getChild(0).getLine()}return 0}return this.token.getLine()},getCharPositionInLine:function(){if(!this.token||this.token.getCharPositionInLine()===-1){if(this.getChildCount()>0){return this.getChild(0).getCharPositionInLine()}return 0}return this.token.getCharPositionInLine()},getTokenStartIndex:function(){if(this.token){return this.token.getTokenIndex()}return this.startIndex},setTokenStartIndex:function(A){this.startIndex=A},getTokenStopIndex:function(){if(this.token){return this.token.getTokenIndex()}return this.stopIndex},setTokenStopIndex:function(A){this.stopIndex=A},getChildIndex:function(){return this.childIndex},getParent:function(){return this.parent},setParent:function(A){this.parent=A},setChildIndex:function(A){this.childIndex=A},toString:function(){if(this.isNil()){return"nil"}if(this.getType()===org.antlr.runtime.Token.INVALID_TOKEN_TYPE){return"<errornode>"}if(!this.token){return null}return this.token.getText()}});org.antlr.runtime.tree.Tree={INVALID_NODE:new org.antlr.runtime.tree.CommonTree(org.antlr.runtime.Token.INVALID_TOKEN)};org.antlr.runtime.tree.CommonErrorNode=function(A,D,B,C){if(!B||(B.getTokenIndex()<D.getTokenIndex()&&B.getType()!=org.antlr.runtime.Token.EOF)){B=D}this.input=A;this.start=D;this.stop=B;this.trappedException=C};org.antlr.lang.extend(org.antlr.runtime.tree.CommonErrorNode,org.antlr.runtime.tree.CommonTree,{isNil:function(){return false},getType:function(){return org.antlr.runtime.Token.INVALID_TOKEN_TYPE},getText:function(){var C=null;if(this.start instanceof org.antlr.runtime.CommonToken){var B=this.start.getTokenIndex();var A=this.stop.getTokenIndex();if(this.stop.getType()===org.antlr.runtime.Token.EOF){A=this.input.size()}C=this.input.toString(B,A)}else{if(this.start instanceof org.antlr.runtime.tree.CommonTree){C=this.input.toString(this.start,this.stop)}else{C="<unknown>"}}return C},toString:function(){if(this.trappedException instanceof org.antlr.runtime.MissingTokenException){return"<missing type: "+this.trappedException.getMissingType()+">"}else{if(this.trappedException instanceof org.antlr.runtime.UnwantedTokenException){return"<extraneous: "+this.trappedException.getUnexpectedToken()+", resync="+this.getText()+">"}else{if(this.trappedException instanceof org.antlr.runtime.MismatchedTokenException){return"<mismatched token: "+this.trappedException.token+", resync="+this.getText()+">"}else{if(this.trappedException instanceof org.antlr.runtime.NoViableAltException){return"<unexpected: "+this.trappedException.token+", resync="+this.getText()+">"}}}}return"<error: "+this.getText()+">"}});org.antlr.runtime.tree.BaseTreeAdaptor=function(){this.uniqueNodeID=1};org.antlr.runtime.tree.BaseTreeAdaptor.prototype={nil:function(){return this.create(null)},errorNode:function(A,E,C,D){var B=new org.antlr.runtime.tree.CommonErrorNode(A,E,C,D);return B},isNil:function(A){return A.isNil()},dupTree:function(B,C){if(arguments.length===1){C=null}if(!B){return null}var D=this.dupNode(B);this.setChildIndex(D,this.getChildIndex(B));this.setParent(D,C);var G=this.getChildCount(B),A,F,E;for(A=0;A<G;A++){F=this.getChild(B,A);E=this.dupTree(F,B);this.addChild(D,E)}return D},addChild:function(A,B){if(A&&org.antlr.lang.isValue(B)){A.addChild(B)}},becomeRoot:function(D,C){if(D instanceof org.antlr.runtime.CommonToken||!D){D=this.create(D)}var A=D,B=C;if(!C){return D}if(A.isNil()){if(A.getChildCount()>1){throw new Error("more than one node as root (TODO: make exception hierarchy)")}A=A.getChild(0)}A.addChild(B);return A},rulePostProcessing:function(A){var B=A;if(B&&B.isNil()){if(B.getChildCount()===0){B=null}else{if(B.getChildCount()===1){B=B.getChild(0);B.setParent(null);B.setChildIndex(-1)}}}return B},create:function(C,B){var D,A;if(arguments.length===2){if(org.antlr.lang.isString(arguments[1])){D=arguments[1];B=this.createToken(C,D);A=this.create(B);return A}else{B=this.createToken(B);B.setType(C);A=this.create(B);return A}}else{if(arguments.length===3){D=arguments[2];B=this.createToken(B);B.setType(C);B.setText(D);A=this.create(B);return A}}},getType:function(A){A.getType();return 0},setType:function(A,B){throw new Error("don't know enough about Tree node")},getText:function(A){return A.getText()},setText:function(A,B){throw new Error("don't know enough about Tree node")},getChild:function(B,A){return B.getChild(A)},setChild:function(B,A,C){B.setChild(A,C)},deleteChild:function(B,A){return B.deleteChild(A)},getChildCount:function(A){return A.getChildCount()},getUniqueID:function(B){if(!this.treeToUniqueIDMap){this.treeToUniqueIDMap={}}var C=this.treeToUniqueIDMap[B];if(org.antlr.lang.isValue(C)){return C}var A=this.uniqueNodeID;this.treeToUniqueIDMap[B]=A;this.uniqueNodeID++;return A}};org.antlr.runtime.tree.CommonTreeAdaptor=function(){};org.antlr.lang.extend(org.antlr.runtime.tree.CommonTreeAdaptor,org.antlr.runtime.tree.BaseTreeAdaptor,{dupNode:function(A){if(!org.antlr.lang.isValue(A)){return null}return A.dupNode()},create:function(A){if(arguments.length>1){return org.antlr.runtime.tree.CommonTreeAdaptor.superclass.create.apply(this,arguments)}return new org.antlr.runtime.tree.CommonTree(A)},createToken:function(A){if(arguments.length===2){return new org.antlr.runtime.CommonToken(arguments[0],arguments[1])}else{return new org.antlr.runtime.CommonToken(arguments[0])}},setTokenBoundaries:function(C,E,A){if(!org.antlr.lang.isValue(C)){return }var D=0,B=0;if(org.antlr.lang.isValue(E)){if(E.getTokenIndex){D=E.getTokenIndex()}else{if(E.getStartIndex){D=E.getStartIndex()}else{D=E.getTokenStartIndex()}}}if(org.antlr.lang.isValue(A)){if(B.getTokenIndex){B=A.getTokenIndex()}else{if(A.getStopIndex){B=A.getStopIndex()}else{B=A.getTokenStopIndex()}}}C.setTokenStartIndex(D);C.setTokenStopIndex(B)},getTokenStartIndex:function(A){if(!A){return -1}return A.getTokenStartIndex()},getTokenStopIndex:function(A){if(!A){return -1}return A.getTokenStopIndex()},getText:function(A){if(!A){return null}return A.getText()},getType:function(A){if(!A){return org.antlr.runtime.Token.INVALID_TOKEN_TYPE}return A.getType()},getToken:function(A){if(A instanceof org.antlr.runtime.tree.CommonTree){return A.getToken()}return null},getChild:function(B,A){if(!B){return null}return B.getChild(A)},getChildCount:function(A){if(!A){return 0}return A.getChildCount()},getParent:function(A){return A.getParent()},setParent:function(A,B){A.setParent(B)},getChildIndex:function(A){return A.getChildIndex()},setChildIndex:function(B,A){B.setChildIndex(A)},replaceChildren:function(D,B,A,C){if(D){D.replaceChildren(B,A,C)}}});org.antlr.runtime.ANTLRStringStream=function(A){this.p=0;this.line=1;this.charPositionInLine=0;this.markDepth=0;this.markers=null;this.lastMarker=null;this.data=A;this.n=A.length};org.antlr.runtime.ANTLRStringStream.prototype={reset:function(){this.p=0;this.line=1;this.charPositionInLine=0;this.markDepth=0},consume:function(){if(this.p<this.n){this.charPositionInLine++;if(this.data.charAt(this.p)==="\n"){this.line++;this.charPositionInLine=0}this.p++}},LA:function(B){if(B<0){B++}var A=this.p+B-1;if(A>=this.n||A<0){return org.antlr.runtime.CharStream.EOF}return this.data.charAt(A)},index:function(){return this.p},size:function(){return this.n},mark:function(){if(!this.markers){this.markers=[];this.markers.push(null)}this.markDepth++;var A=null;if(this.markDepth>=this.markers.length){A={};this.markers.push(A)}else{A=this.markers[this.markDepth]}A.p=this.p;A.line=this.line;A.charPositionInLine=this.charPositionInLine;this.lastMarker=this.markDepth;return this.markDepth},rewind:function(A){if(!org.antlr.lang.isNumber(A)){A=this.lastMarker}var B=this.markers[A];this.seek(B.p);this.line=B.line;this.charPositionInLine=B.charPositionInLine;this.release(A)},release:function(A){this.markDepth=A;this.markDepth--},seek:function(A){if(A<=this.p){this.p=A;return }while(this.p<A){this.consume()}},substring:function(B,A){return this.data.substr(B,A-B+1)},getLine:function(){return this.line},getCharPositionInLine:function(){return this.charPositionInLine},setLine:function(A){this.line=A},setCharPositionInLine:function(A){this.charPositionInLine=A},getSourceName:function(){return null}};org.antlr.runtime.ANTLRStringStream.LT=org.antlr.runtime.ANTLRStringStream.LA;org.antlr.runtime.CommonTokenStream=function(A,B){this.p=-1;this.channel=org.antlr.runtime.Token.DEFAULT_CHANNEL;this.v_discardOffChannelTokens=false;this.tokens=[];if(arguments.length>=2){this.channel=B}else{if(arguments.length===1){this.tokenSource=A}}};org.antlr.runtime.CommonTokenStream.prototype={setTokenSource:function(A){this.tokenSource=A;this.tokens=[];this.p=-1;this.channel=org.antlr.runtime.Token.DEFAULT_CHANNEL},fillBuffer:function(){var B=0,C=this.tokenSource.nextToken(),A,D;while(org.antlr.lang.isValue(C)&&C.getType()!=org.antlr.runtime.CharStream.EOF){A=false;if(this.channelOverrideMap){D=this.channelOverrideMap[C.getType()];if(org.antlr.lang.isValue(D)){C.setChannel(D)}}if(this.discardSet&&this.discardSet[C.getType()]){A=true}else{if(this.v_discardOffChannelTokens&&C.getChannel()!=this.channel){A=true}}if(!A){C.setTokenIndex(B);this.tokens.push(C);B++}C=this.tokenSource.nextToken()}this.p=0;this.p=this.skipOffTokenChannels(this.p)},consume:function(){if(this.p<this.tokens.length){this.p++;this.p=this.skipOffTokenChannels(this.p)}},skipOffTokenChannels:function(A){var B=this.tokens.length;while(A<B&&(this.tokens[A]).getChannel()!=this.channel){A++}return A},skipOffTokenChannelsReverse:function(A){while(A>=0&&(this.tokens[A]).getChannel()!=this.channel){A--}return A},setTokenTypeChannel:function(B,A){if(!this.channelOverrideMap){this.channelOverrideMap={}}this.channelOverrideMap[B]=A},discardTokenType:function(A){if(!this.discardSet){this.discardSet={}}this.discardSet[A]=true},discardOffChannelTokens:function(A){this.v_discardOffChannelTokens=A},getTokens:function(F,D,C){if(this.p===-1){this.fillBuffer()}if(arguments.length===0){return this.tokens}if(org.antlr.lang.isArray(C)){C=new org.antlr.runtime.BitSet(C)}else{if(org.antlr.lang.isNumber(C)){C=org.antlr.runtime.BitSet.of(C)}}if(D>=this.tokens.length){D=this.tokens.length-1}if(F<0){F=0}if(F>D){return null}var E=[],B,A;for(B=F;B<=D;B++){A=this.tokens[B];if(!this.types||C.member(A.getType())){E.push(A)}}if(E.length===0){E=null}return E},LT:function(A){if(this.p===-1){this.fillBuffer()}if(A===0){return null}if(A<0){return this.LB(-1*A)}if((this.p+A-1)>=this.tokens.length){return org.antlr.runtime.Token.EOF_TOKEN}var B=this.p,C=1;while(C<A){B=this.skipOffTokenChannels(B+1);C++}if(B>=this.tokens.length){return org.antlr.runtime.Token.EOF_TOKEN}return this.tokens[B]},LB:function(A){if(this.p===-1){this.fillBuffer()}if(A===0){return null}if((this.p-A)<0){return null}var B=this.p,C=1;while(C<=A){B=this.skipOffTokenChannelsReverse(B-1);C++}if(B<0){return null}return this.tokens[B]},get:function(A){return this.tokens[A]},LA:function(A){return this.LT(A).getType()},mark:function(){if(this.p===-1){this.fillBuffer()}this.lastMarker=this.index();return this.lastMarker},release:function(A){},size:function(){return this.tokens.length},index:function(){return this.p},rewind:function(A){if(!org.antlr.lang.isNumber(A)){A=this.lastMarker}this.seek(A)},reset:function(){this.p=-1;this.lastMarker=0},seek:function(A){this.p=A},getTokenSource:function(){return this.tokenSource},getSourceName:function(){return this.getTokenSource().getSourceName()},toString:function(D,C){if(arguments.length===0){if(this.p===-1){this.fillBuffer()}D=0;C=this.tokens.length-1}if(!org.antlr.lang.isNumber(D)&&!org.antlr.lang.isNumber(C)){if(org.antlr.lang.isValue(D)&&org.antlr.lang.isValue(C)){D=D.getTokenIndex();C=C.getTokenIndex()}else{return null}}var A="",B;if(D<0||C<0){return null}if(this.p==-1){this.fillBuffer()}if(C>=this.tokens.length){C=this.tokens.length-1}for(B=D;B<=C;B++){t=this.tokens[B];A=A+this.tokens[B].getText()}return A}};org.antlr.runtime.TokenRewriteStream=function(){var A=org.antlr.runtime.TokenRewriteStream.superclass;this.programs=null;this.lastRewriteTokenIndexes=null;if(arguments.length===0){this.init()}else{A.constructor.apply(this,arguments);this.init()}};(function(){var A=org.antlr.runtime.TokenRewriteStream;org.antlr.lang.augmentObject(A,{DEFAULT_PROGRAM_NAME:"default",PROGRAM_INIT_SIZE:100,MIN_TOKEN_INDEX:0});A.RewriteOperation=function(B,C){this.index=B;this.text=C};A.RewriteOperation.prototype={execute:function(B){return this.index},toString:function(){return this.text}};A.InsertBeforeOp=function(B,C){A.InsertBeforeOp.superclass.constructor.call(this,B,C)};org.antlr.lang.extend(A.InsertBeforeOp,A.RewriteOperation,{execute:function(B){B.push(this.text);return this.index}});A.ReplaceOp=function(D,C,B){A.ReplaceOp.superclass.constructor.call(this,D,B);this.lastIndex=C};org.antlr.lang.extend(A.ReplaceOp,A.RewriteOperation,{execute:function(B){if(org.antlr.lang.isValue(this.text)){B.push(this.text)}return this.lastIndex+1}});A.DeleteOp=function(C,B){A.DeleteOp.superclass.constructor.call(this,C,B)};org.antlr.lang.extend(A.DeleteOp,A.ReplaceOp);org.antlr.lang.extend(A,org.antlr.runtime.CommonTokenStream,{init:function(){this.programs={};this.programs[A.DEFAULT_PROGRAM_NAME]=[];this.lastRewriteTokenIndexes={}},rollback:function(){var B,C;if(arguments.length===1){B=A.DEFAULT_PROGRAM_NAME;C=arguments[0]}else{if(arguments.length===2){B=arguments[0];C=arguments[1]}}var D=this.programs[B];if(D){programs[B]=D.slice(A.MIN_TOKEN_INDEX,this.instructionIndex)}},deleteProgram:function(B){B=B||A.DEFAULT_PROGRAM_NAME;this.rollback(B,A.MIN_TOKEN_INDEX)},addToSortedRewriteList:function(){var H,E;if(arguments.length===1){H=A.DEFAULT_PROGRAM_NAME;E=arguments[0]}else{if(arguments.length===2){H=arguments[0];E=arguments[1]}}var F=this.getProgram(H);var G,I,D,J,B,C;for(I=0,G=F.length;I<G;I++){D=F[I];if(D.index===E.index){if(E instanceof A.ReplaceOp){J=false;for(C=I;C<F.length;C++){B=F[I];if(B.index!==E.index){break}if(B instanceof A.ReplaceOp){F[I]=E;J=true;break}}if(!J){F.splice(C,0,E)}}else{F.splice(I,0,E)}break}else{if(D.index>E.index){F.splice(I,0,E);break}}}if(I===G){F.push(E)}},insertAfter:function(){var C,B,D;if(arguments.length===2){B=A.DEFAULT_PROGRAM_NAME;C=arguments[0];D=arguments[1]}else{if(arguments.length===3){B=arguments[0];C=arguments[1];D=arguments[2]}}if(C instanceof org.antlr.runtime.CommonToken){C=C.index}this.insertBefore(B,C+1,D)},insertBefore:function(){var C,B,D;if(arguments.length===2){B=A.DEFAULT_PROGRAM_NAME;C=arguments[0];D=arguments[1]}else{if(arguments.length===3){B=arguments[0];C=arguments[1];D=arguments[2]}}if(C instanceof org.antlr.runtime.CommonToken){C=C.index}this.addToSortedRewriteList(B,new A.InsertBeforeOp(C,D))},replace:function(){var B,E,C,D;if(arguments.length===2){B=A.DEFAULT_PROGRAM_NAME;E=arguments[0];C=arguments[0];D=arguments[1]}else{if(arguments.length===3){B=A.DEFAULT_PROGRAM_NAME;E=arguments[0];C=arguments[1];D=arguments[2]}}if(arguments.length===4){B=arguments[0];E=arguments[1];C=arguments[2];D=arguments[3]}if(E instanceof org.antlr.runtime.CommonToken){E=E.index}if(C instanceof org.antlr.runtime.CommonToken){C=C.index}if(E>C||C<0||E<0){return }this.addToSortedRewriteList(B,new A.ReplaceOp(E,C,D))},remove:function(){var B=[],C=arguments.length-1;while(C>=0){B[C]=arguments[C];C--}B.push("");this.replace.apply(this,B)},getLastRewriteTokenIndex:function(B){B=B||A.DEFAULT_PROGRAM_NAME;return this.lastRewriteTokenIndexes[B]||-1},setLastRewriteTokenIndex:function(B,C){this.lastRewriteTokenIndexes[B]=C},getProgram:function(B){var C=this.programs[B];if(!C){C=this.initializeProgram(B)}return C},initializeProgram:function(B){var C=[];this.programs[B]=C;return C},toOriginalString:function(E,B){if(!org.antlr.lang.isNumber(E)){E=A.MIN_TOKEN_INDEX}if(!org.antlr.lang.isNumber(B)){B=this.size()-1}var C=[],D;for(D=E;D>=A.MIN_TOKEN_INDEX&&D<=B&&D<this.tokens.length;D++){C.push(this.get(D).getText())}return C.join("")},toString:function(){var J,B,F;if(arguments.length===0){J=A.DEFAULT_PROGRAM_NAME;B=A.MIN_TOKEN_INDEX;F=this.size()-1}else{if(arguments.length===1){J=arguments[0];B=A.MIN_TOKEN_INDEX;F=this.size()-1}else{if(arguments.length===2){J=A.DEFAULT_PROGRAM_NAME;B=arguments[0];F=arguments[1]}}}var H=this.programs[J];if(!H||H.length===0){return this.toOriginalString(B,F)}var E=0,D=B,C=[],G;while(D>=A.MIN_TOKEN_INDEX&&D<=F&&D<this.tokens.length){if(E<H.length){G=H[E];while(G.index<D&&E<H.length){E++;if(E<H.length){G=H[E]}}while(D===G.index&&E<H.length){D=G.execute(C);E++;if(E<H.length){G=H[E]}}}if(D<=F){C.push(this.get(D).getText());D++}}var I;for(I=E;I<H.length;I++){G=H[I];if(G.index>=this.size()){G.execute(C)}}return C.join("")},toDebugString:function(E,B){if(!org.antlr.lang.isNumber(E)){E=A.MIN_TOKEN_INDEX}if(!org.antlr.lang.isNumber(B)){B=this.size()-1}var C=[],D;for(D=E;D>=A.MIN_TOKEN_INDEX&&D<=B&&D<this.tokens.length;D++){C.push(this.get(D))}return C.join("")}})})();org.antlr.runtime.tree.TreeNodeStream=function(){};org.antlr.runtime.tree.CommonTreeNodeStream=function(D,A,B){if(arguments.length===1){A=D;D=new org.antlr.runtime.tree.CommonTreeAdaptor()}if(arguments.length<=2){B=org.antlr.runtime.tree.CommonTreeNodeStream.DEFAULT_INITIAL_BUFFER_SIZE}this.uniqueNavigationNodes=false;this.p=-1;var C=org.antlr.runtime.Token;this.root=A;this.adaptor=D;this.nodes=[];this.down=this.adaptor.create(C.DOWN,"DOWN");this.up=this.adaptor.create(C.UP,"UP");this.eof=this.adaptor.create(C.EOF,"EOF")};org.antlr.lang.augmentObject(org.antlr.runtime.tree.CommonTreeNodeStream,{DEFAULT_INITIAL_BUFFER_SIZE:100,INITIAL_CALL_STACK_SIZE:10});org.antlr.lang.extend(org.antlr.runtime.tree.CommonTreeNodeStream,org.antlr.runtime.tree.TreeNodeStream,{StreamIterator:function(){var C=0,B=this.nodes,A=this.eof;return{hasNext:function(){return C<B.length},next:function(){var D=C;C++;if(D<B.length){return B[D]}return A},remove:function(){throw new Error("cannot remove nodes from stream")}}},fillBuffer:function(C){var B=false;if(org.antlr.lang.isUndefined(C)){C=this.root;B=true}var A=this.adaptor.isNil(C);if(!A){this.nodes.push(C)}var F=this.adaptor.getChildCount(C);if(!A&&F>0){this.addNavigationNode(org.antlr.runtime.Token.DOWN)}var E,D;for(E=0;E<F;E++){D=this.adaptor.getChild(C,E);this.fillBuffer(D)}if(!A&&F>0){this.addNavigationNode(org.antlr.runtime.Token.UP)}if(B){this.p=0}},getNodeIndex:function(C){if(this.p==-1){this.fillBuffer()}var B,A;for(B=0;B<this.nodes.length;B++){A=this.nodes[B];if(A===C){return B}}return -1},addNavigationNode:function(B){var A=null;if(B===org.antlr.runtime.Token.DOWN){if(this.hasUniqueNavigationNodes()){A=this.adaptor.create(org.antlr.runtime.Token.DOWN,"DOWN")}else{A=this.down}}else{if(this.hasUniqueNavigationNodes()){A=this.adaptor.create(org.antlr.runtime.Token.UP,"UP")}else{A=this.up}}this.nodes.push(A)},get:function(A){if(this.p===-1){this.fillBuffer()}return this.nodes[A]},LT:function(A){if(this.p===-1){this.fillBuffer()}if(A===0){return null}if(A<0){return this.LB(-1*A)}if((this.p+A-1)>=this.nodes.length){return this.eof}return this.nodes[this.p+A-1]},getCurrentSymbol:function(){return this.LT(1)},LB:function(A){if(A===0){return null}if((this.p-A)<0){return null}return this.nodes[this.p-A]},getTreeSource:function(){return this.root},getSourceName:function(){return this.getTokenStream().getSourceName()},getTokenStream:function(){return this.tokens},setTokenStream:function(A){this.tokens=A},getTreeAdaptor:function(){return this.adaptor},setTreeAdaptor:function(A){this.adaptor=A},hasUniqueNavigationNodes:function(){return this.uniqueNavigationNodes},setUniqueNavigationNodes:function(A){this.uniqueNavigationNodes=A},consume:function(){if(this.p===-1){this.fillBuffer()}this.p++},LA:function(A){return this.adaptor.getType(this.LT(A))},mark:function(){if(this.p===-1){this.fillBuffer()}this.lastMarker=this.index();return this.lastMarker},release:function(A){},index:function(){return this.p},rewind:function(A){if(!org.antlr.lang.isNumber(A)){A=this.lastMarker}this.seek(A)},seek:function(A){if(this.p===-1){this.fillBuffer()}this.p=A},push:function(A){if(!this.calls){this.calls=[]}this.calls.push(this.p);this.seek(A)},pop:function(){var A=this.calls.pop();this.seek(A);return A},reset:function(){this.p=-1;this.lastMarker=0;if(this.calls){this.calls=[]}},size:function(){if(this.p===-1){this.fillBuffer()}return this.nodes.length},iterator:function(){if(this.p===-1){this.fillBuffer()}return this.StreamIterator()},replaceChildren:function(D,B,A,C){if(D){this.adaptor.replaceChildren(D,B,A,C)}},toTokenString:function(E,D){if(this.p===-1){this.fillBuffer()}var A="",C,B;for(C=E;C<this.nodes.length&&C<=D;C++){B=this.nodes[C];A+=" "+this.adaptor.getToken(B)}return A},toString:function(H,D){var A="",E,C,B;if(arguments.length===0){if(this.p===-1){this.fillBuffer()}for(B=0;B<this.nodes.length;B++){C=this.nodes[B];A+=" ";A+=this.adaptor.getType(C)}return A}else{if(!org.antlr.lang.isNumber(H)||!org.antlr.lang.isNumber(D)){return null}if(this.p===-1){this.fillBuffer()}if(H instanceof org.antlr.runtime.tree.CommonTree){}else{}if(D instanceof org.antlr.runtime.tree.CommonTree){}else{}var G,F;if(this.tokens){G=this.adaptor.getTokenStartIndex(H);F=this.adaptor.getTokenStopIndex(D);if(this.adaptor.getType(D)===org.antlr.runtime.Token.UP){F=this.adaptor.getTokenStopIndex(H)}else{if(this.adaptor.getType(D)==org.antlr.runtime.Token.EOF){F=this.size()-2}}return this.tokens.toString(G,F)}C=null;B=0;for(;B<this.nodes.length;B++){C=this.nodes[B];if(C===H){break}}A=E="";C=this.nodes[B];while(C!==D){E=this.adaptor.getText(C);if(!org.antlr.lang.isString(E)){E=" "+this.adaptor.getType(C).toString()}A+=E;B++;C=nodes[B]}E=this.adaptor.getText(D);if(!org.antlr.lang.isString(E)){E=" "+this.adaptor.getType(D).toString()}A+=E;return A}}});org.antlr.runtime.tree.RewriteRuleElementStream=function(C,B,A){this.cursor=0;this.dirty=false;this.elementDescription=B;this.adaptor=C;if(A){if(org.antlr.lang.isArray(A)){this.singleElement=null;this.elements=A}else{this.add(A)}}};org.antlr.runtime.tree.RewriteRuleElementStream.prototype={reset:function(){this.cursor=0;this.dirty=true},add:function(A){if(!org.antlr.lang.isValue(A)){return }if(this.elements){this.elements.push(A);return }if(!org.antlr.lang.isValue(this.singleElement)){this.singleElement=A;return }this.elements=[];this.elements.push(this.singleElement);this.singleElement=null;this.elements.push(A)},nextTree:function(){var B=this.size(),A;if(this.dirty||(this.cursor>=B&&B==1)){A=this._next();return this.dup(A)}A=this._next();return A},_next:function(){var B=this.size();if(B===0){throw new org.antlr.runtime.tree.RewriteEmptyStreamException(this.elementDescription)}if(this.cursor>=B){if(B===1){return this.toTree(this.singleElement)}throw new org.antlr.runtime.tree.RewriteCardinalityException(this.elementDescription)}if(org.antlr.lang.isValue(this.singleElement)){this.cursor++;return this.toTree(this.singleElement)}var A=this.toTree(this.elements[this.cursor]);this.cursor++;return A},toTree:function(A){if(A&&A.getTree){return A.getTree()}return A},hasNext:function(){return(org.antlr.lang.isValue(this.singleElement)&&this.cursor<1)||(this.elements&&this.cursor<this.elements.length)},size:function(){var A=0;if(org.antlr.lang.isValue(this.singleElement)){A=1}if(this.elements){return this.elements.length}return A},getDescription:function(){return this.elementDescription}};org.antlr.runtime.tree.RewriteRuleNodeStream=function(C,B,A){org.antlr.runtime.tree.RewriteRuleNodeStream.superclass.constructor.apply(this,arguments)};org.antlr.lang.extend(org.antlr.runtime.tree.RewriteRuleNodeStream,org.antlr.runtime.tree.RewriteRuleElementStream,{nextNode:function(){return this._next()},toTree:function(A){return this.adaptor.dupNode(A)},dup:function(){throw new Error("dup can't be called for a node stream.")}});org.antlr.runtime.tree.RewriteRuleTokenStream=function(D,C,B){var A=org.antlr.runtime.tree.RewriteRuleTokenStream.superclass;A.constructor.apply(this,arguments)};org.antlr.lang.extend(org.antlr.runtime.tree.RewriteRuleTokenStream,org.antlr.runtime.tree.RewriteRuleElementStream,{nextNode:function(){var A=this._next();return this.adaptor.create(A)},nextToken:function(){return this._next()},toTree:function(A){return A},dup:function(A){throw new Error("dup can't be called for a token stream.")}});org.antlr.runtime.tree.RewriteRuleSubtreeStream=function(){var A=org.antlr.runtime.tree.RewriteRuleSubtreeStream.superclass;A.constructor.apply(this,arguments)};org.antlr.lang.extend(org.antlr.runtime.tree.RewriteRuleSubtreeStream,org.antlr.runtime.tree.RewriteRuleElementStream,{nextNode:function(){var B=this.size(),A;if(this.dirty||(this.cursor>=B&&B===1)){A=this._next();return this.adaptor.dupNode(A)}A=this._next();return A},dup:function(A){return this.adaptor.dupTree(A)}});org.antlr.runtime.BaseRecognizer=function(A){this.state=A||new org.antlr.runtime.RecognizerSharedState()};org.antlr.lang.augmentObject(org.antlr.runtime.BaseRecognizer,{MEMO_RULE_FAILED:-2,MEMO_RULE_UNKNOWN:-1,INITIAL_FOLLOW_STACK_SIZE:100,MEMO_RULE_FAILED_I:-2,DEFAULT_TOKEN_CHANNEL:org.antlr.runtime.Token.DEFAULT_CHANNEL,HIDDEN:org.antlr.runtime.Token.HIDDEN_CHANNEL,NEXT_TOKEN_RULE_NAME:"nextToken"});org.antlr.runtime.BaseRecognizer.prototype={reset:function(){var B,A;if(!this.state){return }this.state._fsp=-1;this.state.errorRecovery=false;this.state.lastErrorIndex=-1;this.state.failed=false;this.state.syntaxErrors=0;this.state.backtracking=0;if(this.state.ruleMemo){for(B=0,A=this.state.ruleMemo.length;B<A;B++){this.state.ruleMemo[B]=null}}},match:function(B,D,A){var C=this.getCurrentInputSymbol(B);if(B.LA(1)===D){B.consume();this.state.errorRecovery=false;this.state.failed=false;return C}if(this.state.backtracking>0){this.state.failed=true;return C}C=this.recoverFromMismatchedToken(B,D,A);return C},matchAny:function(A){this.state.errorRecovery=false;this.state.failed=false;A.consume()},mismatchIsUnwantedToken:function(A,B){return A.LA(2)===B},mismatchIsMissingToken:function(C,A){if(!A){return false}if(A.member(org.antlr.runtime.Token.EOR_TOKEN_TYPE)){if(this.state._fsp>=0){A.remove(org.antlr.runtime.Token.EOR_TOKEN_TYPE)}var B=this.computeContextSensitiveRuleFOLLOW();A=A.or(this.viableTokensFollowingThisRule)}if(A.member(C.LA(1))||A.member(org.antlr.runtime.Token.EOR_TOKEN_TYPE)){return true}return false},mismatch:function(B,C,A){if(this.mismatchIsUnwantedToken(B,C)){throw new org.antlr.runtime.UnwantedTokenException(C,B)}else{if(this.mismatchIsMissingToken(B,A)){throw new org.antlr.runtime.MissingTokenException(C,B,null)}}throw new org.antlr.runtime.MismatchedTokenException(C,B)},reportError:function(A){if(this.state.errorRecovery){return }this.state.syntaxErrors++;this.state.errorRecovery=true;this.displayRecognitionError(this.getTokenNames(),A)},displayRecognitionError:function(A,B){var D=this.getErrorHeader(B),C=this.getErrorMessage(B,A);this.emitErrorMessage(D+" "+C)},getErrorHeader:function(A){if(!org.antlr.lang.isNumber(A.line)){A.line=0}return"line "+A.line+":"+A.charPositionInLine},emitErrorMessage:function(A){if(typeof (window)!="undefined"&&window.alert){alert(A)}else{print(A)}},getErrorMessage:function(E,D){var F=(E&&E.getMessage)?E.getMessage():null,A,C;if(E instanceof org.antlr.runtime.UnwantedTokenException){var B=E;C="<unknown>";if(B.expecting==org.antlr.runtime.Token.EOF){C="EOF"}else{C=D[B.expecting]}F="extraneous input "+this.getTokenErrorDisplay(B.getUnexpectedToken())+" expecting "+C}else{if(E instanceof org.antlr.runtime.MissingTokenException){A=E;C="<unknown>";if(A.expecting==org.antlr.runtime.Token.EOF){C="EOF"}else{C=D[A.expecting]}F="missing "+C+" at "+this.getTokenErrorDisplay(E.token)}else{if(E instanceof org.antlr.runtime.MismatchedTokenException){A=E;C="<unknown>";if(A.expecting==org.antlr.runtime.Token.EOF){C="EOF"}else{C=D[A.expecting]}F="mismatched input "+this.getTokenErrorDisplay(E.token)+" expecting "+C}else{if(E instanceof org.antlr.runtime.NoViableAltException){F="no viable alternative at input "+this.getTokenErrorDisplay(E.token)}else{if(E instanceof org.antlr.runtime.EarlyExitException){F="required (...)+ loop did not match anything at input "+this.getTokenErrorDisplay(E.token)}else{if(E instanceof org.antlr.runtime.MismatchedSetException){F="mismatched input "+this.getTokenErrorDisplay(E.token)+" expecting set "+E.expecting}else{if(E instanceof org.antlr.runtime.MismatchedNotSetException){F="mismatched input "+this.getTokenErrorDisplay(E.token)+" expecting set "+E.expecting}else{if(E instanceof org.antlr.runtime.FailedPredicateException){F="rule "+E.ruleName+" failed predicate: {"+E.predicateText+"}?"}}}}}}}}return F},getNumberOfSyntaxErrors:function(){return this.state.syntaxErrors},getTokenErrorDisplay:function(A){var B=A.getText();if(!org.antlr.lang.isValue(B)){if(A.getType()==org.antlr.runtime.Token.EOF){B="<EOF>"}else{B="<"+A.getType()+">"}}B=B.replace(/\n/g,"\\n");B=B.replace(/\r/g,"\\r");B=B.replace(/\t/g,"\\t");return"'"+B+"'"},recover:function(A,B){if(this.state.lastErrorIndex==A.index()){A.consume()}this.state.lastErrorIndex=A.index();var C=this.computeErrorRecoverySet();this.beginResync();this.consumeUntil(A,C);this.endResync()},beginResync:function(){},endResync:function(){},computeErrorRecoverySet:function(){return this.combineFollows(false)},computeContextSensitiveRuleFOLLOW:function(){return this.combineFollows(true)},combineFollows:function(C){var E=this.state._fsp,B,A,D=new org.antlr.runtime.BitSet();for(B=E;B>=0;B--){A=this.state.following[B];D.orInPlace(A);if(C){if(A.member(org.antlr.runtime.Token.EOR_TOKEN_TYPE)){if(B>0){D.remove(org.antlr.runtime.Token.EOR_TOKEN_TYPE)}}else{break}}}return D},recoverFromMismatchedToken:function(B,F,A){var E=null;if(this.mismatchIsUnwantedToken(B,F)){E=new org.antlr.runtime.UnwantedTokenException(F,B);this.beginResync();B.consume();this.endResync();this.reportError(E);var D=this.getCurrentInputSymbol(B);B.consume();return D}if(this.mismatchIsMissingToken(B,A)){var C=this.getMissingSymbol(B,E,F,A);E=new org.antlr.runtime.MissingTokenException(F,B,C);this.reportError(E);return C}E=new org.antlr.runtime.MismatchedTokenException(F,B);throw E},recoverFromMismatchedSet:function(B,C,A){if(this.mismatchIsMissingToken(B,A)){this.reportError(C);return this.getMissingSymbol(B,C,org.antlr.runtime.Token.INVALID_TOKEN_TYPE,A)}throw C},getCurrentInputSymbol:function(A){return null},getMissingSymbol:function(B,D,C,A){return null},consumeUntil:function(A,C){var B=A.LA(1);while(B!=org.antlr.runtime.Token.EOF&&!C.member(B)){A.consume();B=A.LA(1)}},pushFollow:function(A){if((this.state._fsp+1)>=this.state.following.length){var C=[];var B;for(B=this.state.following.length-1;B>=0;B--){C[B]=this.state.following[B]}this.state.following=C}this.state._fsp++;this.state.following[this.state._fsp]=A},getRuleInvocationStack:function(B,A){throw new Error("Not implemented.")},getBacktrackingLevel:function(){return this.state.backtracking},getTokenNames:function(){return null},getGrammarFileName:function(){return null},toStrings:function(C){if(!C){return null}var A=[];var B;for(B=0;B<C.length;B++){A.push(C[B].getText())}return A},getRuleMemoization:function(B,A){if(!this.state.ruleMemo[B]){this.state.ruleMemo[B]={}}var C=this.state.ruleMemo[B][A];if(!org.antlr.lang.isNumber(C)){return org.antlr.runtime.BaseRecognizer.MEMO_RULE_UNKNOWN}return C},alreadyParsedRule:function(B,C){var A=this.getRuleMemoization(C,B.index());if(A==org.antlr.runtime.BaseRecognizer.MEMO_RULE_UNKNOWN){return false}if(A==org.antlr.runtime.BaseRecognizer.MEMO_RULE_FAILED){this.state.failed=true}else{B.seek(A+1)}return true},memoize:function(C,D,B){var A=this.state.failed?org.antlr.runtime.BaseRecognizer.MEMO_RULE_FAILED:C.index()-1;if(!org.antlr.lang.isValue(this.state.ruleMemo)){throw new Error("!!!!!!!!! memo array is null for "+this.getGrammarFileName())}if(D>=this.state.ruleMemo.length){throw new Error("!!!!!!!!! memo size is "+this.state.ruleMemo.length+", but rule index is "+D)}if(org.antlr.lang.isValue(this.state.ruleMemo[D])){this.state.ruleMemo[D][B]=A}},getRuleMemoizationCacheSize:function(){var C=0,A;for(A=0;this.state.ruleMemo&&A<this.state.ruleMemo.length;A++){var B=this.state.ruleMemo[A];if(B){C+=B.length}}return C},traceIn:function(C,B,A){this.emitErrorMessage("enter "+C+" "+A);if(this.state.failed){this.emitErrorMessage(" failed="+this.failed)}if(this.state.backtracking>0){this.emitErrorMessage(" backtracking="+this.state.backtracking)}},traceOut:function(C,B,A){this.emitErrorMessage("exit "+C+" "+A);if(this.state.failed){this.emitErrorMessage(" failed="+this.state.failed)}if(this.state.backtracking>0){this.emitErrorMessage(" backtracking="+this.state.backtracking)}}};org.antlr.runtime.Lexer=function(A,B){if(B){org.antlr.runtime.Lexer.superclass.constructor.call(this,B)}if(A){this.input=A}};org.antlr.lang.extend(org.antlr.runtime.Lexer,org.antlr.runtime.BaseRecognizer,{reset:function(){org.antlr.runtime.Lexer.superclass.reset.call(this);if(org.antlr.lang.isValue(this.input)){this.input.seek(0)}if(!org.antlr.lang.isValue(this.state)){return }this.state.token=null;this.state.type=org.antlr.runtime.Token.INVALID_TOKEN_TYPE;this.state.channel=org.antlr.runtime.Token.DEFAULT_CHANNEL;this.state.tokenStartCharIndex=-1;this.state.tokenStartCharPositionInLine=-1;this.state.tokenStartLine=-1;this.state.text=null},nextToken:function(){while(true){this.state.token=null;this.state.channel=org.antlr.runtime.Token.DEFAULT_CHANNEL;this.state.tokenStartCharIndex=this.input.index();this.state.tokenStartCharPositionInLine=this.input.getCharPositionInLine();this.state.tokenStartLine=this.input.getLine();this.state.text=null;if(this.input.LA(1)===org.antlr.runtime.CharStream.EOF){return org.antlr.runtime.Token.EOF_TOKEN}try{this.mTokens();if(!org.antlr.lang.isValue(this.state.token)){this.emit()}else{if(this.state.token==org.antlr.runtime.Token.SKIP_TOKEN){continue}}return this.state.token}catch(A){if(A instanceof org.antlr.runtime.RecognitionException){this.reportError(A)}else{if(A instanceof org.antlr.runtime.NoViableAltException){this.reportError(A);this.recover(A)}else{throw A}}}}},skip:function(){this.state.token=org.antlr.runtime.Token.SKIP_TOKEN},setCharStream:function(A){this.input=null;this.reset();this.input=A},getCharStream:function(){return this.input},getSourceName:function(){return this.input.getSourceName()},emit:function(){if(arguments.length===0){var A=new org.antlr.runtime.CommonToken(this.input,this.state.type,this.state.channel,this.state.tokenStartCharIndex,this.getCharIndex()-1);A.setLine(this.state.tokenStartLine);A.setText(this.state.text);A.setCharPositionInLine(this.state.tokenStartCharPositionInLine);this.state.token=A;return A}else{this.state.token=arguments[0]}},match:function(C){var B=0,A;if(org.antlr.lang.isString(C)){while(B<C.length){if(this.input.LA(1)!=C.charAt(B)){if(this.state.backtracking>0){this.state.failed=true;return }A=new org.antlr.runtime.MismatchedTokenException(C.charAt(B),this.input);this.recover(A);throw A}B++;this.input.consume();this.state.failed=false}}else{if(org.antlr.lang.isNumber(C)){if(this.input.LA(1)!=C){if(this.state.backtracking>0){this.state.failed=true;return }A=new org.antlr.runtime.MismatchedTokenException(C,this.input);this.recover(A);throw A}this.input.consume();this.state.failed=false}}},matchAny:function(){this.input.consume()},matchRange:function(B,A){if(this.input.LA(1)<B||this.input.LA(1)>A){if(this.state.backtracking>0){this.state.failed=true;return }mre=new org.antlr.runtime.MismatchedRangeException(B,A,this.input);this.recover(mre);throw mre}this.input.consume();this.state.failed=false},getLine:function(){return this.input.getLine()},getCharPositionInLine:function(){return this.input.getCharPositionInLine()},getCharIndex:function(){return this.input.index()},getText:function(){if(org.antlr.lang.isString(this.state.text)){return this.state.text}return this.input.substring(this.state.tokenStartCharIndex,this.getCharIndex()-1)},setText:function(A){this.state.text=A},reportError:function(A){this.displayRecognitionError(this.getTokenNames(),A)},getErrorMessage:function(B,A){var C=null;if(B instanceof org.antlr.runtime.MismatchedTokenException){C="mismatched character "+this.getCharErrorDisplay(B.c)+" expecting "+this.getCharErrorDisplay(B.expecting)}else{if(B instanceof org.antlr.runtime.NoViableAltException){C="no viable alternative at character "+this.getCharErrorDisplay(B.c)}else{if(B instanceof org.antlr.runtime.EarlyExitException){C="required (...)+ loop did not match anything at character "+this.getCharErrorDisplay(B.c)}else{if(B instanceof org.antlr.runtime.MismatchedNotSetException){C="mismatched character "+this.getCharErrorDisplay(B.c)+" expecting set "+B.expecting}else{if(B instanceof org.antlr.runtime.MismatchedSetException){C="mismatched character "+this.getCharErrorDisplay(B.c)+" expecting set "+B.expecting}else{if(B instanceof org.antlr.runtime.MismatchedRangeException){C="mismatched character "+this.getCharErrorDisplay(B.c)+" expecting set "+this.getCharErrorDisplay(B.a)+".."+this.getCharErrorDisplay(B.b)}else{C=org.antlr.runtime.Lexer.superclass.getErrorMessage.call(this,B,A)}}}}}}return C},getCharErrorDisplay:function(B){var A=B;switch(A){case org.antlr.runtime.Token.EOF:A="<EOF>";break;case"\n":A="\\n";break;case"\t":A="\\t";break;case"\r":A="\\r";break}return"'"+A+"'"},recover:function(A){this.input.consume()},traceIn:function(C,B){var A=String.fromCharCode(this.input.LT(1))+" line="+this.getLine()+":"+this.getCharPositionInLine();org.antlr.runtime.Lexer.superclass.traceIn.call(this,C,B,A)},traceOut:function(C,B){var A=String.fromCharCode(this.input.LT(1))+" line="+this.getLine()+":"+this.getCharPositionInLine();org.antlr.runtime.Lexer.superclass.traceOut.call(this,C,B,A)}});org.antlr.runtime.ParserRuleReturnScope=function(){};org.antlr.runtime.ParserRuleReturnScope.prototype={getStart:function(){return this.start},getStop:function(){return this.stop}};org.antlr.runtime.tree.TreeRuleReturnScope=function(){};org.antlr.runtime.tree.TreeRuleReturnScope.prototype={getStart:function(){return this.start}};org.antlr.runtime.Parser=function(A,B){org.antlr.runtime.Parser.superclass.constructor.call(this,B);this.setTokenStream(A)};org.antlr.lang.extend(org.antlr.runtime.Parser,org.antlr.runtime.BaseRecognizer,{reset:function(){org.antlr.runtime.Parser.superclass.reset.call(this);if(org.antlr.lang.isValue(this.input)){this.input.seek(0)}},getCurrentInputSymbol:function(A){return A.LT(1)},getMissingSymbol:function(C,G,E,A){var B="<missing "+this.getTokenNames()[E]+">";var D=new org.antlr.runtime.CommonToken(E,B);var F=C.LT(1);var H;if(F.getType()===org.antlr.runtime.Token.EOF){H=F;F=C.LT(-1);if(!F){F=H}}D.line=F.getLine();D.charPositionInLine=F.getCharPositionInLine();D.channel=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;return D},setTokenStream:function(A){this.input=null;this.reset();this.input=A},getTokenStream:function(){return this.input},getSourceName:function(){return this.input.getSourceName()},traceIn:function(B,A){org.antlr.runtime.Parser.superclass.traceIn.call(this,B,A,this.input.LT(1))},traceOut:function(B,A){org.antlr.runtime.Parser.superclass.traceOut.call(this,B,A,this.input.LT(1))}});org.antlr.runtime.DFA=function(){};org.antlr.runtime.DFA.prototype={predict:function(C){var F=C.mark(),D=0,B,E,A;try{while(true){B=this.special[D];if(B>=0){D=this.specialStateTransition(B,C);if(D===-1){this.noViableAlt(D,C);return 0}C.consume();continue}if(this.accept[D]>=1){return this.accept[D]}E=C.LA(1);if(E===org.antlr.runtime.Token.EOF){E=-1}else{if(org.antlr.lang.isString(E)){E=E.charCodeAt(0)}}if(E>=this.min[D]&&E<=this.max[D]){A=this.transition[D][E-this.min[D]];if(A<0){if(this.eot[D]>=0){D=this.eot[D];C.consume();continue}this.noViableAlt(D,C);return 0}D=A;C.consume();continue}if(this.eot[D]>=0){D=this.eot[D];C.consume();continue}if(E==org.antlr.runtime.Token.EOF&&this.eof[D]>=0){return this.accept[this.eof[D]]}this.noViableAlt(D,C);return 0}}finally{C.rewind(F)}},noViableAlt:function(C,A){if(this.recognizer.state.backtracking>0){this.recognizer.state.failed=true;return }var B=new org.antlr.runtime.NoViableAltException(this.getDescription(),this.decisionNumber,C,A);this.error(B);throw B},error:function(A){},specialStateTransition:function(B,A){return -1},getDescription:function(){return"n/a"}};org.antlr.lang.augmentObject(org.antlr.runtime.DFA,{unpackEncodedString:function(D){var C,F=[],E=0,G,A,B;for(C=0;C<D.length;C+=2){G=D.charCodeAt(C);A=D.charCodeAt(C+1);if(A===65535){A=-1}for(B=1;B<=G;B++){F[E++]=A}}return F},unpackEncodedStringToUnsignedChars:function(A){return org.antlr.runtime.DFA.unpackEncodedString(A)}});org.antlr.runtime.tree.TreeParser=function(A){org.antlr.runtime.tree.TreeParser.superclass.constructor.call(this,arguments[1]);this.setTreeNodeStream(A)};(function(){var A=org.antlr.runtime.tree.TreeParser;org.antlr.lang.augmentObject(A,{DOWN:org.antlr.runtime.Token.DOWN,UP:org.antlr.runtime.Token.UP});org.antlr.lang.extend(A,org.antlr.runtime.BaseRecognizer,{reset:function(){A.superclass.reset.call(this);if(this.input){this.input.seek(0)}},setTreeNodeStream:function(B){this.input=B},getTreeNodeStream:function(){return this.input},getSourceName:function(){return this.input.getSourceName()},getCurrentInputSymbol:function(B){return B.LT(1)},getMissingSymbol:function(D,F,E,B){var C="<missing "+this.getTokenNames()[E]+">";return new org.antlr.runtime.tree.CommonTree(new org.antlr.runtime.CommonToken(E,C))},matchAny:function(E){this.state.errorRecovery=false;this.state.failed=false;var B=this.input.LT(1);if(this.input.getTreeAdaptor().getChildCount(B)===0){this.input.consume();return }var D=0,C=this.input.getTreeAdaptor().getType(B);while(C!==org.antlr.runtime.Token.EOF&&!(C===A.UP&&D===0)){this.input.consume();B=this.input.LT(1);C=this.input.getTreeAdaptor().getType(B);if(C===A.DOWN){D++}else{if(C===A.UP){D--}}}this.input.consume()},mismatch:function(C,D,B){throw new org.antlr.runtime.MismatchedTreeNodeException(D,C)},getErrorHeader:function(B){return this.getGrammarFileName()+": node from "+(B.approximateLineInfo?"after ":"")+"line "+B.line+":"+B.charPositionInLine},getErrorMessage:function(C,B){var D;if(this instanceof A){D=C.input.getTreeAdaptor();C.token=D.getToken(C.node);if(!org.antlr.lang.isValue(C.token)){C.token=new org.antlr.runtime.CommonToken(D.getType(C.node),D.getText(C.node))}}return A.superclass.getErrorMessage.call(this,C,B)},traceIn:function(C,B){A.superclass.traceIn.call(this,C,B,this.input.LT(1))},traceOut:function(C,B){A.superclass.traceOut.call(this,C,B,this.input.LT(1))}})})();/*
Copyright (c) 2003-2008 Terence Parr. All rights reserved.
Code licensed under the BSD License:
http://www.antlr.org/license.html

Some parts of the ANTLR class:
Copyright (c) 2008, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
*/
org.antlr.runtime.ANTLRFileStream=function(D,A){this.fileName=D;var C;if(typeof java!=="undefined"){C="loadFileUsingJava"}else{throw new Error("ANTLR File I/O is not supported in this JS implementation.")}var B=this[C](D,A);org.antlr.runtime.ANTLRFileStream.superclass.constructor.call(this,B)};org.antlr.lang.extend(org.antlr.runtime.ANTLRFileStream,org.antlr.runtime.ANTLRStringStream,{getSourceName:function(){return this.fileName},loadFileUsingJava:function(H,E){var G=new java.io.File(H),C=G.length(),B,D=new java.io.FileInputStream(G);if(E){B=new java.io.InputStreamReader(D,E)}else{B=new java.io.InputStreamReader(D)}var A,F=[];while((A=B.read())>=0){F.push(String.fromCharCode(A))}return F.join("")}});window.$MA||($MA={});$MA=function(a){if((a=document.getElementById(a))&&a.macontrol)return a.macontrol};$MA.platform={iOS:!1,android:!1,blackberry:!1,windows:!1};$MA.device={desktop:!1,tablet:!1,mobile:!1};
(function(){var a=navigator.userAgent;if(a.indexOf("iOS")>=0||a.indexOf("like Mac OS X")>=0)if($MA.platform.iOS=!0,a.indexOf("iPad")>=0)$MA.device.tablet=!0;else if(a.indexOf("iPhone")>=0)$MA.device.mobile=!0;else{if(a.indexOf("Mac OS X")>=0)$MA.device.desktop=!0}else a.indexOf("Android")>=0?($MA.platform.android=!0,a.indexOf("Mobile")>=0?$MA.device.mobile=!0:$MA.device.tablet=!0):navigator.userAgent.indexOf("BB10")>=0?$MA.platform.blackberry=!0:a.indexOf("Windows")>=0?($MA.platform.windows=!0,a.indexOf("Phone")>=
0?$MA.device.mobile=!0:$MA.device.tablet=!0):($MA.platform.windows=!0,$MA.device.desktop=!0)})();
$MA.log=function(){var a=function(a,b){return("000"+String(a)).slice(-b)},b=function(b,d){var e=new Date,e={time:a(e.getHours(),2)+":"+a(e.getMinutes(),2)+":"+a(e.getSeconds(),2),date:a(e.getFullYear(),4)+"-"+a(e.getMonth()+1,2)+"-"+a(e.getDate(),2),timestamp:e.getTime(),level:b,message:d||""};if(window.console){var f=e.date+" "+e.time+" "+e.message;switch(b){case 0:f+=" [fatal]";console.error(f);break;case 1:console.error(f);break;case 2:console.warn(f);break;case 3:console.info?console.info(f):
console.log(f);break;case 4:console.debug?console.debug(f):console.log(f);break;case 5:console.trace?console.trace(f):console.log(f)}}return e};return{fatal:function(a){b(0,a)},error:function(a){b(1,a)},warning:function(a){b(2,a)},info:function(a){b(3,a)},debug:function(a){b(4,a)},trace:function(a){b(5,a)}}}();$MA.log.debug("$MA Logging Enabled");$MA.assert=function(a,b){a||(window.console&&console.assert?console.assert(a,b):$MA.log.debug("[Assertions] "+b))};
$MA.LONG_MONTH_NAMES=["January","February","March","April","May","June","July","Augest","September","October","November","December"];$MA.SHORT_MONTH_NAMES=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];$MA.LONG_WEEKDAY_NAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];$MA.SHORT_WEEKDAY_NAMES=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];$MA.COLORS=void 0;$MA.parseFloat=function(a){a=parseFloat(a);return isNaN(a)?void 0:a};
$MA.parseBool=function(a){if(a!=void 0&&(a.toLowerCase()=="true"||a=="1"))return!0;return!1};$MA.parseExpr=function(a,b,c){if(a!=void 0){var d;c&&(d=a);c=a.indexOf("~t");c>=0&&(d=a.substring(c+2,a.length));if(d)return $MA.Expression.parse(d,b);return a}};$MA.parseDate=function(a){if(a!=void 0)return a=a.match(RegExp(/(\d{4})-(\d{2})-(\d{2})/)),new Date(a[1],a[2]-1,a[3])};
$MA.parseTime=function(a){if(a!=void 0){var a=a.match(RegExp(/(\d{2}):(\d{2}):(\d{2})/)),b=new Date;a[1]&&b.setHours(a[1]);a[2]&&b.setMinutes(a[2]);a[3]&&b.setSeconds(a[3]);return b}};$MA.parseDateTime=function(a){if(a!=void 0){if(a.indexOf(" ")==-1)return $MA.parseDate(a);var a=a.match(RegExp(/(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})/)),b=new Date(a[1],a[2]-1,a[3]);a[4]&&b.setHours(a[4]);a[5]&&b.setMinutes(a[5]);a[6]&&b.setSeconds(a[6]);return b}};$MA.yTicLabels={allInteger:!0,decimalSymbol:""};
$MA.labelNumberString=function(a){var b=!1,c=a;a<0&&(b=!0,c=-a);c>999999999999?(c/=1E12,a="T"):c>999999999?(c/=1E9,a="B"):c>999999?(c/=1E6,a="M"):c>999?(c/=1E3,a="K"):a="";if(c>1&&c%1!=0)c=Math.floor(c*10),c/=10,$MA.yTicLabels.allInteger=!1,$MA.yTicLabels.decimalSymbol=a;else if(a)$MA.yTicLabels.decimalSymbol=a;c+=a;return b?"-"+c:c};
$MA.format=function(a,b,c){if(a==void 0)return"";var d;if(window.jQuery&&($=jQuery.noConflict(),$.globalization)){if(typeof a==="string")return $MA.formatString(a,b);if(c==void 0)c=$MA.locale;if(a instanceof Date)b==void 0?b="d":(b=b.toLowerCase(),b=="month"?b="MMMM":b=="shortmonth"?b="MMM":b=="weekday"?b="dddd":b=="shortweekday"?b="ddd":b=="shortdate"?b="d":b=="longdate"&&(b="D")),d=$.format(a,b,c,$MA.defaultCurrencySymbol);else if(typeof a==="number")if(b){b=b.toLowerCase();if(b=="number")b="N";
else if(b=="currency")b="C";else if(b=="percent")b="P";else if(b.indexOf("rounded")==0)d=b.length,d>7&&(b="n"+b.substring(7,d));d=$.format(a,b,c,$MA.defaultCurrencySymbol)}else d=a.toString();else d=a.toString();return d}typeof a=="number"?d=$MA.formatNumber(a,b):typeof a=="string"?d=$MA.formatString(a,b):a instanceof Date&&(d=$MA.formatDateTime(a,b));return d};$MA.formatString=function(a){return a.toString()};
$MA.formatMoney=function(a,b,c,d){var e=isNaN(b=Math.abs(b))?2:b,b=c==void 0?",":c,d=d==void 0?".":d,c=a<0?"-":"",f=parseInt(a=Math.abs(+a||0).toFixed(e),10).toString(),g=f.length,g=g>3?g%3:0;return c+(g?f.substr(0,g)+d:"")+f.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+d)+(e?b+Math.abs(a-f).toFixed(e).slice(2):"")};
$MA.formatNumber=function(a,b){if(b){var c=b.toLowerCase(),d;if(c=="currency")c=$MA.defaultCurrencySymbol==""?"$":$MA.defaultCurrencySymbol,d=a<0?"-"+c+$MA.formatMoney(Number(-a),2,".",","):c+$MA.formatMoney(Number(a),2,".",",");else if(c=="percent")d=a.toFixed(2)+"%";else if(c.indexOf("rounded")==0){var e=c.length;e>7&&(c=c.substring(7,e),d=a<0?"-"+$MA.formatMoney(Number(-a),c,".",","):$MA.formatMoney(Number(a),c,".",","))}return d}return a.toString()};
$MA.formatDateTime=function(a,b){if(b){var c=b.toLowerCase(),d;c=="month"?d=$MA.LONG_MONTH_NAMES[a.getMonth()]:c=="shortmonth"?d=$MA.SHORT_MONTH_NAMES[a.getMonth()]:c=="weekday"?d=$MA.LONG_WEEKDAY_NAMES[a.getDay()]:c=="shortweekday"?d=$MA.SHORT_WEEKDAY_NAMES[a.getDay()]:c=="longdate"&&(d=a.toLocaleDateString());if(d)return d}var e=a.getFullYear(),c=a.getMonth()+1;d=a.getDate();e+="-";c<10&&(e+="0");e+=c;e+="-";d<10&&(e+="0");e+=d;return e};
$MA.convertor={processFormat:function(a){var b="number",c=",",d="",e="",f="##",g=".",h=[];a&&(h=/(#+|\d+)\S+(#+|\d+)/,h=a.replace(h,"#"),h==="#"?b="number":h.indexOf("%")>0?(b="percent",e="%",a=a.replace("%","")):(b="currency",h=h.split("#"),d=h[0],e=h[1],a=a.replace(d,""),a=a.replace(e,"")),h=/(#+|\d+)/g,h=a.replace(h,""),h=h.replace(/([\x00-\x7f])(?=.*?\1)/gi,""),h.length===1?(c=h[0],f=g=""):h.length===2?(c=h[0],g=h[1]):$MA.log.error("format string is not correct!"),g!==""&&(f=a.substr(a.indexOf(g)+
1)));return{datatype:b,thousandSep:c,decimalSep:g,decimalStr:f,prefix:d,suffix:e}},format:function(a,b){return b?b.datatype==="number"?this.formatNumber(a,b):b.datatype==="percent"?this.formatPercent(a,b):this.formatCurrency(a,b):a},formatNumber:function(a,b){var c;if(isNaN(a))$MA.log.error("Invalid number for formatting!");else{var d=[],e,f,g;c=b.decimalStr;d=b.decimalStr.length;e=b.thousandSep;f=b.decimalSep;g=/\B(?=(?:\d{3})+(?!\d))/g;d>0?(/\d+/.test(c)||(a=Math.round(a*Math.pow(10,d))/Math.pow(10,
d)),d=a.toString().split(f),/\d+/.test(c)&&(d[1]=c),d[0]+0>3&&(d[0]=d[0].replace(g,e)),c=d.join(f)):(d=Math.round(a).toString(),c=d.replace(g,e))}return c},formatPercent:function(a,b){var c;c=this.formatNumber(a,b);c+=b.suffix;return c},formatCurrency:function(a,b){var c;c=this.formatNumber(a,b);return c=b.prefix+c+b.suffix}};
$MA.createXHR=function(){var a;try{a=new XMLHttpRequest}catch(b){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){$MA.log.error($MA.getLocalisation(null,"Error_NoAJAX","Your browser does not support AJAX!"));return}}return a};$MA.isCSSFileLoaded=function(a){var b=!1;if(document.styleSheets){var c;for(c=0;c<document.styleSheets.length;c++){var d=document.styleSheets[c];d.href&&d.href.indexOf(a)>=0&&(b=!0)}}return b};
$MA.getCSSRule=function(a){a=a.toLowerCase();if(document.styleSheets){var b,c;for(b=0;b<document.styleSheets.length;b++){var d=document.styleSheets[b];if(d.cssRules)for(var e=0,f=d.cssRules.length,g=!1;e<f;){g=d.cssRules[e];if(g.type=="3"&&g.styleSheet.cssRules)for(var h=0,j=g.styleSheet.cssRules.length,l;h<j;)l=g.styleSheet.cssRules[h],l.selectorText.toLowerCase()==a&&(c=l),h++;else g.type=="1"&&g.selectorText.toLowerCase()==a&&(c=g);e++}}if(c)return c}};
$MA.getAbsolutePosition=function(a){if(document.documentElement.hasOwnProperty("getBoundingClientRect"))try{var b=a.getBoundingClientRect();return{x:b.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft)-(document.documentElement.clientLeft||document.body.clientLeft||0),y:b.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)-(document.documentElement.clientTop||document.body.clientTop||0)}}catch(c){}for(var d=b=0,e=null,e=a.offsetParent,
f=a,g=a;g.parentNode!=null;){g=g.parentNode;if(g.offsetParent!=null){var h=!0;if(window.opera&&(g==f.parentNode||g.nodeName=="TR"))h=!1;h&&(g.scrollTop&&g.scrollTop>0&&(d-=g.scrollTop),g.scrollLeft&&g.scrollLeft>0&&(b-=g.scrollLeft))}if(g==e)b+=a.offsetLeft,g.clientLeft&&g.nodeName!="TABLE"&&(b+=g.clientLeft),d+=a.offsetTop,g.clientTop&&g.nodeName!="TABLE"&&(d+=g.clientTop),a=g,a.offsetParent==null&&(a.offsetLeft&&(b+=a.offsetLeft),a.offsetTop&&(d+=a.offsetTop)),e=a.offsetParent}return{x:b,y:d}};
$MA.getRelativePosition=function(a,b){var c,d,a=a||window.event,e=a.target||a.srcElement,f;if(!window.opera&&a.offsetX){f={x:a.offsetX,y:a.offsetY};for(var g=e;g;)g.mouseX=f.x,g.mouseY=f.y,f.x+=g.offsetLeft,f.y+=g.offsetTop,g=g.offsetParent;f={x:0,y:0};for(g=b;g;){if(g.mouseX){c=g.mouseX-f.x;d=g.mouseY-f.y;break}f.x+=g.offsetLeft;f.y+=g.offsetTop;g=g.offsetParent}for(g=e;g;)g.mouseX=void 0,g.mouseY=void 0,g=g.offsetParent}else f=$MA.getAbsolutePosition(b),c=a.pageX-f.x,d=a.pageY-f.y;return{x:c,y:d}};
$MA.getMouseXY=function(a,b){b=b==void 0?document.all&&event?event.srcElement:a.target:b;return $MA.getRelativePosition(a,b)};$MA.getDouble=function(a){if(!a)return 0;var b=0;typeof a=="number"?b=a:typeof a=="string"&&(b=parseFloat(a));return b};
$MA.Browser={dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.userAgent,subString:"Andriod 4.0.",identity:"AndriodICSNative",versionSearch:"Version"},{string:navigator.userAgent,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,
subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"WebKit",identity:"WebKit",versionSearch:"Version"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},
{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],searchString:function(a){var b;
for(b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;if(c){if(c.indexOf(a[b].subString)!=-1)return a[b].identity}else if(d)return a[b].identity}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(b!=-1)return parseFloat(a.substring(b+this.versionSearchString.length+1))},init:function(){var a=navigator.userAgent;this.isJBStockBrowser=(a.indexOf("Android 4.1")>0||a.indexOf("Android 4.2")>0)&&a.indexOf("Chrome")<0;this.isJB42StockBrowser=
a.indexOf("Android 4.2")>0&&a.indexOf("Chrome")<0;this.isICSStockBrowser=a.indexOf("Android 4.0")>0&&a.indexOf("Chrome")<0;this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(a)||this.searchVersion(navigator.appVersion)||"An unknown version";this.os=this.searchString(this.dataOS)||"An unknown OS"}};$MA.Browser.init();
$MA.isBrowserCompatible=function(){var a=[{browser:"Chrome",versions:[{os:"Windows",version:15}]},{browser:"Safari",versions:[{os:"Mac",version:5},{os:"iPad",version:5}]},{browser:"WebKit",versions:[{os:"Android",version:4}]}],b,c;for(b=0;b<a.length;b++)if($MA.Browser.browser==a[b].browser){for(c=0;c<a[b].versions.length;c++)if($MA.Browser.version>=a[b].versions[c].version&&(a[b].versions[c].os==null||a[b].versions[c].os==$MA.Browser.os))return!0;break}return!1};
$MA.isTouchEventSupported=function(){var a=!1;if(typeof window.ontouchstart!=="undefined"||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0)a=!0;return a}();$MA.defaultLocale=window.navigator.userLanguage||window.navigator.language;$MA.locale=$MA.defaultLocale;$MA.setLocale=function(a){$MA.locale=a};$MA.defaultCurrencySymbol="";$MA.setCurrencySymbol=function(a){$MA.defaultCurrencySymbol=a};
$MA.getLocalisation=function(a,b,c){var d=$MA.GlobalizedResource,e;if(d==void 0)return c;if(a==""||a==null)a=$MA.locale;d[a]?e=d[a][b]:d[a.substring(0,2)]&&(e=d[a.substring(0,2)][b]);if(e==void 0)return c;return e};$MA.getMetadataUrl=function(a){var b;if($MA.locale==$MA.defaultLocale)b=a;else{var c=a.lastIndexOf("/");c>0?(b=a.substring(0,c),a=a.substring(c+1,a.length),b=b+"/"+$MA.locale+"/"+a):b=$MA.locale+"/"+a}return b};$MA.imagesFolder="./images/";
$MA.setImagesFolder=function(a){$MA.imagesFolder=a};$MA.disableiScrollEventHandlers=function(a){var b=$MA.isTouchEventSupported,c=b?"touchmove":"mousemove",d=b?"touchend":"mouseup";a.element.removeEventListener(b?"touchstart":"mousedown",a,!1);a.element.removeEventListener(c,a,!1);a.element.removeEventListener(d,a,!1)};
$MA.enableiScrollEventHandlers=function(a){var b=$MA.isTouchEventSupported,c=b?"touchmove":"mousemove",d=b?"touchend":"mouseup";a.element.addEventListener(b?"touchstart":"mousedown",a,!1);a.element.addEventListener(c,a,!1);a.element.addEventListener(d,a,!1)};$MA.getScreenSize=function(){return $MA.device.tablet||$MA.device.desktop?"normal":"small"};$MA.triggerJQueryEvent=function(a,b){window.jQuery&&($=jQuery.noConflict(),$(a).trigger(b))};
$MA.getColors=function(){if(!$MA.COLORS)$MA.COLORS={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",
darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",
gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",
lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",
oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",
skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return $MA.COLORS};$MA.colorToHex=function(a){var b=$MA.getColors();if(b[a])return b[a];return"#000000"};
$MA.convertRgbToHex=function(a){var b=/^rgb\(\s*?(\d+?)\s*?,\s*?(\d+?)\s*?,\s*?(\d+?)\s*?\)$/i.exec(a);if(b.length==4)var c=parseInt(b[1],10),a=parseInt(b[2],10),b=parseInt(b[3],10),c=c.toString(16),c=c.length==1?"0"+c:c,a=a.toString(16),a=a.length==1?"0"+a:a,b=b.toString(16),b=b.length==1?"0"+b:b,a="#"+c+a+b;return a};
$MA.getColorInt=function(a){if(isNaN(a)){if(a.indexOf("rgba(")==0)return a;if(a.indexOf("transparent")==0)return a;a.indexOf("rgb(")==0?a=$MA.convertRgbToHex(a):a.indexOf("#")!=0&&(a=$MA.colorToHex(a));a=parseInt(a.substr(1),16)}return Number(a)};$MA.rgb2hsv=function(a,b,c){var d=0,d=d=0;a/=255;b/=255;c/=255;var d=Math.min(a,Math.min(b,c)),e=Math.max(a,Math.max(b,c));if(d==e)return[0,0,d];return[((a==d?3:c==d?1:5)-(a==d?b-c:c==d?a-b:c-a)/(e-d))/6,(e-d)/e,e]};
$MA.hsv2rgb=function(a,b,c){var d=[];if(b==0)d[0]=d[1]=d[2]=Math.round(c*255);else{var e=a*6;e==6&&(e=0);var f=Math.floor(e),a=c*(1-b),g=c*(1-b*(e-f)),b=c*(1-b*(1-(e-f)));f==0?(f=c,e=b,c=a):f==1?(f=g,e=c,c=a):f==2?(f=a,e=c,c=b):f==3?(f=a,e=g):f==4?(f=b,e=a):(f=c,e=a,c=g);d[0]=Math.round(f*255);d[1]=Math.round(e*255);d[2]=Math.round(c*255)}return d};$MA.screenSize=$MA.getScreenSize();
$MA.Hash=function(){this.length=0;this.items=[];var a;for(a=0;a<arguments.length;a+=2)arguments[a+1]!=void 0&&(this.items[arguments[a]]=arguments[a+1],this.length++)};$MA.Hash.prototype.remove=function(a){var b;this.items[a]!=void 0&&(this.length--,b=this.items[a],delete this.items[a]);return b};$MA.Hash.prototype.get=function(a){return this.items[a]};$MA.Hash.prototype.set=function(a,b){var c;b!=void 0&&(this.items[a]==void 0?this.length++:c=this.items[a],this.items[a]=b);return c};
$MA.Hash.prototype.containsKey=function(a){return this.items[a]!=void 0};$MA.Hash.prototype.clear=function(){for(var a in this.items)delete this.items[a];this.length=0};$MA.TableColumnType={DOUBLE:0,STRING:1,DATETIME:2};$MA.DataStore=function(){this.dvObj=this.dataParser=void 0};
$MA.DataStore.prototype.load=function(a){var b=$MA.createXHR();b!=void 0&&(b.open("GET",$MA.getMetadataUrl(a),!1),b.send(null),b.status==200||b.status==304||b.status==0?this.create(b.responseText):$MA.log.error($MA.getLocalisation(null,"Error_Load","Failed to load ")+a))};$MA.DataStore.prototype.create=function(a){var b=new $MA.DataView.DataViewObject;(new $MA.DataView.XmlMetaDataReader).parse(b,a);this.initialize(b)};
$MA.DataStore.prototype.bind=function(a,b,c){if(this.events==void 0)this.events=new $MA.Hash;this.events.set(a,{func:b,context:c})};$MA.DataStore.prototype.unbind=function(a){this.events&&this.events.remove(a)};$MA.DataStore.prototype.trigger=function(a,b){if(this.events){var c=this.events.get(a);c&&typeof c.func==="function"&&c.func.call(c.context,b)}};
$MA.DataStore.prototype.initialize=function(a){this.dvObj=a;var b=a.getTable();this.createDataParser(b);if(this.dataParser)this.dataParser.headerRow=b.headerRow;this.createRenderer&&this.createRenderer(a);b.dataSource?b.dataSource.toLowerCase()=="file"?this.loadFileData(b.url):this.updateData(null):this.updateData(null)};
$MA.DataStore.prototype.createDataParser=function(a){if(!(a==void 0||a.fileType==void 0))a.fileType.toLowerCase()=="json"?this.dataParser=new $MA.DataView.Data.JsonParser(a):a.fileType.toLowerCase()=="csv"?this.dataParser=new $MA.DataView.Data.CsvParser(a):a.fileType.toLowerCase()=="xml"?this.dataParser=new $MA.DataView.Data.XmlParser(a):$MA.log.error($MA.getLocalisation(null,"Error_NoFileType","Unsupported File Type"))};$MA.DataStore.prototype.filter=function(a){this.dvObj.filter(a)};
$MA.DataStore.prototype.sort=function(a){this.dvObj.sort(a)};$MA.DataStore.prototype.groupCalc=function(){this.dvObj.groupCalc()};$MA.DataStore.prototype.find=function(a,b){return this.dvObj.find(a,b)};$MA.DataStore.prototype.appendRow=function(){return this.dvObj.appendRow()};$MA.DataStore.prototype.insertRow=function(a){return this.dvObj.insertRow(a)};$MA.DataStore.prototype.deleteRow=function(a){this.dvObj.deleteRow(a)};$MA.DataStore.prototype.setItem=function(a,b,c){this.dvObj.setItem(a,b,c)};
$MA.DataStore.prototype.loadFileData=function(a){var b=$MA.createXHR(),c=this;b.onreadystatechange=function(){b.readyState==4&&(b.status==200||b.status==304||b.status==0?(c.updateData(b.responseText),c=null):$MA.log.error($MA.getLocalisation(null,"Error_Load","Failed to load ")+a))};b.open("GET",a,!0);b.send(null)};
$MA.DataStore.prototype.updateData=function(a){if(a){var b;try{b=this.dataParser.parse(a)}catch(c){$MA.log.error($MA.getLocalisation(null,"Error_DataParsing","Data Parsing Error"));return}this.dvObj.setTableBuffer("display",b)}else this.dvObj.getTable().displayBuffer==void 0&&this.dvObj.setTableBuffer("display",[]);a&&this.refresh&&this.refresh();this.trigger("initialized",this.id)};
$MA.DataView=function(a){$MA.DataStore.call(this);this.id=a;this.renderer=void 0;if(a=document.getElementById(a)){if(a.hasChildNodes())for(;a.childNodes.length>=1;)a.removeChild(a.firstChild);a.macontrol=this}};$MA.DataView.prototype=new $MA.DataStore;
$MA.DataView.prototype.createRenderer=function(a){if(a!=void 0){switch(a.style){case "graph":this.renderer=new $MA.DataView.GraphRenderer(this,a);break;case "canvas":this.renderer=new $MA.DataView.CanvasRenderer(this,a);break;default:$MA.log.error($MA.getLocalisation(null,"Error_NoDataViewStyle","Unsupported DataView Style"));return}this.renderer.create()}};$MA.DataView.prototype.getElement=function(a){return document.getElementById(this.id+"_"+a)};
$MA.DataView.prototype.refresh=function(){this.dvObj.getTable().displayBuffer==void 0||this.renderer==void 0||(this.renderer.refreshData(),this.trigger("draw",document.getElementById(this.id)))};$MA.DataView.prototype.refreshData=function(){this.dvObj.getTable().displayBuffer==void 0||this.renderer==void 0||this.renderer.refreshData(!0)};$MA.DataView.prototype.setRedraw=function(a){this.dvObj.noRedraw=!a};
$MA.DataView.prototype.getGraphElem=function(){var a=document.getElementById(this.id);return a.children[a.children.length-1].children[0]};$MA.DataView.prototype.copyGraphTo=function(a){var b=this.getGraphElem();a.width=b.width;a.height=b.height;a.getContext("2d").drawImage(b,0,0)};$MA.DataView.ROWINFO_COLUMN=-1;$MA.DataView.DataRowFormat=function(){this.groupTrailer=this.groupHeader=void 0};
$MA.DataView.DataRowFormat.prototype.isGroupHeader=function(a){var b=!1;a==void 0?b=this.groupHeader!=void 0:this.groupHeader&&(b=this.groupHeader._parent.level<=a);return b};$MA.DataView.DataRowFormat.prototype.isGroupTrailer=function(a){var b=!1;a==void 0?b=this.groupTrailer!=void 0:this.groupTrailer&&(b=this.groupTrailer._parent.level<=a);return b};$MA.DataView.Object=function(a){this._parent=a};
$MA.DataView.Object.prototype.getOwner=function(){for(var a=this;a!=null&&!(a instanceof $MA.DataView.DataViewObject);)a=a._parent;return a};$MA.DataView.GraphicObject=function(a){$MA.DataView.Object.call(this,a);this.band=void 0;this.height=0;this.name=void 0;this.y=this.x=this.width=0};$MA.DataView.GraphicObject.BAND=0;$MA.DataView.GraphicObject.HEIGHT=1;$MA.DataView.GraphicObject.NAME=2;$MA.DataView.GraphicObject.WIDTH=3;$MA.DataView.GraphicObject.X=4;$MA.DataView.GraphicObject.Y=5;
$MA.DataView.GraphicObject.propertyIds=new $MA.Hash("band",$MA.DataView.GraphicObject.BAND,"height",$MA.DataView.GraphicObject.HEIGHT,"name",$MA.DataView.GraphicObject.NAME,"width",$MA.DataView.GraphicObject.WIDTH,"x",$MA.DataView.GraphicObject.X,"y",$MA.DataView.GraphicObject.Y);$MA.DataView.GraphicObject.prototype=new $MA.DataView.Object;
$MA.DataView.GraphicObject.prototype.setGobProperty=function(a,b){var c=$MA.DataView.GraphicObject.propertyIds.get(a.toLowerCase());if(c==void 0)return!1;switch(c){case $MA.DataView.GraphicObject.BAND:c=this.getOwner();this.band=c.getObject(b);if(this.band==null){var d=b.lastIndexOf(".");if(d>0){var e=b.substring(0,d),d=b.substring(d+1,b.length),d=parseInt(d,10)-1;if(e.toLowerCase()=="header")this.band=c.groups[d].header;else if(e.toLowerCase()=="trailer")this.band=c.groups[d].trailer;c.addGraphicObject(this.band,
this)}else $MA.log.error($MA.getLocalisation(null,"Error_NoBandType","Unsupported Band Type"))}else c.addGraphicObject(this.band,this);break;case $MA.DataView.GraphicObject.HEIGHT:this.height=parseInt(b,10);break;case $MA.DataView.GraphicObject.NAME:this.name=b;break;case $MA.DataView.GraphicObject.WIDTH:this.width=parseInt(b,10);break;case $MA.DataView.GraphicObject.X:this.x=parseInt(b,10);break;case $MA.DataView.GraphicObject.Y:this.y=parseInt(b,10)}return!0};
$MA.DataView.GraphicObject.prototype.getGobProperty=function(a){a=$MA.DataView.GraphicObject.propertyIds.get(a.toLowerCase());if(a!=void 0)switch(a){case $MA.DataView.GraphicObject.NAME:return this.name}};$MA.DataView.Band=function(a,b){$MA.DataView.Object.call(this,a);this.background=void 0;this.graphicObjects=[];this.height=0;this.name=b;this.isContent=b=="detail"||b=="groupheader"||b=="grouptrailer"?!0:!1};$MA.DataView.Band.BACKGROUND=0;$MA.DataView.Band.HEIGHT=1;
$MA.DataView.Band.propertyIds=new $MA.Hash("background",$MA.DataView.Band.BACKGROUND,"height",$MA.DataView.Band.HEIGHT);$MA.DataView.Band.prototype=new $MA.DataView.Object;$MA.DataView.Band.prototype.createObject=function(a){a=$MA.DataView.Band.propertyIds.get(a.toLowerCase());if(a==void 0)return null;var b=null;switch(a){case $MA.DataView.Band.BACKGROUND:b=this.background=new $MA.DataView.Background(this)}return b};
$MA.DataView.Band.prototype.setProperty=function(a,b){var c=$MA.DataView.Band.propertyIds.get(a.toLowerCase());if(c==void 0)return!1;switch(c){case $MA.DataView.Band.HEIGHT:this.height=parseInt(b,10)}return!0};$MA.DataView.Band.prototype.getGraphicObjects=function(){return this.graphicObjects};$MA.DataView.Canvas=function(a){$MA.DataView.GraphicObject.call(this,a)};$MA.DataView.Canvas.SIZETODISPLAY=0;$MA.DataView.Canvas.propertyIds=new $MA.Hash("sizetodisplay",$MA.DataView.Canvas.SIZETODISPLAY);
$MA.DataView.Canvas.prototype=new $MA.DataView.GraphicObject;$MA.DataView.Canvas.prototype.setProperty=function(a,b){var c=$MA.DataView.Canvas.propertyIds.get(a.toLowerCase());if(c==void 0)return this.setGobProperty(a,b);switch(c){case $MA.DataView.Canvas.SIZETODISPLAY:this.sizeToDisplay=$MA.parseBool(b)}return!0};
$MA.DataView.DataViewObject=function(a){$MA.DataView.Object.call(this,a);this.graphGob=this.table=this.groups=this.summary=this.header=this.footer=this.detail=void 0;this.style="tabular";this.exprRow=this.currentRow=0;this.noRedraw=!1;this.gobHash=new $MA.Hash};$MA.DataView.DataViewObject.BACKGROUND=0;$MA.DataView.DataViewObject.CANVAS=1;$MA.DataView.DataViewObject.DETAIL=2;$MA.DataView.DataViewObject.FOOTER=3;$MA.DataView.DataViewObject.FOREGROUND=4;$MA.DataView.DataViewObject.GRAPH=5;
$MA.DataView.DataViewObject.GROUP=6;$MA.DataView.DataViewObject.HEADER=7;$MA.DataView.DataViewObject.STYLE=8;$MA.DataView.DataViewObject.SUMMARY=9;$MA.DataView.DataViewObject.TABLE=10;
$MA.DataView.DataViewObject.propertyIds=new $MA.Hash("background",$MA.DataView.DataViewObject.BACKGROUND,"canvas",$MA.DataView.DataViewObject.CANVAS,"detail",$MA.DataView.DataViewObject.DETAIL,"footer",$MA.DataView.DataViewObject.FOOTER,"foreground",$MA.DataView.DataViewObject.FOREGROUND,"graph",$MA.DataView.DataViewObject.GRAPH,"group",$MA.DataView.DataViewObject.GROUP,"header",$MA.DataView.DataViewObject.HEADER,"style",$MA.DataView.DataViewObject.STYLE,"summary",$MA.DataView.DataViewObject.SUMMARY,
"table",$MA.DataView.DataViewObject.TABLE);$MA.DataView.DataViewObject.prototype=new $MA.DataView.Object;$MA.DataView.DataViewObject.prototype.cosntructor=$MA.DataView.DataViewObject;
$MA.DataView.DataViewObject.prototype.createObject=function(a){a=$MA.DataView.DataViewObject.propertyIds.get(a.toLowerCase());if(a==void 0)return null;var b=null;switch(a){case $MA.DataView.DataViewObject.BACKGROUND:b=this.background=new $MA.DataView.Band(this,"background");break;case $MA.DataView.DataViewObject.CANVAS:b=new $MA.DataView.Canvas(this);break;case $MA.DataView.DataViewObject.DETAIL:b=this.detail=new $MA.DataView.Band(this,"detail");break;case $MA.DataView.DataViewObject.FOOTER:b=this.footer=
new $MA.DataView.Band(this,"footer");break;case $MA.DataView.DataViewObject.FOREGROUND:b=this.foreground=new $MA.DataView.Band(this,"foreground");break;case $MA.DataView.DataViewObject.GRAPH:b=new $MA.DataView.Graph(this);if(this.style=="graph")this.graphGob=b;break;case $MA.DataView.DataViewObject.GROUP:if(this.groups==void 0)this.groups=[];a=new $MA.DataView.Group(this);a.level=this.groups.length;this.groups.push(a);b=a;break;case $MA.DataView.DataViewObject.HEADER:b=this.header=new $MA.DataView.Band(this,
"header");break;case $MA.DataView.DataViewObject.SUMMARY:b=this.summary=new $MA.DataView.Band(this,"summary");break;case $MA.DataView.DataViewObject.TABLE:b=this.table=new $MA.DataView.Table(this)}return b};
$MA.DataView.DataViewObject.prototype.getObject=function(a){var b=$MA.DataView.DataViewObject.propertyIds.get(a.toLowerCase());if(b==void 0)return null;var c=null;switch(b){case $MA.DataView.DataViewObject.BACKGROUND:c=this.background==null?this.createObject(a):this.background;break;case $MA.DataView.DataViewObject.DETAIL:c=this.detail==null?this.createObject(a):this.detail;break;case $MA.DataView.DataViewObject.FOOTER:c=this.footer==null?this.createObject(a):this.footer;break;case $MA.DataView.DataViewObject.FOREGROUND:c=
this.foreground==null?this.createObject(a):this.foreground;break;case $MA.DataView.DataViewObject.HEADER:c=this.header==null?this.createObject(a):this.header;break;case $MA.DataView.DataViewObject.SUMMARY:c=this.summary==null?this.createObject(a):this.summary;break;case $MA.DataView.DataViewObject.TABLE:c=this.table==null?this.createObject(a):this.table}return c};
$MA.DataView.DataViewObject.prototype.setProperty=function(a,b){var c=$MA.DataView.DataViewObject.propertyIds.get(a.toLowerCase());if(c==void 0)return!1;switch(c){case $MA.DataView.DataViewObject.STYLE:this.style=b}return!0};
$MA.DataView.DataViewObject.prototype.initialize=function(){this.style=="graph"||this.style=="canvas"?this.graphGob&&(this.graphGob.initialize(),this.background==void 0&&(this.createObject("background"),this.addGraphicObject(this.background,this.graphGob))):(this.header==void 0&&this.createObject("Header"),this.detail==void 0&&this.createObject("Detail"),this.summary==void 0&&this.createObject("Summary"),this.footer==void 0&&this.createObject("Footer"))};
$MA.DataView.DataViewObject.prototype.addGraphicObject=function(a,b){a!=null&&a.graphicObjects.push(b);this.gobHash.set(b.name,b)};$MA.DataView.DataViewObject.prototype.getColumnGob=function(a){var b=this.detail.graphicObjects,c,d;for(d in b)if(c=b[d],c instanceof $MA.DataView.Column&&c.id==a)return c;return null};$MA.DataView.DataViewObject.prototype.getGob=function(a){if(a==null)return null;a=a.toLowerCase();if(this.gobHash.containsKey(a))return this.gobHash.get(a);return null};
$MA.DataView.DataViewObject.prototype.getTable=function(a){var b=this.getGraphGob();return b?b.getTable(a):this.table};$MA.DataView.DataViewObject.prototype.setTable=function(a,b){var c=this.getGraphGob();c?c.setTable(a,b):this.table=a};
$MA.DataView.DataViewObject.prototype.findGroupChange=function(a,b,c,d){var d=d||this.getTable(),e=d.getRowCount();if(a>=e)return-1;for(var f;a<e;){f=d.getRow(a);if(f=this.getRowInfo(f))if(c){if(f.groupHeader&&f.isGroupHeader(b))break}else if(f.groupTrailer&&f.isGroupTrailer(b))break;a++}b=-1;a<e&&(b=a);return b};
$MA.DataView.DataViewObject.prototype.findPriorGroupChange=function(a,b,c){var d=this.getTable(),e=d.getRowCount();if(a>=e)return-1;for(var f;a>=0;){f=d.getRow(a);if(f=this.getRowInfo(f))if(c){if(f.groupHeader&&f.isGroupHeader(b))break}else if(f.groupTrailer&&f.isGroupTrailer(b))break;a--}b=1;a<e&&(b=a);return b};$MA.DataView.DataViewObject.prototype.getGroupRow=function(a,b,c,d){for(var e=0,f=0,g;f<=a;)if(g=this.findGroupChange(e,b,c,d),g>=0)f++,e=g+1;else break;a=0;f>0&&(a=e-1);return a};
$MA.DataView.DataViewObject.prototype.getGroupCount=function(){for(var a=0,b=0,c=this.getTable().displayBuffer.length,d=this.groups?this.groups.length-1:0;b<c;)if(a=this.findGroupChange(a,d,!0),a>=0)b++,a++;else break;return b};$MA.DataView.DataViewObject.prototype.getRow=function(a,b){return this.getTable(b).getRow(a)};$MA.DataView.DataViewObject.prototype.getItem=function(a,b){return this.getTable(this.currentGraph).getRow(a)[b]};
$MA.DataView.DataViewObject.prototype.setItem=function(a,b,c){a=this.getTable().getRow(a);switch(this.getTable().columns[b].type){case $MA.TableColumnType.DOUBLE:typeof c=="number"?a[b]=c:typeof c=="string"&&(a[b]=$MA.parseFloat(c));break;case $MA.TableColumnType.STRING:typeof c=="string"&&(a[b]=c);break;case $MA.TableColumnType.DATETIME:c instanceof Date?a[b]=c:typeof c=="string"&&(a[b]=$MA.parseDateTime(c))}};
$MA.DataView.DataViewObject.prototype.filter=function(a){var b=this.getTable(),c=b.displayBuffer,d=b.filteredBuffer,e;if(this.getTable().filteredBuffer)for(e=0;e<d.length;e++)c.push(d[e]);b.filteredBuffer=[];d=b.filteredBuffer;if(a){var f=$MA.Expression.parse(a,this),a=[];for(e=0;e<c.length;e++)this.exprRow=e,f.booleanValue()?a.push(c[e]):d.push(c[e])}else a=c;b.displayBuffer=a};
$MA.DataView.DataViewObject.prototype.setTableSortOrder=function(a){var b=this.getGraphGob(),c=null,d=b.getCategoryCount(),e,a=this.getTable(a);if(d==1){if(c=b.getObject("Category"))if(e=c.getProperty("sortorder"),(c=c.getSortOrder(e))&&a.sortOrder!==c)a.sortOrder=c,a.setDataFlag("dataChanged",!0)}else if(d>1){var b=b.getObject("Categories"),f;if(b&&typeof a.sortOrder=="string"){for(f=0;f<d;f++)if(c=b.list[f],e=c.getProperty("sortorder"),(c=c.getSortOrder(e))&&c!="a"){if(typeof a.sortOrder=="string")a.sortOrder=
[],a.setDataFlag("dataChanged",!0);c=="p"&&($MA.log.warning("Partial order is not supported in an individual category of combination chart, reset it to default order: a"),c="a");a.sortOrder[f]=c}if(a.sortOrder instanceof Array){for(f=0;f<d;f++)a.sortOrder[f]==void 0&&(a.sortOrder[f]="a");for(f=0;f<d;f++)if(a.sortOrder[f]!="n")break;if(f==d)a.sortOrder="n"}}}};
$MA.DataView.DataViewObject.prototype.getSortInfo=function(a){a=a.split(" ");if(a.length!=0){var b,c,d,e=[];for(d=0;d+1<a.length;d+=2)if(b=a[d].trim(),c=this.getTable().getColumn(b),b=a[d+1].trim().toLowerCase(),c)e.push([c.id,b]);else break;return e}};
$MA.DataView.DataViewObject.prototype.sort=function(a,b){if(a!=void 0){var c=this.getSortInfo(a);c.length!=0&&b.displayBuffer.sort(function(a,b){var f,g,h,j=0,l=c.length;for(f=0;f<l;f++){g=c[f][0];h=c[f][1];if(h=="n")if(a[g]==b[g])continue;else{j=a[a.length-1]-b[b.length-1];break}a[g]!=b[g]&&(j=a[g]>b[g]?h=="a"?1:-1:h=="a"?-1:1,f=l)}return j})}};
$MA.DataView.DataViewObject.prototype.sortCategory=function(a,b,c){if(b!=void 0){var d=this.getSortInfo(b);d.length!=0&&c.displayBuffer.sort(function(b,c){var g,h,j,l,n=d.length;for(g=0;g<n;g++)if(h=d[g][0],j=d[0][1],g==0){var k=a[b[h]];h=a[c[h]];k!=h&&(l=k>h?j=="a"?1:-1:j=="a"?-1:1,g=n)}else b[h]!=c[h]&&(l=b[h]>c[h]?j=="a"?1:-1:j=="a"?-1:1,g=n);return l})}};
$MA.DataView.DataViewObject.prototype.groupCompare=function(a,b,c){this.exprRow=a;a=c.by.evaluate();this.exprRow=b;b=c.by.evaluate();return a instanceof Date&&b instanceof Date?a.getTime()==b.getTime()?0:a.getTime()>b.getTime()?1:-1:a==b?0:a>b?1:-1};$MA.DataView.DataViewObject.prototype.setGroupBreakStart=function(a,b){var c=new $MA.DataView.DataRowFormat;c.groupHeader=b.header;this.setRowInfo(a,c)};
$MA.DataView.DataViewObject.prototype.setGroupBreakEnd=function(a,b){var c=this.getRowInfo(a);c==void 0&&(c=new $MA.DataView.DataRowFormat);c.groupTrailer=b.trailer;this.setRowInfo(a,c)};$MA.DataView.DataViewObject.prototype.groupData=function(a,b){this.groups=[];var c=a.length,d,e,f;for(f=0;f<c;f++)e=a[f],d=this.createObject("Group"),d.createObject("Header"),d.createObject("Trailer"),e=new $MA.Expression.ColumnNode(b.getColumn(e).id,this,b),d.setProperty("By",e);b.groups=this.groups;this.groupCalc(b)};
$MA.DataView.DataViewObject.prototype.groupCalc=function(a){if(!(a.groups==void 0||a.groups.length==0)){var b=a.getRowCount(),c,d,e,f=a.groups.length;this.currentRow=0;if(b>0){for(d=0;d<b;d++)this.setRowInfo(a.getRow(d),void 0);this.setGroupBreakStart(a.getRow(0),a.groups[0]);for(d=0;d<b-1;d++)for(e=0;e<f;e++)c=a.groups[e],this.groupCompare(d,d+1,c)!=0&&(this.setGroupBreakEnd(a.getRow(d),c),this.setGroupBreakStart(a.getRow(d+1),c),e=f);this.setGroupBreakEnd(a.getRow(b-1),a.groups[0])}}};
$MA.DataView.DataViewObject.prototype.find=function(a){var b=-1;if(a){var a=$MA.Expression.parse(a,this),c;for(c=this.getTable().displayBuffer.length-1;c>=0;c--)if(this.exprRow=c,a.booleanValue()){b=c;break}}return b};$MA.DataView.DataViewObject.prototype.createRow=function(){var a=this.getTable(),b=[],c=a.columns,d,e,f=c.length;for(e=0;e<f;e++)d=c[e],b[e]=d.type==$MA.TableColumnType.DOUBLE?0:"";a.setDataFlag("dataChanged",!0);return b};
$MA.DataView.DataViewObject.prototype.appendRow=function(){var a=this.getTable(),b=this.createRow();a.displayBuffer.push(b);return this.currentRow=a.displayBuffer.length-1};$MA.DataView.DataViewObject.prototype.insertRow=function(a){this.currentRow=a;var b=this.createRow();this.getTable().displayBuffer.splice(a,0,b);return a};$MA.DataView.DataViewObject.prototype.deleteRow=function(a){var b=this.getTable();b.displayBuffer.splice(a,1);b.setDataFlag("dataChanged",!0)};
$MA.DataView.DataViewObject.prototype.getRowCount=function(){return this.getTable().displayBuffer?this.getTable().displayBuffer.length:0};$MA.DataView.DataViewObject.prototype.getGraphGob=function(){return this.graphGob};$MA.DataView.DataViewObject.prototype.getTableColumn=function(a){return this.getTable(this.currentGraph).getColumn(a)};$MA.DataView.DataViewObject.prototype.getTableColumns=function(){return this.getTable().columns};
$MA.DataView.DataViewObject.prototype.setTableColumns=function(a){this.getTable().columns=a};$MA.DataView.DataViewObject.prototype.getTableBuffer=function(a){var b=this.getTable(),c;if(a=="display")c=b.displayBuffer;else if(a=="filtered")c=b.filteredBuffer;return c};$MA.DataView.DataViewObject.prototype.setTableBuffer=function(a,b){this.getTable().setDataBuffer(a,b)};$MA.DataView.DataViewObject.prototype.setExprRow=function(a){this.exprRow=a};
$MA.DataView.DataViewObject.prototype.setGroupBy=function(a,b){if(this.groups!=void 0)if(a>=0&&a<this.groups.length)this.groups[a].setProperty("By",b);else return null};
$MA.DataView.DataViewObject.prototype.initializeGraphData=function(a,b){var c=this.getGraphGob(),d=c.getChildrenCount(),e;e=0<d?c.getGraph(0):c;var f=0,g,h;do{var j=e.getTable();(e.graphType=="pie"||e.graphType=="donut")&&this.setTableDataOrigIndex(j);b=e.getSeriesColumn();if(j.dataChangedFlag){if(j.sortOrder&&a){g=j.sortOrder instanceof Array;var l;if(!g)l=j.sortOrder;if(g||l=="a"||l=="d"){h="";for(g=0;g<a.length;g++)h+=a[g],h+=" ",j.sortOrder instanceof Array&&(l=j.sortOrder[g]),h+=l,h+=" ";b&&
(h+=b,h+=" a");var n=h.indexOf(" n ");if(n>0||e.graphType=="bubble")for(g=0;g<j.displayBuffer.length;g++)j.displayBuffer[g].push(g);this.sort(h,j);if(n>0&&e.graphType!="bubble")for(g=0;g<j.displayBuffer.length;g++)j.displayBuffer[g].pop()}else if(l=="p"){n=[];h=j.getRowCount();var k=j.displayBuffer;if(g=j.getColumn(e.category.column)){var m=g.id,o=0;for(g=0;g<h;g++)l=k[g][m],n[l]==void 0&&(n[l]=o++);l="a";h="";for(g=0;g<a.length;g++)h+=a[g],h+=" ",h+=l,h+=" ";this.sortCategory(n,h,j)}}}e.getSeriesExpr()&&
this.groupData(a,j);j.dataChangedFlag=!1}f++;f<d&&(e=c.getGraph(f))}while(f<d)};$MA.DataView.DataViewObject.prototype.getRowInfo=function(a){if(a)return a[$MA.DataView.ROWINFO_COLUMN]};$MA.DataView.DataViewObject.prototype.setRowInfo=function(a,b){a&&(a[$MA.DataView.ROWINFO_COLUMN]=b)};$MA.DataView.DataViewObject.prototype.isGroupHeader=function(a,b){if(a){var c=this.getRowInfo(a);if(c)return c.isGroupHeader(b)}return!1};
$MA.DataView.DataViewObject.prototype.isGroupTrailer=function(a,b){if(a){var c=this.getRowInfo(a);if(c)return c.isGroupTrailer(b)}return!1};$MA.DataView.DataViewObject.prototype.setTableDataOrigIndex=function(a){if(a.getColumns().length==a.displayBuffer[0].length){var b=[],c=a.displayBuffer.length,d,e,f;for(e=0;e<c;e++){d=a.displayBuffer[e].length;b[e]=[];for(f=0;f<d;f++)b[e].push(a.displayBuffer[e][f]);b[e].push(e)}a.displayBuffer=b}};
$MA.DataView.Graph=function(a){$MA.DataView.GraphicObject.call(this,a);this.legend=this.graphType=this.animation=void 0;this.sizeToDisplay=!0;this.offsetY=this.offsetX=this.spacing=0;this.title=void 0;this.suppliedTotals=this.parentAsTotal=this.showTotal=!1;this.values=this.series=this.category=void 0;this.firstItem=0;this.seriesExpr=this.categoryExpr=this.maxItems=void 0;this.valueExprs=[];this.groupExprs=[];this.table=this.query=void 0;this.children=[]};$MA.DataView.Graph.CATEGORY=0;
$MA.DataView.Graph.GRAPHTYPE=1;$MA.DataView.Graph.LEGEND=2;$MA.DataView.Graph.SIZETODISPLAY=3;$MA.DataView.Graph.SERIES=4;$MA.DataView.Graph.TITLE=5;$MA.DataView.Graph.VALUES=6;$MA.DataView.Graph.LEGENDOFFSETX=7;$MA.DataView.Graph.LEGENDOFFSETY=8;$MA.DataView.Graph.CATEGORIES=9;$MA.DataView.Graph.ANIMATION=10;$MA.DataView.Graph.QUERY=11;$MA.DataView.Graph.SUBGRAPH=12;$MA.DataView.Graph.PIESTYLE=13;$MA.DataView.Graph.SHOWTOTAL=14;$MA.DataView.Graph.PARENTASTOTAL=15;
$MA.DataView.Graph.SUPPLIEDTOTALS=16;
$MA.DataView.Graph.propertyIds=new $MA.Hash("category",$MA.DataView.Graph.CATEGORY,"charttype",$MA.DataView.Graph.GRAPHTYPE,"legend",$MA.DataView.Graph.LEGEND,"sizetodisplay",$MA.DataView.Graph.SIZETODISPLAY,"series",$MA.DataView.Graph.SERIES,"title",$MA.DataView.Graph.TITLE,"values",$MA.DataView.Graph.VALUES,"legendoffsetx",$MA.DataView.Graph.LEGENDOFFSETX,"legendoffsety",$MA.DataView.Graph.LEGENDOFFSETY,"categories",$MA.DataView.Graph.CATEGORIES,"animation",$MA.DataView.Graph.ANIMATION,"query",
$MA.DataView.Graph.QUERY,"chart",$MA.DataView.Graph.SUBGRAPH,"layer",$MA.DataView.Graph.SUBGRAPH,"piestyle",$MA.DataView.Graph.PIESTYLE,"showtotal",$MA.DataView.Graph.SHOWTOTAL,"parentastotal",$MA.DataView.Graph.PARENTASTOTAL,"suppliedtotals",$MA.DataView.Graph.SUPPLIEDTOTALS);$MA.DataView.Graph.prototype=new $MA.DataView.GraphicObject;
$MA.DataView.Graph.prototype.createObject=function(a){var b,a=$MA.DataView.Graph.propertyIds.get(a.toLowerCase());if(void 0!==a)switch(a){case $MA.DataView.Graph.CATEGORY:b=this.category=new $MA.DataView.GraphAxis(this);break;case $MA.DataView.Graph.CATEGORIES:b=this.categories=new $MA.DataView.GraphCategories(this);break;case $MA.DataView.Graph.SERIES:b=this.series=new $MA.DataView.GraphAxis(this);break;case $MA.DataView.Graph.VALUES:b=this.values=new $MA.DataView.GraphValues(this);break;case $MA.DataView.Graph.SUBGRAPH:b=
new $MA.DataView.Graph(this),this.addChild(b)}return b};$MA.DataView.Graph.prototype.getObject=function(a){var b,a=$MA.DataView.Graph.propertyIds.get(a.toLowerCase());if(void 0!==a)switch(a){case $MA.DataView.Graph.CATEGORIES:b=this.categories;break;case $MA.DataView.Graph.CATEGORY:b=this.category;break;case $MA.DataView.Graph.SERIES:b=this.series;break;case $MA.DataView.Graph.VALUES:b=this.values}return b};
$MA.DataView.Graph.prototype.setBooleanValue=function(a){var b=a.toLowerCase(),b=b=="true"?!0:b=="false"?!1:void 0;b==void 0&&$MA.log.error("ShowTotal value "+a+"is neither 'true' nor 'false'! ");return b};
$MA.DataView.Graph.prototype.setProperty=function(a,b){var c=$MA.DataView.Graph.propertyIds.get(a.toLowerCase());if(c==void 0)return this.setGobProperty(a,b);switch(c){case $MA.DataView.Graph.PIESTYLE:"pie"===b&&(b="realpie");this.setChartType(b);break;case $MA.DataView.Graph.GRAPHTYPE:this.setChartType(b);break;case $MA.DataView.Graph.SHOWTOTAL:c=this.setBooleanValue(b);if(c==void 0)return!1;this.showTotal=c;break;case $MA.DataView.Graph.PARENTASTOTAL:c=this.setBooleanValue(b);if(c==void 0)return!1;
this.parentAsTotal=c;break;case $MA.DataView.Graph.SUPPLIEDTOTALS:c=this.setBooleanValue(b);if(c==void 0)return!1;this.suppliedTotals=c;break;case $MA.DataView.Graph.SIZETODISPLAY:this.sizeToDisplay=$MA.parseBool(b);break;case $MA.DataView.Graph.TITLE:this.title=b;break;case $MA.DataView.Graph.LEGENDOFFSETX:this.legendOffsetX=b;break;case $MA.DataView.Graph.LEGENDOFFSETY:this.legendOffsetY=b;break;case $MA.DataView.Graph.LEGEND:this.legend=b;break;case $MA.DataView.Graph.ANIMATION:this.animation=
b;break;case $MA.DataView.Graph.QUERY:if(this.query=b)c=new $MA.DataView.Table(this),c.dataSource="query",this.table=c}return!0};
$MA.DataView.Graph.prototype.getProperty=function(a){var b,c=$MA.DataView.Graph.propertyIds.get(a.toLowerCase());if(c==void 0)b=this.getGobProperty(a);else switch(c){case $MA.DataView.Graph.ANIMATION:return this.animation;case $MA.DataView.Graph.GRAPHTYPE:b=this.getChartType();break;case $MA.DataView.Graph.SHOWTOTAL:b=this.showTotal;break;case $MA.DataView.Graph.PARENTASTOTAL:b=this.parentAsTotal;break;case $MA.DataView.Graph.SUPPLIEDTOTALS:b=this.suppliedTotals;break;case $MA.DataView.Graph.PIESTYLE:b=
this.graphType=="pie"?"pie":"donut";break;case $MA.DataView.Graph.TITLE:b=this.title;break;case $MA.DataView.Graph.LEGEND:b=this.legend;break;case $MA.DataView.Graph.QUERY:b=this.query}return b};$MA.DataView.Graph.prototype.getTable=function(a){var b;if(a=void 0!==a?this.getGraph(a):this)if(b=a.table,!b)if(a=this.getGraph(0))(b=a.table)||(b=new $MA.DataView.Table(a));else if(!this.query)this.table=b=new $MA.DataView.Table(this);return b};
$MA.DataView.Graph.prototype.setTable=function(a,b){var c=void 0!==b?this.getGraph(b):this;if(c)c.table=a};$MA.DataView.Graph.prototype.getFirstItem=function(){return this.firstItem};$MA.DataView.Graph.prototype.setFirstItem=function(a){if(a>=0){this.firstItem=a;var b=this.getChildrenCount(),c;for(c=0;c<b;c++)this.getGraph(c).firstItem=a}};
$MA.DataView.Graph.prototype.calcMaxItems=function(){var a=this.getOwner(),b=this.getTable().displayBuffer;if(b==void 0)return 0;var c;this.series?this.getCategoryCount()>1?c=b.length:a.groups&&(c=a.getGroupCount()):c=b.length;return c};$MA.DataView.Graph.prototype.getMaxItems=function(){if(this.getOwner().getRowCount()==0)return 0;if(this.maxItems==void 0)this.maxItems=this.calcMaxItems();return this.maxItems};
$MA.DataView.Graph.prototype.setMaxItems=function(a){this.maxItems=a;var b=this.getChildrenCount(),c;for(c=0;c<b;c++)this.getGraph(c).maxItems=a};$MA.DataView.Graph.prototype.getCategoryExpr=function(){if(this.categoryExpr)return this.categoryExpr;if(this.category)return this.categoryExpr=this.parseExpr(this.getOwner(),this.category.column)};$MA.DataView.Graph.prototype.setCategoryExpr=function(a){this.categoryExpr=a};
$MA.DataView.Graph.prototype.getValueExpr=function(a){if(this.valueExprs[a])return this.valueExprs[a];if(this.values&&this.values.list.length>a){var b=this.values.list[a];this.valueExprs[a]=this.parseExpr(this.getOwner(),b.expression);return this.valueExprs[a]}};$MA.DataView.Graph.prototype.setValueExpr=function(a,b){this.valueExprs[a]=b};$MA.DataView.Graph.prototype.getGroupExpr=function(a){if(this.groupExprs[a])return this.groupExprs[a]};$MA.DataView.Graph.prototype.addGroupExpr=function(a){this.groupExprs.push(a)};
$MA.DataView.Graph.prototype.removeGroupExpr=function(){this.groupExprs.pop()};$MA.DataView.Graph.prototype.getSeriesExpr=function(){if(this.seriesExpr)return this.seriesExpr;if(this.series)return this.seriesExpr=this.parseExpr(this.getOwner(),this.series.column)};$MA.DataView.Graph.prototype.setSeriesExpr=function(a){this.seriesExpr=a};$MA.DataView.Graph.prototype.getSeriesName=function(){var a=this.series;if(a){var b=a.displayName;if(b==void 0)b=a.column;return b}};
$MA.DataView.Graph.prototype.getSeriesColumn=function(){return this.series?this.series.column:null};$MA.DataView.Graph.prototype.getCategoryCount=function(){var a=0;this.categories&&this.categories.list?a=this.categories.list.length:this.category&&(a=1);return a};$MA.DataView.Graph.prototype.getCategoryObject=function(a){var b;if(this.categories&&this.categories.list.length>a)b=this.categories.list[a];else if(this.category&&a==0)b=this.category;return b};
$MA.DataView.Graph.prototype.getCategoryName=function(a){if(a=a==void 0?this.getCategoryObject(0):this.getCategoryObject(a)){var b=a.displayName;if(b==void 0)b=a.column;return b}};$MA.DataView.Graph.prototype.getCategoryColumn=function(a){return(a=a==void 0?this.getCategoryObject(0):this.getCategoryObject(a))?a.column:null};$MA.DataView.Graph.prototype.getCategoryFormat=function(a){if(a=a==void 0?this.getCategoryObject(0):this.getCategoryObject(a))return a.format};
$MA.DataView.Graph.prototype.getValueCount=function(){var a=0;if(this.values&&this.values.list)a=this.values.list.length;return a};$MA.DataView.Graph.prototype.getValueObject=function(a){if(this.values&&this.values.list.length>a)return this.values.list[a]};$MA.DataView.Graph.prototype.getValueName=function(a){var a=a==void 0?this.getValueObject(0):this.getValueObject(a),b=a.displayName;if(b==void 0)b=a.expression;return b};
$MA.DataView.Graph.prototype.getValueFormat=function(a){if(this.values&&this.values.list.length>a)return this.values.list[a].format};$MA.DataView.Graph.prototype.parseExpr=function(a,b){if(b!=void 0){var c=this.getTable(this.name),d=c.getColumn(b);d?c=new $MA.Expression.ColumnNode(d.id,a,c):(a.currentGraph=this.name,c=$MA.parseExpr(b,a,!0));return c}};$MA.DataView.Graph.prototype.resetExprs=function(){this.seriesExpr=this.categoryExpr=void 0;this.valueExprs=[];this.groupExprs=[]};
$MA.DataView.Graph.prototype.initialize=function(){if(this.categories&&this.categories.list.length>0)this.category=this.categories.list[0];var a=this.getChildrenCount();a>=3&&this.children.sort(function(a,b){var c=0;if((a.graphType=="line"||a.graphType=="verticalline")&&(b.graphType=="line"||b.graphType=="verticalline"))c=0;else if(a.graphType=="line"||a.graphType=="verticalline")c=1;else if(b.graphType=="line"||b.graphType=="verticalline")c=-1;return c});if(0<a){var b,c;for(b=0;b<a;b++)if(c=this.getGraph(b),
c.categories=this.categories,c.category=this.category,0===b)this.series=c.series,this.values=c.values,this.graphType=c.graphType}};$MA.DataView.Graph.prototype.getChartType=function(){var a=this.graphType;if(!a&&0<this.getChildrenCount())a=this.getGraph(0).graphType;"tablebar"===a?a="bar":"donut"===a&&(a="pie");return a};
$MA.DataView.Graph.prototype.setChartType=function(a){"string"===typeof a&&(a=a.toLowerCase(),"bar"===a?a="tablebar":"pie"===a?a="donut":"realpie"===a&&(a="pie"));this.graphType=a};$MA.DataView.Graph.prototype.getGraphTypes=function(){var a=[],b=this.getIterator(),c;do(c=b.next())&&c.graphType&&a.push({name:c.getName(),type:c.graphType});while(c);1<a.length&&a.shift();return a};$MA.DataView.Graph.prototype.getGraphType=function(){return this.graphType};$MA.DataView.Graph.prototype.getName=function(){return this.getProperty("name")};
$MA.DataView.Graph.prototype.getQuery=function(){return this.query};$MA.DataView.Graph.prototype.getQueries=function(){var a=[],b=this.getIterator(),c;do(c=b.next())&&c.query&&a.push({query:c.getQuery(),name:c.getName()});while(c);return a};$MA.DataView.Graph.prototype.getCategories=function(){return this.categories};$MA.DataView.Graph.prototype.setCategories=function(a){this.categories=a};$MA.DataView.Graph.prototype.getCategory=function(){return this.category};
$MA.DataView.Graph.prototype.setCategory=function(a){this.category=a};$MA.DataView.Graph.prototype.getSeries=function(){return this.series};$MA.DataView.Graph.prototype.setSeries=function(a){this.series=a};$MA.DataView.Graph.prototype.getValues=function(){return this.values};$MA.DataView.Graph.prototype.setValues=function(a){this.values=a};$MA.DataView.Graph.prototype.getChildrenCount=function(){return this.children.length};
$MA.DataView.Graph.prototype.getGraph=function(a){var b;if("number"===typeof a&&0<=a&&a<this.children.length)b=this.children[a];else if("string"===typeof a)if(this.getName()===a)b=this;else{var c=this.children.length,d,e;for(d=0;d<c;d++)if(e=this.children[d],e.getName()===a){b=e;break}}else void 0===a&&(b=this);return b};$MA.DataView.Graph.prototype.addChild=function(a){if(a instanceof $MA.DataView.Graph){var b=a.getName();if(void 0===b||!this.getGraph(b))a._parent=this,this.children.push(a)}};
$MA.DataView.Graph.prototype.isChild=function(){return this._parent instanceof $MA.DataView.Graph};$MA.DataView.Graph.prototype.getIterator=function(){var a=-1,b=this;return{next:function(){var c=0<=a?b.children[a]:b;a++;return c}}};$MA.DataView.Graph.prototype.getOrigIndex=function(a){if(a!=void 0){var b=this.getTable().displayBuffer;return b[a][b[a].length-1]}};$MA.DataView.GraphAxis=function(a){$MA.DataView.Object.call(this,a);this.displayName=this.format=this.expression=this.column=void 0};
$MA.DataView.GraphAxis.COLUMN=0;$MA.DataView.GraphAxis.DISPLAYNAME=1;$MA.DataView.GraphAxis.EXPRESSION=2;$MA.DataView.GraphAxis.FORMAT=3;$MA.DataView.GraphAxis.SHOWLABEL=4;$MA.DataView.GraphAxis.SHOWPRIMARYLINE=5;$MA.DataView.GraphAxis.SHOWGRID=6;$MA.DataView.GraphAxis.THICKNESS=7;$MA.DataView.GraphAxis.COLOR=8;$MA.DataView.GraphAxis.SORTORDER=9;$MA.DataView.GraphAxis.DISPLAY_LAST_CATEGORY=10;$MA.DataView.GraphAxis.VALUE_DISPLAY_TEXT=11;$MA.DataView.GraphAxis.VALUE=12;$MA.DataView.GraphAxis.MIN=13;
$MA.DataView.GraphAxis.MAX=14;$MA.DataView.GraphAxis.SHAPE=15;$MA.DataView.GraphAxis.SHAPE_VALUE=16;$MA.DataView.GraphAxis.PERCENTAGE=17;
$MA.DataView.GraphAxis.propertyIds=new $MA.Hash("column",$MA.DataView.GraphAxis.COLUMN,"displayname",$MA.DataView.GraphAxis.DISPLAYNAME,"expression",$MA.DataView.GraphAxis.EXPRESSION,"format",$MA.DataView.GraphAxis.FORMAT,"showlabel",$MA.DataView.GraphAxis.SHOWLABEL,"showprimaryline",$MA.DataView.GraphAxis.SHOWPRIMARYLINE,"showgrid",$MA.DataView.GraphAxis.SHOWGRID,"thickness",$MA.DataView.GraphAxis.THICKNESS,"color",$MA.DataView.GraphAxis.COLOR,"sortorder",$MA.DataView.GraphAxis.SORTORDER,"displaylastlabel",
$MA.DataView.GraphAxis.DISPLAY_LAST_CATEGORY,"displaytext",$MA.DataView.GraphAxis.VALUE_DISPLAY_TEXT,"colorvalue",$MA.DataView.GraphAxis.VALUE,"min",$MA.DataView.GraphAxis.MIN,"max",$MA.DataView.GraphAxis.MAX,"shape",$MA.DataView.GraphAxis.SHAPE,"shapevalue",$MA.DataView.GraphAxis.SHAPE_VALUE,"percentage",$MA.DataView.GraphAxis.PERCENTAGE);$MA.DataView.GraphAxis.prototype=new $MA.DataView.Object;
$MA.DataView.GraphAxis.prototype.setProperty=function(a,b){var c=$MA.DataView.GraphAxis.propertyIds.get(a.toLowerCase());if(c==void 0)return!1;switch(c){case $MA.DataView.GraphAxis.COLUMN:this.column=b;break;case $MA.DataView.GraphAxis.EXPRESSION:this.expression=b;break;case $MA.DataView.GraphAxis.FORMAT:this.format=b;break;case $MA.DataView.GraphAxis.DISPLAYNAME:this.displayName=b;break;case $MA.DataView.GraphAxis.SHOWLABEL:this.showLabel=$MA.parseBool(b);break;case $MA.DataView.GraphAxis.SHOWPRIMARYLINE:this.showPrimaryLine=
$MA.parseBool(b);break;case $MA.DataView.GraphAxis.SHOWGRID:this.showGrid=$MA.parseBool(b);break;case $MA.DataView.GraphAxis.THICKNESS:c=parseFloat(b);if(isNaN(c))return $MA.log.error($MA.getLocalisation(null,"Error_DataParsing",b+" is not a number")),!1;this.thickness=c;break;case $MA.DataView.GraphAxis.DISPLAY_LAST_CATEGORY:this.displaylastcategorylabel=$MA.parseBool(b);break;case $MA.DataView.GraphAxis.COLOR:this.color=b;break;case $MA.DataView.GraphAxis.SHAPE:this.shape=b;break;case $MA.DataView.GraphAxis.SHAPE_VALUE:this.shapeValue=
b;break;case $MA.DataView.GraphAxis.SORTORDER:if(c=this.getSortOrder(b))this.sortOrder=c;break;case $MA.DataView.GraphAxis.VALUE_DISPLAY_TEXT:this.valueDisplayText=b;break;case $MA.DataView.GraphAxis.VALUE:this.value=b;break;case $MA.DataView.GraphAxis.MIN:this.min=b===void 0||b===null?b:$MA.parseFloat(b);break;case $MA.DataView.GraphAxis.MAX:this.max=b===void 0||b===null?b:$MA.parseFloat(b);break;case $MA.DataView.GraphAxis.PERCENTAGE:this.percentage=b}return!0};
$MA.DataView.GraphAxis.prototype.getProperty=function(a){a=$MA.DataView.GraphAxis.propertyIds.get(a.toLowerCase());if(a!=void 0)switch(a){case $MA.DataView.GraphAxis.COLUMN:return this.column;case $MA.DataView.GraphAxis.EXPRESSION:return this.expression;case $MA.DataView.GraphAxis.FORMAT:return this.format;case $MA.DataView.GraphAxis.DISPLAYNAME:return this.displayName;case $MA.DataView.GraphAxis.SHOWLABEL:return this.showLabel;case $MA.DataView.GraphAxis.SHOWPRIMARYLINE:return this.showPrimaryLine;
case $MA.DataView.GraphAxis.SHOWGRID:return this.showGrid;case $MA.DataView.GraphAxis.THICKNESS:return this.thickness;case $MA.DataView.GraphAxis.COLOR:return this.color;case $MA.DataView.GraphAxis.VALUE_DISPLAY_TEXT:return this.valueDisplayText;case $MA.DataView.GraphAxis.SORTORDER:return this.getFullSortOrder(this.sortOrder);case $MA.DataView.GraphAxis.DISPLAY_LAST_CATEGORY:return this.displaylastcategorylabel;case $MA.DataView.GraphAxis.VALUE:return this.value;case $MA.DataView.GraphAxis.MIN:return this.min;
case $MA.DataView.GraphAxis.MAX:return this.max;case $MA.DataView.GraphAxis.PERCENTAGE:return this.percentage}};$MA.DataView.GraphAxis.prototype.getSortOrder=function(a){var b;if(a)switch(a){case "ascending":b="a";break;case "descending":b="d";break;case "partial":b="p";break;case "none":b="n"}return b};$MA.DataView.GraphAxis.prototype.getFullSortOrder=function(a){var b;if(a)switch(a){case "a":b="ascending";break;case "d":b="descending";break;case "p":b="partial";break;case "n":b="none"}return b};
$MA.DataView.GraphCategories=function(a){$MA.DataView.Object.call(this,a);this.list=[]};$MA.DataView.GraphCategories.CATEGORY=0;$MA.DataView.GraphCategories.objectIds=new $MA.Hash("category",$MA.DataView.GraphCategories.CATEGORY);$MA.DataView.GraphCategories.SHOWLABEL=0;$MA.DataView.GraphCategories.SHOWGRID=1;$MA.DataView.GraphCategories.SHOWPRIMARYLINE=2;$MA.DataView.GraphCategories.DISPLAY=3;
$MA.DataView.GraphCategories.propertyIds=new $MA.Hash("showlabel",$MA.DataView.GraphCategories.SHOWLABEL,"showgrid",$MA.DataView.GraphCategories.SHOWGRID,"showprimaryline",$MA.DataView.GraphCategories.SHOWPRIMARYLINE,"display",$MA.DataView.GraphCategories.DISPLAY);$MA.DataView.GraphCategories.prototype=new $MA.DataView.Object;
$MA.DataView.GraphCategories.prototype.createObject=function(a){var b=$MA.DataView.GraphCategories.objectIds.get(a.toLowerCase());if(b==void 0)return null;a=null;switch(b){case $MA.DataView.GraphCategories.CATEGORY:a=b=new $MA.DataView.GraphAxis(this),this.list.push(b)}return a};
$MA.DataView.GraphCategories.prototype.setProperty=function(a,b){var c=$MA.DataView.GraphCategories.propertyIds.get(a.toLowerCase());if(c==void 0)return!1;switch(c){case $MA.DataView.GraphCategories.SHOWLABEL:this.showLabel=$MA.parseBool(b);break;case $MA.DataView.GraphCategories.SHOWGRID:this.showGrid=$MA.parseBool(b);break;case $MA.DataView.GraphCategories.SHOWPRIMARYLINE:this.showPrimaryLine=$MA.parseBool(b);break;case $MA.DataView.GraphCategories.DISPLAY:this.display=b}return!0};
$MA.DataView.GraphCategories.prototype.getProperty=function(a){a=$MA.DataView.GraphCategories.propertyIds.get(a.toLowerCase());if(a!=void 0)switch(a){case $MA.DataView.GraphCategories.SHOWLABEL:return this.showLabel;case $MA.DataView.GraphCategories.SHOWGRID:return this.showGrid;case $MA.DataView.GraphCategories.SHOWPRIMARYLINE:return this.showPrimaryLine;case $MA.DataView.GraphCategories.DISPLAY:return this.display}};
$MA.DataView.GraphCategories.prototype.getDisplayName=function(a){if(a>=this.list.length)return"";return this.list[a].getProperty("displayname")};$MA.DataView.GraphValues=function(a){$MA.DataView.Object.call(this,a);this.list=[]};$MA.DataView.GraphValues.VALUE=0;$MA.DataView.GraphValues.objectIds=new $MA.Hash("value",$MA.DataView.GraphValues.VALUE);$MA.DataView.GraphValues.MIN=0;$MA.DataView.GraphValues.MAX=1;$MA.DataView.GraphValues.SHOWLABEL=2;$MA.DataView.GraphValues.SHOWGRID=3;
$MA.DataView.GraphValues.SHOWPRIMARYLINE=4;$MA.DataView.GraphValues.COLOR=5;$MA.DataView.GraphValues.THICKNESS=6;$MA.DataView.GraphValues.DISPLAY_TEXT=7;$MA.DataView.GraphValues.SECONDARYAXIS=8;$MA.DataView.GraphValues.PERCENTAGE=9;
$MA.DataView.GraphValues.propertyIds=new $MA.Hash("min",$MA.DataView.GraphValues.MIN,"max",$MA.DataView.GraphValues.MAX,"showlabel",$MA.DataView.GraphValues.SHOWLABEL,"showgrid",$MA.DataView.GraphValues.SHOWGRID,"showprimaryline",$MA.DataView.GraphValues.SHOWPRIMARYLINE,"color",$MA.DataView.GraphValues.COLOR,"thickness",$MA.DataView.GraphValues.THICKNESS,"displaytext",$MA.DataView.GraphValues.DISPLAY_TEXT,"secondaryaxis",$MA.DataView.GraphValues.SECONDARYAXIS,"percentage",$MA.DataView.GraphValues.PERCENTAGE);
$MA.DataView.GraphValues.prototype=new $MA.DataView.Object;$MA.DataView.GraphValues.prototype.createObject=function(a){var b=$MA.DataView.GraphValues.objectIds.get(a.toLowerCase());if(b==void 0)return null;a=null;switch(b){case $MA.DataView.GraphValues.VALUE:a=b=new $MA.DataView.GraphAxis(this),this.list.push(b)}return a};
$MA.DataView.GraphValues.prototype.setProperty=function(a,b){var c=$MA.DataView.GraphValues.propertyIds.get(a.toLowerCase());if(c==void 0)return!1;switch(c){case $MA.DataView.GraphValues.MIN:this.minVal=$MA.parseFloat(b);break;case $MA.DataView.GraphValues.MAX:this.maxVal=$MA.parseFloat(b);break;case $MA.DataView.GraphValues.SHOWLABEL:this.showLabel=$MA.parseBool(b);break;case $MA.DataView.GraphValues.SHOWGRID:this.showGrid=$MA.parseBool(b);break;case $MA.DataView.GraphValues.SHOWPRIMARYLINE:this.showPrimaryLine=
$MA.parseBool(b);break;case $MA.DataView.GraphValues.COLOR:this.color=b;break;case $MA.DataView.GraphValues.THICKNESS:this.thickness=$MA.parseFloat(b);break;case $MA.DataView.GraphValues.DISPLAY_TEXT:this.displayText=b;break;case $MA.DataView.GraphValues.SECONDARYAXIS:this.secondaryAxis=$MA.parseBool(b);break;case $MA.DataView.GraphValues.PERCENTAGE:this.percentage=b}return!0};
$MA.DataView.GraphValues.prototype.getProperty=function(a){a=$MA.DataView.GraphValues.propertyIds.get(a.toLowerCase());if(a!=void 0)switch(a){case $MA.DataView.GraphValues.MIN:return this.minVal;case $MA.DataView.GraphValues.MAX:return this.maxVal;case $MA.DataView.GraphValues.SHOWLABEL:return this.showLabel;case $MA.DataView.GraphValues.SHOWGRID:return this.showGrid;case $MA.DataView.GraphValues.SHOWPRIMARYLINE:return this.showPrimaryLine;case $MA.DataView.GraphValues.COLOR:return this.color;case $MA.DataView.GraphValues.THICKNESS:return this.thickness;
case $MA.DataView.GraphValues.DISPLAY_TEXT:return this.displayText;case $MA.DataView.GraphValues.SECONDARYAXIS:return this.secondaryAxis;case $MA.DataView.GraphValues.PERCENTAGE:return this.percentage}};$MA.DataView.GraphValues.prototype.getDisplayName=function(a){if(a>=this.list.length)return"";return this.list[a].getProperty("displayname")};
$MA.DataView.GraphValues.prototype.getBubbleChartOtherValuesDisplayName=function(a){if(a=="")return"";var b,c;for(c=0;c<this.list.length;c++)if(this.list[c].getProperty("expression").toLowerCase()==a&&(b=this.list[c].getProperty("displayname"),b!=""))return b;b==""&&a=="width"&&this.list.length>1&&(b=this.list[1].getProperty("displayname"));return b};$MA.DataView.Group=function(a){$MA.DataView.Object.call(this,a);this.by=void 0;this.level=0;this.trailer=this.header=void 0};$MA.DataView.Group.BY=0;
$MA.DataView.Group.HEADER=1;$MA.DataView.Group.LEVEL=2;$MA.DataView.Group.TRAILER=3;$MA.DataView.Group.propertyIds=new $MA.Hash("by",$MA.DataView.Group.BY,"header",$MA.DataView.Group.HEADER,"level",$MA.DataView.Group.LEVEL,"trailer",$MA.DataView.Group.TRAILER);$MA.DataView.Group.prototype=new $MA.DataView.Object;
$MA.DataView.Group.prototype.createObject=function(a){a=$MA.DataView.Group.propertyIds.get(a.toLowerCase());if(a==void 0)return null;var b=null;switch(a){case $MA.DataView.Group.HEADER:b=this.header=new $MA.DataView.Band(this,"groupheader");break;case $MA.DataView.Group.TRAILER:b=this.trailer=new $MA.DataView.Band(this,"grouptrailer")}return b};
$MA.DataView.Group.prototype.setProperty=function(a,b){var c=$MA.DataView.Group.propertyIds.get(a.toLowerCase());if(c==void 0)return!1;switch(c){case $MA.DataView.Group.BY:if(b instanceof $MA.Expression.ColumnNode)this.by=b;else{var c=this.getOwner(),d=c.getTable().getColumn(b);this.by=d?new $MA.Expression.ColumnNode(d.id,c):$MA.parseExpr(b,c,!0)}break;case $MA.DataView.Group.LEVEL:this.level=parseInt(b,10)}return!0};
$MA.DataView.Table=function(a){$MA.DataView.Object.call(this,a);this.filter=this.fileType=this.dataSource=void 0;this.headerRow=!1;this.url=this.sql=void 0;this.columns=[];this.filteredBuffer=this.displayBuffer=void 0;this.dataChangedFlag=!1;this.sortOrder="a"};$MA.DataView.Table.COLUMN=0;$MA.DataView.Table.DATASOURCE=1;$MA.DataView.Table.FILETYPE=2;$MA.DataView.Table.FILTER=3;$MA.DataView.Table.HEADERROW=4;$MA.DataView.Table.SQL=5;$MA.DataView.Table.URL=6;
$MA.DataView.Table.propertyIds=new $MA.Hash("column",$MA.DataView.Table.COLUMN,"datasource",$MA.DataView.Table.DATASOURCE,"filetype",$MA.DataView.Table.FILETYPE,"filter",$MA.DataView.Table.FILTER,"headerrow",$MA.DataView.Table.HEADERROW,"sql",$MA.DataView.Table.SQL,"url",$MA.DataView.Table.URL);$MA.DataView.Table.prototype=new $MA.DataView.Object;
$MA.DataView.Table.prototype.createObject=function(a){var b=$MA.DataView.Table.propertyIds.get(a.toLowerCase());if(b==void 0)return null;a=null;switch(b){case $MA.DataView.Table.COLUMN:a=b=new $MA.DataView.TableColumn(this),b.id=this.columns.length,this.columns.push(b)}return a};
$MA.DataView.Table.prototype.setProperty=function(a,b){var c=$MA.DataView.Table.propertyIds.get(a.toLowerCase());if(c==void 0)return!1;switch(c){case $MA.DataView.Table.DATASOURCE:this.dataSource=b;break;case $MA.DataView.Table.FILETYPE:this.fileType=b;break;case $MA.DataView.Table.FILTER:this.filter=b;break;case $MA.DataView.Table.HEADERROW:this.headerRow=$MA.parseBool(b);break;case $MA.DataView.Table.SQL:this.sql=b;break;case $MA.DataView.Table.URL:this.url=b}return!0};
$MA.DataView.Table.prototype.getProperty=function(a){a=$MA.DataView.Table.propertyIds.get(a.toLowerCase());if(a!=void 0)switch(a){case $MA.DataView.Table.DATASOURCE:return this.dataSource;case $MA.DataView.Table.FILETYPE:return this.fileType;case $MA.DataView.Table.FILTER:return this.filter;case $MA.DataView.Table.HEADERROW:return this.headerRow;case $MA.DataView.Table.SQL:return this.sql;case $MA.DataView.Table.URL:return this.url}};
$MA.DataView.Table.prototype.createDataBuffer=function(a){if(a!=void 0){var b;if(a=="display")b=this.displayBuffer=[];else if(a=="filtered")b=this.filteredBuffer=[];return b}};$MA.DataView.Table.prototype.setDataBuffer=function(a,b){if(a!=void 0)if(a=="display")this.displayBuffer=b,this.setDataFlag("dataChanged",!0);else if(a=="filtered")this.filteredBuffer=b};
$MA.DataView.Table.prototype.getDataBuffer=function(a){if(a!=void 0){var b;if(a=="display")b=this.displayBuffer;else if(a=="filtered")b=this.filteredBuffer;return b}};$MA.DataView.Table.prototype.addColumn=function(a,b,c){var d=this.createObject("Column");d.name=b;d.type=d.getTableColumnType(a);d.type==void 0&&$MA.log.error($MA.getLocalisation(null,"Error_NoColumnType","Unsupported Column Type")+" - "+a);d.displayName=c?c:b};$MA.DataView.Table.prototype.getColumns=function(){return this.columns};
$MA.DataView.Table.prototype.addRow=function(a){var b=[];if(a!=void 0){var c,d;if(a instanceof Array){var e=a.length;for(c=0;c<e;c++)d=a[c],this.columns[c].type==$MA.TableColumnType.DATETIME?d&&typeof d=="string"?b.push($MA.parseDateTime(d)):b.push(d):this.columns[c].type==$MA.TableColumnType.DOUBLE?d&&typeof d=="string"?b.push($MA.parseFloat(d)):b.push(d):b.push(d)}else if(typeof a=="object")for(e in c=0,a)d=a[e],this.columns[c].type==$MA.TableColumnType.DATETIME?d&&typeof d=="string"?b.push($MA.parseDateTime(d)):
b.push(d):this.columns[c].type==$MA.TableColumnType.DOUBLE?d&&typeof d=="string"?b.push($MA.parseFloat(d)):b.push(d):b.push(d),c++}this.displayBuffer.push(b);this.setDataFlag("dataChanged",!0)};$MA.DataView.Table.prototype.getColumn=function(a){if(a!=void 0){var b;for(b=0;b<this.columns.length;b++)if(this.columns[b].name==a)return this.columns[b]}};$MA.DataView.Table.prototype.getRow=function(a){if(this.displayBuffer!=void 0&&!(a<0||a>this.displayBuffer.length-1))return this.displayBuffer[a]};
$MA.DataView.Table.prototype.setDataFlag=function(a,b){if(a=="dataChanged")this.dataChangedFlag=b};$MA.DataView.Table.prototype.getRowCount=function(){var a=0;if(this.displayBuffer)a=this.displayBuffer.length;return a};$MA.DataView.TableColumn=function(a){$MA.DataView.Object.call(this,a);this.values=this.type=this.displayName=this.name=void 0};$MA.DataView.TableColumn.DISPLAYNAME=0;$MA.DataView.TableColumn.NAME=1;$MA.DataView.TableColumn.TYPE=2;$MA.DataView.TableColumn.VALUES=3;
$MA.DataView.TableColumn.propertyIds=new $MA.Hash("displayName",$MA.DataView.TableColumn.DISPLAYNAME,"name",$MA.DataView.TableColumn.NAME,"type",$MA.DataView.TableColumn.TYPE,"values",$MA.DataView.TableColumn.VALUES);$MA.DataView.TableColumn.prototype=new $MA.DataView.Object;
$MA.DataView.TableColumn.prototype.setProperty=function(a,b){var c=$MA.DataView.TableColumn.propertyIds.get(a.toLowerCase());if(c==void 0)return!1;switch(c){case $MA.DataView.TableColumn.DISPLAYNAME:this.displayName=b;break;case $MA.DataView.TableColumn.NAME:this.name=b;break;case $MA.DataView.TableColumn.TYPE:this.type=this.getTableColumnType(b);break;case $MA.DataView.TableColumn.VALUES:this.values=b}return!0};
$MA.DataView.TableColumn.prototype.getProperty=function(a){a=$MA.DataView.TableColumn.propertyIds.get(a.toLowerCase());if(a!=void 0)switch(a){case $MA.DataView.TableColumn.DISPLAYNAME:return this.displayName;case $MA.DataView.TableColumn.NAME:return this.name;case $MA.DataView.TableColumn.TYPE:return this.getTableColumnString();case $MA.DataView.TableColumn.VALUES:return this.values}};
$MA.DataView.TableColumn.prototype.getTableColumnType=function(a){var b;if(a=="string")b=$MA.TableColumnType.STRING;else if(a=="number")b=$MA.TableColumnType.DOUBLE;else if(a=="datetime")b=$MA.TableColumnType.DATETIME;return b};$MA.DataView.TableColumn.prototype.getTableColumnString=function(){switch(this.type){case $MA.TableColumnType.STRING:return"string";case $MA.TableColumnType.DOUBLE:return"number";case $MA.TableColumnType.DATETIME:return"datetime"}};$MA.DataView.XmlMetaDataReader=function(){};
$MA.DataView.XmlMetaDataReader.prototype.parse=function(a,b){var c=(new DOMParser).parseFromString(b,"text/xml");this.visitElement(a,c.documentElement)};
$MA.DataView.XmlMetaDataReader.prototype.visitElement=function(a,b){var c=b.attributes,d;for(d=0;d<c.length;d++){var e=c[d],f=e.name,e=e.value;a.setProperty(f,e)||$MA.log.error($MA.getLocalisation(null,"Error_parse","Failed to parse ")+f+"="+e)}c=b.childNodes;for(d=0;d<c.length;d++)if(f=c[d],f.nodeType==1){var e=f.tagName,g=a.createObject(e);g!=null?this.visitElement(g,f):$MA.log.error($MA.getLocalisation(null,"Error_parse","Failed to parse ")+e)}};$MA.DataView.JsonMetaDataReader=function(){};
$MA.DataView.JsonMetaDataReader.prototype.parse=function(a,b){return this.parseObject(a,b)};$MA.DataView.JsonMetaDataReader.prototype.parseObject=function(a,b){var c,d;for(c in b)if(d=b[c],d instanceof Array)this.parseArray(a,d,c);else if(typeof d=="object"){var e=a.createObject(c);e!=null?this.parseObject(e,d):$MA.log.error($MA.getLocalisation(null,"Error_parse","Failed to parse ")+c)}else a.setProperty(c,d)||$MA.log.error($MA.getLocalisation(null,"Error_parse","Failed to parse ")+c+"="+d)};
$MA.DataView.JsonMetaDataReader.prototype.parseArray=function(a,b,c){var d,e,f=b.length;for(d=0;d<f;d++)e=b[d],this.parseObject(a.createObject(c),e)};$MA.DataView.Data=function(){};$MA.DataView.Data.Parser=function(a){this.table=a};$MA.DataView.Data.Parser.prototype.parseValue=function(a,b){switch(b){case $MA.TableColumnType.DOUBLE:return $MA.parseFloat(a);case $MA.TableColumnType.STRING:return a;case $MA.TableColumnType.DATETIME:return $MA.parseDateTime(a);default:return a}};
$MA.DataView.Data.CsvParser=function(a){$MA.DataView.Data.Parser.call(this,a)};$MA.DataView.Data.CsvParser.prototype=new $MA.DataView.Data.Parser;
$MA.DataView.Data.CsvParser.prototype.parse=function(a){var b=this.table.columns,c=[],d=0,e=!1,f,g;try{this.headerRow&&(f=a.indexOf("\n",d),f==-1?e=!0:d=f+1);do{f=a.indexOf("\n",d);if(f==-1)e=!0,f=a.length;g=a.substring(d,f);d=f+1;if(g==null||g.length==0)break;var h=[],j,l,n=0;for(l=0;l<b.length;l++)g.charAt(n)=='"'?(f=g.indexOf('"',n+1),j=f==-1?g.substring(n,g.length):g.substring(n+1,f),n=f+2):(f=g.indexOf(",",n),j=f==-1?g.substring(n,g.length):g.substring(n,f),n=f+1),h.push(this.parseValue(j,b[l].type));
c.push(h)}while(!e)}catch(k){$MA.log.error($MA.getLocalisation(null,"Error_DataParsing","Data Parsing Error"))}return c};$MA.DataView.Data.JsonParser=function(a){$MA.DataView.Data.Parser.call(this,a)};$MA.DataView.Data.JsonParser.prototype=new $MA.DataView.Data.Parser;
$MA.DataView.Data.JsonParser.prototype.parse=function(a){var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c=this.table.columns,d=[],e=0,f=!1,g,h,a=String(a);b.lastIndex=0;b.test(a)&&(a=a.replace(b,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))try{b=!0;if("["!=a.charAt(0)){g=a.indexOf(":",e);if(g==-1)throw new SyntaxError("JSON.parse");e=g+1;b=!1}g=a.indexOf("[",e);if(g==-1)throw new SyntaxError("JSON.parse");e=g+1;g=a.indexOf("{",e);if(g!=-1){e=g+1;do{g=a.indexOf("}",e);if(g==-1)f=!0,g=a.length;h=a.substring(e,g);e=g+1;if(h==null||h.length==0)break;var j=[],l=eval("({"+h+"})"),n,k,m;for(m=0;m<c.length;m++){n=c[m].name;if(c[m].type==$MA.TableColumnType.DATETIME){var o=l[n].substring(6);k=new Date(parseInt(o,10))}else k=l[n];j.push(k)}d.push(j);
g=a.indexOf("{",e);if(g==-1){g=a.indexOf("]",e);if(g==-1)throw new SyntaxError("JSON.parse");e=g+1;g=a.indexOf("}",e);if(g==-1&&!b)throw new SyntaxError("JSON.parse");f=!0}else e=g+1}while(!f)}}catch(p){$MA.log.error(p)}return d};$MA.DataView.Data.XmlParser=function(a){$MA.DataView.Data.Parser.call(this,a)};$MA.DataView.Data.XmlParser.prototype=new $MA.DataView.Data.Parser;
$MA.DataView.Data.XmlParser.prototype.parse=function(a){var a=(new DOMParser).parseFromString(a,"text/xml"),b=[];this.visitRowElement(b,a.documentElement);return b};$MA.DataView.Data.XmlParser.prototype.visitRowElement=function(a,b){var c,d=b.childNodes;for(c=0;c<d.length;c++){var e=d[c];e.nodeType==1&&this.visitItemElement(a,e)}};
$MA.DataView.Data.XmlParser.prototype.visitItemElement=function(a,b){var c=this.table.columns,d=b.childNodes,e=[],f,g=0;for(f=0;f<d.length;f++){var h=d[f];h.nodeType==1&&e.push(this.parseValue(h.textContent,c[g++].type))}a.push(e)};$MA.DataTable=function(){var a=new $MA.DataView.Table;a.dataSource="query";a.createDataBuffer("display");this.table=a};
$MA.DataTable.prototype.setProperty=function(a,b,c){void 0!=a&&(void 0==b||null==b?void 0!=this.table[a]&&delete this.table[a]:b&&"string"==typeof b&&("datetime"==c?b=$MA.parseDateTime(b):"number"==c&&(b=parseFloat(b)),this.table[a]=b))};$MA.DataTable.prototype.getProperty=function(a){return this.table[a]};$MA.DataTable.prototype.addColumn=function(a,b){this.table.addColumn(b,a)};$MA.DataTable.prototype.addRow=function(a){this.table.addRow(a)};
$MA.DataTable.prototype.addRows=function(a){if(a!=void 0)if(a instanceof Array){var b,c=a.length;for(b=0;b<c;b++)this.table.addRow(a[b])}else if(typeof a=="object")for(b in a)c=a[b],typeof c!="function"&&this.table.addRow(c)};$MA.DataTable.prototype.getNumberOfRows=function(){var a=0;if(this.table.displayBuffer)a=this.table.displayBuffer.length;return a};$MA.DataTable.prototype.getNumberOfColumns=function(){var a=0;if(this.table.columns)a=this.table.columns.length;return a};
$MA.DataTable.prototype.refresh=function(){this.callback!=void 0&&this.callback.refresh()};$MA.DataTable.prototype.getTable=function(){return this.table};$MA.DataTable.prototype.setCallBack=function(a){this.callback=a};
$MA.DataTable.prototype.setData=function(a,b){var c;switch(a){case "csv":c=new $MA.DataView.Data.CsvParser(this.table);break;case "json":c=new $MA.DataView.Data.JsonParser(this.table);break;case "xml":c=new $MA.DataView.Data.XmlParser(this.table);break;default:$MA.log.error($MA.getLocalisation(null,"Error_NoFileType","Unsupported File Type"));return}this.table.setDataBuffer("display",c.parse(b));this.refresh()};$MA.FileDataTable=function(){$MA.DataTable.call(this)};$MA.FileDataTable.prototype=new $MA.DataTable;
$MA.FileDataTable.prototype.setData=function(a,b){var c=$MA.createXHR();if(c!=void 0){var d=this;c.onreadystatechange=function(){if(c.readyState==4)if(c.status==200||c.status==304||c.status==0){var e;switch(a){case "csv":e=new $MA.DataView.Data.CsvParser(d.table);break;case "json":e=new $MA.DataView.Data.JsonParser(d.table);break;case "xml":e=new $MA.DataView.Data.XmlParser(d.table);break;default:$MA.log.error($MA.getLocalisation(null,"Error_NoFileType","Unsupported File Type"));return}e=e.parse(c.responseText);
d.table.setDataBuffer("display",e);d.refresh();d=null}else $MA.log.error($MA.getLocalisation(null,"Error_Load","Failed to load ")+b)};c.open("GET",b,!0);c.send(null)}};$MA.DataView.HtmlRenderer=function(a,b){this._parent=a;this.dvObj=b;if(a)this.id=a.id;this.selectedRow=0};
$MA.DataView.HtmlRenderer.prototype.createBand=function(a,b,c){if(b!=void 0){var d=document.getElementById(this.getBandElementId(b,c));if(!d){var d=this.createBandDiv(a,b,c),a=b.graphicObjects,b=b.graphicObjects.length,e,f;for(f=0;f<b;f++)e=a[f],this.createGob(d,e,c)}}};$MA.DataView.HtmlRenderer.prototype.createGob=function(a,b,c){b instanceof $MA.DataView.Graph?this.createGobGraph(a,b,c):b instanceof $MA.DataView.Canvas&&this.createGobCanvas(a,b,c)};
$MA.DataView.HtmlRenderer.prototype.initializeDWDiv=function(a){var b=document.getElementById(this.id);if(a.style=="graph"&&(a=parseInt(b.style.height,10),isNaN(a)))b.style.height="300px";return b};
$MA.DataView.HtmlRenderer.prototype.createBandDiv=function(a,b,c){var d=document.createElement("div");d.id=this.getBandElementId(b,c);d.row=c;d.className="dataview_"+b.name+"_band";d.style.position="relative";d.style.overflowx="hidden";d.style.height=b.name=="background"?a.style.height:b.height+"px";this.setBackground(d,b.background);a.appendChild(d);return d};
$MA.DataView.HtmlRenderer.prototype.initialzeGraphAxis=function(a,b,c,d){if(c!=void 0&&(c.format&&a.setFormat(b,c.format,d),c.displayName&&a.setLabel(b,c.displayName,d),b=="category"&&c.sortOrder&&typeof this.dvObj.getTable().sortOrder=="string"))this.dvObj.getTable().sortOrder=c.sortOrder};
$MA.DataView.HtmlRenderer.prototype.createGobGraph=function(a,b,c){var d=document.createElement("canvas");d.id=this.getGobElementId(b,c);d.className="graph";d.style.position="absolute";this.setBackground(b.background);b.sizeToDisplay?(c=document.getElementById(this.id),d.style.left="0px",d.style.top="0px",d.height=c.offsetHeight,d.width=c.offsetWidth):(d.style.left=b.x+"px",d.style.top=b.y+"px",d.width=b.width,d.height=b.height);c=new $MA.Graph(d.id,b.getGraphTypes());c.setLegend(b.legend);c.setLegendOffset(b.legendOffsetX,
b.legendOffsetY);this.initialzeGraphAxis(c,"category",b.category);this.initialzeGraphAxis(c,"series",b.series);var e=b.getValueObject(0);void 0!==e&&this.initialzeGraphAxis(c,"values",e);1<b.getChildrenCount()&&(b=b.getGraph(1),e=b.getValueObject(0),void 0!==e&&this.initialzeGraphAxis(c,"values",e,b.getName()));if(b=$MA.getCSSRule(".graph"))c.setFontBrush(new $MA.Brush(b.style.color)),c.setFont(b.style.fontFamily);d.macontrol=c;a.appendChild(d)};
$MA.DataView.HtmlRenderer.prototype.createGobCanvas=function(a,b,c){var d=document.createElement("canvas");d.id=this.getGobElementId(b,c);d.className="canvas";d.style.position="absolute";this.setBackground(b.background);b.sizeToDisplay?(b=document.getElementById(this.id),d.style.left="0px",d.style.top="0px",d.height=b.offsetHeight,d.width=b.offsetWidth):(d.style.left=b.x+"px",d.style.top=b.y+"px",d.width=b.width,d.height=b.height);a.appendChild(d)};
$MA.DataView.HtmlRenderer.prototype.setPosition=function(a,b){a.style.position="absolute";a.style.left=b.x+"px";a.style.top=b.y+"px";a.style.width=b.width+"px";a.style.height=b.height+"px"};$MA.DataView.HtmlRenderer.prototype.setBackground=function(a,b){if(b&&b.color){var c;c=b.color instanceof $MA.Expression?b.color.stringValue():b.color;a.style.background=c}};$MA.DataView.HtmlRenderer.prototype.setForeground=function(a,b){if(b!=void 0)a.style.color=b};
$MA.DataView.HtmlRenderer.prototype.setFont=function(a,b){if(b){if(b.family)a.style.font=b.toString();if(b.weight)a.style.fontWeight=b.weight}};$MA.DataView.HtmlRenderer.prototype.setText=function(a,b){if(b)a.innerHTML=b};$MA.DataView.HtmlRenderer.prototype.setAlignment=function(a,b){if(b)a.style.textAlign=b};
$MA.DataView.HtmlRenderer.prototype.getBandElementId=function(a,b){var c;a.isContent?(c=a._parent,c=c.level!=void 0?this.id+"_"+a.name+c.level+"_"+b:this.id+"_"+a.name+"_"+b):c=this.id+"_"+a.name;return c};$MA.DataView.HtmlRenderer.prototype.getGobElementId=function(a,b){return b==1||!a.band.isContent?this.id+"_"+a.name:this.id+"_"+a.name+"_"+b};$MA.DataView.HtmlRenderer.getRootElement=function(a){for(;a.dataview==void 0;)a=a.parentNode;return a};$MA.DataView.HtmlRenderer.prototype.refreshGob=function(){};
$MA.DataView.CanvasRenderer=function(a,b){$MA.DataView.HtmlRenderer.call(this,a,b)};$MA.DataView.CanvasRenderer.prototype=new $MA.DataView.HtmlRenderer;$MA.DataView.CanvasRenderer.prototype.create=function(){this.createBand(this.initializeDWDiv(this.dvObj),this.dvObj.background,1)};
$MA.DataView.CanvasRenderer.prototype.refreshData=function(){if(this.dvObj.getTable().displayBuffer!=void 0){this.dvObj.currentRow=0;var a=document.getElementById(this.id),b=a.children[a.children.length-1],c=b.children[0];if(a.offsetWidth!=c.offsetWidth)b.style.width=a.offsetWidth+"px",c.width=a.offsetWidth;if(a.offsetHeight!=c.offsetHeight)b.style.height=a.offsetHeight+"px",c.height=a.offsetHeight}};$MA.DataView.GraphRenderer=function(a,b){$MA.DataView.HtmlRenderer.call(this,a,b)};
$MA.DataView.GraphRenderer.prototype=new $MA.DataView.HtmlRenderer;$MA.DataView.GraphRenderer.prototype.create=function(){this.createBand(this.initializeDWDiv(this.dvObj),this.dvObj.background,1)};$MA.DataView.GraphRenderer.prototype.getMinItemSize=function(a,b){var c=!1;a.indexOf("line")>=0&&(c=!0);return b>0?3:c?3:44};$MA.DataView.GraphRenderer.prototype.getItemIncr=function(a,b,c,d){return a=="tablebar"||a=="bubble"||a=="pie"||a=="donut"||a=="waterfallbar"||a=="verticalline"?1:Math.ceil(c/(b/d))};
$MA.DataView.GraphRenderer.prototype.initGraphData=function(){var a=this.dvObj,b=a.getGraphGob(),c=document.getElementById(this.getGobElementId(b,1)),d=c.macontrol;d.resetData();d.width=c.offsetWidth;d.numberOfVisibleCategory=this.dvObj._parent._parent.numberOfVisibleCategory;var c=b.getChildrenCount(),e;this.itemIncr=1;for(e=-1;e<c;e++){var f;if(-1==e)if(0==c)f=b;else continue;else f=b.getGraph(e);this.initSubGraphData(d,a,b,f)}d.setItemIncr(this.itemIncr)};
$MA.DataView.GraphRenderer.prototype.initSubGraphData=function(a,b,c,d){var e=d.getName(),f=d.getGraphType(),g=d.getTable(),h=g.displayBuffer.length,j=a.width;if(h>0){var l={},n=g.upperThreshold;if(void 0!=n)l.upperThreshold=n;n=g.lowerThreshold;if(void 0!=n)l.lowerThreshold=n;n=g.reference;if(void 0!=n)l.reference=n;n=g.trendCategory;if(void 0!=n)l.trendCategory=n;a.setTrendReference(l);var k=d.getFirstItem(),l=d.getMaxItems(),m=k+l-1;m>=h&&(m=h-1);var o,p,q,r,h=d.getCategoryExpr(),l=d.getValueExpr(0);
b.currentGraph=e;var s=d.getSeriesExpr(),n=d.groupExprs,u,v=d.getValueCount(),x,w,y,A,B=d.getObject("values"),D=d.categories;if(D&&D.list)A=D.list,D=D.getProperty("display"),A.display=D;var D=d.getObject("category").valueDisplayText,J=this.getMinItemSize(f,a.numberOfVisibleCategory),j=this.getItemIncr(f,j,m-k+1,J),E=f.indexOf("waterfallcolumn")>=0,z,G,O,H,P,C,F,Q,N=b.graphGob.suppliedTotals&&(f=="hierarchycolumn"||f=="hierarchywaterfallcolumn"||f=="hierarchyline"||f=="hierarchystackedcolumn"||f==
"hierarchy100pctstackedcolumn");if(d.series==void 0){J=k;y=c!==d?d.getValueObject(0).getProperty("expression"):"";G=a.createSeries(y,e);E?(y=0,G.sumBeforeRange=0):y=k;for(c=y;c<=m;c+=N?1:j){!N&&c+j>m&&(c=m);b.exprRow=c;o=h.evaluate();p=l.evaluate();y=g.sortOrder instanceof Array;var K;if(!y)K=g.sortOrder;q=y||K=="a"||K=="d"?d.getOrigIndex(c):c;if(E&&c<k)typeof p=="number"&&!isNaN(p)&&(G.sumBeforeRange+=p);else{if(n.length>0){u=[];for(z=0;z<n.length;z++)u[z]=n[z].evaluate()}if(N&&j>1)if(o==""&&u[0]!=
"")Q=c;else if(o!=""&&(c-Q-1)%j!=0)continue;if(v>1)if(x=[],w=[],f=="bubble")for(z=1;z<v;z++)y=void 0,r=B.list[z].getProperty("expression").toLowerCase(),C=g.displayBuffer[c],H=B.list[z].getProperty("displaytext"),H!=void 0&&(F=g.getColumn(H))&&(y=C[F.id]),z==1||r=="width"?x[z-1]={width:d.getValueExpr(z).evaluate(),displayText:y}:r=="height"?x[z-1]={height:d.getValueExpr(z).evaluate(),displayText:y}:r=="shape"?(r=B.list[z].getProperty("shapevalue"),r!=void 0&&(r=g.getColumn(r))&&(O=C[r.id]),x[z-1]=
{shape:d.getValueExpr(z).evaluate(),value:O,displayText:y}):r=="color"&&(r=B.list[z].getProperty("colorvalue"),r!=void 0&&(r=g.getColumn(r))&&(P=C[r.id]),x[z-1]={color:d.getValueExpr(z).evaluate(),value:P,displayText:y});else for(z=1;z<v;z++)x[z-1]=d.getValueExpr(z).evaluate();y=void 0;H=B.list[0].getProperty("displaytext");H!=void 0&&(F=g.getColumn(H),C=g.displayBuffer[c],F&&(y=C[F.id]));r=void 0;D!=void 0&&(F=g.getColumn(D),C=g.displayBuffer[c],F&&(r=C[F.id]));a.insertData(G,o,p,y,x,w,u,A,r,q)}}}else{if(b.groups==
void 0)return;K=b.groups.length-1;var k=b.getGroupRow(k,K,!0,g),m=b.getGroupRow(m,K,!1,g),L,J=k,I;if(d.seriesList==void 0){G=[];I=[];for(c=k;c<=m;c++)b.exprRow=c,L=s.evaluate(),G[L]==void 0&&(G[L]=!0,I.push(L));c=g.sortOrder instanceof Array?g.sortOrder[0]:g.sortOrder;(c=="a"||c=="d")&&I.sort()}else I=d.seriesList;for(var R=[],c=0;c<I.length;c++)if(C=I[c],R[C]=a.createSeries(C,e,c),E)R[C].sumBeforeRange=0;for(var M,S=[],T,U=0,c=E?0:k;c<=m;c++)if(b.exprRow=c,o=h.evaluate(),p=l.evaluate(),L=s.evaluate(),
G=R[L],E&&c<k)typeof p=="number"&&!isNaN(p)&&(G.sumBeforeRange+=p);else if(z=g.getRow(c),M=b.getRowInfo(z),!N&&U%j!=0)M&&M.isGroupTrailer(K)&&U++;else{if(M&&M.isGroupHeader(K)){if(n.length>0){u=[];for(z=0;z<n.length;z++)u[z]=n[z].evaluate()}if(N&&j>1)if(o==""&&u[0]!="")Q=c;else if(o!=""&&(c-Q-I.length)/I.length%j!=0){T=c;continue}if(q=a.createCategory(o,u,A,e))for(z=0;z<I.length;z++)C=I[z],S[C]=!1}else if(N&&o!=""&&c>T&&c<T+I.length)continue;if(q){if(v>1)if(x=[],w=[],f=="bubble")for(z=1;z<v;z++)r=
B.list[z].getProperty("expression").toLowerCase(),y=void 0,C=g.displayBuffer[c],H=B.list[z].getProperty("displaytext"),H!=void 0&&(F=g.getColumn(H))&&(y=C[F.id]),B.list[z].getProperty("displaytext"),z==1||r=="width"?x[z-1]={width:d.getValueExpr(z).evaluate(),displayText:y}:r=="height"?x[z-1]={height:d.getValueExpr(z).evaluate(),displayText:y}:r=="shape"?(r=B.list[z].getProperty("shapevalue"),r!=void 0&&(r=g.getColumn(r))&&(O=C[r.id]),x[z-1]={shape:d.getValueExpr(z).evaluate(),value:O,displayText:y}):
r=="color"&&(r=B.list[z].getProperty("colorvalue"),r!=void 0&&(r=g.getColumn(r))&&(P=C[F.id]),x[z-1]={color:d.getValueExpr(z).evaluate(),value:P,displayText:y});else for(z=1;z<v;z++)x[z-1]=d.getValueExpr(z).evaluate(),y=void 0,C=g.displayBuffer[c],H=B.list[z].getProperty("displaytext"),H!=void 0&&(F=g.getColumn(H))&&(y=C[F.id]),w.push(y);C=g.displayBuffer[c];H=B.list[0].getProperty("displaytext");if(H!=void 0&&(F=g.getColumn(H)))w=y=C[F.id];r=void 0;D!=void 0&&(F=g.getColumn(D),C=g.displayBuffer[c],
F&&(r=C[F.id]));S[L]?a.insertData(G,o,p,y,x,w,u,A,r):(a.addData(G,o,p,y,x,w,r),S[L]=!0)}else a.insertData(G,o,p,y,x,w,u,A,r);if(M&&M.isGroupTrailer(K)){if(q){for(z=0;z<I.length;z++)C=I[z],S[C]||a.addData(R[C],o,null);q=void 0}U++}}}a.setFirstItem(J,e);if(j>this.itemIncr)this.itemIncr=j}};$MA.DataView.GraphRenderer.prototype.initializeGraphData=function(a){a=a==void 0?!1:a;this.initGraphData();a||(a=this.dvObj.getGraphGob(),a=document.getElementById(this.getGobElementId(a,1)),a.macontrol.refresh(a))};
$MA.DataView.GraphRenderer.prototype.refreshData=function(a){var a=a==void 0?!1:a,b=this.dvObj;if(!b.noRedraw&&b.getTable().displayBuffer!=void 0){b.currentRow=0;if(b=document.getElementById(this.id)){var c=b.children[b.children.length-1],d=c.children[0];if(c&&d){if(b.offsetWidth!=d.offsetWidth)c.style.width=b.offsetWidth+"px",d.width=b.offsetWidth;if(b.offsetHeight!=d.offsetHeight)c.style.height=b.offsetHeight+"px",d.height=b.offsetHeight}}this.initializeGraphData(a)}};
$MA.DataView.GraphRenderer.prototype.refreshBand=function(){};var $MAExpressionLexer=function(a,b){b||(b=new org.antlr.runtime.RecognizerSharedState);(function(){isDigit=function(a){return a>="0"&&a<="9"}}).call(this);this.dfa18=new $MAExpressionLexer.DFA18(this);$MAExpressionLexer.superclass.constructor.call(this,a,b)};
org.antlr.lang.augmentObject($MAExpressionLexer,{EOF:-1,T__37:37,T__38:38,T__39:39,NUMBER:4,EQUAL:5,NEQ:6,GREATER:7,LESS:8,GE:9,LE:10,PLUS:11,DASH:12,STAR:13,SLASH:14,CARET:15,LPAREN:16,RPAREN:17,IDENTIFIER:18,DATE:19,TIME:20,STRING:21,COMMA:22,AT:23,QUE:24,SHP:25,DOT:26,LBRACKET:27,RBRACKET:28,WS:29,SLCOMMENT:30,MLCOMMENT:31,DOUBLE_STRING_CHAR:32,SINGLE_STRING_CHAR:33,LETTER:34,DIGIT:35,ESC:36});
(function(){var a=org.antlr.runtime.Token.HIDDEN_CHANNEL;org.antlr.lang.extend($MAExpressionLexer,org.antlr.runtime.Lexer,{EOF:-1,T__37:37,T__38:38,T__39:39,NUMBER:4,EQUAL:5,NEQ:6,GREATER:7,LESS:8,GE:9,LE:10,PLUS:11,DASH:12,STAR:13,SLASH:14,CARET:15,LPAREN:16,RPAREN:17,IDENTIFIER:18,DATE:19,TIME:20,STRING:21,COMMA:22,AT:23,QUE:24,SHP:25,DOT:26,LBRACKET:27,RBRACKET:28,WS:29,SLCOMMENT:30,MLCOMMENT:31,DOUBLE_STRING_CHAR:32,SINGLE_STRING_CHAR:33,LETTER:34,DIGIT:35,ESC:36,getGrammarFileName:function(){return"C:\\Users\\limc.SYBASE\\workspace\\AntlrTest\\src\\Test\\Expression.g"}});
org.antlr.lang.augmentObject($MAExpressionLexer.prototype,{mT__37:function(){var a=this.T__37,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("for");this.state.type=a;this.state.channel=c},mT__38:function(){var a=this.T__38,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("all");this.state.type=a;this.state.channel=c},mT__39:function(){var a=this.T__39,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("group");this.state.type=a;this.state.channel=
c},mCOMMA:function(){var a=this.COMMA,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match(",");this.state.type=a;this.state.channel=c},mLPAREN:function(){var a=this.LPAREN,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("(");this.state.type=a;this.state.channel=c},mRPAREN:function(){var a=this.RPAREN,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match(")");this.state.type=a;this.state.channel=c},mSTAR:function(){var a=this.STAR,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;
this.match("*");this.state.type=a;this.state.channel=c},mPLUS:function(){var a=this.PLUS,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("+");this.state.type=a;this.state.channel=c},mDASH:function(){var a=this.DASH,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("-");this.state.type=a;this.state.channel=c},mSLASH:function(){var a=this.SLASH,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("/");this.state.type=a;this.state.channel=c},mCARET:function(){var a=
this.CARET,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("^");this.state.type=a;this.state.channel=c},mLESS:function(){var a=this.LESS,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("<");this.state.type=a;this.state.channel=c},mLE:function(){var a=this.LE,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("<=");this.state.type=a;this.state.channel=c},mNEQ:function(){var a=this.NEQ,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;
this.match("!=");this.state.type=a;this.state.channel=c},mEQUAL:function(){var a=this.EQUAL,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("==");this.state.type=a;this.state.channel=c},mGREATER:function(){var a=this.GREATER,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match(">");this.state.type=a;this.state.channel=c},mGE:function(){var a=this.GE,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match(">=");this.state.type=a;this.state.channel=c},
mAT:function(){var a=this.AT,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("@");this.state.type=a;this.state.channel=c},mQUE:function(){var a=this.QUE,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("?");this.state.type=a;this.state.channel=c},mSHP:function(){var a=this.SHP,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("#");this.state.type=a;this.state.channel=c},mDOT:function(){var a=this.DOT,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;
this.match(".");this.state.type=a;this.state.channel=c},mLBRACKET:function(){var a=this.LBRACKET,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("[");this.state.type=a;this.state.channel=c},mRBRACKET:function(){var a=this.RBRACKET,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("]");this.state.type=a;this.state.channel=c},mWS:function(){var b=this.WS,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;if(this.input.LA(1)>="\t"&&this.input.LA(1)<="\n"||
this.input.LA(1)=="\r"||this.input.LA(1)==" ")this.input.consume();else throw b=new org.antlr.runtime.MismatchedSetException(null,this.input),this.recover(b),b;c=a;this.state.type=b;this.state.channel=c},mSLCOMMENT:function(){var b=this.SLCOMMENT,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("//");a:do{var c=2,d=this.input.LA(1);if(d>="\0"&&d<="\t"||d>="\u000b"&&d<="\uffff")c=1;switch(c){case 1:if(this.input.LA(1)>="\0"&&this.input.LA(1)<="\t"||this.input.LA(1)>="\u000b"&&this.input.LA(1)<=
"\uffff")this.input.consume();else throw b=new org.antlr.runtime.MismatchedSetException(null,this.input),this.recover(b),b;break;default:break a}}while(1);c=a;this.state.type=b;this.state.channel=c},mMLCOMMENT:function(){var b=this.MLCOMMENT,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL;this.match("/*");a:do{var c=2,d=this.input.LA(1);if(d=="*")if(d=this.input.LA(2),d=="/")c=2;else{if(d>="\0"&&d<="."||d>="0"&&d<="\uffff")c=1}else if(d>="\0"&&d<=")"||d>="+"&&d<="\uffff")c=1;switch(c){case 1:this.matchAny();
break;default:break a}}while(1);this.match("*/");c=a;this.state.type=b;this.state.channel=c},mSTRING:function(){var a=this.STRING,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL,d=2,d=this.input.LA(1);if(d=='"')d=1;else if(d=="'")d=2;else throw new org.antlr.runtime.NoViableAltException("",5,0,this.input);switch(d){case 1:this.match('"');a:do{var d=2,e=this.input.LA(1);if(e>="\0"&&e<="!"||e>="#"&&e<="\uffff")d=1;switch(d){case 1:this.mDOUBLE_STRING_CHAR();break;default:break a}}while(1);
this.match('"');break;case 2:this.match("'");a:do{d=2;e=this.input.LA(1);if(e>="\0"&&e<="&"||e>="("&&e<="\uffff")d=1;switch(d){case 1:this.mSINGLE_STRING_CHAR();break;default:break a}}while(1);this.match("'")}this.setText(this.getText().substring(1,this.getText().length-1));this.state.type=a;this.state.channel=c},mIDENTIFIER:function(){var a=this.IDENTIFIER,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL,d=2,d=this.input.LA(1);if(d=="$"||d>="A"&&d<="Z"||d=="_"||d>="a"&&d<="z"||d>="\u0100"&&
d<="\uffef")d=1;else if(d=="#")d=2;else throw new org.antlr.runtime.NoViableAltException("",8,0,this.input);switch(d){case 1:if(this.input.LA(1)=="$"||this.input.LA(1)>="A"&&this.input.LA(1)<="Z"||this.input.LA(1)=="_"||this.input.LA(1)>="a"&&this.input.LA(1)<="z"||this.input.LA(1)>="\u0100"&&this.input.LA(1)<="\uffef")this.input.consume();else throw a=new org.antlr.runtime.MismatchedSetException(null,this.input),this.recover(a),a;a:do{var d=2,e=this.input.LA(1);if(e>="#"&&e<="%"||e>="0"&&e<="9"||
e>="A"&&e<="Z"||e=="_"||e>="a"&&e<="z"||e>="\u0100"&&e<="\uffef")d=1;switch(d){case 1:if(this.input.LA(1)>="#"&&this.input.LA(1)<="%"||this.input.LA(1)>="0"&&this.input.LA(1)<="9"||this.input.LA(1)>="A"&&this.input.LA(1)<="Z"||this.input.LA(1)=="_"||this.input.LA(1)>="a"&&this.input.LA(1)<="z"||this.input.LA(1)>="\u0100"&&this.input.LA(1)<="\uffef")this.input.consume();else throw a=new org.antlr.runtime.MismatchedSetException(null,this.input),this.recover(a),a;break;default:break a}}while(1);break;
case 2:this.mSHP();d=0;a:do{var e=2,f=this.input.LA(1);if(f>="0"&&f<="9"||f>="A"&&f<="Z"||f=="_"||f>="a"&&f<="z"||f>="\u0100"&&f<="\uffef")e=1;switch(e){case 1:if(this.input.LA(1)>="0"&&this.input.LA(1)<="9"||this.input.LA(1)>="A"&&this.input.LA(1)<="Z"||this.input.LA(1)=="_"||this.input.LA(1)>="a"&&this.input.LA(1)<="z"||this.input.LA(1)>="\u0100"&&this.input.LA(1)<="\uffef")this.input.consume();else throw a=new org.antlr.runtime.MismatchedSetException(null,this.input),this.recover(a),a;break;default:if(d>=
1)break a;throw new org.antlr.runtime.EarlyExitException(7,this.input);}d++}while(1)}this.state.type=a;this.state.channel=c},mNUMBER:function(){var a=this.NUMBER,c=org.antlr.runtime.BaseRecognizer.DEFAULT_TOKEN_CHANNEL,d=4,d=this.input.LA(1);if(d>="0"&&d<="9")if(d=this.input.LA(2),d>="0"&&d<="9")switch(this.input.LA(3)){case ":":d=1;break;case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":d=this.input.LA(4);d=d>="0"&&d<="9"?this.input.LA(5)=="-"?2:3:3;break;
default:d=3}else d=3;else if(d==".")d=4;else throw new org.antlr.runtime.NoViableAltException("",15,0,this.input);switch(d){case 1:this.mDIGIT();this.mDIGIT();this.match(":");this.mDIGIT();this.mDIGIT();this.match(":");this.mDIGIT();this.mDIGIT();a=2;this.input.LA(1)==":"&&(a=1);switch(a){case 1:this.match(":");a=0;a:do{var d=2,e=this.input.LA(1);e>="0"&&e<="9"&&(d=1);switch(d){case 1:this.mDIGIT();break;default:if(a>=1)break a;c=new org.antlr.runtime.EarlyExitException(9,this.input);throw c;}a++}while(1)}a=
this.TIME;break;case 2:if(!isDigit(this.input.LA(4))||!(this.input.LA(5)=="-"&&isDigit(this.input.LA(6))&&isDigit(this.input.LA(7))&&this.input.LA(8)=="-"&&isDigit(this.input.LA(9))&&isDigit(this.input.LA(10))))throw new org.antlr.runtime.FailedPredicateException(this.input,"NUMBER","isDigit(this.input.LA(4)) && (this.input.LA(5) == '-') && isDigit(this.input.LA(6)) && isDigit(this.input.LA(7)) && (this.input.LA(8) == '-') && isDigit(this.input.LA(9)) && isDigit(this.input.LA(10)) ");this.mDIGIT();
this.mDIGIT();this.mDIGIT();this.mDIGIT();this.match("-");this.mDIGIT();this.mDIGIT();this.match("-");this.mDIGIT();this.mDIGIT();a=this.DATE;break;case 3:d=0;a:do{var e=2,f=this.input.LA(1);f>="0"&&f<="9"&&(e=1);switch(e){case 1:this.mDIGIT();break;default:if(d>=1)break a;c=new org.antlr.runtime.EarlyExitException(11,this.input);throw c;}d++}while(1);d=2;this.input.LA(1)=="."&&(d=1);switch(d){case 1:this.match(".");a:do switch(d=2,e=this.input.LA(1),e>="0"&&e<="9"&&(d=1),d){case 1:this.mDIGIT();
break;default:break a}while(1)}break;case 4:this.match(".");a:do switch(d=2,e=this.input.LA(1),e>="0"&&e<="9"&&(d=1),d){case 1:this.mDIGIT();break;default:break a}while(1)}this.state.type=a;this.state.channel=c},mTIME:function(){},mDATE:function(){},mDIGIT:function(){this.matchRange("0","9")},mLETTER:function(){if(this.input.LA(1)>="A"&&this.input.LA(1)<="Z"||this.input.LA(1)>="a"&&this.input.LA(1)<="z"||this.input.LA(1)>="\u0100"&&this.input.LA(1)<="\uffef")this.input.consume();else{var a=new org.antlr.runtime.MismatchedSetException(null,
this.input);this.recover(a);throw a;}},mDOUBLE_STRING_CHAR:function(){var a=2,a=this.input.LA(1);if(a>="\0"&&a<="!"||a>="#"&&a<="}"||a>="\u007f"&&a<="\uffff")a=1;else if(a=="~")a=2;else throw new org.antlr.runtime.NoViableAltException("",16,0,this.input);switch(a){case 1:if(this.input.LA(1)>="\0"&&this.input.LA(1)<="!"||this.input.LA(1)>="#"&&this.input.LA(1)<="}"||this.input.LA(1)>="\u007f"&&this.input.LA(1)<="\uffff")this.input.consume();else throw a=new org.antlr.runtime.MismatchedSetException(null,
this.input),this.recover(a),a;break;case 2:this.mESC()}},mSINGLE_STRING_CHAR:function(){var a=2,a=this.input.LA(1);if(a>="\0"&&a<="&"||a>="("&&a<="}"||a>="\u007f"&&a<="\uffff")a=1;else if(a=="~")a=2;else throw new org.antlr.runtime.NoViableAltException("",17,0,this.input);switch(a){case 1:if(this.input.LA(1)>="\0"&&this.input.LA(1)<="&"||this.input.LA(1)>="("&&this.input.LA(1)<="}"||this.input.LA(1)>="\u007f"&&this.input.LA(1)<="\uffff")this.input.consume();else throw a=new org.antlr.runtime.MismatchedSetException(null,
this.input),this.recover(a),a;break;case 2:this.mESC()}},mESC:function(){this.match("~");if(this.input.LA(1)=='"'||this.input.LA(1)=="'"||this.input.LA(1)=="\\"||this.input.LA(1)=="n"||this.input.LA(1)=="r"||this.input.LA(1)=="t"||this.input.LA(1)=="~")this.input.consume();else{var a=new org.antlr.runtime.MismatchedSetException(null,this.input);this.recover(a);throw a;}},mTokens:function(){var a=29,a=this.dfa18.predict(this.input);switch(a){case 1:this.mT__37();break;case 2:this.mT__38();break;case 3:this.mT__39();
break;case 4:this.mCOMMA();break;case 5:this.mLPAREN();break;case 6:this.mRPAREN();break;case 7:this.mSTAR();break;case 8:this.mPLUS();break;case 9:this.mDASH();break;case 10:this.mSLASH();break;case 11:this.mCARET();break;case 12:this.mLESS();break;case 13:this.mLE();break;case 14:this.mNEQ();break;case 15:this.mEQUAL();break;case 16:this.mGREATER();break;case 17:this.mGE();break;case 18:this.mAT();break;case 19:this.mQUE();break;case 20:this.mSHP();break;case 21:this.mDOT();break;case 22:this.mLBRACKET();
break;case 23:this.mRBRACKET();break;case 24:this.mWS();break;case 25:this.mSLCOMMENT();break;case 26:this.mMLCOMMENT();break;case 27:this.mSTRING();break;case 28:this.mIDENTIFIER();break;case 29:this.mNUMBER()}}},!0);org.antlr.lang.augmentObject($MAExpressionLexer,{DFA18_eotS:"\u0001\uffff\u0003\u0018\u0006\uffff\u0001\u001f\u0001\uffff\u0001!\u0002\uffff\u0001#\u0002\uffff\u0001$\u0001%\u0006\uffff\u0003\u0018\t\uffff\u0001)\u0001*\u0001\u0018\u0002\uffff\u0001\u0018\u0001-\u0001\uffff",DFA18_eofS:".\uffff",
DFA18_minS:"\u0001\t\u0001o\u0001l\u0001r\u0006\uffff\u0001*\u0001\uffff\u0001=\u0002\uffff\u0001=\u0002\uffff\u00020\u0006\uffff\u0001r\u0001l\u0001o\t\uffff\u0002#\u0001u\u0002\uffff\u0001p\u0001#\u0001\uffff",DFA18_maxS:"\u0001\uffef\u0001o\u0001l\u0001r\u0006\uffff\u0001/\u0001\uffff\u0001=\u0002\uffff\u0001=\u0002\uffff\u0001\uffef\u00019\u0006\uffff\u0001r\u0001l\u0001o\t\uffff\u0002\uffef\u0001u\u0002\uffff\u0001p\u0001\uffef\u0001\uffff",DFA18_acceptS:"\u0004\uffff\u0001\u0004\u0001\u0005\u0001\u0006\u0001\u0007\u0001\u0008\u0001\t\u0001\uffff\u0001\u000b\u0001\uffff\u0001\u000e\u0001\u000f\u0001\uffff\u0001\u0012\u0001\u0013\u0002\uffff\u0001\u0016\u0001\u0017\u0001\u0018\u0001\u001b\u0001\u001c\u0001\u001d\u0003\uffff\u0001\u0019\u0001\u001a\u0001\n\u0001\r\u0001\u000c\u0001\u0011\u0001\u0010\u0001\u0014\u0001\u0015\u0003\uffff\u0001\u0001\u0001\u0002\u0002\uffff\u0001\u0003",
DFA18_specialS:".\uffff}>",DFA18_transitionS:["\u0002\u0016\u0002\uffff\u0001\u0016\u0012\uffff\u0001\u0016\u0001\r\u0001\u0017\u0001\u0012\u0001\u0018\u0002\uffff\u0001\u0017\u0001\u0005\u0001\u0006\u0001\u0007\u0001\u0008\u0001\u0004\u0001\t\u0001\u0013\u0001\n\n\u0019\u0002\uffff\u0001\u000c\u0001\u000e\u0001\u000f\u0001\u0011\u0001\u0010\u001a\u0018\u0001\u0014\u0001\uffff\u0001\u0015\u0001\u000b\u0001\u0018\u0001\uffff\u0001\u0002\u0004\u0018\u0001\u0001\u0001\u0003\u0013\u0018\u0085\uffff\ufef0\u0018",
"\u0001\u001a","\u0001\u001b","\u0001\u001c","","","","","","","\u0001\u001e\u0004\uffff\u0001\u001d","","\u0001 ","","",'\u0001"',"","","\n\u0018\u0007\uffff\u001a\u0018\u0004\uffff\u0001\u0018\u0001\uffff\u001a\u0018\u0085\uffff\ufef0\u0018","\n\u0019","","","","","","","\u0001&","\u0001'","\u0001(","","","","","","","","","","\u0003\u0018\n\uffff\n\u0018\u0007\uffff\u001a\u0018\u0004\uffff\u0001\u0018\u0001\uffff\u001a\u0018\u0085\uffff\ufef0\u0018","\u0003\u0018\n\uffff\n\u0018\u0007\uffff\u001a\u0018\u0004\uffff\u0001\u0018\u0001\uffff\u001a\u0018\u0085\uffff\ufef0\u0018",
"\u0001+","","","\u0001,","\u0003\u0018\n\uffff\n\u0018\u0007\uffff\u001a\u0018\u0004\uffff\u0001\u0018\u0001\uffff\u001a\u0018\u0085\uffff\ufef0\u0018",""]});org.antlr.lang.augmentObject($MAExpressionLexer,{DFA18_eot:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionLexer.DFA18_eotS),DFA18_eof:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionLexer.DFA18_eofS),DFA18_min:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionLexer.DFA18_minS),DFA18_max:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionLexer.DFA18_maxS),
DFA18_accept:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionLexer.DFA18_acceptS),DFA18_special:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionLexer.DFA18_specialS),DFA18_transition:function(){var a=[],c,d=$MAExpressionLexer.DFA18_transitionS.length;for(c=0;c<d;c++)a.push(org.antlr.runtime.DFA.unpackEncodedString($MAExpressionLexer.DFA18_transitionS[c]));return a}()});$MAExpressionLexer.DFA18=function(a){this.recognizer=a;this.decisionNumber=18;this.eot=$MAExpressionLexer.DFA18_eot;
this.eof=$MAExpressionLexer.DFA18_eof;this.min=$MAExpressionLexer.DFA18_min;this.max=$MAExpressionLexer.DFA18_max;this.accept=$MAExpressionLexer.DFA18_accept;this.special=$MAExpressionLexer.DFA18_special;this.transition=$MAExpressionLexer.DFA18_transition};org.antlr.lang.extend($MAExpressionLexer.DFA18,org.antlr.runtime.DFA,{getDescription:function(){return"1:1: Tokens : ( T__37 | T__38 | T__39 | COMMA | LPAREN | RPAREN | STAR | PLUS | DASH | SLASH | CARET | LESS | LE | NEQ | EQUAL | GREATER | GE | AT | QUE | SHP | DOT | LBRACKET | RBRACKET | WS | SLCOMMENT | MLCOMMENT | STRING | IDENTIFIER | NUMBER );"},
dummy:null})})();
var $MAExpressionParser=function(a,b){b||(b=new org.antlr.runtime.RecognizerSharedState);Relationship={Equal:0,NotEqual:1,LessThan:2,LessThanEqual:3,GreaterThan:4,GreaterThanEqual:5};Operator={Star:0,Slash:1,Dash:2,Plus:3,Caret:4};this.NodeCreator=null;$MAExpressionParser.superclass.constructor.call(this,a,b);this.dfa4=new $MAExpressionParser.DFA4(this);this.dfa6=new $MAExpressionParser.DFA6(this);this.dfa8=new $MAExpressionParser.DFA8(this);this.dfa9=new $MAExpressionParser.DFA9(this);this.dfa11=
new $MAExpressionParser.DFA11(this);this.dfa12=new $MAExpressionParser.DFA12(this);this.adaptor=new org.antlr.runtime.tree.CommonTreeAdaptor};
org.antlr.lang.augmentObject($MAExpressionParser,{EOF:-1,T__37:37,T__38:38,T__39:39,NUMBER:4,EQUAL:5,NEQ:6,GREATER:7,LESS:8,GE:9,LE:10,PLUS:11,DASH:12,STAR:13,SLASH:14,CARET:15,LPAREN:16,RPAREN:17,IDENTIFIER:18,DATE:19,TIME:20,STRING:21,COMMA:22,AT:23,QUE:24,SHP:25,DOT:26,LBRACKET:27,RBRACKET:28,WS:29,SLCOMMENT:30,MLCOMMENT:31,DOUBLE_STRING_CHAR:32,SINGLE_STRING_CHAR:33,LETTER:34,DIGIT:35,ESC:36});
(function(){org.antlr.lang.extend($MAExpressionParser,org.antlr.runtime.Parser,{getTokenNames:function(){return $MAExpressionParser.tokenNames},getGrammarFileName:function(){return"C:\\Users\\limc.SYBASE\\workspace\\AntlrTest\\src\\Test\\Expression.g"}});org.antlr.lang.augmentObject($MAExpressionParser.prototype,{dw_expression:function(){var a=null,b=null,a=null;try{this.pushFollow($MAExpressionParser.FOLLOW_expression_in_dw_expression94),b=this.expression(),this.state._fsp--,a=b}catch(c){if(c instanceof
org.antlr.runtime.RecognitionException)this.reportError(c),this.recover(this.input,c);else throw c;}finally{}return a},expression:function(){var a=null,b=null,c=null,a=null,d=$MA.AggregateType.All;try{switch(this.pushFollow($MAExpressionParser.FOLLOW_relationalExpression_in_expression118),c=this.relationalExpression(),this.state._fsp--,a=c,c=2,this.input.LA(1)==37&&(c=1),c){case 1:this.match(this.input,37,$MAExpressionParser.FOLLOW_37_in_expression135);var c=2,e=this.input.LA(1);if(e==38)c=1;else if(e==
39)c=2;else throw new org.antlr.runtime.NoViableAltException("",1,0,this.input);switch(c){case 1:this.match(this.input,38,$MAExpressionParser.FOLLOW_38_in_expression160);d=$MA.AggregateType.ALL;break;case 2:this.match(this.input,39,$MAExpressionParser.FOLLOW_39_in_expression181),d=$MA.AggregateType.GROUP,b=this.match(this.input,4,$MAExpressionParser.FOLLOW_NUMBER_in_expression189)}a=d==$MA.AggregateType.GROUP?this.NodeCreator.createAggregateNode(a,d,b?b.getText():null):this.NodeCreator.createAggregateNode(a,
d,0);break}}catch(f){if(f instanceof org.antlr.runtime.RecognitionException)this.reportError(f),this.recover(this.input,f);else throw f;}finally{}return a},relationalExpression:function(){var a=null,b=null,c=null,a=null,d=Relationship.Equal;try{switch(this.pushFollow($MAExpressionParser.FOLLOW_additiveExpression_in_relationalExpression243),b=this.additiveExpression(),this.state._fsp--,a=b,b=2,b=this.dfa4.predict(this.input),b){case 1:b=6;switch(this.input.LA(1)){case 5:b=1;break;case 6:b=2;break;
case 7:b=3;break;case 8:b=4;break;case 9:b=5;break;case 10:b=6;break;default:throw new org.antlr.runtime.NoViableAltException("",3,0,this.input);}switch(b){case 1:this.match(this.input,5,$MAExpressionParser.FOLLOW_EQUAL_in_relationalExpression262);d=Relationship.Equal;break;case 2:this.match(this.input,6,$MAExpressionParser.FOLLOW_NEQ_in_relationalExpression273);d=Relationship.NotEqual;break;case 3:this.match(this.input,7,$MAExpressionParser.FOLLOW_GREATER_in_relationalExpression285);d=Relationship.GreaterThan;
break;case 4:this.match(this.input,8,$MAExpressionParser.FOLLOW_LESS_in_relationalExpression295);d=Relationship.LessThan;break;case 5:this.match(this.input,9,$MAExpressionParser.FOLLOW_GE_in_relationalExpression306);d=Relationship.GreaterThanEqual;break;case 6:this.match(this.input,10,$MAExpressionParser.FOLLOW_LE_in_relationalExpression319),d=Relationship.LessThanEqual}this.pushFollow($MAExpressionParser.FOLLOW_additiveExpression_in_relationalExpression342);c=this.additiveExpression();this.state._fsp--;
switch(d){case Relationship.Equal:a=this.NodeCreator.createOperatorNode($MA.OperatorType.EQUAL,[a,c]);break;case Relationship.NotEqual:a=this.NodeCreator.createOperatorNode($MA.OperatorType.NOTEQUAL,[a,c]);break;case Relationship.GreaterThan:a=this.NodeCreator.createOperatorNode($MA.OperatorType.GREATERTHAN,[a,c]);break;case Relationship.GreaterThanEqual:a=this.NodeCreator.createOperatorNode($MA.OperatorType.GREATERTHANEQUAL,[a,c]);break;case Relationship.LessThan:a=this.NodeCreator.createOperatorNode($MA.OperatorType.LESSTHAN,
[a,c]);break;case Relationship.LessThanEqual:a=this.NodeCreator.createOperatorNode($MA.OperatorType.LESSTHANEQUAL,[a,c])}break}}catch(e){if(e instanceof org.antlr.runtime.RecognitionException)this.reportError(e),this.recover(this.input,e);else throw e;}finally{}return a},additiveExpression:function(){var a=null,b=null,c=null,d=a=null,e=Operator.Plus;try{this.pushFollow($MAExpressionParser.FOLLOW_multiplicativeExpression_in_additiveExpression382);b=this.multiplicativeExpression();this.state._fsp--;
a=b;a:do switch(b=2,b=this.dfa6.predict(this.input),b){case 1:var b=2,f=this.input.LA(1);if(f==11)b=1;else if(f==12)b=2;else throw new org.antlr.runtime.NoViableAltException("",5,0,this.input);switch(b){case 1:this.match(this.input,11,$MAExpressionParser.FOLLOW_PLUS_in_additiveExpression403);e=Operator.Plus;break;case 2:this.match(this.input,12,$MAExpressionParser.FOLLOW_DASH_in_additiveExpression420),e=Operator.Dash}this.pushFollow($MAExpressionParser.FOLLOW_multiplicativeExpression_in_additiveExpression441);
c=this.multiplicativeExpression();this.state._fsp--;d=a;a=e==Operator.Plus?this.NodeCreator.createOperatorNode($MA.OperatorType.ADD,[d,c]):this.NodeCreator.createOperatorNode($MA.OperatorType.MINUS,[d,c]);break;default:break a}while(1)}catch(g){if(g instanceof org.antlr.runtime.RecognitionException)this.reportError(g),this.recover(this.input,g);else throw g;}finally{}return a},multiplicativeExpression:function(){var a=null,b=null,c=null,d=a=null,e=Operator.Star;try{this.pushFollow($MAExpressionParser.FOLLOW_factorExpression_in_multiplicativeExpression479);
b=this.factorExpression();this.state._fsp--;a=b;a:do switch(b=2,b=this.dfa8.predict(this.input),b){case 1:var b=2,f=this.input.LA(1);if(f==13)b=1;else if(f==14)b=2;else throw new org.antlr.runtime.NoViableAltException("",7,0,this.input);switch(b){case 1:this.match(this.input,13,$MAExpressionParser.FOLLOW_STAR_in_multiplicativeExpression500);e=Operator.Star;break;case 2:this.match(this.input,14,$MAExpressionParser.FOLLOW_SLASH_in_multiplicativeExpression511),e=Operator.Slash}this.pushFollow($MAExpressionParser.FOLLOW_factorExpression_in_multiplicativeExpression533);
c=this.factorExpression();this.state._fsp--;d=a;a=e==Operator.Star?this.NodeCreator.createOperatorNode($MA.OperatorType.MULTIPLY,[d,c]):this.NodeCreator.createOperatorNode($MA.OperatorType.DIVIDE,[d,c]);break;default:break a}while(1)}catch(g){if(g instanceof org.antlr.runtime.RecognitionException)this.reportError(g),this.recover(this.input,g);else throw g;}finally{}return a},factorExpression:function(){var a=null,b=null,c=null,d=a=null;try{this.pushFollow($MAExpressionParser.FOLLOW_unaryExpression_in_factorExpression571);
b=this.unaryExpression();this.state._fsp--;a=b;a:do switch(b=2,b=this.dfa9.predict(this.input),b){case 1:this.match(this.input,15,$MAExpressionParser.FOLLOW_CARET_in_factorExpression584);this.pushFollow($MAExpressionParser.FOLLOW_unaryExpression_in_factorExpression595);c=this.unaryExpression();this.state._fsp--;d=a;a=this.NodeCreator.createOperatorNode($MA.OperatorType.EXPON,[d,c]);break;default:break a}while(1)}catch(e){if(e instanceof org.antlr.runtime.RecognitionException)this.reportError(e),this.recover(this.input,
e);else throw e;}finally{}return a},unaryExpression:function(){var a=null,b=null,a=null,c=!1;try{var d=3,e=this.input.LA(1);e==11?d=1:e==12&&(d=2);switch(d){case 1:this.match(this.input,11,$MAExpressionParser.FOLLOW_PLUS_in_unaryExpression635);break;case 2:this.match(this.input,12,$MAExpressionParser.FOLLOW_DASH_in_unaryExpression645),c=!0}this.pushFollow($MAExpressionParser.FOLLOW_primaryExpression_in_unaryExpression662);b=this.primaryExpression();this.state._fsp--;a=b;c&&(a=this.NodeCreator.createOperatorNode($MA.OperatorType.UNARYMINUS,
[a]))}catch(f){if(f instanceof org.antlr.runtime.RecognitionException)this.reportError(f),this.recover(this.input,f);else throw f;}finally{}return a},primaryExpression:function(){var a=null,b=null,c=null,d=null,e=null,f=null,g=null,h=null,j=null,a=null;try{var l=8,l=this.dfa11.predict(this.input);switch(l){case 1:this.match(this.input,16,$MAExpressionParser.FOLLOW_LPAREN_in_primaryExpression689);this.pushFollow($MAExpressionParser.FOLLOW_expression_in_primaryExpression696);j=this.expression();this.state._fsp--;
this.match(this.input,17,$MAExpressionParser.FOLLOW_RPAREN_in_primaryExpression698);a=j;break;case 2:this.pushFollow($MAExpressionParser.FOLLOW_functionCall_in_primaryExpression711);j=this.functionCall();this.state._fsp--;a=j;break;case 3:b=this.match(this.input,18,$MAExpressionParser.FOLLOW_IDENTIFIER_in_primaryExpression723);a=this.NodeCreator.createVariableNode(b?b.getText():null);break;case 4:c=this.match(this.input,4,$MAExpressionParser.FOLLOW_NUMBER_in_primaryExpression735);a=this.NodeCreator.createConstantNode($MA.ConstantType.DOUBLE,
c?c.getText():null);break;case 5:d=this.match(this.input,19,$MAExpressionParser.FOLLOW_DATE_in_primaryExpression747);a=this.NodeCreator.createConstantNode($MA.ConstantType.DATE,d?d.getText():null);break;case 6:e=this.match(this.input,20,$MAExpressionParser.FOLLOW_TIME_in_primaryExpression761);a=this.NodeCreator.createConstantNode($MA.ConstantType.TIME,e?e.getText():null);break;case 7:f=this.match(this.input,19,$MAExpressionParser.FOLLOW_DATE_in_primaryExpression775);g=this.match(this.input,20,$MAExpressionParser.FOLLOW_TIME_in_primaryExpression781);
a=this.NodeCreator.createConstantNode($MA.ConstantType.DATETIME,(f?f.getText():null)+" "+(g?g.getText():null));break;case 8:h=this.match(this.input,21,$MAExpressionParser.FOLLOW_STRING_in_primaryExpression794);a=this.NodeCreator.createConstantNode($MA.ConstantType.STRING,h?h.getText():null);break}}catch(n){if(n instanceof org.antlr.runtime.RecognitionException)this.reportError(n),this.recover(this.input,n);else throw n;}finally{}return a},functionCall:function(){var a=null,b=null,c=null,a=null;try{b=
this.match(this.input,18,$MAExpressionParser.FOLLOW_IDENTIFIER_in_functionCall826);this.match(this.input,16,$MAExpressionParser.FOLLOW_LPAREN_in_functionCall828);var d=2,d=this.dfa12.predict(this.input);switch(d){case 1:this.pushFollow($MAExpressionParser.FOLLOW_arguments_in_functionCall837),c=this.arguments(),this.state._fsp--}this.match(this.input,17,$MAExpressionParser.FOLLOW_RPAREN_in_functionCall842);a=c!=null?this.NodeCreator.createFunctionNode(b?b.getText():null,c):this.NodeCreator.createFunctionNode(b?
b.getText():null,null)}catch(e){if(e instanceof org.antlr.runtime.RecognitionException)this.reportError(e),this.recover(this.input,e);else throw e;}finally{}return a},arguments:function(){var a=null,b=null,a=null,c=[];try{this.pushFollow($MAExpressionParser.FOLLOW_expression_in_arguments875);b=this.expression();this.state._fsp--;c.push(b);a:do{var d=2;this.input.LA(1)==22&&(d=1);switch(d){case 1:this.match(this.input,22,$MAExpressionParser.FOLLOW_COMMA_in_arguments883);this.pushFollow($MAExpressionParser.FOLLOW_expression_in_arguments889);
b=this.expression();this.state._fsp--;c.push(b);break;default:break a}}while(1);a=c}catch(e){if(e instanceof org.antlr.runtime.RecognitionException)this.reportError(e),this.recover(this.input,e);else throw e;}finally{}return a}},!0);org.antlr.lang.augmentObject($MAExpressionParser,{DFA4_eotS:"\u000b\uffff",DFA4_eofS:"\u0001\u0007\n\uffff",DFA4_minS:"\u0001\u0005\n\uffff",DFA4_maxS:"\u0001%\n\uffff",DFA4_acceptS:"\u0001\uffff\u0001\u0001\u0005\uffff\u0001\u0002\u0003\uffff",DFA4_specialS:"\u000b\uffff}>",
DFA4_transitionS:["\u0006\u0001\u0006\uffff\u0001\u0007\u0004\uffff\u0001\u0007\u000e\uffff\u0001\u0007","","","","","","","","","",""]});org.antlr.lang.augmentObject($MAExpressionParser,{DFA4_eot:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA4_eotS),DFA4_eof:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA4_eofS),DFA4_min:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA4_minS),DFA4_max:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA4_maxS),
DFA4_accept:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA4_acceptS),DFA4_special:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA4_specialS),DFA4_transition:function(){var a=[],b,c=$MAExpressionParser.DFA4_transitionS.length;for(b=0;b<c;b++)a.push(org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA4_transitionS[b]));return a}()});$MAExpressionParser.DFA4=function(a){this.recognizer=a;this.decisionNumber=4;this.eot=$MAExpressionParser.DFA4_eot;this.eof=
$MAExpressionParser.DFA4_eof;this.min=$MAExpressionParser.DFA4_min;this.max=$MAExpressionParser.DFA4_max;this.accept=$MAExpressionParser.DFA4_accept;this.special=$MAExpressionParser.DFA4_special;this.transition=$MAExpressionParser.DFA4_transition};org.antlr.lang.extend($MAExpressionParser.DFA4,org.antlr.runtime.DFA,{getDescription:function(){return"95:3: ( ( EQUAL | NEQ | GREATER | LESS | GE | LE ) right= additiveExpression )?"},dummy:null});org.antlr.lang.augmentObject($MAExpressionParser,{DFA6_eotS:"\r\uffff",
DFA6_eofS:"\u0001\u0001\u000c\uffff",DFA6_minS:"\u0001\u0005\u000c\uffff",DFA6_maxS:"\u0001%\u000c\uffff",DFA6_acceptS:"\u0001\uffff\u0001\u0002\t\uffff\u0001\u0001\u0001\uffff",DFA6_specialS:"\r\uffff}>",DFA6_transitionS:["\u0006\u0001\u0002\u000b\u0004\uffff\u0001\u0001\u0004\uffff\u0001\u0001\u000e\uffff\u0001\u0001","","","","","","","","","","","",""]});org.antlr.lang.augmentObject($MAExpressionParser,{DFA6_eot:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA6_eotS),DFA6_eof:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA6_eofS),
DFA6_min:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA6_minS),DFA6_max:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA6_maxS),DFA6_accept:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA6_acceptS),DFA6_special:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA6_specialS),DFA6_transition:function(){var a=[],b,c=$MAExpressionParser.DFA6_transitionS.length;for(b=0;b<c;b++)a.push(org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA6_transitionS[b]));
return a}()});$MAExpressionParser.DFA6=function(a){this.recognizer=a;this.decisionNumber=6;this.eot=$MAExpressionParser.DFA6_eot;this.eof=$MAExpressionParser.DFA6_eof;this.min=$MAExpressionParser.DFA6_min;this.max=$MAExpressionParser.DFA6_max;this.accept=$MAExpressionParser.DFA6_accept;this.special=$MAExpressionParser.DFA6_special;this.transition=$MAExpressionParser.DFA6_transition};org.antlr.lang.extend($MAExpressionParser.DFA6,org.antlr.runtime.DFA,{getDescription:function(){return"()* loopback of 146:3: ( ( PLUS | DASH ) right= multiplicativeExpression )*"},
dummy:null});org.antlr.lang.augmentObject($MAExpressionParser,{DFA8_eotS:"\u000f\uffff",DFA8_eofS:"\u0001\u0001\u000e\uffff",DFA8_minS:"\u0001\u0005\u000e\uffff",DFA8_maxS:"\u0001%\u000e\uffff",DFA8_acceptS:"\u0001\uffff\u0001\u0002\u000b\uffff\u0001\u0001\u0001\uffff",DFA8_specialS:"\u000f\uffff}>",DFA8_transitionS:["\u0008\u0001\u0002\r\u0002\uffff\u0001\u0001\u0004\uffff\u0001\u0001\u000e\uffff\u0001\u0001","","","","","","","","","","","","","",""]});org.antlr.lang.augmentObject($MAExpressionParser,
{DFA8_eot:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA8_eotS),DFA8_eof:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA8_eofS),DFA8_min:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA8_minS),DFA8_max:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA8_maxS),DFA8_accept:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA8_acceptS),DFA8_special:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA8_specialS),
DFA8_transition:function(){var a=[],b,c=$MAExpressionParser.DFA8_transitionS.length;for(b=0;b<c;b++)a.push(org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA8_transitionS[b]));return a}()});$MAExpressionParser.DFA8=function(a){this.recognizer=a;this.decisionNumber=8;this.eot=$MAExpressionParser.DFA8_eot;this.eof=$MAExpressionParser.DFA8_eof;this.min=$MAExpressionParser.DFA8_min;this.max=$MAExpressionParser.DFA8_max;this.accept=$MAExpressionParser.DFA8_accept;this.special=$MAExpressionParser.DFA8_special;
this.transition=$MAExpressionParser.DFA8_transition};org.antlr.lang.extend($MAExpressionParser.DFA8,org.antlr.runtime.DFA,{getDescription:function(){return"()* loopback of 178:3: ( ( STAR | SLASH ) right= factorExpression )*"},dummy:null});org.antlr.lang.augmentObject($MAExpressionParser,{DFA9_eotS:"\u0010\uffff",DFA9_eofS:"\u0001\u0001\u000f\uffff",DFA9_minS:"\u0001\u0005\u000f\uffff",DFA9_maxS:"\u0001%\u000f\uffff",DFA9_acceptS:"\u0001\uffff\u0001\u0002\r\uffff\u0001\u0001",DFA9_specialS:"\u0010\uffff}>",
DFA9_transitionS:["\n\u0001\u0001\u000f\u0001\uffff\u0001\u0001\u0004\uffff\u0001\u0001\u000e\uffff\u0001\u0001","","","","","","","","","","","","","","",""]});org.antlr.lang.augmentObject($MAExpressionParser,{DFA9_eot:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA9_eotS),DFA9_eof:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA9_eofS),DFA9_min:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA9_minS),DFA9_max:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA9_maxS),
DFA9_accept:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA9_acceptS),DFA9_special:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA9_specialS),DFA9_transition:function(){var a=[],b,c=$MAExpressionParser.DFA9_transitionS.length;for(b=0;b<c;b++)a.push(org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA9_transitionS[b]));return a}()});$MAExpressionParser.DFA9=function(a){this.recognizer=a;this.decisionNumber=9;this.eot=$MAExpressionParser.DFA9_eot;this.eof=
$MAExpressionParser.DFA9_eof;this.min=$MAExpressionParser.DFA9_min;this.max=$MAExpressionParser.DFA9_max;this.accept=$MAExpressionParser.DFA9_accept;this.special=$MAExpressionParser.DFA9_special;this.transition=$MAExpressionParser.DFA9_transition};org.antlr.lang.extend($MAExpressionParser.DFA9,org.antlr.runtime.DFA,{getDescription:function(){return"()* loopback of 208:3: ( CARET right= unaryExpression )*"},dummy:null});org.antlr.lang.augmentObject($MAExpressionParser,{DFA11_eotS:"'\uffff",DFA11_eofS:'\u0002\uffff\u0001\u0008\u0001\uffff\u0001\u0018"\uffff',
DFA11_minS:'\u0001\u0004\u0001\uffff\u0001\u0005\u0001\uffff\u0001\u0005"\uffff',DFA11_maxS:'\u0001\u0015\u0001\uffff\u0001%\u0001\uffff\u0001%"\uffff',DFA11_acceptS:"\u0001\uffff\u0001\u0001\u0001\uffff\u0001\u0004\u0001\uffff\u0001\u0006\u0001\u0008\u0001\u0002\u0001\u0003\u000e\uffff\u0001\u0007\u0001\u0005\u000e\uffff",DFA11_specialS:"'\uffff}>",DFA11_transitionS:["\u0001\u0003\u000b\uffff\u0001\u0001\u0001\uffff\u0001\u0002\u0001\u0004\u0001\u0005\u0001\u0006","","\u000b\u0008\u0001\u0007\u0001\u0008\u0004\uffff\u0001\u0008\u000e\uffff\u0001\u0008",
"","\u000b\u0018\u0001\uffff\u0001\u0018\u0002\uffff\u0001\u0017\u0001\uffff\u0001\u0018\u000e\uffff\u0001\u0018","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]});org.antlr.lang.augmentObject($MAExpressionParser,{DFA11_eot:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA11_eotS),DFA11_eof:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA11_eofS),DFA11_min:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA11_minS),
DFA11_max:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA11_maxS),DFA11_accept:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA11_acceptS),DFA11_special:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA11_specialS),DFA11_transition:function(){var a=[],b,c=$MAExpressionParser.DFA11_transitionS.length;for(b=0;b<c;b++)a.push(org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA11_transitionS[b]));return a}()});$MAExpressionParser.DFA11=
function(a){this.recognizer=a;this.decisionNumber=11;this.eot=$MAExpressionParser.DFA11_eot;this.eof=$MAExpressionParser.DFA11_eof;this.min=$MAExpressionParser.DFA11_min;this.max=$MAExpressionParser.DFA11_max;this.accept=$MAExpressionParser.DFA11_accept;this.special=$MAExpressionParser.DFA11_special;this.transition=$MAExpressionParser.DFA11_transition};org.antlr.lang.extend($MAExpressionParser.DFA11,org.antlr.runtime.DFA,{getDescription:function(){return"239:1: primaryExpression returns [Expression expr] : ( LPAREN e= expression RPAREN | e= functionCall | id= IDENTIFIER | n= NUMBER | d= DATE | t= TIME | d1= DATE t1= TIME | s= STRING );"},
dummy:null});org.antlr.lang.augmentObject($MAExpressionParser,{DFA12_eotS:"\n\uffff",DFA12_eofS:"\n\uffff",DFA12_minS:"\u0001\u0004\t\uffff",DFA12_maxS:"\u0001\u0015\t\uffff",DFA12_acceptS:"\u0001\uffff\u0001\u0001\u0007\uffff\u0001\u0002",DFA12_specialS:"\n\uffff}>",DFA12_transitionS:["\u0001\u0001\u0006\uffff\u0002\u0001\u0003\uffff\u0001\u0001\u0001\t\u0004\u0001","","","","","","","","",""]});org.antlr.lang.augmentObject($MAExpressionParser,{DFA12_eot:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA12_eotS),
DFA12_eof:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA12_eofS),DFA12_min:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA12_minS),DFA12_max:org.antlr.runtime.DFA.unpackEncodedStringToUnsignedChars($MAExpressionParser.DFA12_maxS),DFA12_accept:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA12_acceptS),DFA12_special:org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA12_specialS),DFA12_transition:function(){var a=[],
b,c=$MAExpressionParser.DFA12_transitionS.length;for(b=0;b<c;b++)a.push(org.antlr.runtime.DFA.unpackEncodedString($MAExpressionParser.DFA12_transitionS[b]));return a}()});$MAExpressionParser.DFA12=function(a){this.recognizer=a;this.decisionNumber=12;this.eot=$MAExpressionParser.DFA12_eot;this.eof=$MAExpressionParser.DFA12_eof;this.min=$MAExpressionParser.DFA12_min;this.max=$MAExpressionParser.DFA12_max;this.accept=$MAExpressionParser.DFA12_accept;this.special=$MAExpressionParser.DFA12_special;this.transition=
$MAExpressionParser.DFA12_transition};org.antlr.lang.extend($MAExpressionParser.DFA12,org.antlr.runtime.DFA,{getDescription:function(){return"260:29: (args= arguments )?"},dummy:null});org.antlr.lang.augmentObject($MAExpressionParser,{tokenNames:["<invalid>","<EOR>","<DOWN>","<UP>","NUMBER","EQUAL","NEQ","GREATER","LESS","GE","LE","PLUS","DASH","STAR","SLASH","CARET","LPAREN","RPAREN","IDENTIFIER","DATE","TIME","STRING","COMMA","AT","QUE","SHP","DOT","LBRACKET","RBRACKET","WS","SLCOMMENT","MLCOMMENT",
"DOUBLE_STRING_CHAR","SINGLE_STRING_CHAR","LETTER","DIGIT","ESC","'for'","'all'","'group'"],FOLLOW_expression_in_dw_expression94:new org.antlr.runtime.BitSet([2,0]),FOLLOW_relationalExpression_in_expression118:new org.antlr.runtime.BitSet([2,32]),FOLLOW_37_in_expression135:new org.antlr.runtime.BitSet([0,192]),FOLLOW_38_in_expression160:new org.antlr.runtime.BitSet([2,0]),FOLLOW_39_in_expression181:new org.antlr.runtime.BitSet([16,0]),FOLLOW_NUMBER_in_expression189:new org.antlr.runtime.BitSet([2,
0]),FOLLOW_additiveExpression_in_relationalExpression243:new org.antlr.runtime.BitSet([2018,0]),FOLLOW_EQUAL_in_relationalExpression262:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_NEQ_in_relationalExpression273:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_GREATER_in_relationalExpression285:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_LESS_in_relationalExpression295:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_GE_in_relationalExpression306:new org.antlr.runtime.BitSet([4003856,0]),
FOLLOW_LE_in_relationalExpression319:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_additiveExpression_in_relationalExpression342:new org.antlr.runtime.BitSet([2,0]),FOLLOW_multiplicativeExpression_in_additiveExpression382:new org.antlr.runtime.BitSet([6146,0]),FOLLOW_PLUS_in_additiveExpression403:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_DASH_in_additiveExpression420:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_multiplicativeExpression_in_additiveExpression441:new org.antlr.runtime.BitSet([6146,
0]),FOLLOW_factorExpression_in_multiplicativeExpression479:new org.antlr.runtime.BitSet([24578,0]),FOLLOW_STAR_in_multiplicativeExpression500:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_SLASH_in_multiplicativeExpression511:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_factorExpression_in_multiplicativeExpression533:new org.antlr.runtime.BitSet([24578,0]),FOLLOW_unaryExpression_in_factorExpression571:new org.antlr.runtime.BitSet([32770,0]),FOLLOW_CARET_in_factorExpression584:new org.antlr.runtime.BitSet([4003856,
0]),FOLLOW_unaryExpression_in_factorExpression595:new org.antlr.runtime.BitSet([32770,0]),FOLLOW_PLUS_in_unaryExpression635:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_DASH_in_unaryExpression645:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_primaryExpression_in_unaryExpression662:new org.antlr.runtime.BitSet([2,0]),FOLLOW_LPAREN_in_primaryExpression689:new org.antlr.runtime.BitSet([4003856,0]),FOLLOW_expression_in_primaryExpression696:new org.antlr.runtime.BitSet([131072,0]),FOLLOW_RPAREN_in_primaryExpression698:new org.antlr.runtime.BitSet([2,
0]),FOLLOW_functionCall_in_primaryExpression711:new org.antlr.runtime.BitSet([2,0]),FOLLOW_IDENTIFIER_in_primaryExpression723:new org.antlr.runtime.BitSet([2,0]),FOLLOW_NUMBER_in_primaryExpression735:new org.antlr.runtime.BitSet([2,0]),FOLLOW_DATE_in_primaryExpression747:new org.antlr.runtime.BitSet([2,0]),FOLLOW_TIME_in_primaryExpression761:new org.antlr.runtime.BitSet([2,0]),FOLLOW_DATE_in_primaryExpression775:new org.antlr.runtime.BitSet([1048576,0]),FOLLOW_TIME_in_primaryExpression781:new org.antlr.runtime.BitSet([2,
0]),FOLLOW_STRING_in_primaryExpression794:new org.antlr.runtime.BitSet([2,0]),FOLLOW_IDENTIFIER_in_functionCall826:new org.antlr.runtime.BitSet([65536,0]),FOLLOW_LPAREN_in_functionCall828:new org.antlr.runtime.BitSet([4134928,0]),FOLLOW_arguments_in_functionCall837:new org.antlr.runtime.BitSet([131072,0]),FOLLOW_RPAREN_in_functionCall842:new org.antlr.runtime.BitSet([2,0]),FOLLOW_expression_in_arguments875:new org.antlr.runtime.BitSet([4194306,0]),FOLLOW_COMMA_in_arguments883:new org.antlr.runtime.BitSet([4003856,
0]),FOLLOW_expression_in_arguments889:new org.antlr.runtime.BitSet([4194306,0])})})();$MA.ExpressionType={UNKNOWN:0,BOOL:1,DOUBLE:2,DATETIME:3,STRING:4};$MA.Expression=function(){this.type=0};$MA.Expression.parse=function(a,b){var c=null;try{var d=new org.antlr.runtime.ANTLRStringStream(a),e=new $MAExpressionLexer(d),f=new org.antlr.runtime.CommonTokenStream(e),g=new $MAExpressionParser(f);g.NodeCreator=new $MA.NodeCreator(b);c=g.dw_expression()}catch(h){}return c};
$MA.Expression.prototype.booleanValue=function(){var a=!1,b=this.evaluate();b!=null&&(typeof b=="boolean"?a=b:typeof b=="number"&&(a=b>0));return a};$MA.Expression.prototype.doubleValue=function(){var a=NaN,b=this.evaluate();b!=null&&(a=typeof b=="number"?b:typeof b=="boolean"?b?1:0:parseFloat(b.toString()));return a};$MA.Expression.prototype.dateValue=function(){var a=null,b=this.evaluate();b!=null&&b instanceof Date&&(a=b);return a};$MA.Expression.prototype.stringValue=function(){return this.toString()};
$MA.Expression.prototype.evaluate=function(){return NaN};$MA.Expression.prototype.getArgs=function(){return this.args};$MA.Expression.prototype.toString=function(){var a=null,b=this.evaluate();b!=null&&(a=b instanceof Date?$MA.format(b):b.toString());return a};$MA.AggregateType={ALL:0,GROUP:1};$MA.Expression.AggregateNode=function(a,b,c,d){$MA.Expression.call(this);this.dvObj=a;this.expr=b;this.type=b.type;this.aggrType=c;this.level=d};$MA.Expression.AggregateNode.prototype=new $MA.Expression;
$MA.Expression.AggregateNode.prototype.evaluate=function(){return this.expr.evaluate()};$MA.Expression.ColumnNode=function(a,b,c){$MA.Expression.call(this);this.id=a;this.dvObj=b;this.table=c};$MA.Expression.ColumnNode.prototype=new $MA.Expression;$MA.Expression.ColumnNode.prototype.evaluate=function(){return(this.table?this.table.getRow(this.dvObj.exprRow):this.dvObj.getRow(this.dvObj.exprRow))[this.id]};$MA.ConstantType={DOUBLE:0,STRING:1,DATE:2,TIME:3,DATETIME:4};
$MA.Expression.ConstantNode=function(a,b){$MA.Expression.call(this);switch(a){case $MA.ConstantType.DOUBLE:this.value=parseFloat(b.toString());this.type=$MA.ExpressionType.DOUBLE;break;case $MA.ConstantType.STRING:this.value=b;this.type=$MA.ExpressionType.STRING;break;case $MA.ConstantType.DATE:this.value=$MA.parseDate(b);this.type=$MA.ExpressionType.DATETIME;break;case $MA.ConstantType.TIME:this.value=$MA.parseTime(b);this.type=$MA.ExpressionType.DATETIME;break;case $MA.ConstantType.DATETIME:this.value=
$MA.parseDateTime(b),this.type=$MA.ExpressionType.DATETIME}};$MA.Expression.ConstantNode.prototype=new $MA.Expression;$MA.Expression.ConstantNode.prototype.evaluate=function(){return this.value};$MA.Expression.ConstantNode.prototype.verify=function(){return $MA.ExpressionErrors.OK};$MA.Expression.FunctionNode=function(a,b){$MA.Expression.call(this);this.args=b;if(a!=void 0)this.name=a.toLowerCase(),this.type=$MA.Expression.Functions.getFunctionReturnType(this.name)};
$MA.Expression.FunctionNode.prototype=new $MA.Expression;$MA.Expression.FunctionNode.prototype.evaluate=function(){return $MA.Expression.Functions.invoke(this.name,this.args)};$MA.OperatorType={ADD:0,DIVIDE:1,EQUAL:2,EXPON:3,GREATERTHAN:4,GREATERTHANEQUAL:5,LESSTAHN:6,LESSTHANEQUAL:7,MINUS:8,MULTIPLY:9,NOTEQUAL:10,UNARYMINUS:11};
$MA.Expression.OperatorFunctionNode=function(a,b){$MA.Expression.FunctionNode.call(this,void 0,b);this.operId=a;this.type=$MA.Expression.OperatorFunctions.getOperatorReturnType(a,this.args)};$MA.Expression.OperatorFunctionNode.prototype=new $MA.Expression.FunctionNode;$MA.Expression.OperatorFunctionNode.prototype.evaluate=function(){return $MA.Expression.OperatorFunctions.invoke(this.operId,this.args)};$MA.Expression.VariableNode=function(a,b){$MA.Expression.call(this);this.dvObj=a;this.name=b;this.initialize()};
$MA.Expression.VariableNode.prototype=new $MA.Expression;
$MA.Expression.VariableNode.prototype.initialize=function(){if(this.id==void 0){var a=this.dvObj;if(a!=void 0)if(a=a.getTableColumn(this.name),a!=void 0)switch(this.id=a.id,a.type){case $MA.TableColumnType.DOUBLE:this.type=$MA.ExpressionType.DOUBLE;break;case $MA.TableColumnType.STRING:this.type=$MA.ExpressionType.STRING;break;case $MA.TableColumnType.DATETIME:this.type=$MA.ExpressionType.DATETIME;break;default:$MA.log.error($MA.getLocalisation(null,"Error_NoExpressionType","Unsupported expression type"))}else if(a=
$MA.BI.GetDAVariable(this.name),a!=void 0){switch(a.variableType.toLowerCase()){case "double":case "float":case "integer":case "boolean":this.type=$MA.ExpressionType.DOUBLE;break;case "enum":this.type=$MA.ExpressionType.STRING;break;case "date":this.type=$MA.ExpressionType.DATETIME}this.variableindex=a.variableindex}}};
$MA.Expression.VariableNode.prototype.evaluate=function(){var a;this.id!=void 0?a=this.dvObj.getItem(this.dvObj.exprRow,this.id):this.variableindex!=void 0&&(a=$MA.BI.DAVariables.items[this.variableindex].getValue());return a};$MA.NodeCreator=function(a){this.dvObj=a};$MA.NodeCreator.prototype.createConstantNode=function(a,b){return new $MA.Expression.ConstantNode(a,b)};$MA.NodeCreator.prototype.createVariableNode=function(a){return new $MA.Expression.VariableNode(this.dvObj,a)};
$MA.NodeCreator.prototype.createOperatorNode=function(a,b){return new $MA.Expression.OperatorFunctionNode(a,b)};$MA.NodeCreator.prototype.createFunctionNode=function(a,b){var c=null;$MA.Expression.Functions.isSupported(a,b)&&(c=new $MA.Expression.FunctionNode(a,b));return c};$MA.NodeCreator.prototype.createAggregateNode=function(a,b,c){c=parseInt(c,10);return new $MA.Expression.AggregateNode(this.dvObj,a,b,c)};
$MA.Expression.FunctionId={ABS:0,AND:1,CEILING:2,COS:3,DATE:4,DAY:5,DAYNUMBER:6,EXP:7,FACT:8,FLOOR:9,HOUR:10,IF:11,INT:12,LEFT:13,LEFTTRIM:14,LEN:15,LOG:16,LOGTEN:17,LOWER:18,MATCH:19,MID:20,MINUTE:21,MOD:22,MONTH:23,NEG:24,NOT:25,OR:26,POS:27,RELATIVEDATE:28,RELATIVETIME:29,REPLACE:30,RIGHT:31,RIGHTTRIM:32,ROUND:33,SECOND:34,SIGN:35,SIN:36,SQRT:37,STRING:38,TAN:39,TRIM:40,TRUNCATE:41,UPPER:42,WORDCAP:43,YEAR:44};$MA.Expression.Functions=function(){};$MA.Expression.Functions.ID=0;
$MA.Expression.Functions.SIGNATURE=1;$MA.Expression.Functions.DISPLAYSTRING=2;$MA.Expression.Functions.RETURNTYPE=3;$MA.Expression.Functions.FUNCTION=4;$MA.Expression.Functions._abs=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:a>0?a:-a};$MA.Expression.Functions._and=function(a){var b=a[1];if(!a[0].booleanValue())return!1;return b.booleanValue()};$MA.Expression.Functions._ceiling=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:Math.ceil(a)};
$MA.Expression.Functions._cos=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:Math.cos(a)};$MA.Expression.Functions._date=function(a){if(a.length<3)return NaN;var b=a[0].doubleValue(),c=a[1].doubleValue(),d=a[2].doubleValue(),b=new Date(b,c-1,d);a.length>3&&(c=a[3].doubleValue(),b.setHours(c));a.length>4&&(c=a[4].doubleValue(),b.setMinutes(c));a.length>5&&(a=a[5].doubleValue(),b.setSeconds(a));return b};$MA.Expression.Functions._day=function(a){a=a[0].dateValue();return a==null?NaN:a.getDate()};
$MA.Expression.Functions._dayNumber=function(a){a=a[0].dateValue();return a==null?NaN:a.getDay()+1};$MA.Expression.Functions._exp=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:Math.pow(Math.exp(1),a)};$MA.Expression.Functions._fact=function(a){var b=a[0].doubleValue(),a=Math.floor(b);if(isNaN(b)||a<=0||a!=b||a>=171)a=NaN;else{var b=1,c;for(c=2;c<=a;c+=1)b*=c;a=b}return a};$MA.Expression.Functions._floor=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:Math.floor(a)};
$MA.Expression.Functions._hour=function(a){var b=a[0],c=a[1],d=a[2];a.length==1?(a=b.dateValue(),a=a==null?NaN:a.getHours()):a=b.booleanValue()?c.evaluate():d.evaluate();return a};$MA.Expression.Functions._if=function(a){var b=a[1],c=a[2];return a[0].booleanValue()?b.evaluate():c.evaluate()};$MA.Expression.Functions._int=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:Math.floor(a)};
$MA.Expression.Functions._left=function(a){var b=a[1],a=a[0].stringValue();if(a==null)return null;b=b.doubleValue();return b<1?null:a.substring(0,Math.min(b,a.length))};$MA.Expression.Functions._leftTrim=function(a){a=a[0].stringValue();return a!=null?a.replace(/^\s+/,""):null};$MA.Expression.Functions._len=function(a){a=a[0].stringValue();return a!=null?a.length:NaN};$MA.Expression.Functions._log=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:Math.log(a)};
$MA.Expression.Functions._logTen=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:Math.log(a)/Math.log(10)};$MA.Expression.Functions._lower=function(a){a=a[0].stringValue();return a!=null?a.toLowerCase():null};$MA.Expression.Functions._match=function(a){var b=a[1],a=a[0].stringValue(),b=b.stringValue();if(a==null||b==null)return!1;return a.match(RegExp(b))!=void 0};
$MA.Expression.Functions._mid=function(a){var b=a[1],c=a[2],a=a[0].stringValue();if(a==null)return null;var b=b.doubleValue(),d=NaN,d=c!=void 0?c.doubleValue():a.length(),c=null;if(isNaN(b)||isNaN(d))c=null;else{var e=0;b>0&&(e=b-1);b=d;a.length>e+b?c=a.substring(e,e+b):a.length>e&&(c=a.substring(e,a.length))}return c};$MA.Expression.Functions._minute=function(a){a=a[0].dateValue();return a==null?NaN:a.getMinutes()};
$MA.Expression.Functions._mod=function(a){var b=a[1],a=a[0].doubleValue();if(isNaN(a))return!1;b=b.doubleValue();if(isNaN(b))return!1;return a%b};$MA.Expression.Functions._month=function(a){a=a[0].dateValue();return a==null?NaN:a.getMonth()+1};$MA.Expression.Functions._neg=function(a){a=a[0].doubleValue();if(isNaN(a))return NaN;return-a};$MA.Expression.Functions._not=function(a){return!a[0].booleanValue()};$MA.Expression.Functions._or=function(a){var b=a[1];if(a[0].booleanValue())return!0;return b.booleanValue()};
$MA.Expression.Functions._pos=function(a){var b=a[1],c=a[2],a=a[0].stringValue(),b=b.stringValue(),d=0;if(a==null||b==null)return NaN;c!=void 0&&(d=c.doubleValue(),d>0&&(d-=1));if(isNaN(d))return NaN;return a.indexOf(b,d)+1};$MA.Expression.Functions._relativeDate=function(a){var b=a[1],a=a[0].dateValue();if(a==null)return null;b=b.doubleValue();if(isNaN(b))return null;a.setDate(a.getDate()+b);return a};
$MA.Expression.Functions._relativeTime=function(a){var b=a[1],a=a[0].dateValue();if(a==null)return null;b=b.doubleValue();if(isNaN(b))return null;var c=a.getTime();c+=b*1E3;a.setTime(c);return a};$MA.Expression.Functions._replace=function(a){var b=a[1],c=a[2],d=a[3],a=a[0].stringValue(),b=b.doubleValue(),c=c.doubleValue(),d=d.stringValue();if(a==null||isNaN(b)||isNaN(c)||d==null)return null;b>0&&(b-=1);c=a.substring(b,b+c);return a.replace(c,d)};
$MA.Expression.Functions._right=function(a){var b=a[1],a=a[0].stringValue();if(a==null)return null;b=b.doubleValue();return b<1?null:a.substring(a.length-Math.min(b,a.length),a.length)};$MA.Expression.Functions._round=function(a){var b=a[1],a=a[0].doubleValue(),b=b.doubleValue();return isNaN(a)||isNaN(b)?NaN:parseFloat(a.toFixed(b))};$MA.Expression.Functions._rightTrim=function(a){a=a[0].stringValue();return a!=null?a.replace(/\s+$/,""):null};
$MA.Expression.Functions._second=function(a){a=a[0].dateValue();return a==null?NaN:a.getSeconds()};$MA.Expression.Functions._sign=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:a<0?-1:a>0?1:0};$MA.Expression.Functions._sin=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:Math.sin(a)};$MA.Expression.Functions._sqrt=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:Math.sqrt(a)};$MA.Expression.Functions._string=function(a){return a[0].stringValue()};
$MA.Expression.Functions._tan=function(a){a=a[0].doubleValue();return isNaN(a)?NaN:Math.tan(a)};$MA.Expression.Functions._trim=function(a){a=a[0].stringValue();return a!=null?a.trim():null};$MA.Expression.Functions._truncate=function(a){var b=a[0].doubleValue(),c=0;isNaN(b)?a=NaN:(a.length==2&&(c=a[1].doubleValue()),c=Math.pow(10,c),b*=c,b=b>=0?Math.floor(b+5.0E-15):Math.ceil(b-5.0E-15),a=b/c);return a};
$MA.Expression.Functions._upper=function(a){a=a[0].stringValue();return a!=null?a.toUpperCase():null};$MA.Expression.Functions._wordCap=function(a){a=a[0].stringValue();if(a!=null){var a=a.toLowerCase(),b="",c,d=!0,e=a.length,f;for(f=0;f<e;f++)c=a.charAt(f),d&&c!=" "?(b+=c.toUpperCase(),d=!1):(c==" "&&(d=!0),b+=c);return b}return null};$MA.Expression.Functions._year=function(a){a=a[0].dateValue();return a==null?NaN:a.getFullYear()};
$MA.Expression.Functions.ids=new $MA.Hash("abs",[$MA.Expression.FunctionId.ABS,"x","x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._abs],"and",[$MA.Expression.FunctionId.ABS,"bb","b",$MA.ExpressionType.BOOLEAN,$MA.Expression.Functions._and],"ceiling",[$MA.Expression.FunctionId.CEILING,"x","x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._ceiling],"cos",[$MA.Expression.FunctionId.COS,"x","x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._cos],"date",[$MA.Expression.FunctionId.DATE,
"s","s",$MA.ExpressionType.DATETIME,$MA.Expression.Functions._date],"day",[$MA.Expression.FunctionId.DAY,"d","d",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._day],"daynumber",[$MA.Expression.FunctionId.DAYNUMBER,"d","d",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._dayNumber],"exp",[$MA.Expression.FunctionId.EXP,"x","x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._exp],"fact",[$MA.Expression.FunctionId.FACT,"x","x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._fact],"floor",
[$MA.Expression.FunctionId.FLOOR,"x","x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._floor],"hour",[$MA.Expression.FunctionId.HOUR,"d","t",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._hour],"if",[$MA.Expression.FunctionId.IF,"boo","b, t, f",$MA.ExpressionType.Unknown,$MA.Expression.Functions._if],"int",[$MA.Expression.FunctionId.INT,"x","x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._int],"left",[$MA.Expression.FunctionId.LEFT,"sx","s, x",$MA.ExpressionType.STRING,$MA.Expression.Functions._left],
"lefttrim",[$MA.Expression.FunctionId.LEFTTRIM,"s","s",$MA.ExpressionType.STRING,$MA.Expression.Functions._leftTrim],"len",[$MA.Expression.FunctionId.LEN,"s","s",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._len],"log",[$MA.Expression.FunctionId.LOG,"x","x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._log],"logten",[$MA.Expression.FunctionId.LOGTEN,"x","x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._logTen],"lower",[$MA.Expression.FunctionId.LOWER,"s","s",$MA.ExpressionType.STRING,
$MA.Expression.Functions._lower],"match",[$MA.Expression.FunctionId.MATCH,"ss","s, s",$MA.ExpressionType.BOOL,$MA.Expression.Functions._match],"mid",[$MA.Expression.FunctionId.MID,"sxX","s, start, len",$MA.ExpressionType.STRING,$MA.Expression.Functions._mid],"minute",[$MA.Expression.FunctionId.MINUTE,"d","t",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._minute],"mod",[$MA.Expression.FunctionId.MOD,"xx","x, x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._mod],"month",[$MA.Expression.FunctionId.MONTH,
"d","d",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._month],"neg",[$MA.Expression.FunctionId.NEG,"d","d",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._neg],"not",[$MA.Expression.FunctionId.NOT,"b","b",$MA.ExpressionType.BOOLEAN,$MA.Expression.Functions._not],"or",[$MA.Expression.FunctionId.OR,"bb","b",$MA.ExpressionType.BOOLEAN,$MA.Expression.Functions._or],"pos",[$MA.Expression.FunctionId.POS,"ssX","s, s, x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._pos],"relativedate",[$MA.Expression.FunctionId.RELATIVEDATE,
"dx","d, x",$MA.ExpressionType.DATETIME,$MA.Expression.Functions._relativeDate],"relativetime",[$MA.Expression.FunctionId.RELATIVETIME,"dx","t, x",$MA.ExpressionType.DATETIME,$MA.Expression.Functions._relativeTime],"replace",[$MA.Expression.FunctionId.REPLACE,"sxxs","s, x, y, s",$MA.ExpressionType.STRING,$MA.Expression.Functions._replace],"right",[$MA.Expression.FunctionId.RIGHT,"sx","s, x",$MA.ExpressionType.STRING,$MA.Expression.Functions._right],"righttrim",[$MA.Expression.FunctionId.RIGHTTRIM,
"s","s",$MA.ExpressionType.STRING,$MA.Expression.Functions._rightTrim],"round",[$MA.Expression.FunctionId.ROUND,"xx","x, x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._round],"second",[$MA.Expression.FunctionId.SECOND,"d","t",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._second],"sign",[$MA.Expression.FunctionId.SIGN,"x","x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._sign],"sin",[$MA.Expression.FunctionId.SIN,"x","x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._sin],
"sqrt",[$MA.Expression.FunctionId.SQRT,"x","x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._sqrt],"string",[$MA.Expression.FunctionId.STRING,"o","o",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._string],"tan",[$MA.Expression.FunctionId.TAN,"x","x",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._tan],"trim",[$MA.Expression.FunctionId.TRIM,"s","s",$MA.ExpressionType.STRING,$MA.Expression.Functions._trim],"truncate",[$MA.Expression.FunctionId.TRUNCATE,"xX","x, y",$MA.ExpressionType.DOUBLE,
$MA.Expression.Functions._truncate],"upper",[$MA.Expression.FunctionId.UPPER,"s","s",$MA.ExpressionType.STRING,$MA.Expression.Functions._upper],"wordcap",[$MA.Expression.FunctionId.WORDCAP,"s","s",$MA.ExpressionType.STRING,$MA.Expression.Functions._wordCap],"year",[$MA.Expression.FunctionId.YEAR,"d","d",$MA.ExpressionType.DOUBLE,$MA.Expression.Functions._year]);$MA.Expression.Functions.isSupported=function(a){return this.ids.containsKey(a.toLowerCase())};
$MA.Expression.Functions.invoke=function(a,b){var c=null;this.ids.containsKey(a)&&(c=(0,this.ids.get(a)[this.FUNCTION])(b));return c};$MA.Expression.Functions.getFunctionSignature=function(a){var b=null;this.ids.containsKey(a)&&(b=this.ids.get(a)[this.SIGNATURE]);return b};$MA.Expression.Functions.getFunctionReturnType=function(a){var b=$MA.ExpressionType.Unknown;this.ids.containsKey(a)&&(b=this.ids.get(a)[this.RETURNTYPE]);return b};$MA.Expression.OperatorFunctions=function(){};
$MA.Expression.OperatorFunctions.SIGNATURE=0;$MA.Expression.OperatorFunctions.RETURNTYPE=1;$MA.Expression.OperatorFunctions.FUNCTION=2;$MA.Expression.OperatorFunctions._add=function(a){var b=a[0],a=a[1],c=$MA.Expression.OperatorFunctions.getReturnType(b,a),d=null;c==$MA.ExpressionType.DOUBLE?d=b.doubleValue()+a.doubleValue():c==$MA.ExpressionType.STRING?d=b.stringValue()+a.stringValue():c==$MA.ExpressionType.DATETIME&&(d=b.stringValue()+a.stringValue());return d};
$MA.Expression.OperatorFunctions._divide=function(a){var b=a[0],a=a[1],c=null;$MA.Expression.OperatorFunctions.getReturnType(b,a)==$MA.ExpressionType.DOUBLE&&(c=b.doubleValue()/a.doubleValue());return c};
$MA.Expression.OperatorFunctions._equal=function(a){var b=a[0],a=a[1],c=$MA.Expression.OperatorFunctions.getReturnType(b,a),d=!1;c==$MA.ExpressionType.DOUBLE?d=b.doubleValue()==a.doubleValue():c==$MA.ExpressionType.STRING?d=b.stringValue()==a.stringValue():c==$MA.ExpressionType.DATETIME&&(d=$MA.Expression.OperatorFunctions.compareDate(b,a)==0);return d};
$MA.Expression.OperatorFunctions._expOn=function(a){var b=a[1],a=a[0].doubleValue(),b=b.doubleValue();if(isNaN(a)||isNaN(b))a=NaN;else if(a<0&&b>0&&b<1)var c=Math.exp(1)/b,a=Math.floor(c)!=c?NaN:(c/2==c)/2?NaN:-Math.pow(-a,b);else a=Math.pow(a,b);return a};
$MA.Expression.OperatorFunctions._greaterThan=function(a){var b=a[0],a=a[1],c=$MA.Expression.OperatorFunctions.getReturnType(b,a),d=!1;c==$MA.ExpressionType.DOUBLE?d=b.doubleValue()>a.doubleValue():c==$MA.ExpressionType.STRING?d=b.stringValue()>a.stringValue():c==$MA.ExpressionType.DATETIME&&(d=$MA.Expression.OperatorFunctions.compareDate(b,a)>0);return d};
$MA.Expression.OperatorFunctions._greaterThanEqual=function(a){var b=a[0],a=a[1],c=$MA.Expression.OperatorFunctions.getReturnType(b,a),d=!1;c==$MA.ExpressionType.DOUBLE?d=b.doubleValue()>=a.doubleValue():c==$MA.ExpressionType.STRING?d=b.stringValue()>=a.stringValue():c==$MA.ExpressionType.DATETIME&&(d=$MA.Expression.OperatorFunctions.compareDate(b,a)>=0);return d};
$MA.Expression.OperatorFunctions._lessThan=function(a){var b=a[0],a=a[1],c=$MA.Expression.OperatorFunctions.getReturnType(b,a),d=!1;c==$MA.ExpressionType.DOUBLE?d=b.doubleValue()<a.doubleValue():c==$MA.ExpressionType.STRING?d=b.stringValue()<a.stringValue():c==$MA.ExpressionType.DATETIME&&(d=$MA.Expression.OperatorFunctions.compareDate(b,a)<0);return d};
$MA.Expression.OperatorFunctions._lessThanEqual=function(a){var b=a[0],a=a[1],c=$MA.Expression.OperatorFunctions.getReturnType(b,a),d=!1;c==$MA.ExpressionType.DOUBLE?d=b.doubleValue()<=a.doubleValue():c==$MA.ExpressionType.STRING?d=b.stringValue()<=a.stringValue():c==$MA.ExpressionType.DATETIME&&(d=$MA.Expression.OperatorFunctions.compareDate(b,a)<=0);return d};
$MA.Expression.OperatorFunctions._minus=function(a){var b=a[0],a=a[1],c=!1;$MA.Expression.OperatorFunctions.getReturnType(b,a)==$MA.ExpressionType.DOUBLE&&(c=b.doubleValue()-a.doubleValue());return c};$MA.Expression.OperatorFunctions._multiply=function(a){var b=a[0],a=a[1],c=!1;$MA.Expression.OperatorFunctions.getReturnType(b,a)==$MA.ExpressionType.DOUBLE&&(c=b.doubleValue()*a.doubleValue());return c};
$MA.Expression.OperatorFunctions._notEqual=function(a){var b=a[0],a=a[1],c=$MA.Expression.OperatorFunctions.getReturnType(b,a),d=!1;c==$MA.ExpressionType.DOUBLE?d=b.doubleValue()!=a.doubleValue():c==$MA.ExpressionType.STRING?d=b.stringValue()!=a.stringValue():c==$MA.ExpressionType.DATETIME&&(d=$MA.Expression.OperatorFunctions.compareDate(b,a)!=0);return d};$MA.Expression.OperatorFunctions._unaryMinus=function(a){a=a[0].doubleValue();return isNaN(a)?a:-a};
$MA.Expression.OperatorFunctions.ids=new $MA.Hash($MA.OperatorType.ADD,["oo",$MA.ExpressionType.UNKNOWN,$MA.Expression.OperatorFunctions._add],$MA.OperatorType.DIVIDE,["xx",$MA.ExpressionType.UNKNOWN,$MA.Expression.OperatorFunctions._divide],$MA.OperatorType.EQUAL,["oo",$MA.ExpressionType.BOOL,$MA.Expression.OperatorFunctions._equal],$MA.OperatorType.EXPON,["xx",$MA.ExpressionType.DOUBLE,$MA.Expression.OperatorFunctions._expOn],$MA.OperatorType.GREATERTHAN,["oo",$MA.ExpressionType.BOOL,$MA.Expression.OperatorFunctions._greaterThan],
$MA.OperatorType.GREATERTHANEQUAL,["oo",$MA.ExpressionType.BOOL,$MA.Expression.OperatorFunctions._greaterThanEqual],$MA.OperatorType.LESSTHAN,["oo",$MA.ExpressionType.BOOL,$MA.Expression.OperatorFunctions._lessThan],$MA.OperatorType.LESSTHANEQUAL,["oo",$MA.ExpressionType.BOOL,$MA.Expression.OperatorFunctions._lessThanEqual],$MA.OperatorType.MINUS,["xx",$MA.ExpressionType.UNKNOWN,$MA.Expression.OperatorFunctions._minus],$MA.OperatorType.MULTIPLY,["xx",$MA.ExpressionType.UNKNOWN,$MA.Expression.OperatorFunctions._multiply],
$MA.OperatorType.NOTEQUAL,["oo",$MA.ExpressionType.BOOL,$MA.Expression.OperatorFunctions._notEqual],$MA.OperatorType.UNARYMINUS,["x",$MA.ExpressionType.DOUBLE,$MA.Expression.OperatorFunctions._unaryMinus]);$MA.Expression.OperatorFunctions.invoke=function(a,b){var c=null;this.ids.containsKey(a)&&(c=(0,this.ids.get(a)[this.FUNCTION])(b));return c};$MA.Expression.OperatorFunctions.getFunctionSignature=function(a){var b=null;this.ids.containsKey(a)&&(b=this.ids.get(a)[this.SIGNATURE]);return b};
$MA.Expression.OperatorFunctions.getReturnType=function(a,b){var c=a.type,d=b.type;return c==void 0&&d!=void 0?d:d==void 0&&c!=void 0?c:c==$MA.ExpressionType.DOUBLE&&d==$MA.ExpressionType.DOUBLE?$MA.ExpressionType.DOUBLE:c==$MA.ExpressionType.DATETIME&&d==$MA.ExpressionType.DATETIME?$MA.ExpressionType.DATETIME:$MA.ExpressionType.STRING};
$MA.Expression.OperatorFunctions.getOperatorReturnType=function(a,b){if(this.ids.containsKey(a)){var c=this.ids.get(a);switch(a){case $MA.OperatorType.ADD:case $MA.OperatorType.DIVIDE:case $MA.OperatorType.MINUS:case $MA.OperatorType.MULTIPLY:return this.getReturnType(b[0],b[1]);default:return c[this.RETRUNTYPE]}}return $MA.ExpressionType.UNKNOWN};
$MA.Expression.OperatorFunctions.compareDate=function(a,b){if(a==void 0||b==void 0)return!1;var c=a.dateValue(),d=b.dateValue();if(c==void 0)return-1;return d==void 0?1:c.getTime()-d.getTime()};$MA.Point=function(a,b){this.x=a;this.y=b};$MA.Brush=function(a){this.color=$MA.getColorInt(a)};
$MA.Brush.prototype.toString=function(){var a;if(typeof this.color=="number"){for(a=Number(this.color).toString(16);a.length<6;)a="0"+a;a="#"+a}else a=typeof this.color=="string"?this.color:this.color.toString();return a};$MA.Brush.prototype.clone=function(){return new $MA.Brush(this.color)};$MA.Brushes=function(){};$MA.Brushes.white=new $MA.Brush(16777215);$MA.Brushes.black=new $MA.Brush(0);$MA.Brushes.gray=new $MA.Brush(7829367);$MA.Brushes.transparent=new $MA.Brush("transparent");
$MA.GradientBrush=function(a,b){this.colorStops=a;this.direction=b};$MA.GradientBrush.prototype.createLinearGradient=function(a,b,c,d,e){a=this.direction==1?a.createLinearGradient(b,c,b,e):this.direction==2?a.createLinearGradient(b,c,d,c):a.createLinearGradient(b,c,d,e);for(b=0;b<this.colorStops.length;b++)c=this.colorStops[b],a.addColorStop(c[0],c[1]);return a};
$MA.GradientBrush.prototype.createRadialGradient=function(a,b,c,d,e,f,g){a=a.createRadialGradient(b,c,d,e,f,g);for(b=0;b<this.colorStops.length;b++)c=this.colorStops[b],a.addColorStop(c[0],c[1]);return a};$MA.ContextHelper=function(){};
$MA.ContextHelper.roundRect=function(a,b,c,d,e,f){a.moveTo(b,c+f);a.lineTo(b,c+e-f);a.quadraticCurveTo(b,c+e,b+f,c+e);a.lineTo(b+d-f,c+e);a.quadraticCurveTo(b+d,c+e,b+d,c+e-f);a.lineTo(b+d,c+f);a.quadraticCurveTo(b+d,c,b+d-f,c);a.lineTo(b+f,c);a.quadraticCurveTo(b,c,b,c+f)};
$MA.ContextHelper.drawStar=function(a,b,c,d,e,f,g){a.beginPath();e-=3;d/=2;var h=0.4;g==3&&(h=0.3);var j=d*h,l=e;e*=h;for(h=0;h<=2*g;++h){var n=h*Math.PI/g-Math.PI/2;a.lineTo(b+(h%2==0?l:e)*Math.cos(n),c+(h%2==0?d:j)*Math.sin(n))}f?a.stroke():a.fill();a.closePath()};
$MA.ContextHelper.drawTriangle=function(a,b,c,d,e,f){a.beginPath();f=="bottom"?(a.moveTo(b-d,c+e),a.lineTo(b+d,c+e),a.lineTo(b,c-e)):f=="left"?(a.moveTo(b-d,c+e),a.lineTo(b-d,c-e),a.lineTo(b+d,c)):f=="right"?(a.moveTo(b+d,c+e),a.lineTo(b+d,c-e),a.lineTo(b-d,c)):f=="top"&&(a.moveTo(b-d,c-e),a.lineTo(b+d,c-e),a.lineTo(b,c+e));a.closePath();a.fill();a.lineWidth=1;a.stroke()};$MA.ContextHelper.drawCircle=function(a,b,c,d){a.beginPath();a.arc(b,c,d,0,Math.PI*2,!0);a.closePath()};
$MA.ContextHelper.drawDiamond=function(a,b,c,d,e){a.beginPath();a.moveTo(b-d,c);a.lineTo(b,c-e);a.lineTo(b+d,c);a.lineTo(b,c+e);a.lineTo(b-d,c);a.closePath()};$MA.getStrokeInsetColors=function(a){var a=$MA.getColorInt(a),b=$MA.rgb2hsv((a&16711680)>>16,(a&65280)>>8,a&255),a=$MA.hsv2rgb(b[0],b[1],b[2]*0.75),b=$MA.hsv2rgb(b[0],0.5*b[1],1),a="rgb("+Math.round(a[0])+","+Math.round(a[1])+","+Math.round(a[2])+")",b="rgb("+Math.round(b[0])+","+Math.round(b[1])+","+Math.round(b[2])+")";return[a,b]};
$MA.Graph=function(a,b){this.id=a;b instanceof Array?this.graphTypes=b:"string"!==typeof b&&(b="column");if("string"===typeof b)this.graphTypes=[],this.graphTypes.push({name:"default",type:b});this.graphObjs=[];this.seriesNames=new $MA.Hash;var c,d=this.graphTypes.length;for(c=0;c<d;c++){var b=this.graphTypes[c],e=this.createGraphObject(b.type);e.name=b.name;e.graphType=b.type;e.seriesStates=new $MA.Hash;e.legendStates=new $MA.Hash;if("pie"===b.type||"donut"===b.type)e.seriesMasks=new $MA.Hash;this.graphObjs.push(e)}if(0<
this.graphObjs.length)this.graphObj=this.graphObjs[0],this.graphType=this.graphObj.graphType};$MA.Graph.prototype.bind=function(a,b){if(this.events==void 0)this.events=new $MA.Hash;this.events.set(a,b)};$MA.Graph.prototype.unbind=function(a){this.events&&this.events.remove(a)};$MA.Graph.prototype.trigger=function(a,b){if(this.events){var c=this.events.get(a);c&&c(b)}};
$MA.Graph.prototype.createGraphObject=function(a){var b=null;switch(a){case "column":b=new $MA.Graph.ColumnGraphObject(this);break;case "hierarchycolumn":b=new $MA.Graph.ColumnGraphObject(this);b.isHierarchy=!0;break;case "waterfallcolumn":b=new $MA.Graph.ColumnGraphObject(this);b.isWaterfall=!0;break;case "hierarchywaterfallcolumn":b=new $MA.Graph.ColumnGraphObject(this);b.isHierarchy=b.isWaterfall=!0;break;case "stackedcolumn":b=new $MA.Graph.ColumnGraphObject(this);b.isStacked=!0;break;case "line":b=
new $MA.Graph.LineGraphObject(this);break;case "stackedline":b=new $MA.Graph.LineGraphObject(this);b.isStacked=!0;break;case "pie":b=new $MA.Graph.PieGraphObject(this);break;case "donut":b=new $MA.Graph.PieGraphObject(this);b.isDonut=!0;break;case "bubble":b=new $MA.Graph.BubbleGraphObject(this);break;case "hundredpercentstackedcolumn":b=new $MA.Graph.ColumnGraphObject(this);b.isStacked=!0;b.isHundredPercent=!0;break;case "tablebar":b=new $MA.Graph.TableBarGraphObject(this);break;case "waterfallbar":b=
new $MA.Graph.TableBarGraphObject(this);b.isWaterfall=!0;break;case "verticalline":b=new $MA.Graph.TableBarGraphObject(this);b.isVertical=!0;break;case "hierarchyline":b=new $MA.Graph.LineGraphObject(this);b.isHierarchy=!0;break;case "hierarchystackedcolumn":b=new $MA.Graph.ColumnGraphObject(this);b.isHierarchy=!0;b.isStacked=!0;break;case "hierarchy100pctstackedcolumn":b=new $MA.Graph.ColumnGraphObject(this);b.isHierarchy=!0;b.isStacked=!0;b.isHundredPercent=!0;break;default:b=new $MA.Graph.ColumnGraphObject(this)}return b};
$MA.Graph.prototype.setTitle=function(a){this.graphObj.title=a};$MA.Graph.prototype.setValueBubble=function(a){this.graphObj.valueBubble=a};$MA.Graph.prototype.setValueBubbleStyle=function(a){var b=!1;if(a!=void 0&&(a=a.toString().toLowerCase(),a==$MA.ValueBubbleStyle.TOP||a==$MA.ValueBubbleStyle.FLOAT||a==$MA.ValueBubbleStyle.FLOATTOP))this.graphObj.valueBubbleStyle=a,b=!0;return b};$MA.Graph.prototype.getValueBubbleStyle=function(){return this.graphObj.valueBubbleStyle};
$MA.Graph.prototype.getValueBubble=function(){return this.graphObj.valueBubble};$MA.Graph.prototype.checkValueBubbleStyle=function(a){return this.graphObj.valueBubbleStyle==a};$MA.Graph.prototype.getColorDataList=function(){return this.graphObj.getColorDataList()};$MA.Graph.prototype.getShape=function(a){return this.graphObj.getShape(a)};$MA.Graph.prototype.getDrawContext=function(a){return this.graphObj.getDrawContext(a)};
$MA.Graph.prototype.setOverlap=function(a){if(!(a<0||a>100)&&this.graphObj.overlap*100!=a)this.graphObj.overlap=a/100};
$MA.Graph.prototype.setLegend=function(a){var b=typeof a;if("string"===b||"object"===b){var c=this.graphObj.legend;if("string"===b){if(!(this.graphObj instanceof $MA.Graph.TableBarGraphObject&&(a=="left"||a=="right"||a=="top"))){a=a.toLowerCase();switch(a){case "left":a=$MA.Graph.LegendType.LEFT;break;case "right":a=$MA.Graph.LegendType.RIGHT;break;case "top":a=$MA.Graph.LegendType.TOP;break;case "bottom":a=$MA.Graph.LegendType.BOTTOM;break;default:a=$MA.Graph.LegendType.NONE}c.location=a}}else c.config(a)}};
$MA.Graph.prototype.getLegendPosition=function(){return this.graphObj.legend.location};$MA.Graph.prototype.setLegendOffset=function(a,b){if(!(a==void 0||b==void 0)){var c=parseInt(a,10),d=parseInt(b,10);isNaN(c)&&($MA.log.error($MA.getLocalisation(null,"Error_parse","Legend offset X = '")+a+"' is not a number"),c=0);isNaN(d)&&($MA.log.error($MA.getLocalisation(null,"Error_parse","Legend offset Y = '")+b+"' is not a number"),d=0);this.graphObj.legend.offsetX=c;this.graphObj.legend.offsetY=d}};
$MA.Graph.prototype.setDataPointsColor=function(a,b){var c=b?this.getGraphObj(b):void 0;if(c!==void 0)c.dataPointsColor=a;else for(var d=this.graphObjs.length,c=0;c<d;c++)this.graphObjs[c].dataPointsColor=a};$MA.Graph.prototype.getAxis=function(a,b){var c=b;typeof b=="string"&&(c=this.getGraphObj(b));var c=c||this.graphObj,d;if(a=="category")d=c.categoryAxis;else if(a=="series")d=c.seriesAxis;else if(a=="values")d=c.valuesAxis;return d};
$MA.Graph.prototype.setLabel=function(a,b,c){if((a=this.getAxis(a,c))&&b!=void 0)a.label=new $MA.Graph.Data(a.labelDisplayDef,b)};$MA.Graph.prototype.setFormat=function(a,b,c){if((a=this.getAxis(a,c))&&b!=void 0)a.displayDef.format=b};
$MA.Graph.prototype.setMajorTicType=function(a,b,c){if((a=this.getAxis(a,c))&&b!=void 0)switch(b){case "none":a.majorTic=$MA.Graph.TicType.NONE;break;case "inside":a.majorTic=$MA.Graph.TicType.INSIDE;break;case "outside":a.majorTic=$MA.Graph.TicType.OUTSIDE;break;case "straddle":a.majorTic=$MA.Graph.TicType.STRADDLE}};$MA.Graph.prototype.setMajorGridLine=function(a,b,c){if(a=this.getAxis(a,c)){if(!a.majorGridLine)a.majorGridLine=new $MA.Graph.LineDefinition(1.2);a.majorGridLine.visible=b}};
$MA.Graph.prototype.setDisplayLastCategoryLabel=function(a,b,c){if(a=this.getAxis(a,c))a.displayLastCategoryLabel=b};$MA.Graph.prototype.setPrimaryLine=function(a,b,c){if(a=this.getAxis(a,c)){if(!a.primaryLine)a.primaryLine=new $MA.Graph.LineDefinition;a.primaryLine.visible=b}};$MA.Graph.prototype.setPrimaryLineColor=function(a,b,c){if(a=this.getAxis(a,c)){if(!a.primaryLine)a.primaryLine=new $MA.Graph.LineDefinition;a.primaryLine.strokeBrush.color=b}};
$MA.Graph.prototype.setPrimaryLineThickness=function(a,b,c){if(a=this.getAxis(a,c)){if(!a.primaryLine)a.primaryLine=new $MA.Graph.LineDefinition;a.primaryLine.width=b}};$MA.Graph.prototype.setPercentage=function(a,b,c){if(a=this.getAxis(a,c)){if(!a.primaryLine)a.primaryLine=new $MA.Graph.LineDefinition;a.percentage=b}};$MA.Graph.prototype.setSecondaryLine=function(a,b,c){if(a=this.getAxis(a,c)){if(!a.secondaryLine)a.secondaryLine=new $MA.Graph.LineDefinition;a.secondaryLine.visible=b}};
$MA.Graph.prototype.setDisplayEveryNLabels=function(a,b,c){if((a=this.getAxis(a,c))&&b!=void 0)a.labelsEveryN=b};$MA.Graph.prototype.setCategoryAxisMin=function(a){var b,c=this.graphObjs.length;for(b=0;b<c;b++){var d=this.getAxis("category",this.graphObjs[b]);if(d)d.minValue=a,d.customMinValue=a!==null&&a!==void 0?!0:!1}};
$MA.Graph.prototype.setCategoryAxisMax=function(a){var b,c=this.graphObjs.length;for(b=0;b<c;b++){var d=this.getAxis("category",this.graphObjs[b]);if(d)d.maxValue=a,d.customMaxValue=a!==null&&a!==void 0?!0:!1}};
$MA.Graph.prototype.setValueAxisValue=function(a,b,c){var d,e;if(c){if(e=this.getGraphObj(c))d=[],d.push(e)}else d=this.graphObjs;var f,g=d.length;for(f=0;f<g;f++)if(e=d[f],!(e.graphType=="hundredpercentstackedcolumn"||e.graphType=="hierarchy100pctstackedcolumn"))if(e=this.getAxis("values",e),!(c==void 0&&e.secondaryAxis)&&e)b?(e.minValue=a,e.customMinValue=a!==null&&a!==void 0?!0:!1):(e.maxValue=a,e.customMaxValue=a!==null&&a!==void 0?!0:!1)};
$MA.Graph.prototype.setValueAxisMin=function(a,b){this.setValueAxisValue(a,!0,b)};$MA.Graph.prototype.setValueAxisMax=function(a,b){this.setValueAxisValue(a,!1,b)};$MA.Graph.prototype.setPrimaryAxisProperties=function(a,b){var c=a.split(".")[2];if(c=="min"||c=="max"){var d,e=this.graphObjs.length;for(d=0;d<e;d++){var f=this.getAxis("values",this.graphObjs[d]);if(f)c=="min"?(f.minValue=b,f.customMinValue=b!==null&&b!==void 0?!0:!1):(f.maxValue=b,f.customMaxValue=b!==null&&b!==void 0?!0:!1)}}};
$MA.Graph.prototype.setSecondaryAxisProperties=function(a,b){var c=a.split(".")[2];if(c=="min"||c=="max"){var d,e=this.graphObjs.length,f;for(d=0;d<e;d++)if(this.graphObjs[d].valuesAxis.secondaryAxis)f=this.graphObjs[d].valuesAxis,c=="min"?(f.minValue=b,f.customMinValue=b!==null&&b!==void 0?!0:!1):(f.maxValue=b,f.customMaxValue=b!==null&&b!==void 0?!0:!1)}};
$MA.Graph.prototype.enableSecondaryValueAxis=function(a){var b,c=this.graphObjs.length;for(b=0;b<c;b++){var d=this.graphObjs[b];if(d.name==a)d.valuesAxis.secondaryAxis=!0}};$MA.Graph.prototype.setSecondaryValueAxisDisplayName=function(a,b){var c=this.getAxis("values",b);if(c)c.label.value=c.label.realValue=a};
$MA.Graph.prototype.setSecondaryValueAxis=function(a,b){var c=this.getAxis("values",b);if(c)a=a||"",isNaN(a)&&(a=a.toLowerCase()),c.secondaryAxis=!(!a||!("none"!==a&&"false"!==a)),this.secondaryAxis=c.secondaryAxis};$MA.Graph.prototype.setAxisLabelVisibility=function(a,b,c){if((a=this.getAxis(a,c))&&b!=void 0)a.hideValue=!b};
$MA.Graph.prototype.setAnimation=function(a){"none"===a&&(a=void 0);1<this.graphObjs.length&&(a=void 0);var b,c=this.graphObjs.length;for(b=0;b<c;b++)this.graphObjs[b].animation=a};
$MA.Graph.prototype.setAxisLineBrush=function(a,b,c,d){if(a=this.getAxis(a,d))switch(b){case "primary":if(a.primaryLine)a.primaryLine.strokeBrush=c;break;case "frame":if(a.frame)a.frame.strokeBrush=c;break;case "secondary":if(a.secondaryLine)a.secondaryLine.strokeBrush=c;break;case "majorgrid":if(a.majorGridLine)a.majorGridLine.strokeBrush=c}};
$MA.Graph.prototype.setLineBrush=function(a){this.graphObj.linebrush=a;this.setAxisLineBrush("category",a);this.setAxisLineBrush("values",a);this.setAxisLineBrush("series",a)};$MA.Graph.prototype.setAxisFontBrush=function(a,b){var c=this.getAxis(a);if(c)c.displayDef.foreground=b,c.labelDisplayDef.foreground=b};
$MA.Graph.prototype.setFontBrush=function(a){this.graphObj.titleDisplayDef.foreground=a;this.graphObj.legendDisplayDef.foreground=a;this.graphObj.pieDisplayDef.foreground=a;this.setAxisFontBrush("category",a);this.setAxisFontBrush("values",a);this.setAxisFontBrush("series",a)};$MA.Graph.prototype.setAxisFont=function(a,b){var c=this.getAxis(a);if(c)c.displayDef.font.family=b,c.labelDisplayDef.font.family=b};
$MA.Graph.prototype.setFont=function(a){this.graphObj.titleDisplayDef.font.family=a;this.graphObj.legendDisplayDef.font.family=a;this.graphObj.pieDisplayDef.font.family=a;this.setAxisFont("category",a);this.setAxisFont("values",a);this.setAxisFont("series",a)};
$MA.Graph.prototype.setScale=function(a,b){var c=this.graphObjs.length,d,e,f,g=void 0===a,h=void 0===b,j,l,n,k;if(g||h){g&&(j=n=0);h&&(l=k=0);for(e=0;e<c;e++){d=this.graphObjs[e];var m=d.valuesAxis.secondaryAxis?n:j,o=d.valuesAxis.secondaryAxis?k:l;g&&(f=d.isStacked?d.getMinItemNegSum():d.getMinItemValue(),f<m&&(d.valuesAxis.secondaryAxis?n=f:j=f));h&&(f=d.isStacked?d.getMaxItemPosSum():d.getMaxItemValue(),f>o&&(d.valuesAxis.secondaryAxis?k=f:l=f))}}for(e=0;e<c;e++)d=this.graphObjs[e],d.minValue=
g?d.valuesAxis.secondaryAxis?n:j:a,d.maxValue=h?d.valuesAxis.secondaryAxis?k:l:b};$MA.Graph.prototype.setShowPieLabels=function(a){this.graphObj.showLabels=a};$MA.Graph.prototype.getCenter=function(){return[this.graphObj.centerX,this.graphObj.centerY]};$MA.Graph.prototype.calcBubbleStartPos=function(a){return this.graphObj.calcBubbleStartPos(a)};$MA.Graph.prototype.calcLineStartPos=function(a){return this.graphObj.calcLineStartPos(a)};$MA.Graph.prototype.isStacked=function(){return this.graphObj.isStacked};
$MA.Graph.prototype.getGraphIndex=function(a){var b=0;if(a){var c,d=this.graphObjs.length;for(c=0;c<d;c++)if(this.graphObjs[c].name===a){b=c;break}}return b};$MA.Graph.prototype.getGraphObj=function(a){return a?this.graphObjs[this.getGraphIndex(a)]:this.graphObj};$MA.Graph.prototype.getSeriesIndex=function(a,b){var c=this.getSeriesList(),d=c.length,e,f,b=b!==void 0?b:0;for(f=0;f<d;++f)if(c[f].name===a&&c[f].graphObjIndex===b){e=c[f];break}return e?f:-1};
$MA.Graph.prototype.getSeriesMask=function(a,b){var c=this.getGraphObj(b).seriesMasks;if(c){a||(a="");var d=c.get(a);d||(d=[],c.set(a,d));return d}};$MA.Graph.prototype.setSeriesState=function(a,b,c){var d=this.getSeriesList(),e,f;for(e=0;e<d.length;++e)if(d[e].name===a&&d[e].graphObjIndex===c){f=d[e];break}if(f)f.graphObj.seriesStates.set(c+"_"+a,b),f.setEnabled(b),this.redrawOnly=!0};
$MA.Graph.prototype.createSeries=function(a,b,c){var d=this.getGraphObj(b),e=0,f=this.seriesNames.get(a);if(f!=void 0)e=f;else if(c==void 0)c=this.getGraphIndex(b),e=this.getSeriesCount(this.getGraphIndex(b)),e==0&&(e=c);else{for(f=0;f<this.graphObjs.length;f++){var g=this.graphObjs[f];g.name!=b&&!g.chartBrushes&&d.valuesAxis.secondaryAxis==g.valuesAxis.secondaryAxis&&(e+=g.getSeriesCount())}e+=c}this.seriesNames.set(a,e);e=d.createSeries(a,e);e.graphObjIndex=this.getGraphIndex(b);b=d.seriesStates;
b.containsKey(e.graphObjIndex+"_"+a)?e.setEnabled(b.get(e.graphObjIndex+"_"+a)):(e.setEnabled(!0),b.set(e.graphObjIndex+"_"+a,!0));d.seriesMasks&&(a=this.getSeriesMask(),e.setMask(a));return e};$MA.Graph.prototype.createCategory=function(a,b,c,d){d=this.getGraphObj(d);return d.getCategoryIndex(a)==-1?d.createCategory(a,b,c):void 0};$MA.Graph.prototype.groupCategory=function(a){this.graphObj.hasGroups=a};$MA.Graph.prototype.addData=function(a,b,c,d,e,f,g,h){a&&a.add(b,c,d,e,f,g,h)};
$MA.Graph.prototype.insertData=function(a,b,c,d,e,f,g,h,j,l){a&&a.insert(b,c,d,e,f,g,h,j,l)};$MA.Graph.prototype.resetData=function(){var a;for(a=this.graphObjs.length-1;0<=a;a--)this.graphObjs[a].resetData()};
$MA.Graph.prototype.refresh=function(a,b){var c=this.graphObjs.length;0<c&&!this.redrawOnly&&this.setScale();var d,e,f,g,h,j,l;this.calctotalBarEntries();for(d=0;d<c;d++){e=this.graphObjs[d];f=0<d;if(this.redrawOnly)e.redrawOnly=!0;else if(f)e.xAxis.visible=!1,e.yAxis.visible=!!this.secondaryAxis;else{for(h=0;h<c;h++){if(!j&&this.graphObjs[h].valuesAxis.secondaryAxis)j=this.graphObjs[h].valuesAxis,this.graphObjs[h].setCanvas(a),this.graphObjs[h].scale(),this.graphObjs[h].resize();if(!l&&!this.graphObjs[h].valuesAxis.secondaryAxis)l=
this.graphObjs[h].valuesAxis,this.graphObjs[h].setCanvas(a),this.graphObjs[h].scale(),this.graphObjs[h].resize()}e.primaryAxis=l;e.secondaryAxis=j}if(0===d&&this.getLegendPosition()!==$MA.Graph.LegendType.NONE)h=this.createLegendList(),e.legend.legendList=h,e.setLegendState(void 0);f&&e.setState(g);b?(e.drawingContentType="graph",e.redraw(f)):e.plot(a,f);e.generateBackground();0===d&&1<c&&(g=e.getState())}for(d=0;d<c;d++)this.graphObjs[d].generate();this.redrawOnly=!1};
$MA.Graph.prototype.createLegendList=function(){var a,b,c,d,e,f,g=[];a=this.graphObjs.length;for(e=0;e<a;e++){if(this.graphObjs[e]instanceof $MA.Graph.PieGraphObject)return;d=this.getSeriesList(e);b=d.length;for(f=0;f<b;f++)c={name:d[f].name,fillBrush:d[f].drawContext.fillBrush.toString(),graphObjIndex:e},g.push(c)}return g};
$MA.Graph.prototype.calctotalBarEntries=function(){var a=this.graphObjs.length,b=0,c=0,d;for(d=0;d<a;d++)if(this.graphObjs[d].graphType=="column"||this.graphObjs[d].graphType=="hierarchycolumn")this.graphObjs[d].prevBarEntries=b,b+=this.graphObjs[d].getSeriesCount()+1,c++;for(d=0;d<a;d++){var e=this.graphObjs[d];if(c>1&&(e.graphType=="column"||e.graphType=="hierarchycolumn"))e.totalBarEntries=b}};$MA.Graph.prototype.redraw=function(a){this.refresh(a,!0)};
$MA.Graph.prototype.drawContent=function(a,b,c){if(c){var d=this.graphObjs.length;0<d&&!this.redrawOnly&&this.setScale();var e=0,f=0,g;for(g=0;g<d;g++)if(this.graphObjs[g].graphType=="column"||this.graphObjs[g].graphType=="hierarchycolumn")this.graphObjs[g].prevBarEntries=e,e+=this.graphObjs[g].getSeriesCount()+1,f++;for(g=0;g<d;g++){var h=this.graphObjs[g],j;0<g&&h.setState(j);if(f>1&&(h.graphType=="column"||h.graphType=="hierarchycolumn"))h.totalBarEntries=e;this.rsImageBuffer=h.plotContent(a,b,
c,0<g,this.rsImageBuffer,!1);0===g&&1<d&&(j=h.getState())}}this.graphObjs[0].plotContent(a,b,!1,!1,this.rsImageBuffer,!0)};
$MA.Graph.prototype.getObjectAtPointer=function(a,b,c,d){var e=d||this.graphObj.drawObjects,f=e.length,g=new $MA.Point(a,b),h;if(d)for(h=0;h<f;h++){if(d=e[h],d.getObjectAtPointer(g))return d}else{var j=[];for(h=0;h<this.graphObjs.length;h++)if(e=this.graphObjs[h],e.graphType.indexOf("line")<0)for(f=0;f<e.drawObjects.length;f++)d=e.drawObjects[f],d.getObjectAtPointer(g)&&j.push({name:e.name,drawObj:d});else(d=this.getLineObjectAtPointer(a,b,c,e))&&j.push({name:e.name,drawObj:d});return j}};
$MA.Graph.prototype.getLineObjectAtPointer=function(a,b,c,d){var d=d||this.graphObj,e,f,g,h,j;if(d.graphType==="hierarchyline"){j=d.drawObjects.length;for(h=0;h<j;h++)if(e=d.drawObjects[h],e=e.item,f=a-e.xCoord,g=b-e.yCoord,Math.sqrt(f*f+g*g)<=15)return this.getDrawObject(e.seriesNo,e.itemNo,d)}j=d.seriesList.length;for(h=0;h<j;h++)if(e=d.seriesList[h].isEnabled())if(e=d.seriesList[h].items[c],e!=void 0&&(f=a-e.xCoord,g=b-e.yCoord,Math.sqrt(f*f+g*g)<=15))return this.getDrawObject(h,c,d)};
$MA.Graph.prototype.getDrawObject=function(a,b,c){if(c[0]){var d=c,e=0,f,g=[];for(f=0;f<d.length;f++)if(e+=d[f].seriesList.length,g[f]=e,a<e){c=d[f];f>0&&(a-=g[f-1]);break}}d=c.drawObjects.length;if(c.isWaterfall&&c.showTotal&&b==this.getMaxItemCount()-1)return c.drawObjects[b*c.getSeriesCount()+a];if("hierarchycolumn"===c.graphType||"hierarchywaterfallcolumn"===c.graphType||"hierarchystackedcolumn"===c.graphType||"hierarchy100pctstackedcolumn"===c.graphType)return c.drawObjects[b*c.getSeriesCount()+
a];if("hierarchyline"===c.graphType){if(this.getMaxItemCount()==b)return c.drawObjects[(b-1)*c.getSeriesCount()+a];for(e=0;e<c.drawObjects.length;e++)if(f=c.drawObjects[e].item,f.itemNo==b&&f.seriesNo==a)return c.drawObjects[e]}if(c.seriesList.length>0){f=c.seriesList[a].items[b];for(e=0;e<d;e++)if(a=c.drawObjects[e],a.item==f)return a}};$MA.Graph.prototype.getDrawObjects=function(a,b){var c=b.getSeriesCount(),d,e=[],f;for(f=0;f<c;f++)(d=this.getDrawObject(f,a,b))&&e.push(d);return e};
$MA.Graph.prototype.getCanvas=function(){var a=this.graphObj.canvas;a.getContext("2d").lineWidth=1;return a};$MA.Graph.prototype.getDrawArea=function(){return this.graphObj.dataArea};$MA.Graph.prototype.getNumberOfVisibleCategories=function(){return this.graphObj.getNumberOfVisibleCategories()};$MA.Graph.prototype.getCategoryNodes=function(a){return this.graphObj.getCategoryNodes(a)};$MA.Graph.prototype.getValueLoc=function(a){return this.graphObj.getValueLoc(a)};
$MA.Graph.prototype.preventDefaultRendering=function(a){this.graphObj.preventDefaultRendering(a)};$MA.Graph.prototype.getDrawingContentType=function(){return this.graphObj.drawingContentType};
$MA.Graph.prototype.pointInLegend=function(a,b){var c=this.graphObj.drawAreas.getX($MA.Graph.DrawAreaType.LEGEND),d=this.graphObj.drawAreas.getY($MA.Graph.DrawAreaType.LEGEND),e=this.graphObj.drawAreas.getWidth($MA.Graph.DrawAreaType.LEGEND),f=this.graphObj.drawAreas.getHeight($MA.Graph.DrawAreaType.LEGEND);return a>=c&&a<c+e&&b>=d&&b<=d+f};
$MA.Graph.prototype.pointInChart=function(a,b){var c=this.getDataRect();if(this.graphObj.graphType.indexOf("bar")>0)return!0;return a<c[2]+c[0]&&a>c[0]&&b<c[3]+c[1]&&b>c[1]};$MA.Graph.prototype.setTapPoint=function(a,b){return this.graphObj.setTapPoint(a,b)};$MA.Graph.prototype.isLegendSelected=function(){var a,b=this.getSeriesMask(),c=b.length;for(a=0;a<c;a++)if(b[a])return!0;return!1};$MA.Graph.prototype.getSelectedPieSlices=function(){return this.graphObj.getSelectedPieSlices()};
$MA.Graph.prototype.selectLegend=function(a,b){var c=this.getObjectAtPointer(a,b,0,this.graphObj.annotationObjects);if(c==void 0)return!1;if(this.graphObj instanceof $MA.Graph.PieGraphObject){var d=c.series;if(d==null)return!1;c=this.getSeriesMask(c.series.name);c[d]=c[d]?!1:!0}else if(d=c.series,void 0!==d){isNaN(d)||(d=this.getSeries(d));var e,f=0,g,h=this.getSeriesList();g=h.length;for(e=0;e<g;e++)c=h[e],c.isEnabled()&&f++;if(f==1&&d.isEnabled())for(e=0;e<g;e++)c=h[e],this.setSeriesState(c.name,
!0,c.graphObjIndex),this.setLegendState(c.name,!0,c.graphObjIndex);else c=!d.isEnabled(),this.setSeriesState(d.name,c,d.graphObjIndex),this.setLegendState(d.name,c,d.graphObjIndex);this.redrawOnly=!0}return!0};$MA.Graph.prototype.getSeries=function(a){var b=this.getSeriesList(),c,d;if(typeof a=="string")for(c=0;c<b.length;++c){if(b[c].name==a){d=b[c];break}}else if(typeof a=="number")a>=0&&a<b.length&&(d=b[a]);else for(c=0;c<b.length;++c)if(b[c].name.toString()===a.toString()){d=b[c];break}return d};
$MA.Graph.prototype.getSeriesList=function(a){var b=[];if(a!=void 0&&this.graphObjs[a])b=this.graphObjs[a].getSeriesList();else for(var c=this.graphObjs.length,a=0;a<c;a++)b=b.concat(this.graphObjs[a].getSeriesList());return b};$MA.Graph.prototype.getSeriesCount=function(a){var b=0;return b=a!=void 0&&this.graphObjs[a]?this.graphObjs[a].getSeriesCount():this.graphObj.getSeriesCount()};$MA.Graph.prototype.getSeriesName=function(a){return this.getSeriesList()[a].name};
$MA.Graph.prototype.getSeriesFillBrush=function(a){var b,c,d,e,f=a,g=this.graphObjs.length;for(b=0;b<g;b++)if(d=this.graphObjs[b],e=d.getSeriesCount(),f<e){c=d.getSeriesFillBrush(a);break}else f-=e;return c};$MA.Graph.prototype.getCustomisedFillBrush=function(a,b){var c,d,e,f,g=this.graphObjs.length;for(c=0;c<g;c++)if(e=this.graphObjs[c],f=e.getSeriesCount(),a<f){d=e.getCustomisedFillBrush(a,b);break}else a-=f;return d};$MA.Graph.prototype.getMaxItemCount=function(){return this.graphObj.getMaxItemCount()};
$MA.Graph.prototype.getElementIncrX=function(){var a=this.graphObj;if(!a.dataArea)return 0;return a.calcBarEntryWidth(a.dataArea.width)};$MA.Graph.prototype.getElementWidth=function(){var a,b=this.graphObj;if(!b.dataArea)return 0;var c=b.graphType,d=b.calcBarWidth(b.dataArea.width);b.totalBarEntries===void 0?0<=c.indexOf("column")||0<=c.indexOf("bubble")?a=(b.isStacked?1:b.getSeriesCount())*d:0<=c.indexOf("line")&&(a=d):a=(b.totalBarEntries-1)*d;return a};
$MA.Graph.prototype.getElementStartX=function(){var a=this.graphObj;if(!a.dataArea)return 0;return a.calcBarGap(a.dataArea.width)};$MA.Graph.prototype.calcBarEntryWidth=function(a){return this.graphObj.calcBarEntryWidth(a)};$MA.Graph.prototype.calcBarWidth=function(a){return this.graphObj.calcBarWidth(a)};$MA.Graph.prototype.calcBarGap=function(a){return this.graphObj.calcBarGap(a)};
$MA.Graph.prototype.getDataRect=function(){var a=this.graphObj.drawAreas.getX($MA.Graph.DrawAreaType.DATA),b=this.graphObj.drawAreas.getY($MA.Graph.DrawAreaType.DATA),c=this.graphObj.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),d=this.graphObj.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA);return[a,b,c,d]};
$MA.Graph.prototype.getDisplayRect=function(){var a=this.graphObj.drawAreas.getX($MA.Graph.DrawAreaType.DISPLAY),b=this.graphObj.drawAreas.getY($MA.Graph.DrawAreaType.DISPLAY),c=this.graphObj.drawAreas.getWidth($MA.Graph.DrawAreaType.DISPLAY),d=this.graphObj.drawAreas.getHeight($MA.Graph.DrawAreaType.DISPLAY);return[a,b,c,d]};$MA.Graph.prototype.getCategoryValue=function(a){if(this.graphObj.showTotal)return a;if(!(a>=this.graphObj.categories.length)&&(a=this.graphObj.categories[a]))return a.value};
$MA.Graph.prototype.getSeriesString=function(a){return $MA.format(a,this.graphObj.seriesAxis.displayDef.format)};
$MA.Graph.prototype.getCategoryString=function(a){var b="hierarchycolumn"===this.graphObj.graphType||"hierarchywaterfallcolumn"===this.graphObj.graphType,c="hierarchyline"===this.graphObj.graphType,d="hierarchystackedcolumn"===this.graphObj.graphType||"hierarchy100pctstackedcolumn"==this.graphType;if(b&&a>=this.graphObj.categories.length&&!b){var e="";a==this.graphObj.categories.length&&this.graphObj.showTotal&&(e=$MA.getLocalisation(null,"Total","Total"));return e}var e="",f=[];if(a=b||d?this.graphObj.drawObjects[a*
this.graphObj.getSeriesCount()].item:c?this.graphObj.drawObjects[a].item:this.graphObj.categories[a]){b=this.graphObj.categoryAxis.displayDef.format;if(a.categoryValues)b=a.categoryValues[a.categoryValues.length-1].format;e=$MA.format(a.displayValue,b);f.push(e);if(a.groupValues)for(var g=a.groupValues.length,c=0,d=g-1;c<g;c++,d--){if(a.categoryValues)b=a.categoryValues[d].format;e=$MA.format(a.groupValues[c],b);e!=""&&f.push(e)}}this.graphObj.categoriesDisplayOrder==="rootToLeaf"&&f.reverse();return f.join(", ")};
$MA.Graph.prototype.getCategoryDisplayText=function(a){var b="hierarchycolumn"===this.graphObj.graphType||"hierarchywaterfallcolumn"===this.graphObj.graphType,c="hierarchyline"===this.graphObj.graphType,d="hierarchystackedcolumn"===this.graphObj.graphType||"hierarchy100pctstackedcolumn"==this.graphType;if(a>=this.graphObj.categories.length&&(!b||!c))return"";a=b||d?this.graphObj.drawObjects[a*this.graphObj.getSeriesCount()].item:c?this.graphObj.drawObjects[a].item:this.graphObj.categories[a];if(a==
void 0)return"";b=this.graphObj.categoryAxis.displayDef.format;c="";if(a.categoryValues)b=a.categoryValues[a.categoryValues.length-1].format;d=[];c=a.displayText!=void 0?a.displayText:$MA.format(a.displayValue,b);d.push(c);if(a.groupValues){var e,f,g=a.groupValues.length;e=0;for(f=g-1;e<g;e++,f--){if(a.categoryValues)b=a.categoryValues[f].format;c=$MA.format(a.groupValues[e],b);c!=""&&d.push(c)}}this.graphObj.categoriesDisplayOrder==="rootToLeaf"&&d.reverse();return d.join(", ")};
$MA.Graph.prototype.getCategoryList=function(a,b){var c=[],d=null;b?a<this.graphObj.categories.length&&(d=this.graphObj.categories[a]):d=a;if(d){var e=this.graphObj.categoryAxis.displayDef.format;c.push($MA.format(d.value,e));if(d.groupValues){var f;for(f=d.groupValues.length-1;f>=0;f--)c.push($MA.format(d.groupValues[f],e))}}return c};
$MA.Graph.prototype.getDataString=function(a,b,c){var d,e="",f=this.graphObjs.length;for(d=0;d<f;d++){var g=this.graphObjs[d];0<d&&(e+="\n");e=this._getDataString(a,b,c,e,g)}return e};
$MA.Graph.prototype._getDataString=function(a,b,c,d,e){if(a>=e.categories.length&&!e.showTotal&&"hierarchycolumn"!==e.graphType&&"hierarchywaterfallcolumn"!==e.graphType&&"hierarchyline"!==e.graphType&&"hierarchystackedcolumn"!=this.graphType&&"hierarchy100pctstackedcolumn"!=this.graphType)return"";var f="";if((a=this.getDrawObjects(a,e))&&a.length>0){var g,f=a.length,h,j=0;if(e.isHundredPercent)for(h=0;h<f;h++)g=e.getSeries(h),g.isEnabled()!=!1&&a[h].item&&a[h].item.yValue!=void 0&&(j+=a[h].item.yValue);
for(h=0;h<f;h++)h>0&&(d+="\n",c+="\n"),g=e.getSeries(h),g=a[h].item&&a[h].item.yValue!=void 0&&!isNaN(a[h].item.yValue)?e.isHundredPercent?g.isEnabled()==!0?a[h].item.yValue/j:0:a[h].item.yValue:"",g=e.isHundredPercent?$MA.format(g*100,"percent"):$MA.format(g,b),d+=g;f=d}return f};$MA.Graph.prototype.getDataDisplayString=function(a,b){var c,d="",e=this.graphObjs.length;for(c=0;c<e;c++){var f=this.graphObjs[c];0<c&&(d+="\n");d+=this._getDataDisplayString(a,b,d,f)}return d};
$MA.Graph.prototype._getDataDisplayString=function(a,b,c,d){if(a>=d.categories.length&&!d.showTotal&&!d.isHierarchy)return"";var e="";if((a=this.getDrawObjects(a,d))&&a.length>0){var e="",f,g=a.length,h,j=0;if(d.isHundredPercent)for(h=0;h<g;h++)f=d.getSeries(h),f.isEnabled()!=!1&&a[h].item&&a[h].item.yValue!=void 0&&(j+=a[h].item.yValue);for(h=0;h<g;h++)h>0&&(c+="\n",e+="\n"),f=d.getSeries(h),f=a[h].item&&a[h].item.yValue!=void 0?d.isHundredPercent?f.isEnabled()==!0?a[h].item.yValue/j:0:a[h].item.yValue:
"",f=d.isHundredPercent?$MA.format(f*100,"percent"):$MA.format(f,b),e+=a[h].item.valueDisplayText!=void 0?a[h].item.valueDisplayText:"",c+=f}return e};$MA.Graph.prototype.getDataValue=function(a){var b=[];if(a&&a.item&&a.item instanceof $MA.Graph.Item){b=a.item;a=[];a.push(b.getXValue());if(b.category&&b.category.groupValues){var b=b.category.groupValues,c;for(c=b.length-1;c>=0;c--)a.push(b[c])}b=a}return b};$MA.Graph.prototype.getRadianDrawObject=function(a){return this.graphObj.getDrawObject(a)};
$MA.Graph.prototype.getPieSlice=function(a){var a=this.graphObj.getDrawObject(a),b=null;a&&a.item&&(b={name:a.item.xCoord,percent:a.item.yCoord,value:a.item.yValue,color:a.drawContext.getFillBrush(),others:a.item.others,valueDisplayText:a.item.valueDisplayText});return b};$MA.Graph.prototype.getPieDataString=function(a){var a=this.graphObj.getDrawObject(a),b="";a&&(b=a.item.valueDisplayText!=void 0?a.item.valueDisplayText:a.item.yValue.toString());return b};
$MA.Graph.prototype.getPieFillBrush=function(a){var a=this.graphObj.getDrawObject(a),b;if(a)b=a.drawContext.fillBrush;return b};$MA.Graph.prototype.getPiePercent=function(a){var a=this.graphObj.getDrawObject(a),b=0;if(a&&a.item)b=a.item.yCoord;return b};$MA.Graph.prototype.getPieName=function(a){var a=this.graphObj.getDrawObject(a),b="";if(a&&a.item)b=a.item.xCoord;return b};
$MA.Graph.prototype.getPieOthers=function(a){var a=this.graphObj.getDrawObject(a),b=null;if(a&&a.item&&a.item.others!=void 0)b=a.item.others;return b};$MA.Graph.prototype.getPieRadius=function(){return this.graphObj.computeTruePieRadius(this.graphObj.paintSize/2)};$MA.Graph.prototype.selectPie=function(){var a=this.getCanvas().width;this.getCanvas().width=a;this.graphObj.drawLegend();return this.graphObj.select(this.isLegendSelected())};
$MA.Graph.prototype.rotatePie=function(a){a%=2*Math.PI;if(a!=0){this.inRotatePie=!0;var b=this.getDisplayRect();if($MA.Browser.isJBStockBrowser&&this.graphObj.getSelectedPieSlices().length>0){var c=this.graphObj.context.canvas;c.width=c.width;this.graphObj.drawLegend()}else this.graphObj.context.clearRect(b[0],b[1],b[2],b[3]);a=this.graphObj.rotate(a,b);this.inRotatePie=!1;return a}};
$MA.Graph.prototype.refreshPie=function(){this.inRotatePie=!0;var a=this.getDisplayRect();this.graphObj.context.clearRect(a[0],a[1],a[2],a[3]);this.graphObj.rotateRefresh(a);this.inRotatePie=!1};$MA.Graph.prototype.getTableFirstRow=function(){return this.graphObj.firstRow};
$MA.Graph.prototype.setTableFirstRow=function(a){var b,c;for(b=0;b<this.graphObjs.length;b++)this.graphObjs[b].firstRow=a;if(this.graphType=="waterfallbar"){var d=this.getSeriesList().length,e=Math.floor(a/d),f;for(b=0;b<d;b++){var g=this.getSeries(b);for(c=g.sumBeforeRange=0;c<e;c++)f=g.items[c].yValue,typeof f=="number"&&!isNaN(f)&&(g.sumBeforeRange+=f);if(b<a%d)f=g.items[e].yValue,typeof f=="number"&&!isNaN(f)&&(g.sumBeforeRange+=f)}}};
$MA.Graph.prototype.setTableHeaderNames=function(a,b){this.graphObj.dimTitle=a;this.graphObj.rowHeader=b};
$MA.Graph.prototype.setTableStyle=function(a,b){if(a=="dimensionTitle")this.graphObj.dimTitleBkColor=b;else if(a=="rowHeader")this.graphObj.rowHeaderBkColor=b;else if(a=="columnHeaders")this.graphObj.colHeadersBkColor=b;else if(a=="contents")this.graphObj.contentsBkColor=b;else if(a=="fontSize")this.graphObj.fontSize=b;else if(a=="fontFamily")this.graphObj.fontFmily=b;else if(a=="textColor")this.graphObj.textColor=b};
$MA.Graph.prototype.setDataScattered=function(a){if(this.graphObj.isDataScattered=a)this.graphObj.categoryAxis.dataType=$MA.Graph.DataType.DOUBLE};$MA.Graph.prototype.isDataScattered=function(){return this.graphObj.isDataScattered};$MA.Graph.prototype.getStyles=function(){var a=$MA.getCSSRule(".graph");a&&(this.setFontBrush(new $MA.Brush(a.style.color)),this.setFont(a.style.fontFamily))};
$MA.Graph.prototype.setPalette=function(a,b,c){var d,e=this.graphObjs.length;for(d=0;d<e;d++){var f=this.graphObjs[d];f.name==b&&f.setPalette(a,c)}};$MA.Graph.getSpecifiedColor=function(a){if(a=$MA.getCSSRule(a))return a.style.color;return null};$MA.Graph.getSpecifiedColorArray=function(a){var b=[],c=1,d=null;do d=$MA.Graph.getSpecifiedColor(a+" .color"+c),c+=1,d!=null&&b.push(d);while(d!=null);return b};
$MA.Graph.getStyles=function(){$MA.Graph.SeriesBrushes.clearBrushList();var a=$MA.getCSSRule(".defaultFillPalette");a&&$MA.Graph.SeriesBrushes.setPalette("defaultFill",$MA.Graph.getSpecifiedColorArray(".defaultFillPalette"));(a=$MA.getCSSRule(".defaultStrokePalette"))&&$MA.Graph.SeriesBrushes.setPalette("defaultStroke",$MA.Graph.getSpecifiedColorArray(".defaultStrokePalette"));(a=$MA.getCSSRule(".defaultInsetShadowPalette"))&&$MA.Graph.SeriesBrushes.setPalette("defaultInsetShadow",$MA.Graph.getSpecifiedColorArray(".defaultInsetShadowPalette"))};
$MA.Graph.prototype.getNearestCategoryLoc=function(a,b){return this.graphObj.getNearestCategoryLoc(a,b)};$MA.Graph.prototype.setValueBubbleHeight=function(a){this.graphObj.setValueBubbleHeight(a)};$MA.Graph.prototype.setValueBubblePosition=function(a){this.graphObj.setValueBubblePosition(a)};$MA.Graph.prototype.setValueBubbleCategoriesDisplayOrder=function(a){var b,c,d=this.graphObjs.length;for(b=0;b<d;b++)c=this.graphObjs[b],c.setValueBubbleCategoriesDisplayOrder(a)};
$MA.Graph.prototype.setStartSwipe=function(a){this.graphObj.setStartSwipe(a)};$MA.Graph.prototype.setEndSwipe=function(a){this.graphObj.setEndSwipe(a)};$MA.Graph.prototype.setPinchScale=function(a){this.graphObj.setPinchScale(a)};$MA.Graph.prototype.isLegendMovable=function(){return this.graphObj.isLegendMovable()};$MA.Graph.prototype.updateValueBubbleValue=function(a){this.graphObj.updateValueBubbleValue(a)};$MA.Graph.prototype.updateStartLegend=function(a){this.graphObj.updateStartLegend(a)};
$MA.Graph.prototype.refreshBrush=function(){this.graphObj.refreshBrush()};$MA.Graph.prototype.doScrollLegend=function(a,b){this.graphObj.doScrollLegend(a,b)};$MA.Graph.prototype.setTrendReference=function(a){this.graphObj.upperThreshold=a.upperThreshold;this.graphObj.lowerThreshold=a.lowerThreshold;this.graphObj.reference=a.reference;this.graphObj.trendCategory=a.trendCategory};
$MA.Graph.prototype.setFirstItem=function(a,b){var c,d,e=this.graphObjs.length;for(c=0;c<e;c++)if(d=this.graphObjs[c],b===d.name||!b&&0===c){d.firstItem=a;break}};$MA.Graph.prototype.setItemIncr=function(a,b){var c,d,e=this.graphObjs.length;d=!0;for(c=0;c<e;c++)if(this.graphObjs[c].graphType!=="line"){d=!1;break}if(e===1&&this.graphObjs[0].graphType==="line"||d)for(c=0;c<e;c++)this.graphObjs[c].itemIncr=1;else for(c=0;c<e;c++)if(d=this.graphObjs[c],b===d.name||b===void 0)d.itemIncr=a};
$MA.Graph.prototype.setMonoColor=function(a){this.graphObj.setMonoColor(a)};
$MA.Graph.prototype.getSelectedBubbleInfo=function(){var a=this.graphObj.selectedBubbleObject;if(a!=void 0){var b=a.item.otherValues,c,d,e,f,g,h,j,l,n;for(c=0;c<b.length;c++)b[c].hasOwnProperty("width")?(d=b[c].width,e=b[c].displayText):b[c].hasOwnProperty("color")?(f=b[c].color,g=b[c].value,h=b[c].displayText):b[c].hasOwnProperty("shape")?(j=b[c].shape,l=b[c].value,n=b[c].displayText):b[c].hasOwnProperty("height");return{category:a.item.category.value,categoryDisplayText:a.item.category.displayText,
value:a.item.yValue,valueDisplayText:a.item.valueDisplayText,width:d,widthDisplayText:e,color:f,colorValue:g,colorDisplayText:h,shape:j,shapeValue:l,shapeDisplayText:n,height:j,heightDisplayText:l}}};$MA.Graph.prototype.setHorizontalBarHeight=function(a){this.graphObj instanceof $MA.Graph.TableBarGraphObject&&this.graphObj.setHorizontalBarHeight(a)};$MA.Graph.prototype.showTableValue=function(a){if(this.graphObj instanceof $MA.Graph.TableBarGraphObject)this.graphObj.tableValue=a};
$MA.Graph.prototype.setShowDotsWidth=function(a){var b,c=this.graphObjs.length;for(b=0;b<c;b++)this.graphObjs[b]instanceof $MA.Graph.LineGraphObject&&this.graphObjs[b].setShowDotsWidth(a)};$MA.Graph.prototype.setBubbleBorderColor=function(a){if(this.graphObj instanceof $MA.Graph.BubbleGraphObject)this.graphObj.borderColor=a!=void 0?new $MA.Brush(a):void 0};$MA.Graph.prototype.setBubbleMinSize=function(a){if(this.graphObj instanceof $MA.Graph.BubbleGraphObject)this.graphObj.bubbleMinSize=a/2};
$MA.Graph.prototype.getUpdatedX=function(a){return this.graphObj.getUpdatedX(a)};$MA.Graph.prototype.setSymbolPalette=function(a){if(this.graphObj instanceof $MA.Graph.BubbleGraphObject)this.graphObj.symbolPalette=a};$MA.Graph.prototype.setMonoSymbol=function(a){if(this.graphObj instanceof $MA.Graph.BubbleGraphObject)this.graphObj.monoSymbol=a};
$MA.Graph.prototype.collapse=function(a){var b,c,d=this.graphObjs.length;for(b=0;b<d;b++)c=this.graphObjs[b],("hierarchycolumn"===c.graphType||"hierarchywaterfallcolumn"===c.graphType||"hierarchyline"===c.graphType||"hierarchystackedcolumn"===c.graphType||"hierarchy100pctstackedcolumn"===c.graphType)&&c.collapse(a);this.redrawOnly=!0};
$MA.Graph.prototype.expand=function(a){var b,c,d=this.graphObjs.length;for(b=0;b<d;b++)c=this.graphObjs[b],("hierarchycolumn"===c.graphType||"hierarchywaterfallcolumn"===c.graphType||"hierarchyline"===c.graphType||"hierarchystackedcolumn"===c.graphType||"hierarchy100pctstackedcolumn"===c.graphType)&&c.expand(a);this.redrawOnly=!0};
$MA.Graph.prototype.isRootLevel=function(){var a,b,c,d=this.graphObjs.length;for(a=0;a<d;a++)if(b=this.graphObjs[a],"hierarchycolumn"===b.graphType||"hierarchywaterfallcolumn"===b.graphType||"hierarchyline"===b.graphType||"hierarchystackedcolumn"===b.graphType||"hierarchy100pctstackedcolumn"===b.graphType)if(c=b.isRootLevel(),c==!0)break;return c};
$MA.Graph.prototype.isLeafLevel=function(){var a,b,c,d=this.graphObjs.length;for(a=0;a<d;a++)if(b=this.graphObjs[a],"hierarchycolumn"===b.graphType||"hierarchywaterfallcolumn"===b.graphType||"hierarchyline"===b.graphType||"hierarchystackedcolumn"===b.graphType||"hierarchy100pctstackedcolumn"===b.graphType)if(c=b.isLeafLevel(),c==!0)break;return c};
$MA.Graph.prototype.setLegendState=function(a,b,c){var d=this.graphObj.legend.legends,e,f;for(f=0;f<d.length;++f)if(d[f].legend_name===a&&d[f].graphObjIndex===c){e=d[f];break}if(e)this.graphObj.legendStates.set(c+"_"+a,b),e.isEnabled=b,this.redrawOnly=!0};$MA.Graph.prototype.setGraphLineWidth=function(a,b){if(!isNaN(a)&&0<a){var c;b?(c=[],c.push(this.getGraphObj(b))):c=this.graphObjs;var d,e,f=c.length;for(d=0;d<f;d++)e=c[d],-1!==e.graphType.indexOf("line",e.graphType.length-4)&&e.setGraphLineWidth(a)}};
$MA.Graph.prototype.setMaxPies=function(a){if(this.graphObj instanceof $MA.Graph.PieGraphObject)this.graphObj.maxPies=a};$MA.Graph.prototype.setTotalFormat=function(a){for(var b,c=this.graphObjs.length,d=$MA.convertor.processFormat(a),a=0;a<c;a++)b=this.graphObjs[a],b.totalFormat=d};$MA.Graph.prototype.setBarChartTableWidth=function(a){this.graphObj.tableWidthPercent=this.graphObj.graphType.indexOf("bar")>0&&a.indexOf("%")>0?parseInt(parseFloat(a),10)/100:void 0};
$MA.ValueBubbleStyle={TOP:"top",FLOAT:"float",FLOATTOP:"floattop"};$MA.Graph.Point=function(a,b,c){this.x=a;this.y=b;this.z=c};$MA.Graph.Point.prototype.set=function(a,b,c){this.x=a;this.y=b;this.z=c};$MA.Graph.PlotPoint=function(a,b,c){this.raw=new $MA.Graph.Point(a,b,c);this.rotated=new $MA.Graph.Point(a,b,c)};
$MA.Graph.BoundaryBox=function(){this.min=new $MA.Graph.Point(0,0,0);this.max=new $MA.Graph.Point(0,0,0);this.mean=new $MA.Graph.Point(0,0,0);this.dk=this.d=this.c=this.b=this.a=this.pointCount=0};$MA.Graph.BoundaryBox.prototype.setMinMax=function(a){this.mean.x+=a.x;this.mean.y+=a.y;this.pointCount++;if(this.min.x==-1||this.min.x>a.x)this.min.x=a.x;if(this.min.y==-1||this.min.y>a.y)this.min.y=a.y;if(this.max.x<a.x)this.max.x=a.x;if(this.max.y<a.y)this.max.y=a.y};
$MA.Graph.BoundaryBox.prototype.pointInside=function(a){var b=!1;a.x>=this.min.x&&a.x<=this.max.x&&a.y>=this.min.y&&a.y<=this.max.y&&(b=!0);return b};$MA.Graph.BoundaryBox.prototype.setEquation=function(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.d=-(a*d+b*e+c*f);this.dk=Math.sqrt(a*a+b*b+c*c);if(this.dk!=0)this.dk=1/this.dk};
$MA.Graph.DrawContext=function(a,b,c,d){this.fillBrush=a;this.strokeBrush=b;this.insetShadowBrush=c;this.outlineBrush=$MA.Graph.SeriesBrushes.outlineBrush;this.globalAlpha=d;this.getFillBrush=function(){return this.fillBrush};this.getStrokeBrush=function(){return this.strokeBrush};this.getInsertShadowBrush=function(){return this.insetShadowBrush};this.getOutlineBrush=function(){return this.outlineBrush}};$MA.Graph.Font=function(a){this.family="Helvetica";this.size=a!=void 0?a:12;this.rotation=0};
$MA.Graph.Font.prototype.toString=function(){return this.size+"px "+this.family};$MA.Graph.DisplayDefinition=function(a){this.foreground=$MA.Brushes.black;a!=void 0?(this.autoSize=!1,this.font=new $MA.Graph.Font(a)):(this.autoSize=!0,this.font=new $MA.Graph.Font);this.format=void 0};$MA.Graph.DisplayDefinition.prototype.clone=function(){var a=new $MA.Graph.DisplayDefinition(12);a.foreground=this.foreground;a.autoSize=this.autoSize;a.font=this.font;a.format=this.format;return a};
$MA.Graph.LineDefinition=function(a){this.visible=!0;this.strokeBrush=new $MA.Brush($MA.Brushes.gray.color);if(a!=void 0)this.width=a};$MA.Graph.Category=function(a,b,c,d){this.value=a;this.groupValues=b;this.displayValue=a;this.categoryValues=c;this.displayText=d};$MA.Graph.DrawAreaType={TITLE:0,LEGEND:1,DISPLAY:2,XLABEL:3,YLABEL:4,ZLABEL:5,XAXIS:6,YAXIS:7,ZAXIS:8,DATA:9};$MA.Graph.DrawAreas=function(){this.x=Array(10);this.y=Array(10);this.width=Array(10);this.height=Array(10)};
$MA.Graph.DrawAreas.prototype.reset=function(){var a;for(a=0;a<10;a++)this.x[a]=0,this.y[a]=0,this.width[a]=0,this.height[a]=0};$MA.Graph.DrawAreas.prototype.set=function(a,b,c,d,e){this.x[a]=b;this.y[a]=c;this.width[a]=d;this.height[a]=e};$MA.Graph.DrawAreas.prototype.getX=function(a){return this.x[a]};$MA.Graph.DrawAreas.prototype.getY=function(a){return this.y[a]};$MA.Graph.DrawAreas.prototype.getWidth=function(a){return this.width[a]};$MA.Graph.DrawAreas.prototype.getHeight=function(a){return this.height[a]};
$MA.Graph.DrawAreas.prototype.setX=function(a,b){this.x[a]=b};$MA.Graph.DrawAreas.prototype.setY=function(a,b){this.y[a]=b};$MA.Graph.DrawAreas.prototype.setWidth=function(a,b){this.width[a]=b};$MA.Graph.DrawAreas.prototype.setHeight=function(a,b){this.height[a]=b};
$MA.Graph.Item=function(a,b,c,d){this.yValue=a;this.otherValues=c;this.parentSeries=this.category=void 0;this.selected=!1;this.yCoord=this.xCoord=void 0;this.valueDisplayText=b;this.otherValuesDisplayText=void 0;this.isNull=!1;this.originalIndex=d};$MA.Graph.Item.prototype.setCategory=function(a){this.category=a};$MA.Graph.Item.prototype.getXValue=function(){if(this.category)return this.category.value};$MA.Graph.Item.prototype.getXDisplayValueText=function(){if(this.category)return this.category.displayValueText};
$MA.Graph.Item.prototype.getXDisplayValue=function(){if(this.category)return this.category.displayValue};$MA.Graph.Item.prototype.getBubbleValue=function(){if(this.otherValues){var a;for(a=0;a<this.otherValues.length;a++)if(this.otherValues[a].width)return this.otherValues[a].width}else return this.yValue};$MA.Graph.Item.prototype.getBubbleHeight=function(){if(this.otherValues){var a;for(a=0;a<this.otherValues.length;a++)if(this.otherValues[a].height)return this.otherValues[a].height}else return this.getBubbleValue()};
$MA.Graph.LegendType={NONE:0,LEFT:1,RIGHT:2,TOP:3,BOTTOM:4};$MA.Graph.Legend=function(a,b,c){this.graphObj=a;this.location=b;this.displayDef=c;this.top=this.left=this.offsetY=this.offsetX=0;this.drawObjectsList={};this.dispWidth=0.2;this.dispHeight=0.1;this.fontFamily="Helvetica";this.fontStyle="Bold";this.fontHeight=14;this.fontColor="white"};
$MA.Graph.Legend.prototype.config=function(a){if("object"===typeof a){var b=a.width,c=a.height;if(!isNaN(b)&&b<=1)this.dispWidth=b;if(!isNaN(c)&&c<=1)this.dispHeight=c;c=a.fontsize;if(!isNaN(c)&&0<c)this.fontHeight=c;if("string"===typeof a.fontfamily)this.fontFamily=a.fontfamily;if("string"===typeof a.fontstyle)this.fontStyle=a.fontstyle;if("string"===typeof a.fontcolor)this.fontColor=a.fontcolor}};
$MA.Graph.Legend.prototype.getMaxTextSize=function(){var a,b=0,c=0,d=null;if(this.location==$MA.Graph.LegendType.NONE)return new $MA.Graph.TextSize(0,0);d=this.graphObj.categoryAxis.label;if(d==null)return new $MA.Graph.TextSize(0,0);if(this.graphObj instanceof $MA.Graph.PieGraphObject)for(a=0;a<this.graphObj.categories.length;a++){d=this.graphObj.categories[a];d=new $MA.Graph.Data(this.displayDef,d.displayValue);d=d.getTextSize(this.graphObj.context);if(d.width>b)b=d.width;if(d.height>c)c=d.height}else{a=
this.graphObj.getSeriesCount();var e;for(e=0;e<a;e++){d=this.graphObj.getSeries(e).label;d=d.getTextSize(this.graphObj.context);if(d.width>b)b=d.width;if(d.height>c)c=d.height}}return new $MA.Graph.TextSize(b,c)};$MA.Graph.Legend.prototype.draw=function(){};$MA.Graph.Legend.prototype.reset=function(){this.drawObjectsList={}};
$MA.Graph.Series=function(a,b){this.graphObj=a;this.name=b;this.label=new $MA.Graph.Data(a.legendDisplayDef,b);this.items=[];this.drawContext=void 0;this.enabled=!0;this.getDrawContext=function(){return this.drawContext};this.sumBeforeRange=0};$MA.Graph.Series.prototype.setMask=function(a){this.mask=a};
$MA.Graph.Series.prototype.getItems=function(){this.selected=!1;var a=this.items,b=this.items.length;if(this.mask&&this.mask.length>0){var c;for(c=0;c<b;c++)if(this.mask[c]){if(a[c].selected=!0,!this.selected)this.selected=!0}else a[c].selected=!1}return a};$MA.Graph.Series.prototype.isSelected=function(){return this.selected};$MA.Graph.Series.prototype.removeNegativeItems=function(){return[]};$MA.Graph.Series.prototype.setEnabled=function(a){this.enabled=a};$MA.Graph.Series.prototype.isEnabled=function(){return this.enabled};
$MA.Graph.Series.prototype.add=function(a,b,c,d,e){a=new $MA.Graph.Item(b,c,d);a.otherValuesDisplayText=e;a.setCategory(this.graphObj.categories[this.graphObj.categories.length-1]);a.parentSeries=this;this.items.push(a)};$MA.Graph.Series.prototype.insert=function(a,b,c,d,e,f,g,h,j){b=new $MA.Graph.Item(b,c,d,j);b.otherValuesDisplayText=e;e=this.graphObj.getCategoryIndex(a);e!=-1?(b.setCategory(this.graphObj.categories[e]),this.items[e]=b):(b.setCategory(this.graphObj.createCategory(a,f,g,h)),this.items.push(b))};
$MA.Graph.Series.prototype.sortY=function(){this.items.sort(function(a,b){return b.yValue-a.yValue})};$MA.Graph.Series.prototype.getYByX=function(a){var b;for(b=0;b<this.items.length;b++)if(this.items[b].getXValue()==a)return this.items[b].yValue;return 0};
$MA.Graph.Series.prototype.getMinItemValue=function(a){var b=this.items.length;if(b==0)return 0;var c=this.items[0].yValue,d;a&&(typeof c=="number"&&!isNaN(c)?(d=this.sumBeforeRange+c,this.sumBeforeRange!=0&&(c=this.items[0].yValue<0?d:this.sumBeforeRange)):c=void 0);var e,f;if(c==void 0||c==null)for(e=1;e<b;e++)if(f=this.items[e].yValue,a){if(typeof f=="number"&&!isNaN(f)){d=this.sumBeforeRange+f;c=this.sumBeforeRange!=0?f<0?d:this.sumBeforeRange:f;break}}else if(f!=void 0&&f!=null){c=f;break}for(e=
1;e<b;e++)f=this.items[e].yValue,a===!0&&(typeof f=="number"&&!isNaN(f)?(d+=f,f=d):f=void 0),f!=void 0&&f<c&&(c=f);return c};
$MA.Graph.Series.prototype.getMaxItemValue=function(a){var b=this.items.length;if(b==0)return 0;var c=this.items[0].yValue,d;a&&(typeof c=="number"&&!isNaN(c)?(d=this.sumBeforeRange+c,this.sumBeforeRange!=0&&(c=c>0?d:this.sumBeforeRange)):c=void 0);var e,f;if(c==void 0||c==null)for(e=1;e<b;e++)if(f=this.items[e].yValue,a){if(typeof f=="number"&&!isNaN(f)){d=this.sumBeforeRange+f;c=this.sumBeforeRange!=0?f>0?d:this.sumBeforeRange:f;break}}else if(f!=void 0&&f!=null){c=f;break}for(e=1;e<b;e++)f=this.items[e].yValue,
a===!0&&(typeof f=="number"&&!isNaN(f)?(d+=f,f=d):f=void 0),f!=void 0&&f>c&&(c=f);return c};$MA.Graph.Series.prototype.getItemX=function(a){if(a<0||a>=this.items.length)return null;return this.items[a].getXValue()};$MA.Graph.Series.prototype.getItemY=function(a){if(a<0||a>=this.items.length)return null;return this.items[a].yValue};
$MA.Graph.Series.prototype.getItemColorData=function(a,b){if(a<0||a>=this.items.length)return null;var c,d;for(d=0;d<this.items.length;d++)if(this.items[d].originalIndex==a){c=this.items[d];break}if(c==void 0)return null;c=c.otherValues;if(c==void 0||c==null)return null;for(d=0;d<c.length;d++)if(c[d].hasOwnProperty(b))return c[d][b];return null};
$MA.Graph.Series.prototype.getItemYDouble=function(a){if(a<0||a>=this.items.length)return 0;var a=this.items[a],b=0;typeof a.yValue=="number"?b=a.yValue:typeof a.yValue=="string"&&(b=parseFloat(a.yValue));return b};$MA.Graph.Series.prototype.getYPosSum=function(){var a,b=0,c;for(a in this.items)c=this.getItemYDouble(a),c!=0&&(b+=Math.abs(c));return b};$MA.Graph.PIE_EXPLODE_PERCENT=20;
$MA.Graph.Series.prototype.getItemPieExplodePercent=function(a){if(this.items[a].selected)return $MA.Graph.PIE_EXPLODE_PERCENT;return 0};$MA.Graph.Series.prototype.getMaxXValue=function(){var a=this.items.length;if(a==0)return 0;var b=this.items[0].getXValue(),c,d;for(c=1;c<a;c++)d=this.items[c],d.getXValue()>b&&(b=d.getXValue());return b};
$MA.Graph.Series.prototype.getMinXValue=function(){var a=this.items.length;if(a==0)return 0;var b=this.items[0].getXValue(),c,d;for(c=1;c<a;c++)d=this.items[c],d.getXValue()<b&&(b=d.getXValue());return b};$MA.Graph.Series.prototype.getMinPosXValue=function(){var a=null,b,c=this.items.length;if(c==0)return a;var a=this.getItemX(0),d;for(d=0;d<c;d++)b=this.getItemX(d),b!=null&&b<a&&(a=b);return a};
$MA.Graph.Series.prototype.getMaxBubbleHeight=function(){var a=this.items.length;if(a==0)return 0;var b,c,d;c=this.items[0].getBubbleHeight();if(c==void 0||c==""||c==null)for(b=1;b<a;b++)if(c=Math.abs(this.items[b].getBubbleHeight()),c!=void 0&&c!=""&&c!=null&&!isNaN(c))break;for(b=1;b<a;b++)d=Math.abs(this.items[b].getBubbleHeight()),d==void 0||d==""||d==null||isNaN(d)||d>c&&(c=d);return c};
$MA.Graph.Series.prototype.getMaxBubbleSize=function(){var a=this.items.length;if(a==0)return 0;var b,c,d;c=this.items[0].getBubbleValue();if(c==void 0||c==""||c==null)for(b=1;b<a;b++)if(c=Math.abs(this.items[b].getBubbleValue()),c!=void 0&&c!=""&&c!=null&&!isNaN(c))break;for(b=1;b<a;b++)d=Math.abs(this.items[b].getBubbleValue()),d==void 0||d==""||d==null||isNaN(d)||d>c&&(c=d);return c};$MA.Graph.SeriesBrushes=function(){};
$MA.Graph.SeriesBrushes.defaultFillPalette=[36819,10080513,15964930,10473451,4957959,16175411,13323564,13289402,886428,13489966,2388528,7134940,15430400,12172241,28115,4045183];$MA.Graph.SeriesBrushes.defaultStrokePalette=[18538,5007360,7949569,5269622,2446083,8087577,6694678,6644829,410446,6712087,1194264,3567470,7748096,6053224,14186,2055488];
$MA.Graph.SeriesBrushes.defaultInsetShadowPalette=[8443647,13893504,16765312,14086399,12189573,16771993,16756891,16776949,9039359,16383899,11075509,12517374,16760448,15790847,8438271,11206615];$MA.Graph.SeriesBrushes.fillPalette=$MA.Graph.SeriesBrushes.defaultFillPalette;$MA.Graph.SeriesBrushes.strokePalette=$MA.Graph.SeriesBrushes.defaultStrokePalette;$MA.Graph.SeriesBrushes.insetShadowPalette=$MA.Graph.SeriesBrushes.defaultInsetShadowPalette;$MA.Graph.SeriesBrushes.outlineBrush=new $MA.Brush("rgba(0, 0, 0, 0.1)");
$MA.Graph.SeriesBrushes.brushesList=[];$MA.Graph.SeriesBrushes.getFillBrush=function(a,b){var c=$MA.Graph.SeriesBrushes.getBrushes("defaultFill",$MA.Graph.SeriesBrushes.fillPalette,b);return c[a%c.length]};$MA.Graph.SeriesBrushes.getStrokeBrush=function(a,b){var c;if($MA.Graph.SeriesBrushes.strokePalette!=void 0)return c=$MA.Graph.SeriesBrushes.getBrushes("defaultStroke",$MA.Graph.SeriesBrushes.strokePalette,b),c[a%c.length]};
$MA.Graph.SeriesBrushes.getInsetShadowBrush=function(a,b){var c;if($MA.Graph.SeriesBrushes.insetShadowPalette!=void 0)return c=$MA.Graph.SeriesBrushes.getBrushes("defaultInsetShadow",$MA.Graph.SeriesBrushes.insetShadowPalette,b),c[a%c.length]};
$MA.Graph.SeriesBrushes.getBrushes=function(a,b,c){var d=a,e=!1;typeof b[0]=="object"&&(e=!0,d=a+c);a=$MA.Graph.SeriesBrushes.brushesList[d];if(a==void 0){a=[];if(e)for(e=0;e<b.length;e++)a[e]=new $MA.GradientBrush(b[e],c);else for(e=0;e<b.length;e++)a[e]=new $MA.Brush(b[e]);$MA.Graph.SeriesBrushes.brushesList[d]=a}return a};
$MA.Graph.SeriesBrushes.clearBrushList=function(){$MA.Graph.SeriesBrushes.brushesList=[];$MA.Graph.SeriesBrushes.strokePalette=void 0;$MA.Graph.SeriesBrushes.insetShadowPalette=void 0};$MA.Graph.SeriesBrushes.setPalette=function(a,b){if(a=="defaultFill")$MA.Graph.SeriesBrushes.fillPalette=b;else if(a=="defaultStroke")$MA.Graph.SeriesBrushes.strokePalette=b;else if(a=="defaultInsetShadow")$MA.Graph.SeriesBrushes.insetShadowPalette=b};$MA.Graph.TextSize=function(a,b){this.width=a;this.height=b};
$MA.Graph.Data=function(a,b){this.value=this.realValue=b;this.displayDef=a};
$MA.Graph.Data.prototype.getTextSize=function(a){if(a!=void 0){a.font=this.displayDef.font.toString();if(this.value==void 0)return new $MA.Graph.TextSize(0,0);var b=this.toString();if(b.length==0)return new $MA.Graph.TextSize(0,0);var a=a.measureText(b),c;if(this.displayDef.font.rotation==0)c=new $MA.Graph.TextSize(a.width+3,this.displayDef.font.size);else if(this.displayDef.font.rotation==90||this.displayDef.font.rotation==270)c=new $MA.Graph.TextSize(this.displayDef.font.size,a.width+3);return c}};
$MA.Graph.Data.prototype.compare=function(a){if(this.value>a.value)return 1;if(this.value<a.value)return-1;return 0};$MA.Graph.Data.prototype.toString=function(){return this.displayDef!=void 0&&this.displayDef.format!=void 0?$MA.format(this.value,this.displayDef.format):$MA.format(this.value)};$MA.Graph.YData=function(a,b,c){$MA.Graph.Data.call(this,a,b);this.isHundredPercent=c};$MA.Graph.YData.prototype=new $MA.Graph.Data;
$MA.Graph.YData.prototype.toString=function(){if(this.isHundredPercent)return $MA.format(this.value*100,"percent");if(this.displayDef.percentageChart)return this.value;if(this.displayDef!=void 0&&this.displayDef.format!=void 0){var a=this.displayDef.format.toLowerCase();if(a=="percent")return $MA.format(this.value,a)}a=$MA.labelNumberString(this.value);!$MA.yTicLabels.allInteger&&a.indexOf($MA.yTicLabels.decimalSymbol)!=-1&&a.indexOf(".")==-1&&($MA.yTicLabels.decimalSymbol?a=a.substr(0,a.length-1)+
".0"+$MA.yTicLabels.decimalSymbol:a+=".0");return a};$MA.Graph.DrawPrimitive=function(a){this.drawObj=a};$MA.Graph.DrawPrimitive.prototype.contains=function(){return!1};$MA.Graph.DrawPrimitive.prototype.setBoundaries=function(){};
$MA.Graph.DrawPrimitive.prototype.getStyle=function(a,b,c){var d=a.getContext?a.getContext("2d"):null,e="#ffffff";b instanceof $MA.GradientBrush?c&&c.length>0?(a=this.getPos(c),e=b.createLinearGradient(d,a[0],a[1],a[2],a[3])):e=b.createLinearGradient(d,0,0,a.width,a.height):b instanceof $MA.Brush&&(e=b.toString());return e};
$MA.Graph.DrawPrimitive.prototype.getPos=function(a){var b=a[0].x,c=a[0].x,d=a[0].y,e=a[0].y,f;for(f=0;f<a.length;f++){if(a[f].x<b)b=a[f].x;else if(a[f].x>c)c=a[f].x;if(a[f].y<d)d=a[f].y;else if(a[f].y>e)e=a[f].y}return[b,d,c,e]};$MA.Graph.ArcPrimitive2D=function(a,b,c,d,e,f,g,h){$MA.Graph.DrawPrimitive.call(this,a);this.drawContext=b;this.x=c;this.y=d;this.radius=e;this.radStart=f;this.radEnd=g;this.isDonut=h};$MA.Graph.ArcPrimitive2D.prototype=new $MA.Graph.DrawPrimitive;
$MA.Graph.ArcPrimitive2D.prototype.plot=function(a){if(Math.abs(this.radStart-this.radEnd)>Math.PI*2)this.plotSingle(a);else{a=a.getContext?a.getContext("2d"):null;a.beginPath();a.arc(this.x,this.y,this.radius,this.radStart,this.radEnd,!0);this.isDonut?a.arc(this.x,this.y,this.radius/3,this.radEnd,this.radStart,!1):a.lineTo(this.x,this.y);a.closePath();a.fillStyle=this.drawContext.fillBrush instanceof $MA.GradientBrush?this.drawContext.fillBrush.createRadialGradient(a,this.x,this.y,0,this.x,this.y,
this.radius):this.drawContext.fillBrush.toString();a.fill();if(this.drawContext.insetShadowBrush&&this.radius/2>1)a.beginPath(),a.arc(this.x,this.y,this.radius-1,this.radStart,this.radEnd,!0),a.strokeStyle=this.drawContext.insetShadowBrush.toString(),a.stroke();if(this.drawContext.strokeBrush&&(a.beginPath(),a.arc(this.x,this.y,this.radius,this.radStart,this.radEnd,!0),a.strokeStyle=this.drawContext.strokeBrush.toString(),a.stroke(),this.isDonut))a.beginPath(),a.arc(this.x,this.y,this.radius/3,this.radStart,
this.radEnd,!0),a.strokeStyle=this.drawContext.strokeBrush.toString(),a.stroke()}};
$MA.Graph.ArcPrimitive2D.prototype.plotSingle=function(a){a=a.getContext?a.getContext("2d"):null;a.beginPath();a.arc(this.x,this.y,this.radius,Math.PI*1.5+0.1,Math.PI*0.5-0.1,!0);this.isDonut?a.arc(this.x,this.y,this.radius/3,Math.PI*0.5-0.1,Math.PI*1.5+0.1,!1):a.lineTo(this.x,this.y);a.closePath();a.fillStyle=this.drawContext.fillBrush instanceof $MA.GradientBrush?this.drawContext.fillBrush.createRadialGradient(a,this.x,this.y,0,this.x,this.y,this.radius):this.drawContext.fillBrush.toString();a.fill();
a.beginPath();a.arc(this.x,this.y,this.radius,Math.PI*0.5,Math.PI*1.5,!0);this.isDonut?a.arc(this.x,this.y,this.radius/3,Math.PI*1.5,Math.PI*0.5,!1):a.lineTo(this.x,this.y);a.closePath();a.fill();if(this.drawContext.insetShadowBrush&&this.radius/2>1)a.beginPath(),a.arc(this.x,this.y,this.radius-1,this.radStart,this.radEnd,!0),a.strokeStyle=this.drawContext.insetShadowBrush.toString(),a.stroke();if(this.drawContext.strokeBrush&&(a.beginPath(),a.arc(this.x,this.y,this.radius,this.radStart,this.radEnd,
!0),a.strokeStyle=this.drawContext.strokeBrush.toString(),a.stroke(),this.isDonut))a.beginPath(),a.arc(this.x,this.y,this.radius/3,this.radStart,this.radEnd,!0),a.strokeStyle=this.drawContext.strokeBrush.toString(),a.stroke()};
$MA.Graph.ArcPrimitive2D.prototype.contains=function(a){var b=a.x-this.x,c=a.y-this.y,a=Math.sqrt(b*b+c*c);if(a>this.radius)return!1;if(this.isDonut&&a<this.radius/3)return!1;a=0;if(b>0)a=Math.atan(c/b);else if(b<0)a=Math.atan(c/b)-Math.PI;else if(b==0)c>0?a=Math.PI:c<=0&&(a=-Math.PI);a%=2*Math.PI;a<0&&(a+=Math.PI*2);b=this.radStart%(Math.PI*2);c=this.radEnd%(Math.PI*2);this.radStart-this.radEnd-0.1==Math.PI*2&&(b-=0.1);return b<c?a>=0&&a<=b||a>=c&&a<=Math.PI*2:a>=c&&a<=b};
$MA.Graph.BubblePrimitive2D=function(a){$MA.Graph.DrawPrimitive.call(this,a)};$MA.Graph.BubblePrimitive2D.prototype=new $MA.Graph.DrawPrimitive;
$MA.Graph.BubblePrimitive2D.prototype.drawEllipse=function(a,b,c,d){b.save();b.beginPath();var e=a.x,f=a.y,g=a.radius,h=2*g,j=2*a.height;b.strokeStyle=this.getStyle(c,a.drawContext.strokeBrush,d);b.lineWidth=2;b.drawEllipse(e-g,f-a.height,h,j,!0);b.stroke();b.lineWidth=1;b.fillStyle=this.getStyle(b,a.drawContext.fillBrush,d);b.fill();if(a.drawContext.insetShadowBrush&&a.radius>1)g-=1,b.strokeStyle=this.getStyle(c,a.drawContext.insetShadowBrush,d),b.drawEllipse(e-g-1,f-a.height,h,j,!1),b.stroke();
b.closePath();b.restore()};
$MA.Graph.BubblePrimitive2D.prototype.drawStar=function(a,b,c,d,e,f){var e=a.x,g=a.y,h=a.radius;b.beginPath();var j=a.height,l=0.4;d==3&&(l=0.3);var n=h*l;l*=j;var k;for(k=0;k<=2*f;++k){var m=k*Math.PI/f-Math.PI/2;b.lineTo(e+(k%2==0?j:l)*Math.cos(m),g+(k%2==0?h:n)*Math.sin(m))}b.fillStyle=this.getStyle(c,a.drawContext.fillBrush,d);b.strokeStyle=this.getStyle(c,a.drawContext.insetShadowBrush,d);b.lineWidth=1;b.stroke();b.fill();b.closePath();b.save();b.lineWidth=3;b.fillStyle=this.getStyle(c,a.drawContext.fillBrush,
d);b.strokeStyle=this.getStyle(c,a.drawContext.insetShadowBrush,d);b.beginPath();b.stroke();b.fill();b.closePath();b.restore()};
$MA.Graph.BubblePrimitive2D.prototype.drawSquare=function(a,b,c,d){var e=a.x,f=a.y,g=a.radius,h=a.height;b.beginPath();b.moveTo(e-g,f-h);b.lineTo(e+g,f-h);b.lineTo(e+g,f+h);b.lineTo(e-g,f+h);b.lineTo(e-g,f-h);b.closePath();b.lineWidth=1;if(a.drawContext.strokeBrush&&!a.drawHost.animation)b.moveTo(e-g,f-h),b.lineTo(e+g,f-h),b.lineTo(e+g,f+h),b.lineTo(e-g,f+h),b.lineTo(e-g,f-h),b.strokeStyle=this.getStyle(c,a.drawContext.outlineBrush,d),b.lineWidth=1,b.stroke();b.strokeStyle=this.getStyle(c,a.drawContext.strokeBrush,
d);b.fillStyle=this.getStyle(c,a.drawContext.fillBrush,d);b.fill();b.lineWidth=1;b.stroke();if(a.drawContext.insetShadowBrush&&a.radius>1)h-=1,g-=1,b.moveTo(e-g,f-h),b.lineTo(e+g,f-h),b.lineTo(e+g,f+h),b.lineTo(e-g,f+h),b.lineTo(e-g,f-h),b.strokeStyle=this.getStyle(c,a.drawContext.insetShadowBrush,d),b.stroke()};
$MA.Graph.BubblePrimitive2D.prototype.drawDiamond=function(a,b,c,d){b.save();var e=a.x,f=a.y,g=a.radius,h=a.height;b.beginPath();b.moveTo(e-g,f);b.lineTo(e,f-h);b.lineTo(e+g,f);b.lineTo(e,f+h);b.lineTo(e-g,f);b.closePath();b.lineWidth=1;if(a.drawContext.strokeBrush&&!a.drawHost.animation)b.moveTo(e-g,f),b.lineTo(e,f-h),b.lineTo(e+g,f),b.strokeStyle=this.getStyle(c,a.drawContext.outlineBrush,d),b.lineWidth=3,b.stroke();b.fillStyle=this.getStyle(c,a.drawContext.fillBrush,d);b.fill();b.strokeStyle=this.getStyle(c,
a.drawContext.strokeBrush,d);b.lineWidth=1;b.stroke();if(a.drawContext.insetShadowBrush&&a.radius>1)h-=1,g=a.radius-1,b.moveTo(e-g,f),b.lineTo(e,f-h),b.lineTo(e+g,f),b.lineTo(e,f+h),b.lineTo(e-g,f),b.closePath(),b.strokeStyle=this.getStyle(c,a.drawContext.insetShadowBrush,d),b.stroke();b.restore()};
$MA.Graph.BubblePrimitive2D.prototype.drawTriangle=function(a,b,c,d,e,f){var e=a.x,g=a.y,h=a.radius,j=a.height;b.beginPath();f=="bottom"?(b.moveTo(e-h,g+j),b.lineTo(e+h,g+j),b.lineTo(e,g-j)):f=="left"?(b.moveTo(e-h,g+j),b.lineTo(e-h,g-j),b.lineTo(e+h,g)):f=="right"?(b.moveTo(e+h,g+j),b.lineTo(e+h,g-j),b.lineTo(e-h,g)):f=="top"&&(b.moveTo(e-h,g-j),b.lineTo(e+h,g-j),b.lineTo(e,g+j));b.closePath();b.stroke();b.strokeStyle=this.getStyle(c,a.drawContext.insetShadowBrush,d);a.drawContext.insetShadowBrush&&
a.radius>1&&(j-=1,h-=1,f=="bottom"?(b.moveTo(e-h,g+j),b.lineTo(e+h,g+j),b.lineTo(e,g-j)):f=="left"?(b.moveTo(e-h,g+j),b.lineTo(e-h,g-j),b.lineTo(e+h,g)):f=="right"?(b.moveTo(e+h,g+j),b.lineTo(e+h,g-j),b.lineTo(e-h,g)):f=="top"&&(b.moveTo(e-h,g-j),b.lineTo(e+h,g-j),b.lineTo(e,g+j)));b.fillStyle=this.getStyle(c,a.drawContext.fillBrush,d);b.fill();b.lineWidth=1;b.stroke()};
$MA.Graph.BubblePrimitive2D.prototype.plot=function(a){var b=this.drawObj;if(b.drawContext.fillBrush!=$MA.Brushes.transparent&&b.radius!==void 0){var c=b.shape.toLowerCase();if(!(b.radius<=0)){var d=a.getContext?a.getContext("2d"):null,e=null;b.drawContext.fillBrush instanceof $MA.GradientBrush&&(e=[],e.push(new $MA.Point(b.x-b.radius,b.y-b.radius)),e.push(new $MA.Point(b.x+b.radius,b.y+b.radius)));if(c=="diamond")this.drawDiamond(b,d,a,e,b.drawContext.outlineBrush,!1);else if(c=="star3")this.drawStar(b,
d,a,e,b.drawContext.outlineBrush,3);else if(c=="star4")this.drawStar(b,d,a,e,b.drawContext.outlineBrush,4);else if(c=="star5")this.drawStar(b,d,a,e,b.drawContext.outlineBrush,5);else if(c=="star6")this.drawStar(b,d,a,e,b.drawContext.outlineBrush,6);else if(c=="star7")this.drawStar(b,d,a,e,b.drawContext.outlineBrush,7);else if(c=="star8")this.drawStar(b,d,a,e,b.drawContext.outlineBrush,8);else if(c=="star9")this.drawStar(b,d,a,e,b.drawContext.outlineBrush,9);else if(c=="star10")this.drawStar(b,d,a,
e,b.drawContext.outlineBrush,9);else if(c=="square")this.drawSquare(b,d,a,e,b.drawContext.outlineBrush,9);else if(c=="triangle")this.drawTriangle(b,d,a,e,b.drawContext.outlineBrush,"bottom");else if(c=="lefttriangle")this.drawTriangle(b,d,a,e,b.drawContext.outlineBrush,"left");else if(c=="righttriangle")this.drawTriangle(b,d,a,e,b.drawContext.outlineBrush,"right");else if(c=="invertedtriangle")this.drawTriangle(b,d,a,e,b.drawContext.outlineBrush,"top");else if(c=="circle"&&b.radius!=b.height)this.drawEllipse(b,
d,a,e,b.drawContext.outlineBrush,!1);else{d.beginPath();d.arc(b.x,b.y,b.radius,0,Math.PI*2,!0);d.closePath();if(b.drawContext.strokeBrush&&!b.drawHost.animation)d.strokeStyle=this.getStyle(a,b.drawContext.outlineBrush,e),d.lineWidth=3,d.stroke();d.fillStyle=this.getStyle(a,b.drawContext.fillBrush,e);d.fill();d.strokeStyle=this.getStyle(a,b.drawContext.strokeBrush,e);d.lineWidth=1;d.stroke();if(b.drawContext.insetShadowBrush&&b.radius>1)d.beginPath(),d.arc(b.x,b.y,b.radius-1,0,$MA.platform.blackberry?
Math.PI*2:Math.PI,!0),d.strokeStyle=this.getStyle(a,b.drawContext.insetShadowBrush,e),d.stroke()}}}};$MA.Graph.BubblePrimitive2D.prototype.contains=function(a){var b=a.x-this.drawObj.x,a=a.y-this.drawObj.y;return Math.sqrt(b*b+a*a)<=this.drawObj.radius};$MA.Graph.DashedLinePrimitive2D=function(a){$MA.Graph.DrawPrimitive.call(this,a)};$MA.Graph.DashedLinePrimitive2D.prototype=new $MA.Graph.DrawPrimitive;
$MA.Graph.DashedLinePrimitive2D.prototype.plot=function(a){var b=this.drawObj;if(b.drawContext.strokeBrush!==$MA.Brushes.transparent){var c=a.getContext("2d"),d=b.x1,e=b.y1,f=b.x2-b.x1,g=b.y2-b.y1,h=Math.sqrt(f*f+g*g),j=[3,3],l=j.length,n=0,k=0,m;c.save();if(!b.needsToDrawAllAtOnce||b.isFirst)c.beginPath(),c.moveTo(d,e);for(;h>k;)m=n++%l,k+=j[m],h>=k&&(d+=f/h*j[m],e+=g/h*j[m],m?c.moveTo(d,e):c.lineTo(d,e));c.lineTo(b.x2,b.y2);if(!b.needsToDrawAllAtOnce||b.isLast)c.strokeStyle=b.drawContext.strokeBrush instanceof
$MA.GradientBrush?b.drawContext.strokeBrush.colorStops[0][1]:this.getStyle(a,b.drawContext.strokeBrush,null),c.lineWidth=b.lineDef.width||1,c.stroke(),c.closePath();c.restore()}};$MA.Graph.LinePrimitive2D=function(a){$MA.Graph.DrawPrimitive.call(this,a)};$MA.Graph.LinePrimitive2D.prototype=new $MA.Graph.DrawPrimitive;
$MA.Graph.LinePrimitive2D.prototype.plot=function(a){var b=this.drawObj;if(b.drawContext.strokeBrush!==$MA.Brushes.transparent){var c=a.getContext("2d");if(!b.needsToDrawAllAtOnce||b.isFirst)c.beginPath(),c.moveTo(b.x1,b.y1);c.lineTo(b.x2,b.y2);if(!b.needsToDrawAllAtOnce||b.isLast){c.strokeStyle=b.drawContext.strokeBrush instanceof $MA.GradientBrush?b.drawContext.strokeBrush.colorStops[0][1]:this.getStyle(a,b.drawContext.strokeBrush,null);c.lineWidth=b.lineDef.width||1;if(!$MA.platform.blackberry)c.lineJoin=
"round";c.stroke();c.closePath()}}};$MA.Graph.PolygonPrimitive2D=function(a,b,c){$MA.Graph.DrawPrimitive.call(this,a);this.drawContext=b;this.points=c;if(this.boundaries==void 0)this.boundaries=new $MA.Graph.BoundaryBox};$MA.Graph.PolygonPrimitive2D.prototype=new $MA.Graph.DrawPrimitive;
$MA.Graph.PolygonPrimitive2D.prototype.plot=function(a){var b=a.getContext?a.getContext("2d"):null,c=this.points.length;b.beginPath();b.lineWidth=0.5;var d=b.globalAlpha;if(void 0!=this.drawContext.globalAlpha)b.globalAlpha=this.drawContext.globalAlpha;b.moveTo(this.points[0].x,this.points[0].y);var e;for(e=1;e<c;e++)b.lineTo(this.points[e].x,this.points[e].y);b.fillStyle=this.getStyle(a,this.drawContext.fillBrush,this.points);b.fill();b.strokeStyle=this.getStyle(a,this.drawContext.strokeBrush,this.points);
b.closePath();b.stroke();b.globalAlpha=d};$MA.Graph.PolygonPrimitive2D.prototype.contains=function(a){var b=!1;this.boundaries.pointInside(a)&&(b=this.isInbound(this.points,a));return b};$MA.Graph.PolygonPrimitive2D.prototype.setBoundaries=function(){var a=0,b,c,d;for(b=0;b<this.points.length;b++)c=this.points[b],this.boundaries.setMinMax(c),d=b==this.points.length-1?this.points[0]:this.points[b+1],a+=(c.y+d.y)*(d.x-c.x);this.boundaries.setEquation(0,0,a/2,this.points[0].x,this.points[0].y,0)};
$MA.Graph.PolygonPrimitive2D.prototype.isInbound=function(a,b){var c=!1,d,e=0;d=0;for(e=a.length-1;d<a.length;e=d++)if((a[d].y<=b.y&&b.y<a[e].y||a[e].y<=b.y&&b.y<a[d].y)&&b.x<(a[e].x-a[d].x)*(b.y-a[d].y)/(a[e].y-a[d].y)+a[d].x)c=!c;return c};$MA.Graph.PolylinePrimitive2D=function(a,b,c){$MA.Graph.DrawPrimitive.call(this,a);this.drawContext=b;this.points=c};$MA.Graph.PolylinePrimitive2D.prototype=new $MA.Graph.DrawPrimitive;
$MA.Graph.PolylinePrimitive2D.prototype.plot=function(a){if(this.drawContext.strokeBrush!=$MA.Brushes.transparent){var b=a.getContext?a.getContext("2d"):null,c=this.points.length;b.beginPath();b.moveTo(this.points[0].x,this.points[0].y);var d;for(d=1;d<c;d++)b.lineTo(this.points[d].x,this.points[d].y);b.closePath();b.lineWidth=1;b.strokeStyle=this.drawContext.strokeBrush instanceof $MA.GradientBrush?this.drawContext.strokeBrush.colorStops[0][1]:this.getStyle(a,this.drawContext.strokeBrush,this.points);
b.stroke()}};$MA.Graph.SymbolPrimitive2D=function(a,b,c,d,e,f,g){$MA.Graph.DrawPrimitive.call(this,a);this.drawContext=b;this.type=c;this.x=d;this.y=e;this.width=f;this.height=g};$MA.Graph.SymbolPrimitive2D.prototype=new $MA.Graph.DrawPrimitive;
$MA.Graph.SymbolPrimitive2D.prototype.plot=function(a){var b=a.getContext?a.getContext("2d"):null;switch(this.type){case $MA.Graph.SymbolType.BOX:b.fillStyle=this.getStyle(a,this.drawContext.fillBrush,null);b.fillRect(this.x-this.width/2,this.y-this.height/2,this.width,this.height);break;case $MA.Graph.SymbolType.CIRCLE:if(b.beginPath(),b.arc(this.x,this.y,this.width/2,0,Math.PI*2,!0),b.closePath(),b.fillStyle=this.getStyle(a,this.drawContext.fillBrush,null),b.fill(),b.strokeStyle=this.getStyle(a,
this.drawContext.strokeBrush,null),b.stroke(),!$MA.platform.blackberry&&b.lineWidth<=1&&this.drawContext.insetShadowBrush&&this.width/2>1)b.beginPath(),b.arc(this.x,this.y,this.width/2-1,0,Math.PI,!0),b.strokeStyle=this.getStyle(a,this.drawContext.insetShadowBrush,null),b.stroke()}};$MA.Graph.TextPrimitive2D=function(a,b,c,d,e,f){$MA.Graph.DrawPrimitive.call(this,a);this.data=b;this.x=c;this.y=d;this.width=e;this.height=f};$MA.Graph.TextPrimitive2D.prototype=new $MA.Graph.DrawPrimitive;
$MA.Graph.TextPrimitive2D.prototype.plot=function(a){a=a.getContext?a.getContext("2d"):null;a.font=this.data.displayDef.font.toString();a.fillStyle=this.data.displayDef.foreground.toString();this.data.displayDef.font.rotation!=0?(a.save(),a.translate(this.x,this.y+this.height/2),a.rotate(this.data.displayDef.font.rotation*Math.PI/180),a.fillText(this.data,0,this.data.displayDef.font.size),a.restore()):a.fillText(this.data,this.x,this.y+this.data.displayDef.font.size)};
$MA.Graph.BarPrimitive2D=function(a,b,c){$MA.Graph.PolygonPrimitive2D.call(this,a,b,c)};$MA.Graph.BarPrimitive2D.prototype=new $MA.Graph.PolygonPrimitive2D;
$MA.Graph.BarPrimitive2D.prototype.plot=function(a){if(this.drawContext.fillBrush!=$MA.Brushes.transparent){var b=this.drawObj;if(!isNaN(b.height)&&!(b.height<=0||isNaN(b.width)||b.width<=0)){var c=b.height<2?b.y-0.5:b.y,d=a.getContext?a.getContext("2d"):null;if(b.height>=1&&b.width>=1){d.beginPath();$MA.ContextHelper.roundRect(d,b.x,c,b.width,b.height,0);d.closePath();if(this.drawContext.strokeBrush&&this.drawContext.strokeBrush!=$MA.Brushes.transparent&&!b.drawHost.animation)d.lineWidth=3,d.strokeStyle=
this.getStyle(a,this.drawContext.outlineBrush,this.points),d.stroke();d.fillStyle=this.getStyle(a,this.drawContext.fillBrush,this.points);d.fill();if(this.drawContext.strokeBrush&&this.drawContext.strokeBrush!=$MA.Brushes.transparent)d.lineWidth=1,d.strokeStyle=this.getStyle(a,this.drawContext.strokeBrush,this.points),d.stroke();if(this.drawContext.insetShadowBrush){d.beginPath();var e=b.insetShadowLoc;b.width>2&&b.height>3&&(e=="top"?(d.moveTo(b.x+1,c+1),d.lineTo(b.x+b.width-1,c+1)):e=="right"?(d.moveTo(b.x+
b.width-1,c+1),d.lineTo(b.x+b.width-1,c+b.height-1)):e=="bottom"?(d.moveTo(b.x+1,c+b.height-1),d.lineTo(b.x+b.width-1,c+b.height-1)):e=="left"&&(d.moveTo(b.x+1,c+1),d.lineTo(b.x+1,c+b.height-1)));d.closePath();d.strokeStyle=this.getStyle(a,this.drawContext.insetShadowBrush,this.points);d.stroke()}}else d.lineWidth=1,d.strokeStyle=this.getStyle(a,this.drawContext.strokeBrush,this.points),d.strokeRect(b.x,c,b.width>0&&b.width<1?1:b.width,b.height>0&&b.height<1?1:b.height)}}};
$MA.Graph.DrawObject=function(a){this.drawHost=a;if(this.drawPrimitives==void 0)this.drawPrimitives=[]};$MA.Graph.DrawObject.prototype.resetPrimitives=function(){this.drawPrimitives=[]};$MA.Graph.DrawObject.prototype.plotPrimitives=function(){var a,b;for(a=0;a<this.drawPrimitives.length;a++)b=this.drawPrimitives[a],b.setBoundaries(),b.plot(this.drawHost.canvas)};
$MA.Graph.DrawObject.prototype.getObjectAtPointer=function(a){var b,c;for(b=0;b<this.drawPrimitives.length;b++)if(c=this.drawPrimitives[b],c.contains(a))return!0;return!1};$MA.Graph.DrawObject.prototype.setBrush=function(a,b){var c,d;for(c=0;c<this.drawPrimitives.length;c++){d=this.drawPrimitives[c];if(d.drawContext!=void 0)d.drawContext.fillBrush=a,d.drawContext.strokeBrush=b;d.plot(this.drawHost.canvas)}};
$MA.Graph.Bar2D=function(a,b,c,d,e,f,g,h,j,l){$MA.Graph.DrawObject.call(this,a);this.drawContext=b;this.item=c;this.x=d;this.y=e;this.width=f;this.height=g;this.threeDLook=h;this.offset=j>0?j:f;a=this.drawHost instanceof $MA.Graph.ColumnGraphObject;this.insetShadowLoc=l?a?"bottom":"left":a?"top":"right"};$MA.Graph.Bar2D.prototype=new $MA.Graph.DrawObject;
$MA.Graph.Bar2D.prototype.generate=function(){this.resetPrimitives();var a=[];a.push(new $MA.Point(this.x,this.y));a.push(new $MA.Point(this.x+this.width,this.y));a.push(new $MA.Point(this.x+this.width,this.y+this.height));a.push(new $MA.Point(this.x,this.y+this.height));a.push(new $MA.Point(this.x,this.y));this.drawHost.modernLook?this.drawPrimitives.push(new $MA.Graph.BarPrimitive2D(this,this.drawContext,a)):this.drawPrimitives.push(new $MA.Graph.PolygonPrimitive2D(this,this.drawContext,a));if(this.threeDLook){var b;
b=Math.sqrt(this.offset*this.offset/2)/2;a=[];a.push(new $MA.Point(this.x,this.y));a.push(new $MA.Point(this.x+b,this.y-b));a.push(new $MA.Point(this.x+this.width+b,this.y-b));a.push(new $MA.Point(this.x+this.width,this.y));a.push(new $MA.Point(this.x,this.y));this.drawPrimitives.push(new $MA.Graph.PolygonPrimitive2D(this,this.drawContext,a));a=[];a.push(new $MA.Point(this.x+this.width,this.y));a.push(new $MA.Point(this.x+this.width+b,this.y-b));a.push(new $MA.Point(this.x+this.width+b,this.y+this.height-
b));a.push(new $MA.Point(this.x+this.width,this.y+this.height));a.push(a[0]);this.drawPrimitives.push(new $MA.Graph.PolygonPrimitive2D(this,this.drawContext,a))}this.plotPrimitives()};$MA.Graph.Bubble2D=function(a,b,c,d,e,f,g,h){$MA.Graph.DrawObject.call(this,a);this.drawContext=b;this.item=c;this.x=d;this.y=e;this.radius=f;this.shape=g;this.height=h};$MA.Graph.Bubble2D.prototype=new $MA.Graph.DrawObject;
$MA.Graph.Bubble2D.prototype.generate=function(){this.resetPrimitives();this.drawPrimitives.push(new $MA.Graph.BubblePrimitive2D(this));this.plotPrimitives()};$MA.Graph.Line2D=function(a,b,c,d,e,f,g,h,j){$MA.Graph.DrawObject.call(this,a);this.drawContext=b;this.item=c;this.x1=d;this.y1=e;this.x2=f;this.y2=g;this.lineDef=h;this.outline=j};$MA.Graph.Line2D.prototype=new $MA.Graph.DrawObject;
$MA.Graph.Line2D.prototype.generate=function(){this.resetPrimitives();this.drawPrimitives.push(new $MA.Graph.LinePrimitive2D(this));this.plotPrimitives()};$MA.Graph.PieSlice2D=function(a,b,c,d,e,f,g,h,j){$MA.Graph.DrawObject.call(this,a);this.drawContext=b;this.item=c;this.x=d;this.y=e;this.orgRadius=this.radius=f;this.radStart=g;this.radEnd=h;this.isDonut=j;this.offset=Math.PI;this.offsetPercent=0};$MA.Graph.PieSlice2D.prototype=new $MA.Graph.DrawObject;
$MA.Graph.PieSlice2D.prototype.generate=function(){this.resetPrimitives();var a=this.x,b=this.y;if(this.offsetPercent>0){var c=(this.radStart+this.radEnd)/2+this.offset-Math.PI;a-=this.offsetPercent*this.radius*Math.cos(c);b-=this.offsetPercent*this.radius*Math.sin(c)}this.drawPrimitives.push(new $MA.Graph.ArcPrimitive2D(this,this.drawContext,a,b,this.radius,this.radStart+this.offset,this.radEnd+this.offset,this.isDonut));this.plotPrimitives()};
$MA.Graph.Polygon2D=function(a,b,c,d){$MA.Graph.DrawObject.call(this,a);this.drawContext=b;this.item=c;this.points=d};$MA.Graph.Polygon2D.prototype=new $MA.Graph.DrawObject;$MA.Graph.Polygon2D.prototype.generate=function(){this.resetPrimitives();this.drawPrimitives.push(new $MA.Graph.PolygonPrimitive2D(this,this.drawContext,this.points));this.plotPrimitives()};
$MA.Graph.Rectangle2D=function(a,b,c,d,e,f,g){$MA.Graph.DrawObject.call(this,a);this.drawContext=b;this.series=c;this.x=d;this.y=e;this.width=f;this.height=g};$MA.Graph.Rectangle2D.prototype=new $MA.Graph.DrawObject;
$MA.Graph.Rectangle2D.prototype.generate=function(){var a=[];a.push(new $MA.Point(this.x,this.y));a.push(new $MA.Point(this.x+this.width,this.y));a.push(new $MA.Point(this.x+this.width,this.y+this.height));a.push(new $MA.Point(this.x,this.y+this.height));a.push(new $MA.Point(this.x,this.y));this.resetPrimitives();this.drawPrimitives.push(new $MA.Graph.PolygonPrimitive2D(this,this.drawContext,a));this.plotPrimitives()};
$MA.Graph.Symbol2D=function(a,b,c,d,e,f,g,h){$MA.Graph.DrawObject.call(this,a);this.drawContext=b;this.item=c;this.type=d;this.x=e;this.y=f;this.width=g;this.height=h};$MA.Graph.Symbol2D.prototype=new $MA.Graph.DrawObject;$MA.Graph.Symbol2D.prototype.generate=function(){this.resetPrimitives();this.drawPrimitives.push(new $MA.Graph.SymbolPrimitive2D(this,this.drawContext,this.type,this.x,this.y,this.width,this.height));this.plotPrimitives()};
$MA.Graph.Text2D=function(a,b,c,d,e,f){$MA.Graph.DrawObject.call(this,a);this.data=b;this.x=c;this.y=d;this.width=e;this.height=f};$MA.Graph.Text2D.prototype=new $MA.Graph.DrawObject;$MA.Graph.Text2D.prototype.generate=function(){this.resetPrimitives();this.drawPrimitives.push(new $MA.Graph.TextPrimitive2D(this,this.data,this.x,this.y,this.width,this.height));this.plotPrimitives()};$MA.Graph.DashedLine2D=function(a,b,c,d,e,f,g,h,j){$MA.Graph.Line2D.call(this,a,b,c,d,e,f,g,h,j)};
$MA.Graph.DashedLine2D.prototype=new $MA.Graph.Line2D;$MA.Graph.DashedLine2D.prototype.generate=function(){this.resetPrimitives();this.drawPrimitives.push(new $MA.Graph.DashedLinePrimitive2D(this));this.plotPrimitives()};$MA.Graph.DataType={TEXT:0,DOUBLE:1,DATETIME:2,DATE:3,TIME:4};$MA.Graph.TicType={NONE:0,INSIDE:1,OUTSIDE:2,STRADDLE:3};$MA.Graph.TicRange=function(a,b){this.start=a;this.end=b};$MA.Graph.Axis=function(a){a!=void 0&&this.initialize(a)};$MA.Graph.Axis.DEFAULTMAJORDIVS=5;
$MA.Graph.Axis.prototype.initialize=function(a){this.graphObj=a;this.displayDef=new $MA.Graph.DisplayDefinition(12);this.displayDef.background=$MA.Brushes.transparent;this.labelDisplayDef=new $MA.Graph.DisplayDefinition(14);this.labelDisplayDef.background=$MA.Brushes.transparent;this.primaryLine=new $MA.Graph.LineDefinition;this.secondaryLine=void 0;this.frame=new $MA.Graph.LineDefinition;this.majorGridLine=void 0;this.minValue=this.minorDivIncr=this.majorDivIncr=this.calcMajorDivs=this.minorTicLength=
this.majorTicLength=0;this.customMinValue=!1;this.maxValue=0;this.customMaxValue=!1;this.roundTo=this.labelsEveryN=0;this.visible=!0;this.displayLastCategoryLabel=!1;this.majorTic=$MA.Graph.TicType.OUTSIDE;this.minorTic=$MA.Graph.TicType.NONE;this.dataType=$MA.Graph.DataType.TEXT;this.autoScale=!0;this.ticLabels=[]};
$MA.Graph.Axis.prototype.getTicOffset=function(){var a=0;if(this.hideValue)return 0;if(this instanceof $MA.Graph.ValuesAxis&&this.primaryLine.width)a=this.primaryLine.width;return 3*this.majorTicLength/2+a};$MA.Graph.Axis.prototype.resize=function(a){if(this.labelDisplayDef.autoSize)this.labelDisplayDef.font.size=a;if(this.displayDef.autoSize)this.displayDef.font.size=a};
$MA.Graph.Axis.prototype.drawLine=function(a,b,c,d,e,f,g){a=Math.floor(a)+0.5;b=Math.floor(b)+0.5;c=Math.floor(c)+0.5;d=Math.floor(d)+0.5;e=new $MA.Graph.DrawContext($MA.Brushes.transparent,g?g.strokeBrush:void 0);this.graphObj.axisDrawObjects.push(new $MA.Graph.Line2D(this.graphObj,e,null,a,c,b,d,g))};
$MA.Graph.Axis.prototype.setScale=function(a,b){if(this.dataType==$MA.Graph.DataType.DOUBLE){var c=a!=null?a:0,d=b!=null?b:0,e=!1,e=this instanceof $MA.Graph.ValuesAxis?this.graphObj.valuesAxis.percentage:this.graphObj.categoryAxis.percentage;e!=void 0&&e==1&&(c/=e,d/=e);var f=c,g=d,h=0,j=h=h=0,l=j=0;if(this.customMinValue)c=this.minValue;if(this.customMaxValue)d=this.maxValue;this.autoScale?(this.customMinValue||c>0&&!this.graphObj.isDataScattered&&(c=0),this.customMaxValue||d<0&&(d=0),c==d&&(c/=
2,d*=2),d==0&&c==0&&(d=10)):(c=this.minValue,d=this.maxValue);var n=d-c,j=parseInt(n.toString()[0],10),l=n.toFixed(1).toString().indexOf("."),k,h=1;if(l>0)for(k=1;k<l;k++)h*=10;else if(l<0)for(k=-1;k>l;k--)h/=10;e!=void 0?h/=20:l<1?j==1?h/=10:j==2?h/=5:j==3&&(h/=2):j<4&&(h/=2);h=this.roundTo<=0||!this.autoScale?h:this.roundTo;this.autoScale&&(this.customMaxValue||(d=Math.round(0.49999+d/h),d*=h),this.customMinValue||(e&&c>0?c=0:(c=Math.round(c/h-0.5),c*=h)),!this.customMaxValue&&this.customMinValue&&
c>0&&(d+=c%h),d==0&&c==0&&(d=100),n=d-c);if(this.majorDivs>0)this.calcMajorDivs=this.majorDivs;else{this.calcMajorDivs=Math.ceil(n/h);if(this.calcMajorDivs==1)this.calcMajorDivs=4;for(;this.calcMajorDivs>$MA.Graph.Axis.DEFAULTMAJORDIVS+2;)for(this.calcMajorDivs%2==0?this.calcMajorDivs/=2:this.calcMajorDivs%3==0?this.calcMajorDivs/=3:this.calcMajorDivs%5==0?this.calcMajorDivs/=5:this.calcMajorDivs%7==0?this.calcMajorDivs/=7:this.calcMajorDivs=$MA.Graph.Axis.DEFAULTMAJORDIVS;this.calcMajorDivs*2<$MA.Graph.Axis.DEFAULTMAJORDIVS;)this.calcMajorDivs*=
2,h/=2}if(this.autoScale){if(c>=0||d<=0)this.calcMajorDivs<=0?this.majorDivIncr=0:(this.majorDivIncr=n/this.calcMajorDivs+1.0E-12,this.majorDivIncr=Math.floor(this.majorDivIncr*1E7+0.5),this.majorDivIncr/=1E7);else{if(this.calcMajorDivs<2)this.calcMajorDivs=2;h=d/(d-c)*this.calcMajorDivs;j=Math.round(h);j==this.calcMajorDivs?this.customMinValue?(j=this.calcMajorDivs,this.majorDivIncr=n/j):(j=this.calcMajorDivs-1,this.majorDivIncr=d/j,c=-this.majorDivIncr):j==0?this.customMaxValue?this.majorDivIncr=
-c/this.calcMajorDivs:d=this.majorDivIncr=-c/(this.calcMajorDivs-1):j<h?this.customMinValue?this.majorDivIncr=n/this.calcMajorDivs:(this.majorDivIncr=d/j,c=-(this.calcMajorDivs-j)*this.majorDivIncr):this.customMaxValue?this.majorDivIncr=n/this.calcMajorDivs:(this.majorDivIncr=-c/(this.calcMajorDivs-j),d=j*this.majorDivIncr);this.majorDivIncr=Math.floor(this.majorDivIncr*1E7+0.5);this.majorDivIncr/=1E7}this.maxValue=d;this.minValue=c;if(this.graphObj instanceof $MA.Graph.BubbleGraphObject)e=(d-c)/
10,!this.customMaxValue&&g+e>d&&(this.calcMajorDivs+=1,this.maxValue+=this.majorDivIncr),!this.customMinValue&&f-e<c&&(this.calcMajorDivs+=1,this.minValue-=this.majorDivIncr),this instanceof $MA.Graph.ValuesAxis?(c=this.graphObj.getTrueMaxYValue(),!this.customMaxValue&&c>this.maxValue&&(this.calcMajorDivs+=1,this.maxValue+=this.majorDivIncr),c=this.graphObj.getTrueMinYValue()):(c=this.graphObj.getTrueMaxXValue(),!this.customMaxValue&&c>=this.maxValue&&(this.calcMajorDivs+=1,this.maxValue+=this.majorDivIncr),
c=this.graphObj.getTrueMinXValue()),!this.customMinValue&&c<this.minValue&&(this.calcMajorDivs+=1,this.minValue-=this.majorDivIncr);else if(this.graphObj instanceof $MA.Graph.LineGraphObject&&this instanceof $MA.Graph.ValuesAxis&&!this.customMinValue&&this.graphObj.drawingContentType==="graph"&&(d=this.graphObj._parent.graphObjs.length,c=this.graphObj.getMinItemValue(),this.graphObj.dataArea!=void 0&&d==1))d=this.graphObj.dataArea.bottom,this.getValueLoc(d,this.graphObj.dataArea.top,c)+15>=d&&(this.calcMajorDivs+=
1,this.minValue-=this.majorDivIncr)}else this.majorDivIncr=n/(this.calcMajorDivs>0?this.calcMajorDivs:$MA.Graph.Axis.DEFAULTMAJORDIVS)+1.0E-12,this.majorDivIncr=Math.floor(this.majorDivIncr*1E7+0.5),this.majorDivIncr/=1E7}};
$MA.Graph.Axis.prototype.getMajorTicCoord=function(a,b){var c,d;d=this.majorTicLength;var e=d*0.25,f=0;this instanceof $MA.Graph.ValuesAxis&&this.primaryLine.width&&(f=this.primaryLine.width/2);switch(this.majorTic){case $MA.Graph.TicType.INSIDE:b==1?(c=a-d+e-f,d=a+f-1):(c=a-f+1,d=a+d-e+f);break;case $MA.Graph.TicType.OUTSIDE:b==-1?(c=a-d+e-f,d=a+f-1):(c=a-f+1,d=a+d-e+f);break;case $MA.Graph.TicType.STRADDLE:c=a-d+e-f;d=a+d-e+f;break;default:d=c=a}return new $MA.Graph.TicRange(c,d)};
$MA.Graph.Axis.prototype.getValueLoc=function(a,b,c){var d,e,f,g=0.5;d=this.minValue;e=this.maxValue;f=e-d;if(f==0)return a;!(this.graphObj instanceof $MA.Graph.LineGraphObject)&&!this.graphObj.isVertical&&(c<d&&(c=d,g=0),c>e&&(c=e));a>b&&(g*=-1);return a+(g+(b-a)*((c-d)/f))};$MA.Graph.Axis.prototype.outOfBound=function(a){return a<this.minValue||a>this.maxValue};$MA.Graph.Axis.prototype.getOriginLoc=function(a,b){if(this.minValue>0||this.maxValue<0)return-1;return this.getValueLoc(a,b,0)};
$MA.Graph.Axis.prototype.isLabelVisible=function(a){return this.labelsEveryN==0||this.labelsEveryN>0&&a%this.labelsEveryN==0};$MA.Graph.XYAxis=function(a){$MA.Graph.Axis.call(this,a)};$MA.Graph.XYAxis.prototype=new $MA.Graph.Axis;$MA.Graph.XYAxis.prototype.drawXPrimary=function(a,b,c,d,e,f){this.primaryLine!=void 0&&this.primaryLine.visible&&this.drawLine(a,b,c,c,e,f,this.primaryLine)};
$MA.Graph.XYAxis.prototype.drawXPrimaryandSecondary=function(a,b,c,d,e,f){this.drawXPrimary(a,b,c,d,e,f);this.secondaryLine!=void 0&&this.secondaryLine.visible&&this.drawLine(a+0,b+0,d-0,d-0,0,0,this.secondaryLine)};$MA.Graph.XYAxis.prototype.drawYPrimary=function(a,b,c,d){this.primaryLine!=void 0&&this.primaryLine.visible&&(this.drawLine(a,a,c,d,0,0,this.primaryLine),this.secondaryLine!=void 0&&this.drawLine(b+0,b+0,c-0,d-0,0,0,this.secondaryLine))};
$MA.Graph.XYAxis.prototype.drawYPrimaryandSecondary=function(a,b,c,d,e,f){this.drawYPrimary(a,b,c,d,e,f);this.secondaryLine!=void 0&&this.drawLine(b+0,b+0,c-0,d-0,0,0,this.secondaryLine)};$MA.Graph.XYAxis.prototype.drawTic=function(a,b,c,d,e,f){this.visible&&this.drawLine(a,b,c,d,e,f,this.primaryLine)};$MA.Graph.XYAxis.prototype.drawXTic=function(a,b,c){this.visible&&(b=this.getMajorTicCoord(b,c),this.drawTic(a,a,b.start,b.end+1,0,0))};
$MA.Graph.XYAxis.prototype.drawYTic=function(a,b,c){this.visible&&(a=this.getMajorTicCoord(a,c),this.drawTic(a.start,a.end+1,b,b,0,0))};$MA.Graph.XYAxis.prototype.drawXGridLine=function(a,b,c,d,e,f,g,h,j){this.majorGridLine!=void 0&&this.majorGridLine.visible&&a>b&&j&&this.drawLine(a+0,a+0,d-0,e-0,g,g,this.majorGridLine)};$MA.Graph.XYAxis.prototype.drawYGridLine=function(a,b,c,d,e,f,g,h,j){this.majorGridLine!=void 0&&this.majorGridLine.visible&&a<d&&j&&this.drawLine(b+0,c+0,a-0,a-0,g,g,this.majorGridLine)};
$MA.Graph.CategoryAxis=function(a){$MA.Graph.XYAxis.call(this,a);this.label=new $MA.Graph.Data(this.labelDisplayDef,"");this.categoryHMargin=6;this.categoryVMargin=4;this.maxCategoryHeight=this.tableLastY=this.tableLastX=0};$MA.Graph.CategoryAxis.prototype=new $MA.Graph.XYAxis;
$MA.Graph.CategoryAxis.prototype.getMaxStringSize=function(){var e;if(this.hideValue)return new $MA.Graph.TextSize(0,0);var a;this.ticLabels=[];var b;if(this.graphObj.isDataScattered)if(b=this.minValue,this.percentage!=void 0){a=this.minValue;var c;if(this.majorDivIncr>0)for(;b<=this.maxValue||a==this.maxValue;)c=parseFloat(b).toFixed(2),b=(b*1E7+this.majorDivIncr*1E7)/1E7,this.percentage!=void 0&&(c*=100,c=parseFloat(c).toFixed(0),c.indexOf("."),b=parseFloat(b).toFixed(3),a=parseFloat(b).toFixed(3),
this.ticLabels.push(new $MA.Graph.Data(this.displayDef,b)),b=a)}else{if(this.majorDivIncr>0)for(;b<=this.maxValue;)this.ticLabels.push(new $MA.Graph.Data(this.displayDef,b)),b+=this.majorDivIncr}else for(b=0;b<this.graphObj.categories.length;b++){c=this.graphObj.categories[b];e=(a=c.categoryValues)&&a.display&&(!this.graphObj.suppliedTotals||this.graphObj.suppliedTotals&&c.displayValue!="")?c.displayValue:c.groupValues?c.groupValues[c.groupValues.length-1]:c.displayValue,c=e;var d=this.displayDef.clone();
if(a)d.format=a[a.length-1].format;this.ticLabels.push(new $MA.Graph.Data(d,c))}this.graphObj.isWaterfall&&this.graphObj.showTotal&&this.ticLabels.push(new $MA.Graph.Data(this.displayDef,$MA.getLocalisation(null,"Total","Total")));for(b=d=c=0;b<this.ticLabels.length;b++){a=this.ticLabels[b];a=a.getTextSize(this.graphObj.context);if(a.width>c)c=a.width;if(a.height>d)d=a.height}if(this.graphObj.isHierarchy)this.maxCategoryHeight=d,d=(d+this.categoryVMargin)*this.graphObj.getHierarchyActualLevels(),
this.graphObj.suppliedTotals||(d+=10);else if(0<this.graphObj.categories.length)(a=this.graphObj.categories[0].categoryValues)&&a.display&&(d=(d+this.categoryVMargin)*a.length);return new $MA.Graph.TextSize(c,d)};
$MA.Graph.CategoryAxis.prototype.drawXGrid=function(a,b,c,d,e,f){var g,h;if(this.graphObj instanceof $MA.Graph.LineGraphObject)if(g=this.graphObj.getMaxItemCount(),h=this.graphObj.drawAreas.getWidth($MA.Graph.DrawAreaType.XAXIS),g==1)g=0,h=a+h/2;else{var j=this.graphObj.calcLineStartPos(h);g=(h-2*j)/(g-1);h=a+j}else this.graphObj.isDataScattered?(g=this.graphObj.drawAreas.getWidth($MA.Graph.DrawAreaType.XAXIS)/(this.calcMajorDivs>0?this.calcMajorDivs:$MA.Graph.Axis.DEFAULTMAJORDIVS),h=a+g):this.graphObj instanceof
$MA.Graph.BubbleGraphObject?(g=this.graphObj.calcBarEntryWidth(b-a),this.catStartPos=g/2,h=a+this.graphObj.calcBubbleStartPos(b-a)):(g=this.graphObj.calcBarEntryWidth(b-a),h=a+(g+this.graphObj.calcBarGap(b-a))/2);this.drawXPrimaryandSecondary(a,b,c,d,e,f);for(j=0;j<this.ticLabels.length;j++)this.isLabelVisible(j)&&(this.majorTic!=$MA.Graph.TicType.NONE&&this.drawXTic(h,c,1),this.majorGridLine!=void 0&&this.drawXGridLine(h,a,b,c,d,e,f,g,this.graphObj.seriesAxis.frame!=null)),h+=g};
$MA.Graph.CategoryAxis.prototype.drawXGridValue=function(a,b,c){if(this.ticLabels.length!=0){var d;c+=this.getTicOffset();var e=this.graphObj.dataArea.bottom,f,g=this.graphObj.drawAreas.getWidth($MA.Graph.DrawAreaType.XAXIS),h=this.graphObj.drawAreas.getX($MA.Graph.DrawAreaType.XAXIS),j=this.graphObj.getMaxItemCount(),l,n=this.graphObj.categoryAxis.percentage,k=0;this.graphObj instanceof $MA.Graph.LineGraphObject?j==1?(f=0,a+=g/2):(l=this.graphObj.calcLineStartPos(g),f=(g-2*l)/(j-1),a+=l):this.graphObj.isDataScattered?
(f=g/(this.calcMajorDivs>0?this.calcMajorDivs:$MA.Graph.Axis.DEFAULTMAJORDIVS),n!=void 0&&(a+=f)):this.graphObj instanceof $MA.Graph.BubbleGraphObject?(f=this.graphObj.calcBarEntryWidth(b-a),a+=this.graphObj.calcBubbleStartPos(b-a)):(f=this.graphObj.calcBarEntryWidth(b-a),a+=(f+this.graphObj.calcBarGap(b-a))/2);if(this.graphObj.isHierarchy)if(this.TableLineDef=new $MA.Graph.LineDefinition,this.TableLineDef.strokeBrush=this.graphObj.hierarchyChartTableLinesColor==void 0?new $MA.Brush($MA.Brushes.gray.color):
new $MA.Brush(this.graphObj.hierarchyChartTableLinesColor),this.TableLineDef.width=this.graphObj.hierarchyChartTableLinesWidth==void 0?0.5:this.graphObj.hierarchyChartTableLinesWidth,this.lineX=0,j==0)c=e+20,this.drawLine(h,this.graphObj.dataArea.right,c,c,0,0,this.TableLineDef),this.drawLine(h,h,e,c,0,0,this.TableLineDef),this.drawLine(this.graphObj.dataArea.right,this.graphObj.dataArea.right,e,c,0,0,this.TableLineDef);else if(j==1&&this.graphObj instanceof $MA.Graph.LineGraphObject)e=this.graphObj.dataArea.bottom,
l=new $MA.Graph.Data(this.displayDef,this.graphObj.hierarchyObjects[0].value),d=l.getTextSize(this.graphObj.context),c=e+d.height+8,this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,l,a,e+2,d.height)),this.drawLine(h,this.graphObj.dataArea.right,c,c,0,0,this.TableLineDef),this.drawLine(h,h,e,c,0,0,this.TableLineDef),this.drawLine(this.graphObj.dataArea.right,this.graphObj.dataArea.right,e,c,0,0,this.TableLineDef);else{this.tableLastY=this.tableLastX=0;this.tableStartX=a-f/2;if(f==
0)this.tableStartX=a;this.drawHierarchyLabels([this.tableStartX],c,f,null,null,null,0,[0]);if(this.graphObj.parentAsTotal&&this.graphObj.showTotal)this.tableLastX=[this.tableStartX];else if(this.graphObj.isWaterfall&&!this.graphObj.parentAsTotal&&this.graphObj.showTotal){l=new $MA.Graph.Data(this.displayDef,$MA.getLocalisation(null,"Total","Total"));if(f<25)l.value="...";if(f<13)l.value=".";d=l.getTextSize(this.graphObj.context);this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,
l,this.graphObj.dataArea.right-(f/2+f/4)-d.width/2+2,e+3,d.height))}this.drawLine(this.tableLastX,this.tableLastX,e,this.tableLastY,0,0,this.TableLineDef)}else{var m,o,p,q=[],e=0;if(this.graphObj.categories.length>0&&(j=this.graphObj.categories[0],d=j.groupValues,p=j.categoryValues,d&&j.categoryValues&&j.categoryValues.display)){e=d.length;for(o=0;o<e;o++)q.push({lastX:0,x:a,cat:d[o]})}var r,s,u=this.graphObj.getCategoryLevelCount(),v="",x=0,w=0,j=!1;if(this.graphObj instanceof $MA.Graph.BubbleGraphObject)j=
this.graphObj.isDataScattered;var y=this.ticLabels.length;for(m=0;m<y;m++){if(this.isLabelVisible(m)){k++;l=this.ticLabels[m];if(j)n!=void 0?(s=parseFloat(l.value)*100,s=Math.round(s).toFixed(0),w=$MA.labelNumberString(l.value),l.value=w,s+="%",l.value=s):(w=$MA.labelNumberString(l.value),l.value=w);d=l.getTextSize(this.graphObj.context);r=d.width;s=a-r/2;if(typeof l.value==="string"||j)for(;(s<0||s+r>b)&&l.value.length>6;)l.value=l.value.substring(0,l.value.length-4)+"...",d=l.getTextSize(this.graphObj.context),
r=d.width,s=a-r/2;u>0?s>x&&v!=l.toString()&&(this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,l,s,c,r,d.height)),v=l.toString(),x=s+r):this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,l,s,c,r,d.height));w=s}else this.graphObj.showTotal&&m==y-1?(l=this.ticLabels[m],d=l.getTextSize(this.graphObj.context),r=d.width,s=a-r/2,o=this.graphObj.axisDrawObjects[this.graphObj.axisDrawObjects.length-1],o.x+o.width-s<=0&&(this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,
l,s,c,r,d.height)),w=s)):w=s+f;if(0<e){d=m<y-1-(this.graphObj.showTotal?1:0)?this.graphObj.categories[m+1].groupValues:void 0;var A=0;o=0;for(A=e-1;o<e;o++,A--){var B=q[o],D=d?d[o]:void 0;if(B.cat!==D){r=this.displayDef.clone();if(p)r.format=p[A].format;l=new $MA.Graph.Data(r,B.cat);var J=l.getTextSize(this.graphObj.context);s=a-B.x;r=J.width;s=B.x+(s-r)/2;s<0&&(s=0);if(s+r<=b&&s>B.lastX)this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,l,s,c+(o+1)*(J.height+this.categoryVMargin),
r,J.height)),B.lastX=s+r;o==e-1&&void 0!=D&&(s=a+f/2,this.drawLine(s,s,this.graphObj.dataArea.top,this.graphObj.dataArea.bottom,0,0,this.primaryLine));B.x=a+f;B.cat=D}else break}}a+=f}if(this.displayLastCategoryLabel||j)if(k==1&&j)p=h+g,f=this.ticLabels[this.ticLabels.length-1],k=f.value,d=f.getTextSize(this.graphObj.context),k=$MA.labelNumberString(k),f.value=k,p-=d.width-3,d=f.getTextSize(this.graphObj.context),this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,f,p,c,d.width,
d.height));else{p=w;f=this.ticLabels[this.ticLabels.length-1];k=f.value;if(j)p=h+g-3,typeof k=="number"&&(k=$MA.labelNumberString(k)),f.value=k;d=f.getTextSize(this.graphObj.context);j&&(p-=d.width);for(h=d.width;(p<0||p+h>b)&&k.length>6;)k=k.substring(0,k.length-4)+"...",f.value=k,d=f.getTextSize(this.graphObj.context),h=d.width;if(this.graphObj.axisDrawObjects.length>0&&j){this.graphObj.axisDrawObjects.splice(this.graphObj.axisDrawObjects.length-1,1);b=this.graphObj.axisDrawObjects[this.graphObj.axisDrawObjects.length-
1];b=b.x+b.width;l=this.ticLabels[this.ticLabels.length-1];s=l.value;if(n!=void 0&&s.indexOf("%")<0)s=parseFloat(l.value)*100,s=Math.round(s).toFixed(0),w=$MA.labelNumberString(s),l.value=w,s+="%",l.value=s;b<p&&(this.graphObj.axisDrawObjects[this.graphObj.axisDrawObjects.length]=new $MA.Graph.Text2D(this.graphObj,l,p,c,r,d.height))}else this.graphObj.axisDrawObjects[this.graphObj.axisDrawObjects.length-e-1]=new $MA.Graph.Text2D(this.graphObj,this.ticLabels[this.ticLabels.length-1],p,c,r,d.height)}}}};
$MA.Graph.CategoryAxis.prototype.drawHierarchyLabels=function(a,b,c,d,e,f,g){var h,j,l,n,k,m,o,p,q=!1;h=this.graphObj.level;h==void 0&&(h=this.graphObj.getHierarchyLevel());f||(f=this.graphObj.getRootNode(),q=!0);var r=this.graphObj.dataArea.bottom;j=f.getLevel();var d=d||[0],e=e||[0],s=this.graphObj.drawAreas.getX($MA.Graph.DrawAreaType.XAXIS)-6,u=this.graphObj.drawAreas.getWidth($MA.Graph.DrawAreaType.XAXIS);this.graphObj.drawAreas.getY($MA.Graph.DrawAreaType.DISPLAY);this.graphObj.drawAreas.getHeight($MA.Graph.DrawAreaType.DISPLAY);
this.graphObj.drawAreas.getY($MA.Graph.DrawAreaType.XAXIS);if(null!==f&&(l=f.getChildren(),p=l.length,this.graphObj.parentAsTotal&&this.graphObj.showTotal))for(n=0;n<p;n++)this.drawHierarchyLabels(a,b,c,d,e,l[n],null,p==n+1),a[0]+=c;var v=!this.graphObj.suppliedTotals;n=new $MA.Graph.Data(this.displayDef,q&&v?$MA.getLocalisation(null,"Total","Total"):f.getValue());o=n.getTextSize(this.graphObj.context);k=a[0];var x=this.graphObj.parentAsTotal&&this.graphObj.showTotal?-1:1,w=f.getChildrenCount();f.getSeries()!=
void 0&&w++;var y=w*c/2-o.width/2,A=k+y;m=b+(q&&h===j?0:h-j)*(o.height+this.categoryVMargin);var B=m+10-this.graphObj.chartDisplayBoundary,D=B>0?!0:!1;D&&(m=this.graphObj.chartDisplayBoundary-10);if(v||!q){var q=m+10,v=this.graphObj.parentAsTotal&&this.graphObj.showTotal?k+c:k,J=this.graphObj.getMaxItemCount(),E=n.value,z=q-r;if(z<3)return;this.graphObj instanceof $MA.Graph.LineGraphObject&&c==0&&(v=s);if(v<this.tableStartX)v=this.tableStartX;else if(v>this.graphObj.dataArea.right)v=this.graphObj.dataArea.right;
var G=0;if(c==0||v<s)G=s-v,v=s;v<d[0]&&(v=d[0]);this.graphObj instanceof $MA.Graph.LineGraphObject&&J<=1&&(v=s);s=m-5;s<r?(s=r-1,q+=1):j==h&&(s-=z/2-8);this.lineX!=v&&this.drawLine(v,v,r,q,0,0,this.TableLineDef);this.lineX=v;r=v+w*c*x;if(r>this.graphObj.dataArea.right||this.graphObj instanceof $MA.Graph.LineGraphObject&&c==0)r=this.graphObj.dataArea.right;this.graphObj instanceof $MA.Graph.LineGraphObject&&g==!0&&r<=u&&(r-=G,v>=r&&(v=r=0));this.drawLine(v,r,q,q,0,0,this.TableLineDef);g=0;v>A&&v<A+
o.width&&(g=2,A=v+g);A+o.width>r&&(g=4,A-=g);g=this.graphObj.parentAsTotal&&this.graphObj.showTotal?v-r:r-v-g;E=E!=void 0&&g>=0?E.toString():"";for(u=!1;E!=""&&o.width>g&&E!="...";)E=E.substring(0,E.length-4)+"...",n.value=E,o=n.getTextSize(this.graphObj.context),u=!0;u&&g>=4&&(A=v+2+g/2-o.width/2+1);if(r>this.tableLastX)this.tableLastX=r;if(q>this.tableLastY)this.tableLastY=q;this.graphObj.parentAsTotal&&this.graphObj.showTotal&&(A=r+y);if(D)this.maxCategoryHeight>B?(E="...",s-=j==h?7:2,o.height=
5):E="";g<6&&(E=".",A=v+g/2+1);n.value=E;this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,n,A,s,o.height));d[0]=k;e[0]=m}if(!this.graphObj.parentAsTotal||!this.graphObj.showTotal){f.getSeries()!==void 0&&(a[0]+=c);for(n=0;n<p;n++)this.drawHierarchyLabels(a,b,c,d,e,l[n],p==n+1)}};
$MA.Graph.CategoryAxis.prototype.drawYGridValue=function(a,b,c,d){if(this.ticLabels.length!=0){b=this.graphObj.calcBarEntryWidth(c-d);c-=(b+this.graphObj.calcBarGap(c-d))/2;var e,f;f=a-this.getTicOffset();var g,h=this.graphObj.getCategoryLevelCount(),j="",l;for(l=0;l<this.ticLabels.length;l++)this.isLabelVisible(l)&&(g=this.ticLabels[l],a=g.getTextSize(this.graphObj.context),d=-a.width,e=-(a.height/2),h>0?j!=g.toString()&&(this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,g,f+
d,c+e,a.width,a.height)),j=g.toString()):this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,g,f+d,c+e,a.width,a.height))),c-=b}};$MA.Graph.SeriesAxis=function(a){$MA.Graph.Axis.call(this,a);this.label=new $MA.Graph.Data(this.labelDisplayDef,"")};$MA.Graph.SeriesAxis.prototype=new $MA.Graph.Axis;
$MA.Graph.SeriesAxis.prototype.getMaxStringSize=function(){this.ticLabels=[];var a,b;for(a=0;a<this.graphObj.seriesList.length;a++)b=this.graphObj.seriesList[a],this.ticLabels.push(new $MA.Graph.Data(this.displayDef,b.name));var c,d=b=0;for(a=0;a<this.ticLabels.length;a++){c=this.ticLabels[a];c=c.getTextSize(this.graphObj.context);if(c.width>b)b=c.width;if(c.height>d)d=c.height}return new $MA.Graph.TextSize(b,d)};
$MA.Graph.ValuesAxis=function(a){$MA.Graph.XYAxis.call(this,a);this.label=new $MA.Graph.Data(this.labelDisplayDef,"");this.dataType=$MA.Graph.DataType.DOUBLE;this.secondaryAxis=!1;this.majorDivs=0};$MA.Graph.ValuesAxis.prototype=new $MA.Graph.XYAxis;
$MA.Graph.ValuesAxis.prototype.getMaxStringSize=function(){this.ticLabels=[];var a=this.minValue,b,c=this.minValue;$MA.yTicLabels.allInteger=this.percentage?!1:!0;this.displayDef.percentageChart=this.percentage?!0:!1;for(var d=parseFloat(this.maxValue).toFixed(6);a<=d||c==this.maxValue;)b=parseFloat(a).toFixed(2),a=(a*1E7+this.majorDivIncr*1E7)/1E7,this.percentage!=void 0?(b*=100,b=parseFloat(b).toFixed(0),b.indexOf("."),b+="%",a=parseFloat(a).toFixed(3),a=c=parseFloat(a).toFixed(3)):($MA.yTicLabels.allInteger&&
$MA.labelNumberString(b),c=a.toFixed(6)),this.ticLabels.push(new $MA.Graph.YData(this.displayDef,b,this.graphObj.isHundredPercent));for(a=c=b=0;a<this.ticLabels.length;a++){d=this.ticLabels[a];d=d.getTextSize(this.graphObj.context);if(d.width>b)b=d.width;if(d.height>c)c=d.height}return new $MA.Graph.TextSize(b,c)};
$MA.Graph.ValuesAxis.prototype.drawXGrid=function(a,b,c,d,e,f){var g=this.graphObj.drawAreas.getWidth($MA.Graph.DrawAreaType.XAXIS)/(this.calcMajorDivs>0?this.calcMajorDivs:$MA.Graph.Axis.DEFAULTMAJORDIVS),h=a;this.drawXPrimaryandSecondary(a,b,c,d,e,f);var j;for(j=0;j<this.ticLabels.length;j++)this.isLabelVisible(j)&&(this.majorTic!=$MA.Graph.TicType.NONE&&this.drawXTic(h,c,1),this.majorGridLine!=void 0&&this.drawXGridLine(h,a,b,c,d,e,f,g,this.graphObj.seriesAxis.frame!=null)),h+=g};
$MA.Graph.ValuesAxis.prototype.drawYGrid=function(a,b,c,d,e,f){var g,h,j,l=0;this.primaryLine&&(l=this.primaryLine.width||1);g=a-l/2;h=b;j=-1;var n=this.graphObj.drawAreas.getHeight($MA.Graph.DrawAreaType.YAXIS)/(this.calcMajorDivs>0?this.calcMajorDivs:$MA.Graph.Axis.DEFAULTMAJORDIVS),k=c;this.secondaryAxis&&(g=b+l/2,h=a,j=1);this.drawYPrimaryandSecondary(g,h,c,d,e,f);for(a=0;a<this.ticLabels.length;a++)this.isLabelVisible(a)&&(this.majorTic!=$MA.Graph.TicType.NONE&&this.drawYTic(g,k,j),this.majorGridLine!=
void 0&&this.drawYGridLine(k,g,h,c,d,e,f,n,this.graphObj.seriesAxis.frame!=null)),k-=n};
$MA.Graph.ValuesAxis.prototype.drawXGridValue=function(a,b,c){var b=c+this.getTicOffset(),c=this.graphObj.drawAreas.getWidth($MA.Graph.DrawAreaType.XAXIS)/(this.calcMajorDivs>0?this.calcMajorDivs:$MA.Graph.Axis.DEFAULTMAJORDIVS),d=a,e,f,g,h;for(g=0;g<this.ticLabels.length;g++){if(this.isLabelVisible(g))h=this.ticLabels[g],a=h.getTextSize(this.graphObj.context),f=a.width,e=d-f,this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,h,e,b,f,a.height));d+=c}};
$MA.Graph.ValuesAxis.prototype.drawYGridValue=function(a,b,c){var d,a=this.graphObj.drawAreas.getX($MA.Graph.DrawAreaType.YAXIS)+this.graphObj.drawAreas.getWidth($MA.Graph.DrawAreaType.YAXIS);this.secondaryAxis?a=b+this.getTicOffset():a-=this.getTicOffset();var b=0,e=this.graphObj.drawAreas.getHeight($MA.Graph.DrawAreaType.YAXIS)/(this.calcMajorDivs>0?this.calcMajorDivs:$MA.Graph.Axis.DEFAULTMAJORDIVS),f=c;this.secondaryAxis&&(b=5);var g,h,j=null;for(g=0;g<this.ticLabels.length;g++){if(this.isLabelVisible(g)&&
(j==null||f+d.height<j))j=f,h=this.ticLabels[g],d=h.getTextSize(this.graphObj.context),this.secondaryAxis||(b=-d.width),c=-(d.height/2),h.displayDef.foreground=this.primaryLine.strokeBrush,this.graphObj.axisDrawObjects.push(new $MA.Graph.Text2D(this.graphObj,h,a+b,f+c,d.width,d.height));f-=e}};$MA.Graph.SymbolType={BOX:0,CIRCLE:1};$MA.Graph.GraphObject=function(a){this._parent=a};$MA.Graph.GraphObject.TITLEHEIGHTFACTOR=1.6;$MA.Graph.GraphObject.XBORDERFACTOR=0.05;
$MA.Graph.GraphObject.YBORDERFACTOR=0.05;$MA.Graph.GraphObject.SIZETOL=3;$MA.Graph.GraphObject.ANIMATIONDURATION=10;$MA.Graph.GraphObject.ANIMATIONCOUNT=7;$MA.Graph.GraphObject.lineBrush=new $MA.Brush(7368816);$MA.Graph.GraphObject.BACKGROUNDCOLOR="#FFFFFF";$MA.Graph.GraphObject.FORECOLOR="#000000";
$MA.Graph.GraphObject.prototype.initialize=function(){this.titleDisplayDef=new $MA.Graph.DisplayDefinition;this.legendDisplayDef=new $MA.Graph.DisplayDefinition;this.pieDisplayDef=new $MA.Graph.DisplayDefinition;this.title="";this.legend=new $MA.Graph.Legend(this,$MA.Graph.LegendType.NONE,this.legendDisplayDef);this.categoryAxis=new $MA.Graph.CategoryAxis(this);this.valuesAxis=new $MA.Graph.ValuesAxis(this);this.seriesAxis=new $MA.Graph.SeriesAxis(this);this.xAxis=this.categoryAxis;this.yAxis=this.valuesAxis;
this.drawAreas=new $MA.Graph.DrawAreas;this.yAxis.labelDisplayDef.font.rotation=270;this.drawObjects=[];this.axisDrawObjects=[];this.annotationObjects=[];this.WFConnLineObjects=[];this.auxiliaryObjects=[];this.dataPointsColor=[];this.seriesList=[];this.categories=[];this.categoryHash=new $MA.Hash;this.overlap=0;this.gap=1;this.suppliedTotals=this.isWaterfall=this.isHundredPercent=this.isStacked=!1;this.yBorder=this.xBorder=this.centerY=this.centerX=this.paintSize=this.width=this.height=0;this.hasGroups=
this.isPloting=!1;this.animation=this.barWidth=this.linebrush=this.secondaryAxisBrushes=this.primaryAxisBrushes=this.chartBrushes=this.yAxisSize=this.xAxisSize=void 0;this.valueBubble=!1;this.valueBubbleStyle=$MA.ValueBubbleStyle.TOP;this.valueBubbleHeight=80;this.valueBubblePosition="top";this.categoriesDisplayOrder="leafToRoot";this.endSwipe=this.startSwipe=!1;this.newContent=!0;this.isCustomDataPointsColor=this.monoColor=!1;this.dataPointsColorMaxIndex=this.dataPointsColorMinIndex=void 0;this.dataPointsColorHash=
new $MA.Hash;this.foreColor=this.backgroundColor=void 0;this.getStyles();this.borderColor=void 0;this.maxPies=12;this.hierarchyInitLevel=void 0;this.hierarchyMaxLevel=0;this.parentAsTotal=this.showTotal=!1;this.showWFConnectingLine=!0};
$MA.Graph.GraphObject.prototype.getStyles=function(){this.backgroundColor=$MA.Graph.GraphObject.BACKGROUNDCOLOR;this.foreColor=$MA.Graph.GraphObject.FORECOLOR;var a=$MA.getCSSRule(".chart");if(a!=void 0){if(a.style.background!="")this.backgroundColor=a.style.background;if(a.style.color!="")this.foreColor=a.style.color}a=$MA.getCSSRule(".chart_xaxis");if(a!=void 0){if(a.style.fontFamily!="")this.xAxis.displayDef.font.family=a.style.fontFamily,this.xAxis.labelDisplayDef.font.family=a.style.fontFamily;
if(a.style.fontSize!="")this.xAxis.displayDef.font.size=parseInt(a.style.fontSize,10),this.xAxis.labelDisplayDef.font.size=parseInt(a.style.fontSize,10)}a=$MA.getCSSRule(".chart_yaxis");if(a!=void 0){if(a.style.fontFamily!="")this.yAxis.displayDef.font.family=a.style.fontFamily,this.yAxis.labelDisplayDef.font.family=a.style.fontFamily;if(a.style.fontSize!="")this.yAxis.displayDef.font.size=parseInt(a.style.fontSize,10),this.yAxis.labelDisplayDef.font.size=parseInt(a.style.fontSize,10)}a=$MA.getCSSRule(".hierarchy_chart_table_lines");
if(a!=void 0){if(a.style.color!="")this.hierarchyChartTableLinesColor=a.style.color;if(a.style.width!=""&&(this.hierarchyChartTableLinesWidth=a.style.width.toString(),this.hierarchyChartTableLinesWidth.indexOf("px")>0))this.hierarchyChartTableLinesWidth=this.hierarchyChartTableLinesWidth.substr(0,this.hierarchyChartTableLinesWidth.length-2)}};
$MA.Graph.GraphObject.prototype.plot=function(a,b){this.drawingContentType="graph";this.setCanvas(a);this.scale();this.resize();b||this.arrange();this.initDataArea();this.getIsCustomDataPointsColor();this.redraw(b);this.drawingContentType=void 0};
$MA.Graph.GraphObject.prototype.redraw=function(a){this.reset(a);a||(this.drawTitle(),this.restoreLegendState(),this.drawLegend());this.drawGridsBack();this.drawXLabel();this.drawYLabel();this.isStacked?this.plotStacked():this.isVertical?this.plotVertical():this.plotDefault();this.drawGridsFront();this.drawSwipeGradient()};
$MA.Graph.GraphObject.prototype.drawSwipeGradient=function(){var a=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),b=a+this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),c=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),d=c+this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),e;if(this.startSwipe)e=this.context.createLinearGradient(a,d,a+7,d),e.addColorStop(0,"rgba(0, 0, 0, 0.2)"),e.addColorStop(1,"rgba(0, 0, 0, 0)"),this.context.fillStyle=e,this.context.fillRect(a,d,7,c-d);if(this.endSwipe)e=
this.context.createLinearGradient(b-7,d,b,d),e.addColorStop(0,"rgba(0, 0, 0, 0.2)"),e.addColorStop(1,"rgba(0, 0, 0, 0)"),this.context.fillStyle=e,this.context.fillRect(b-7,d,7,c-d)};$MA.Graph.GraphObject.prototype.setStartSwipe=function(a){this.startSwipe=a};$MA.Graph.GraphObject.prototype.setEndSwipe=function(a){this.endSwipe=a};$MA.Graph.GraphObject.prototype.setCanvas=function(a){this.canvas=a;this.height=a.height;this.width=a.width;this.context=a.getContext("2d")};
$MA.Graph.GraphObject.prototype.plot2Canvas=function(a,b,c,d){var e=this.canvas;this.drawingContentType="rangeselector";this.setCanvas(a);this.reset(d);this.scale();d||this.arrangeContent(b,c);this.initDataArea();this.getIsCustomDataPointsColor();this.isStacked?this.plotStacked():this.plotDefault();this.generate();e&&this.setCanvas(e);this.drawingContentType=void 0};
$MA.Graph.GraphObject.prototype.plotContent=function(a,b,c,d,e,f){if(c&&!f){c=this.animation;this.animation=void 0;if(!e)e=document.createElement("canvas"),e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.zIndex="-2000";if(!d)e.width=a.width-b*2,e.height=a.height-0;this.plot2Canvas(e,0,0,d);this.animation=c}e&&f&&a.getContext("2d").drawImage(e,b,0,e.width,e.height);return e};$MA.Graph.GraphObject.prototype.setValueBubbleHeight=function(a){this.valueBubbleHeight=a};
$MA.Graph.GraphObject.prototype.setValueBubblePosition=function(){};$MA.Graph.GraphObject.prototype.setValueBubbleCategoriesDisplayOrder=function(a){this.categoriesDisplayOrder=a};
$MA.Graph.GraphObject.prototype.animateGraph=function(a){var b=function(){a.animateGraph(a)};a.animationCount++;if(a.animationCount==$MA.Graph.GraphObject.ANIMATIONCOUNT){if(a.animation=void 0,a.plot(a.canvas),a.generateBackground(),a.generate(),a._parent.onanimationend&&(b=document.getElementById(a._parent.id),a._parent.onanimationend(b),a instanceof $MA.Graph.LineGraphObject)){for(;b&&(b.macontrol==void 0||!(b.macontrol instanceof $MA.Chart));)b=b.parentNode;b.macontrol instanceof $MA.Chart&&b.macontrol.chartView.refreshValueBubbleView(!0)}}else if(a.animationCount<
$MA.Graph.GraphObject.ANIMATIONCOUNT){a.clearItems&&a.clearItems();var c,d,e=a.drawObjects.length;for(c=0;c<e;c++)d=a.drawObjects[c],d.item&&a.animateDrawObj(d);setTimeout(b,$MA.Graph.GraphObject.ANIMATIONDURATION)}};$MA.Graph.GraphObject.prototype.generateBackground=function(){var a,b=this.axisDrawObjects.length;for(a=0;a<b;a++)this.axisDrawObjects[a].generate()};
$MA.Graph.GraphObject.prototype.generate=function(){var a,b,c=this.axisDrawObjects.length,c=this.annotationObjects.length;for(b=0;b<c;b++)this.annotationObjects[b].generate();if(!this.skipDefaultGraphRendering){var d=this instanceof $MA.Graph.BubbleGraphObject,e=this.context;d&&(e.save(),e.beginPath(),e.rect(this.dataArea.left,this.dataArea.top,this.dataArea.width,this.dataArea.height),e.clip());if(this.animation&&!d){c=this.drawObjects.length;for(b=0;b<c;b++)a=this.drawObjects[b],a.item!=void 0&&
this.resetDrawObj(a),a.generate();this.animationCount=0;var f=this;setTimeout(function(){f.animateGraph(f)},$MA.Graph.GraphObject.ANIMATIONDURATION)}else if(c=this.drawObjects.length,d){c=this.drawObjects.slice();c.sort(function(a,b){return b.radius-a.radius});for(b=0;b<c.length;b++)c[b].generate()}else{for(b=0;b<c;b++)this.drawObjects[b].generate();if($MA.platform.blackberry&&this instanceof $MA.Graph.PieGraphObject){b=e.canvas;e.clearRect(0,0,b.width,b.height);for(b=0;b<c;b++)this.drawObjects[b].generate()}c=
this.auxiliaryObjects.length;for(b=0;b<c;b++)this.auxiliaryObjects[b].generate();c=this.WFConnLineObjects.length;for(b=0;b<c;b++)this.WFConnLineObjects[b].generate()}d&&e.restore()}this._parent.trigger("draw",this.canvas)};$MA.Graph.GraphObject.prototype.preventDefaultRendering=function(a){this.skipDefaultGraphRendering=a};$MA.Graph.GraphObject.prototype.getNumberOfVisibleCategories=function(){return this.categories.length};
$MA.Graph.GraphObject.prototype.reset=function(a){this.legend.reset();this.axisDrawObjects=[];this.drawObjects=[];this.annotationObjects=[];this.hierarchyObjects=[];this.WFConnLineObjects=[];this.auxiliaryObjects=[];if(!a)this.canvas.width=this.canvas.width};$MA.Graph.GraphObject.prototype.getHierarchy=function(){var a="graph"===this.drawingContentType?0:1;if(void 0===this.hierarchies)this.hierarchies=[];void 0===this.hierarchies[a]&&(this.hierarchies[a]=new $MA.Graph.Hierarchy);return this.hierarchies[a]};
$MA.Graph.GraphObject.prototype.scale=function(){var a,b;if(this.isHierarchy){this.hierarchy=this.getHierarchy();if(this.redrawOnly){if("graph"===this.drawingContentType){this.hierarchy.build(this);this.hierarchy.setMaxLevel(this.hierarchyMaxLevel);a=this.hierarchyInitLevel!=void 0?this.hierarchyInitLevel:this.hierarchy.getLevel();if(a!=void 0)this.hierarchy.setLevel(a),this.hierarchyInitLevel=void 0;this.redrawOnly=!1}}else a=this.hierarchy.getLevel(),this.hierarchy.build(this),this.hierarchy.setMaxLevel(this.hierarchyMaxLevel),
this.suppliedTotals&&a===0&&(a=this.hierarchy.getTopLevel()),"graph"!==this.drawingContentType?(this.redrawOnly=!1,this.expand(!0)):this.hierarchyInitLevel?(this.hierarchy.setLevel(this.hierarchyInitLevel),this.hierarchyInitLevel=void 0):a&&this.hierarchy.setLevel(a);b=this.isWaterfall&&(!this.showTotal||!this.parentAsTotal)?this.hierarchy.getParentAsTotalMinMax(this):this.hierarchy.getRootNodeMinMax();!this.isWaterfall&&this.suppliedTotals?(a=this.minValue,b=this.maxValue):(a=b===null?this.getMinItemValue():
Math.min(this.getMinItemValue(),b[0]),b=b===null?this.getMaxItemValue():Math.max(this.getMaxItemValue(),b[1]));this.isStacked&&(this.isHundredPercent?(a=0,b=1):(a=this.getMinItemNegSum(),b=this.getMaxItemPosSum()))}else if(this.isStacked)this.isHundredPercent?(a=0,b=1):(a=this.getMinItemNegSum(),b=this.getMaxItemPosSum());else if("rangeselector"===this.drawingContentType){a=this.getMaxItemCount()>0;if(this.rangeMinValue===void 0&&a)this.rangeMinValue=this.minValue!==void 0?this.minValue:this.getMinItemValue();
if(this.rangeMaxValue===void 0&&a)this.rangeMaxValue=this.maxValue!==void 0?this.maxValue:this.getMaxItemValue();a=this.rangeMinValue;b=this.rangeMaxValue}else a=this.minValue!==void 0?this.minValue:this.getMinItemValue(),b=this.maxValue!==void 0?this.maxValue:this.getMaxItemValue();this.valuesAxis.setScale(a,b);this.categoryAxis.setScale(1,this.categories.length)};
$MA.Graph.GraphObject.prototype.resize=function(){var a=Math.min(this.height,this.width)/25;a<4&&(a=4);if(this.titleDisplayDef.autoSize)this.titleDisplayDef.font.size=$MA.Graph.GraphObject.TITLEHEIGHTFACTOR*a;if(this.legendDisplayDef.autoSize)this.legendDisplayDef.font.size=a;if(this.pieDisplayDef.autoSize)this.pieDisplayDef.font.size=a;this.categoryAxis.resize(a);this.seriesAxis.resize(a);this.valuesAxis.resize(a);this.categoryAxis.majorTicLength=this.height/75;this.seriesAxis.majorTicLength=this.height/
75;this.valuesAxis.majorTicLength=this.height/75;if(this.secondaryAxis)this.secondaryAxis.majorTicLength=this.height/75;this.categoryAxis.minorTicLength=this.height/150;this.seriesAxis.minorTicLength=this.height/150;this.valuesAxis.minorTicLength=this.height/150;if(this.secondaryAxis)this.secondaryAxis.minorTicLength=this.height/150};
$MA.Graph.GraphObject.prototype.arrangeContent=function(a,b){var c;this instanceof $MA.Graph.ColumnGraphObject?(c=this.calcBarGap(this.width-2*a),this.drawAreas.set($MA.Graph.DrawAreaType.DATA,a-c/2,b+1,this.width+c-2*a,this.height-2*b-2)):this instanceof $MA.Graph.LineGraphObject?(c=this.calcBarGap(this.width-2*a),this.drawAreas.set($MA.Graph.DrawAreaType.DATA,a-c/2,b+4,this.width-2*a+c,this.height-2*b-8)):this.drawAreas.set($MA.Graph.DrawAreaType.DATA,a,b,this.width-2*a,this.height-2*b);this.showDots=
!1};$MA.Graph.GraphObject.prototype.getLegendState=function(){return this.legend.state};$MA.Graph.GraphObject.prototype.setLegendState=function(a){this.legend.state=a;if(void 0===a)this.legend.legends=void 0};$MA.Graph.GraphObject.prototype.keepLegendState=function(){var a=[];a[0]=this.legend.left;a[1]=this.legend.top;this.setLegendState(a)};$MA.Graph.GraphObject.prototype.restoreLegendState=function(){var a=this.legend.state;if(a)this.legend.left=a[0],this.legend.top=a[1]};
$MA.Graph.GraphObject.prototype.getState=function(){return[this.dataArea,this.drawAreas,this.baseStartX,this.baseIncrX,this.baseStartY,this.baseIncrY]};$MA.Graph.GraphObject.prototype.setState=function(a){this.dataArea=a[0];this.drawAreas=a[1];this.baseStartX=a[2];this.baseIncrX=a[3];this.baseStartY=a[4];this.baseIncrY=a[5]};
$MA.Graph.GraphObject.prototype.arrange=function(){this.drawAreas.reset();this.xBorder=this.width*$MA.Graph.GraphObject.XBORDERFACTOR;this.yBorder=this.height*$MA.Graph.GraphObject.YBORDERFACTOR;var a=this.xBorder/5,b=this.yBorder/5,c=this.yBorder/3,d=this.xBorder/3,e=this.yBorder/3,f=this.width-this.xBorder*2,g=new $MA.Graph.Data(this.titleDisplayDef,this.title),e=g.getTextSize(this.context);if(this.titleDisplayDef.autoSize)for(;e.width>f&&this.titleDisplayDef.font.size>4;)e=g.getTextSize(this.context),
e.width>f&&this.titleDisplayDef.font.size--;var h=e.height,g=(this.width-e.width)/2,j=this.yBorder/5;this.drawAreas.set($MA.Graph.DrawAreaType.TITLE,g,j,e.width,e.height);var e=j+h,l;if((!this.legend.legendList||1>=this.legend.legendList.length)&&(this instanceof $MA.Graph.PieGraphObject&&this.categories.length<1||!(this instanceof $MA.Graph.PieGraphObject)&&this.getSeriesCount()<2||this.legend.location==$MA.Graph.LegendType.NONE))g=d,j=e+c,f=this.width-d*2,h=this.height-j-c;else{var n=this.legend,
k,m;n.location===$MA.Graph.LegendType.LEFT||n.location===$MA.Graph.LegendType.RIGHT?(k=(this.width-d*4)*n.dispWidth,m=this.height-e-c*2):(c=2,k=this.width-d*2,m=(this.height-e-c*4)*n.dispHeight,l=n.fontHeight*2+c*2,m<l&&(m=l));this.arrangeLegends(k,m);if(n.location===$MA.Graph.LegendType.LEFT||n.location===$MA.Graph.LegendType.RIGHT)l=n.offsetY+(m-n.viewHeight)/2,l<0?l=0:l>m-n.viewHeight&&(l=m-n.viewHeight),n.top=e+c+l,l=n.offsetX+(k-n.viewWidth)/2,l<0?l=0:l>k-n.viewWidth&&(l=k-n.viewWidth),j=e+c,
h=this.height-j-c,n.location===$MA.Graph.LegendType.LEFT?(n.left=d+l,g=k+3*d,f=this.width-g-d):(g=this.width-(d+k)+l,n.left=g,f=this.width-d*4-k,g=d);else if(n.location===$MA.Graph.LegendType.TOP||n.location===$MA.Graph.LegendType.BOTTOM)l=n.offsetX+(k-n.viewWidth)/2,l<0?l=0:l>k-n.viewWidth&&(l=k-n.viewWidth),n.left=d+l,l=n.offsetY+(m-n.viewHeight)/2,l<0?l=0:l>m-n.viewHeight&&(l=m-n.viewHeight),g=d,f=this.width-2*d,n.location===$MA.Graph.LegendType.TOP?(n.top=e+c+l,j=e+m+3*c,h=this.height-j-c):(j=
this.height-(m+c)+l,n.top=j,h=this.height-e-m-4*c,j=e+c);this.drawAreas.set($MA.Graph.DrawAreaType.LEGEND,n.left,n.top,n.viewWidth,n.viewHeight)}this.drawAreas.set($MA.Graph.DrawAreaType.DISPLAY,g,j,f,h);this.chartDisplayBoundary=j+h;c=g;d=j;if(this.valueBubblePosition==="top"&&this.valueBubble&&this.valueBubbleStyle==$MA.ValueBubbleStyle.TOP)g=this.valueBubbleHeight,d+=g,h-=g;var o=this.xAxis.getMaxStringSize(),e=o.height>this.height/$MA.Graph.GraphObject.SIZETOL?this.height/$MA.Graph.GraphObject.SIZETOL:
o.height;e+=this.xAxis.getTicOffset();this.xAxisSize=o;this.xAxis.visible||(e=0);o=this.primaryAxis?this.primaryAxis.getMaxStringSize():this.yAxis.getMaxStringSize();l=!0;g=this.width/$MA.Graph.GraphObject.SIZETOL;o.width>g?(n=g,l=!1):n=o.width;if(this.yAxis==this.categoryAxis&&this.yAxis.labelsEveryN==-1)n=this.xAxisSize.width,l=!1;n+=this.yAxis.getTicOffset();this.yAxisSize=o;this.yAxis.visible||(n=0,l=!1);var p=o=0;if(this.xAxis.visible&&!this.categoryAxis.hideValue)g=this.xAxis.label.getTextSize(this.context),
p=g.height>this.height/$MA.Graph.GraphObject.SIZETOL?this.height/$MA.Graph.GraphObject.SIZETOL:g.height,o=g.width;m=k=0;if(this.yAxis.visible)g=this.yAxis.label.getTextSize(this.context),k=g.width>this.width/4?this.width/4:g.width,m=g.height;g=c+k+n+a;f=f-k-n-a-Math.max(0,this.seriesAxis.getTicOffset());j=d+h-p;if(this.xAxis.visible)this.xAxis.label.value=this.getAxisLabel(this.xAxis.label.realValue.toString(),f),o=this.xAxis.label.getTextSize(this.context).width;this.chartDisplayBoundary=j;this.drawAreas.set($MA.Graph.DrawAreaType.XLABEL,
g,j,o,p);j=d+h-p-e-b;h=h-e-p;this.categoryAxis.hideValue||(h-=b);if((b=this.secondaryAxis)&&!(this instanceof $MA.Graph.TableBarGraphObject)){b.graphObj.scale();p=$MA.yTicLabels.allInteger;o=b.getMaxStringSize();o.width+=a;b.label.value=this.getAxisLabel(b.label.realValue.toString(),h);if(p&&!$MA.yTicLabels.allInteger&&l)l=this.context.measureText(".0").width,this.yAxisSize+=l,n+=l,g+=l,f-=l;f=f-b.getTicOffset()-o.width-b.label.getTextSize(this.context).width;b.secondaryAxisX=g+f+b.getTicOffset()+
o.width}this.drawAreas.set($MA.Graph.DrawAreaType.XAXIS,g,j,f,e);if(this.yAxis.visible)this.yAxis.label.value=this.getAxisLabel(this.yAxis.label.realValue.toString(),h),m=this.yAxis.label.getTextSize(this.context).height,b&&(m=Math.max(m,b.label.getTextSize(this.context).height));this.drawAreas.set($MA.Graph.DrawAreaType.YLABEL,c,d,k,m);this.drawAreas.set($MA.Graph.DrawAreaType.YAXIS,c+k+a,d,n,h);g=this.drawAreas.getX($MA.Graph.DrawAreaType.XAXIS);j=this.drawAreas.getY($MA.Graph.DrawAreaType.YAXIS);
f=this.drawAreas.getWidth($MA.Graph.DrawAreaType.XAXIS);h=this.drawAreas.getHeight($MA.Graph.DrawAreaType.YAXIS);h<0&&(h=0);this.drawAreas.set($MA.Graph.DrawAreaType.DATA,g,j,f,h);this.calcSize();this.calcDisplayEveryNLabels()};$MA.Graph.GraphObject.prototype.getAxisLabel=function(a,b){var c=this.context.measureText(a),d="";if(c.width>b)for(d="...";c.width>b&&a!=="";)a=a.substr(0,a.length-1),c=this.context.measureText(a+d);return a+d};
$MA.Graph.GraphObject.prototype.calcSize=function(){this.centerX=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA)+this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA)/2;this.centerY=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA)+this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA)/2;var a=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),b=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA);this.paintSize=a>b?b:a};
$MA.Graph.GraphObject.prototype.calcDisplayEveryNLabels=function(){if(this.categoryAxis.labelsEveryN!=-1&&this.xAxisSize!=void 0&&this.categories.length>0&&this.categories[0].groupValues==void 0){var a=this.calcBarEntryWidth(this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA)),b=this.xAxisSize;this.categoryAxis.labelsEveryN=b.width<a?0:Math.ceil(b.width/a)}};
$MA.Graph.GraphObject.prototype.getValueLoc=function(a){if(this.dataArea.bottom&&this.dataArea.top&&a!=void 0)return this.valuesAxis.getValueLoc(this.dataArea.bottom,this.dataArea.top,a)};
$MA.Graph.GraphObject.prototype.initDataArea=function(){this.dataArea={left:this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),top:this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),width:this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),height:this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA)};this.dataArea.right=this.dataArea.left+this.dataArea.width;this.dataArea.bottom=this.dataArea.top+this.dataArea.height;var a=this.valuesAxis.getOriginLoc(this.dataArea.bottom,this.dataArea.top);a<0&&(a=
0>=this.valuesAxis.maxValue?this.dataArea.top:this.dataArea.bottom);this.dataArea.origin=a};$MA.Graph.GraphObject.prototype.drawTitle=function(){var a=this.drawAreas.getX($MA.Graph.DrawAreaType.TITLE),b=this.drawAreas.getY($MA.Graph.DrawAreaType.TITLE),c=this.drawAreas.getWidth($MA.Graph.DrawAreaType.TITLE),d=this.drawAreas.getHeight($MA.Graph.DrawAreaType.TITLE);this.annotationObjects.push(new $MA.Graph.Text2D(this,new $MA.Graph.Data(this.titleDisplayDef,this.title),a,b,c,d))};
$MA.Graph.GraphObject.prototype.drawGridsBack=function(){var a=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),b=a+this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),c=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),d=c+this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),e=0.5+(b-a);this.xAxis.visible&&this.xAxis.drawXGrid(a,b,d,c,0,e);this.yAxis.visible&&this.yAxis.drawYGrid(a,b,d,c,0,e)};
$MA.Graph.GraphObject.prototype.drawXLabel=function(){if(this.xAxis.visible&&!this.xAxis.hideValue){var a=this.drawAreas.getX($MA.Graph.DrawAreaType.XLABEL)+this.drawAreas.getWidth($MA.Graph.DrawAreaType.XAXIS)/2,b=this.drawAreas.getY($MA.Graph.DrawAreaType.XLABEL),c=this.drawAreas.getWidth($MA.Graph.DrawAreaType.XLABEL),d=this.drawAreas.getHeight($MA.Graph.DrawAreaType.XLABEL);a-=c/2;this.annotationObjects.push(new $MA.Graph.Text2D(this,this.xAxis.label,a,b,c,d))}};
$MA.Graph.GraphObject.prototype.drawYLabel=function(){if(this.yAxis.visible&&!this.yAxis.hideValue){var a=this.drawAreas.getX($MA.Graph.DrawAreaType.YLABEL),b=this.drawAreas.getY($MA.Graph.DrawAreaType.YLABEL)+this.drawAreas.getHeight($MA.Graph.DrawAreaType.YAXIS)/2,c=this.drawAreas.getWidth($MA.Graph.DrawAreaType.YLABEL),d=this.drawAreas.getHeight($MA.Graph.DrawAreaType.YLABEL);if(this.yAxis.primaryLine.strokeBrush.color)this.yAxis.label.displayDef.foreground=(new $MA.Brush(this.yAxis.primaryLine.strokeBrush.color)).toString();
if(this.yAxis.secondaryAxis){if(this.yAxis.secondaryAxisX)a=this.yAxis.secondaryAxisX,this.annotationObjects.push(new $MA.Graph.Text2D(this,this.yAxis.label,a,b,c,d))}else this.annotationObjects.push(new $MA.Graph.Text2D(this,this.yAxis.label,a,b,c,d))}};
$MA.Graph.GraphObject.prototype.drawGridsFront=function(){var a=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),b=a+this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),c=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),d=c+this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),e=0.5+(b-a);this.xAxis.visible&&!this.xAxis.hideValue&&this.xAxis.drawXGridValue(a,b,d,c,0,e);this.yAxis.visible&&!this.yAxis.hideValue&&this.yAxis.drawYGridValue(a,b,d,c,0,e)};
$MA.Graph.GraphObject.prototype.getEnabledSeries=function(){var a=0,b,c=this.seriesList.length;for(b=0;b<c;++b)this.seriesList[b].isEnabled()&&a++;return a};$MA.Graph.GraphObject.prototype.calcBarWidth=function(a){var b=this.getMaxItemCount();if(b==0)return-1;var c=0;if(this.isStacked)c=a/(b+(b+1)*this.gap);else if(this.totalBarEntries)c=a/(b*this.totalBarEntries+1);else{c=this.seriesList.length;if(c==0||this instanceof $MA.Graph.LineGraphObject)c=1;c=a/(b*(c-(c-1)*this.overlap)+(b+1)*this.gap)}return c};
$MA.Graph.GraphObject.prototype.calcBarEntryWidth=function(a){return this.totalBarEntries===void 0||this.isStacked?this.calcRawBarEntryWidth(a)+this.calcBarGap(a):this.calcBarWidth(a)*this.totalBarEntries};$MA.Graph.GraphObject.prototype.calcRawBarEntryWidth=function(a){var b=0,c,a=this.calcBarWidth(a);c=this.getSeriesCount();if(c<1||this instanceof $MA.Graph.LineGraphObject)c=1;this.isStacked?b=a:(b=a,b+=a*(1-this.overlap)*(c-1));return b};
$MA.Graph.GraphObject.prototype.calcBarGap=function(a){var b=0;if(this.totalBarEntries===void 0){var c,d;d=this.calcRawBarEntryWidth(a);c=this.getMaxItemCount();a-=d*c;a>0.1&&(b=a/(c+1))}else b=this.calcBarWidth(a)*(1+this.prevBarEntries);return b};$MA.Graph.GraphObject.prototype.getItemYDouble=function(a,b){var c,d=0;if(this.isStacked){var e;for(e=0;e<=a;e++)c=this.getSeries(e),d+=c.getItemYDouble(b)}else c=this.getSeries(a),d=c.getItemYDouble(b);return d};
$MA.Graph.GraphObject.prototype.computeTruePieRadius=function(a){var b,c,d,e,f,g,h,j=0;g=d=0;b=this.getSeriesCount();for(e=b-1;e>=0;e--){d=this.getSeries(e);h=Math.sqrt(a*a*e/b);f=0;c=d.items.length;for(c-=1;c>=0;c--)g=d.getItemPieExplodePercent(c),g/=100,g>f&&(f=g);d=h*f;d>j&&(j=d)}j<0&&(j=0);return a>0?a*a/(a+j):1};
$MA.Graph.GraphObject.prototype.createCategory=function(a,b,c,d){this.hasGroups=this.hasGroups||b&&0<b.length;b=new $MA.Graph.Category(a,b,c,d);this.categories.push(b);this.hasGroups||this.categoryHash.set(a,this.categories.length-1);return b};
$MA.Graph.GraphObject.prototype.getCategoryLevelCount=function(){var a=0,b,c;if(this.categories.length>0){for(b=0;b<this.categories.length;b++)if(c=this.categories[0],c.groupValues!=void 0&&c.groupValues.length>a)a=c.groupValues.length;this.graphType.indexOf("hierarchy")>=0&&this.suppliedTotals==!1&&a++}return a};$MA.Graph.GraphObject.prototype.getCategoryIndex=function(a){if(this.hasGroups||this.isDataScattered)return-1;a=this.categoryHash.get(a);return a==void 0?-1:a};
$MA.Graph.GraphObject.prototype.getCategoryNodes=function(){return[]};$MA.Graph.GraphObject.prototype.createSeries=function(a,b){var c=new $MA.Graph.Series(this,a.toString()),d=this.getSeriesFillBrush(b),e=this.getSeriesStrokeBrush(b),f=this.getSeriesInsetShadowBrush(b);c.drawContext=new $MA.Graph.DrawContext(d,e,f);this.seriesList.push(c);return c};
$MA.Graph.GraphObject.prototype.getDrawContext=function(a){this.monoColor&&(a=0);this.chartBrushes!=void 0&&(a%=this.chartBrushes.length);var b=this.getSeriesFillBrush(a),c=this.getSeriesStrokeBrush(a),a=this.getSeriesInsetShadowBrush(a);if(this.borderColor!=void 0)c=this.borderColor,a=$MA.Brushes.transparent;return new $MA.Graph.DrawContext(b,c,a)};$MA.Graph.GraphObject.prototype.getSeriesList=function(){return this.seriesList};
$MA.Graph.GraphObject.prototype.getSeries=function(a){if(typeof a=="string"){var b=this.seriesList.length,c;for(c=0;c<b;c++)if(a=this.seriesList[c],a.name==name)return a}else if(a>=0&&a<this.seriesList.length)return this.seriesList[a]};$MA.Graph.GraphObject.prototype.resetData=function(){this.drawObjects=[];this.seriesList=[];this.categories=[];this.categoryHash.clear();this.legend.reset()};$MA.Graph.GraphObject.prototype.getSeriesCount=function(){return this.seriesList.length};
$MA.Graph.GraphObject.prototype.getMinItemValue=function(){if(this.isStacked&&this.isHundredPercent)return 0;var a=null,b=null,c;for(c=0;c<this.seriesList.length;c++)b=this.seriesList[c],b=b.getMinItemValue(this.isWaterfall),a==null?a=b:b<a&&(a=b);return a};
$MA.Graph.GraphObject.prototype.getMaxItemValue=function(){if(this.isStacked&&this.isHundredPercent)return 100;var a=null,b=null,c=this.seriesList.length,d;for(d=0;d<c;d++)b=this.seriesList[d],b=b.getMaxItemValue(this.isWaterfall),a==null?a=b:b>a&&(a=b);return a};$MA.Graph.GraphObject.prototype.getMinItemNegSum=function(){var a,b,c,d,e,f=this.getMaxItemCount(),g=this.getSeriesCount();for(a=d=0;a<f;a++){for(b=e=0;b<g;b++)c=this.getSeries(b),c=c.getItemYDouble(a),c<0&&(e+=c);e<d&&(d=e)}return d};
$MA.Graph.GraphObject.prototype.getItemSumPerCategory=function(){var a,b,c,d,e=[],f=this.getMaxItemCount(),g=this.getSeriesCount();for(a=0;a<f;a++){for(b=d=0;b<g;b++)c=this.getSeries(b),c.isEnabled()==!0&&(c=c.getItemYDouble(a),d+=Math.abs(c));e.push(d)}return e};
$MA.Graph.GraphObject.prototype.getMaxItemPosSum=function(){var a,b,c,d=0,e;if(this.isHierarchy&&this.getRootNode()&&this.getRootNode().getSeries()){b=this.getRootNode().getSeries();for(a=0;a<b.length;a++)d+=b[a]}else{var f=this.getMaxItemCount(),g=this.getSeriesCount();for(a=0;a<f;a++){for(b=e=0;b<g;b++)c=this.getSeries(b),c=c.getItemYDouble(a),c>0&&(e+=c);e>d&&(d=e)}}return d};
$MA.Graph.GraphObject.prototype.getMaxItemCount=function(){var a=0,b,c;for(b=0;b<this.seriesList.length;b++)if(c=this.seriesList[b],c.items.length>a)a=c.items.length;this.isWaterfall&&this.showTotal&&a++;return a};$MA.Graph.GraphObject.prototype.getMinZValue=function(){var a=null;if(this.seriesList.length>0)a=this.seriesList[0].name;return a};$MA.Graph.GraphObject.prototype.getMaxZValue=function(){var a=this.seriesList.length,b=null;if(a>0)b=this.seriesList[a-1].name;return b};
$MA.Graph.GraphObject.prototype.getMaxPieLabelSize=function(){var a,b,c=0,d=0,e=null,f,g;b=this.getSeriesCount();for(a=0;a<b;a++)if(f=this.getSeries(a),g=f.getYPosSum(),b<2){b=f.items.length;for(a=0;a<b;a++){e=f.getItemYDouble(a)/g;e=new $MA.Graph.Data(this.pieDisplayDef,Number(e*100).toFixed(2));e=e.getTextSize(this.context);if(e.width>c)c=e.width;if(e.height>d)d=e.height}break}else{e=f.label;if(e==null)return new $MA.Graph.TextSize;e=e.getTextSize(this.context);if(e.width>c)c=e.width;if(e.height>
d)d=e.height}return new $MA.Graph.TextSize(c,d)};$MA.Graph.GraphObject.prototype.getGradientDirection=function(){var a=0;this instanceof $MA.Graph.ColumnGraphObject&&(a=2);return a};$MA.Graph.GraphObject.prototype.getCustomContext=function(a){var b=$MA.getStrokeInsetColors(a);return new $MA.Graph.DrawContext(new $MA.Brush(a),new $MA.Brush(b[0]),new $MA.Brush(b[1]))};
$MA.Graph.GraphObject.prototype.setPalette=function(a,b){if(a!=null&&Array.isArray(a)&&a.length>0){b=="primaryaxis"?(this.primaryAxisBrushes=[],this.primaryAxisStrokeBrushes=[],this.primaryAxisInsetBrushes=[]):b=="secondaryaxis"?(this.secondaryAxisBrushes=[],this.secondaryAxisStrokeBrushes=[],this.secondaryAxisInsetBrushes=[]):(this.chartBrushes=[],this.chartStrokeBrushes=[],this.chartInsetBrushes=[]);var c,d;for(c=0;c<a.length;c++)b=="primaryaxis"?(this.primaryAxisBrushes[c]=new $MA.Brush(a[c]),
d=$MA.getStrokeInsetColors(a[c]),this.primaryAxisStrokeBrushes[c]=new $MA.Brush(d[0]),this.primaryAxisInsetBrushes[c]=new $MA.Brush(d[1])):b=="secondaryaxis"?(this.secondaryAxisBrushes[c]=new $MA.Brush(a[c]),d=$MA.getStrokeInsetColors(a[c]),this.secondaryAxisStrokeBrushes[c]=new $MA.Brush(d[0]),this.secondaryAxisInsetBrushes[c]=new $MA.Brush(d[1])):(this.chartBrushes[c]=new $MA.Brush(a[c]),d=$MA.getStrokeInsetColors(a[c]),this.chartStrokeBrushes[c]=new $MA.Brush(d[0]),this.chartInsetBrushes[c]=new $MA.Brush(d[1]))}else a==
null?b=="primaryaxis"?this.primaryAxisBrushes=void 0:b=="secondaryaxis"?this.secondaryAxisBrushes=void 0:this.chartBrushes=void 0:$MA.log.error("Palette must be either null or a non-empty array.")};
$MA.Graph.GraphObject.prototype.getSeriesFillBrush=function(a){return this.chartBrushes!=void 0?this.chartBrushes[a%this.chartBrushes.length]:this.valuesAxis.secondaryAxis&&this.secondaryAxisBrushes!=void 0?this.secondaryAxisBrushes[a%this.secondaryAxisBrushes.length]:!this.valuesAxis.secondaryAxis&&this.primaryAxisBrushes!=void 0?this.primaryAxisBrushes[a%this.primaryAxisBrushes.length]:$MA.Graph.SeriesBrushes.getFillBrush(a,this.getGradientDirection())};
$MA.Graph.GraphObject.prototype.getCustomisedFillBrush=function(a,b){this.getCustomisedFillBrush(a,b)};
$MA.Graph.GraphObject.prototype.getSeriesStrokeBrush=function(a){return this.chartBrushes!=void 0?this.chartStrokeBrushes[a%this.chartStrokeBrushes.length]:this.secondaryAxisBrushes&&this.valuesAxis.secondaryAxis?this.secondaryAxisStrokeBrushes[a%this.secondaryAxisStrokeBrushes.length]:this.primaryAxisBrushes&&!this.valuesAxis.secondaryAxis?this.primaryAxisStrokeBrushes[a%this.primaryAxisStrokeBrushes.length]:$MA.Graph.SeriesBrushes.getStrokeBrush(a,this.getGradientDirection())};
$MA.Graph.GraphObject.prototype.getSeriesInsetShadowBrush=function(a){return this.chartBrushes!=void 0?this.chartInsetBrushes[a%this.chartInsetBrushes.length]:this.secondaryAxisBrushes&&this.valuesAxis.secondaryAxis?this.secondaryAxisInsetBrushes[a%this.secondaryAxisInsetBrushes.length]:this.primaryAxisBrushes&&!this.valuesAxis.secondaryAxis?this.primaryAxisInsetBrushes[a%this.primaryAxisInsetBrushes.length]:$MA.Graph.SeriesBrushes.getInsetShadowBrush(a,this.getGradientDirection())};
$MA.Graph.GraphObject.prototype.getLineBrush=function(){return this.linebrush!=void 0?this.linebrush:$MA.Graph.GraphObject.lineBrush};$MA.Graph.GraphObject.prototype.refreshBrush=function(){var a,b,c,d,e=this.seriesList.length;for(d=0;d<e;d++)a=this.getSeriesFillBrush(d),b=this.getSeriesStrokeBrush(d),c=this.getSeriesInsetShadowBrush(d),this.seriesList[d].drawContext=new $MA.Graph.DrawContext(a,b,c)};
$MA.Graph.GraphObject.prototype.drawLine=function(a,b,c,d,e){a.beginPath();a.moveTo(b,c);a.lineTo(d,e);a.closePath();a.stroke()};
$MA.Graph.GraphObject.prototype.arrangeLegends=function(a,b){var c=this.legend;if(!c.legends)c.legends=this.getAllLegends();c.lMargin=1;c.rMargin=1;c.tMargin=1;c.bMargin=1;var d=c.legends;c.maxWidth=d.maxWidth;c.height=c.fontHeight*2;c.count=d.length;var e=c.lMargin+c.rMargin,f=c.tMargin+c.bMargin;if(c.location===$MA.Graph.LegendType.LEFT||c.location===$MA.Graph.LegendType.RIGHT)if(c.totalHeight=(c.height+c.bMargin)*c.count+c.tMargin,c.totalWidth=d.maxWidth+e,c.totalHeight>b){e=c.tMargin;for(d=c.count-
1;d>=0;d--)if(e+c.height+c.bMargin<=b)e+=c.height+c.bMargin;else break;c.viewHeight=e}else c.viewHeight=c.totalHeight;else if(c.location===$MA.Graph.LegendType.TOP||c.location===$MA.Graph.LegendType.BOTTOM)c.totalHeight=c.height+f,c.totalWidth=d.totalWidth+c.rMargin*c.count+c.lMargin,c.viewHeight=c.totalHeight>b?b:c.totalHeight;c.viewWidth=c.totalWidth>a?a:c.totalWidth};
$MA.Graph.GraphObject.prototype.getLegendList=function(){var a=this.legend.legendList,b;if(!a){var a=[],c=this.getSeriesList();if(c){var d,e=c.length;for(d=0;d<e;d++)b={name:c[d].name,fillBrush:c[d].drawContext.fillBrush.toString(),graphObjIndex:c[d].graphObjIndex},a.push(b)}}return a};
$MA.Graph.GraphObject.prototype.getAllLegends=function(){var a=this.getLegendList(),b=this.context,c=this.legend.fontHeight,d=a.length,e=[],f=15+c,g=0,h=0,j=this.legendDisplayDef.format,l,n,k;b.font=this.legend.fontStyle+" "+c+"px "+this.legend.fontFamily;for(c=0;c<d;c++){l=a[c];n=l.name;k=l.graphObjIndex;n=$MA.format(n,j);l=l.fillBrush.toString();this.isCustomDataPointsColor&&this.getCustomisedFillBrush(c,0)!=void 0&&this instanceof $MA.Graph.PieGraphObject&&(l=this.getCustomisedFillBrush(c,0).toString());
var m=b.measureText(n).width+f;e.push({legend_name:n,legend_color:l,graphObjIndex:k,width:m,margin:5});g<m&&(g=m);h+=m}e.maxWidth=g;e.totalWidth=h;return e};$MA.Graph.GraphObject.prototype.drawOutline=function(a,b,c,d,e,f,g){a.beginPath();a.strokeStyle=g;a.strokeRect(b-1,c-1,d+2,e+2);a.closePath()};
$MA.Graph.GraphObject.prototype.drawSingleLegend=function(a,b,c,d,e){a.lineWidth=0.5;a.beginPath();a.rect(c.left,c.top,c.width,c.height);a.closePath();a.fillStyle=d;a.fill();a.strokeStyle=e;a.stroke();a.fillStyle=b.legend_color;$MA.platform.blackberry?a.fillRect(c.left+b.margin,c.top+c.height/4,c.height/2,c.height/2):(a.beginPath(),$MA.ContextHelper.roundRect(a,c.left+b.margin,c.top+c.height/4,c.height/2,c.height/2,4),a.closePath(),a.fill());a.fillStyle=e;a.font=this.legend.fontStyle+" "+this.legend.fontHeight+
"px "+this.legend.fontFamily;a.fillText(b.legend_name,c.left+b.margin*2+c.height/2,c.top+c.height/4+c.height/2)};
$MA.Graph.GraphObject.prototype.drawLegend=function(){if(this.legend.legends){var a=this.categories.length;if(a>0&&this.legend.location!==$MA.Graph.LegendType.NONE){var b=this.legend,c=b.location===$MA.Graph.LegendType.LEFT||b.location===$MA.Graph.LegendType.RIGHT?!1:!0,d=this.drawAreas.getX($MA.Graph.DrawAreaType.LEGEND),e=this.drawAreas.getY($MA.Graph.DrawAreaType.LEGEND),f=this.drawAreas.getHeight($MA.Graph.DrawAreaType.LEGEND),g=this.drawAreas.getWidth($MA.Graph.DrawAreaType.LEGEND),h=this.context,
j=b.legends,l=b.lMargin,n=b.rMargin,k=l+n,a=b.tMargin,m=b.bMargin,o=a+m,p=d+l,q=d+g-n,r=e+a,s=e+f-m;if(this instanceof $MA.Graph.PieGraphObject){var u=h.fillStyle;h.fillStyle="white";h.fillRect(d,e,g,f);h.fillStyle=u}else h.clearRect(d,e,g,f);h.save();h.beginPath();h.rect(d+l,e+a,g-k,f-o);h.clip();for(var l=this.legend.left+l,k=this.legend.top+a,o={width:b.totalWidth,height:b.height},a=j.length,v,u=0;u<a;u++){b=j[u];v=b.legend_color;o.left=l;o.top=k;if(c)o.width=b.width;(c&&l+o.width+n>p&&l<q||!c&&
k+o.height+m>r&&k<s)&&this.drawSingleLegend(h,b,o,"black","white");b.legend_color=v;(b=this.legend.drawObjectsList["legend_"+u])?(b.x=o.left,b.y=o.top,b.width=o.width,b.height=o.height,b.generate()):(b=new $MA.Graph.Rectangle2D(this,new $MA.Graph.DrawContext($MA.Brushes.transparent,$MA.Brushes.transparent),u,o.left,o.top,o.width,o.height),this.legend.drawObjectsList["legend_"+u]=b,this.annotationObjects.push(b));c?l+=o.width+n:k+=o.height+m}h.restore();this.drawOutline(this.context,d,e,g,f,this.backgroundColor,
this.foreColor)}}};
$MA.Graph.GraphObject.prototype.doScrollLegend=function(a,b){var c=a,c=b,d=!1;if(a||b){if(a){var e=this.drawAreas.getX($MA.Graph.DrawAreaType.LEGEND),f=this.drawAreas.getWidth($MA.Graph.DrawAreaType.LEGEND),c=this.legend.left-a;if(c<=e&&c+this.legend.totalWidth>=e+f)d=!0,this.legend.left=c}if(b&&(e=this.drawAreas.getY($MA.Graph.DrawAreaType.LEGEND),f=this.drawAreas.getHeight($MA.Graph.DrawAreaType.LEGEND),c=this.legend.top-b,c<=e&&c+this.legend.totalHeight>=e+f))d=!0,this.legend.top=c;d&&(this.drawLegend(),
this.keepLegendState())}};$MA.Graph.GraphObject.prototype.setMonoColor=function(a){this.monoColor=a};$MA.Graph.GraphObject.prototype.applyWaterfallStyle=function(a){if(this.isWaterfall)for(var b in a)this[b]=a[b];else $MA.log.error("Can't apply style "+a+" to a non-Waterfall chart!")};
$MA.Graph.GraphObject.prototype.getIsCustomDataPointsColor=function(){if(!this.dataPointsColor||this.dataPointsColor.length==0)this.isCustomDataPointsColor=!1;else{var a,b,c=this.dataPointsColor.length;for(a=0;a<c;a++){if(this.isCustomDataPointsColor)break;for(b=0;b<2;b++){if(this.dataPointsColor[a][b]!=void 0&&this.dataPointsColor[a][b]!=null&&parseInt(this.dataPointsColor[a][0],10)>=0){this.isCustomDataPointsColor=!0;break}this.isCustomDataPointsColor=!1}}}if(this.isCustomDataPointsColor)this.dataPointsColorHash.clear(),
this.createCustomDataPointsColorHash(),this.dataPointsColorMinIndex=this.getDataPointsColorMinIndex(),this.dataPointsColorMaxIndex=this.getDataPointsColorMaxIndex();return this.isCustomDataPointsColor};
$MA.Graph.GraphObject.prototype.getDataPointsColorMinIndex=function(){var a;if(this.isCustomDataPointsColor){var b=this.dataPointsColor.length,c;for(c=0;c<b;c++)this.dataPointsColor[c][0]==void 0||this.dataPointsColor[c][0]==null||parseInt(this.dataPointsColor[c][0],10)<0||(a=a==void 0?this.dataPointsColor[c][0]:a,a=this.dataPointsColor[c][0]<a?this.dataPointsColor[c][0]:a)}return a};
$MA.Graph.GraphObject.prototype.getDataPointsColorMaxIndex=function(){var a;if(this.isCustomDataPointsColor){var b,c=this.dataPointsColor.length;for(b=0;b<c;b++)this.dataPointsColor[b][0]==void 0||this.dataPointsColor[b][0]==null||parseInt(this.dataPointsColor[b][0],10)<0||(a=a==void 0?this.dataPointsColor[b][0]:a,a=this.dataPointsColor[b][0]>a?this.dataPointsColor[b][0]:a)}return a};
$MA.Graph.GraphObject.prototype.createCustomDataPointsColorHash=function(){if(this.isCustomDataPointsColor){var a,b=this.dataPointsColor.length;for(a=0;a<b;a++)this.dataPointsColor[a][0]==void 0||this.dataPointsColor[a][0]==null||parseInt(this.dataPointsColor[a][0],10)<0||this.dataPointsColorHash.set("CustomDataPointsColor"+parseInt(this.dataPointsColor[a][0],10),this.dataPointsColor[a][1])}};$MA.Graph.GraphObject.prototype.updateValueBubbleValue=function(a){this.valueBubbleValue=a};
$MA.Graph.GraphObject.prototype.collapse=function(a){this.hierarchy?this.hierarchy.collapse(a):this.setHierarchyInitLevel(a,"collapse")};$MA.Graph.GraphObject.prototype.expand=function(a){this.hierarchy?this.hierarchy.expand(a):this.setHierarchyInitLevel(a,"expand")};$MA.Graph.GraphObject.prototype.isRootLevel=function(){return this.hierarchy&&this.hierarchy.isRootLevel()!==void 0?this.hierarchy.isRootLevel():this.hierarchyInitLevel>0?!1:!0};
$MA.Graph.GraphObject.prototype.isLeafLevel=function(){return this.hierarchy&&this.hierarchy.isLeafLevel()!==void 0?this.hierarchy.isLeafLevel():this.hierarchyInitLevel===this.hierarchyMaxLevel?!0:!1};$MA.Graph.GraphObject.prototype.getHierarchyLevel=function(){return this.hierarchy&&this.hierarchy.getLevel()!==void 0?this.hierarchy.getLevel():this.hierarchyInitLevel};
$MA.Graph.GraphObject.prototype.getHierarchyActualLevels=function(){return this.hierarchy&&this.hierarchy.getActualLevelsCount()!==void 0?this.hierarchy.getActualLevelsCount():this.hierarchyInitLevel};$MA.Graph.GraphObject.prototype.getMaxHierarchyLevel=function(){return this.hierarchy&&this.hierarchy.getMaxLevel()!==void 0?this.hierarchy.getMaxLevel():this.hierarchyMaxLevel};$MA.Graph.GraphObject.prototype.getRootNode=function(){return this.hierarchy&&this.hierarchy.getRootNode()};
$MA.Graph.GraphObject.prototype.getNodeCount=function(){var a=0;this.hierarchy!==void 0&&(a=this.hierarchy.getNodeCount());this.showTotal&&!this.parentAsTotal&&(a+=1);return a};$MA.Graph.GraphObject.prototype.getStartNode=function(){return this.hierarchy&&this.hierarchy.getStartNode()};
$MA.Graph.GraphObject.prototype.setHierarchyInitLevel=function(a,b){if(b=="expand")a==!0?this.hierarchyInitLevel=this.hierarchyMaxLevel:this.hierarchyInitLevel===void 0?this.hierarchyInitLevel=1:this.hierarchyInitLevel++;if(b=="collapse")a==!0?this.hierarchyInitLevel=0:this.hierarchyInitLevel--};
$MA.Graph.GraphObject.prototype.getSummariesForCategoryIndex=function(a,b){var c=this.getSeriesCount(),d=[],e,f,g,h,j,l,n,k=[];for(e=0;e<c;e++){f=this.getSeries(e);h=f.items.length;for(j=0;j<h;j++)if(g=f.items[j],n=g.category,l=n.groupValues,l===void 0&&(l=[]),n=n.value,l=this.filterEmptyString(l),n===""&&(n=l[0],l=l.slice(1)),a===n&&b.toString()===l.toString()){d.push(g.yValue);k.push(g.valueDisplayText);break}}return[d,k]};$MA.Graph.GraphObject.prototype.filterEmptyString=function(a){return a.filter(function(a){return a})};
$MA.Graph.GraphObject.prototype.calcCoordinateX=function(a,b,c,d,e,f){var g;f=="bottom"&&(g=b==d?a:(e-b)*(c-a)/(d-b)+a);f=="top"&&(g=b==d?a:c-(c-a)*(d-e)/(d-b));return g};$MA.Graph.GraphObject.prototype.calcCoordinateY=function(a,b,c,d,e,f){var g;f=="left"&&(g=a==c?b:d-(d-b)*(c-e)/(c-a));f=="right"&&(g=a==c?b:(e-a)*(d-b)/(c-a)+b);return g};
$MA.Graph.Hierarchy=function(){function a(a){this.getLevel=function(){return a.getLevel()};this.getValue=function(){return a.getValue()};this.getSeries=function(){return a.getSeries()};this.getValueDisplayText=function(b){return a.getValueDisplayText(b)};this.getChildren=function(){return a.getChildren()};this.isLeafNode=function(){return a.isLeafNode()};this.getChildrenCount=function(){return a.getChildrenCount()};this.getGroupValues=function(){return a.getGroupValues()};this.isDummyNode=function(){return a.isDummyNode()};
this.getStartNode=function(){return a.getStartNode()};this.getNextSibling=function(){return a.getNextSibling()};this.getParentNode=function(){return a.getParentNode()};this.getFirstChild=function(){return a.getFirstChild()}}function b(a,b,c,d,j,l){this.hierarchy=a;this.level=b;this.value=c;this.series=d;this.childStart=j;this.childEnd=l}function c(){this.tree=[];this.level=0;this.topLevel=void 0;this.maxLevel=0}function d(){if(!(this instanceof d))return new d;var b=new c;this.getRootNode=function(){var c=
b.getRootNode();if(null!==c)return new a(c);return c};this.getRootNodeMinMax=function(){return b.getRootNodeMinMax()};this.getLevel=function(){return b.getLevel()};this.getActualLevelsCount=function(){return b.getActualLevelsCount()};this.getTopLevel=function(){return b.getTopLevel()};this.setLevel=function(a){b.setLevel(a)};this.getMaxLevel=function(){return b.getMaxLevel()};this.setMaxLevel=function(a){return b.setMaxLevel(a)};this.isRootLevel=function(){return b.isRootLevel()};this.isLeafLevel=
function(){return b.isLeafLevel()};this.collapse=function(a){return b.collapse(a)};this.expand=function(a){return b.expand(a)};this.getNodeCount=function(){return b.getNodeCount()};this.build=function(a){return b.build(a)};this.getChildrenCount=function(){return b.getChildrenCount()};this.getStartNode=function(){return b.getStartNode()};this.getFirstChild=function(){return b.getFirstChild()};this.getNexSibling=function(){return b.getNexSibling()};this.getParentAsTotalMinMax=function(a){return b.getParentAsTotalMinMax(a)}}
b.prototype={getLevel:function(){return this.level},getValue:function(){return this.value},getSeries:function(){return this.series},getValueDisplayText:function(a){return this.valueDisplayText&&this.valueDisplayText[a]},getChildren:function(){var b=[],c;if(this.level<this.hierarchy.getLevel()&&!this.isLeafNode())for(c=this.childStart;c<=this.childEnd;c++)b.push(new a(this.hierarchy.tree[this.level+1][c]));return b},getChildrenCount:function(){var a=0,b=this.hierarchy.getLevel(),c,d;if(this.level<
b&&!this.isLeafNode()){c=this.hierarchy.tree[this.level+1];for(d=this.childStart;d<=this.childEnd;d++)c[d].series!==void 0&&a++;if(this.level+1<b)for(d=this.childStart;d<=this.childEnd;d++)a+=c[d].getChildrenCount()}return a},isLeafNode:function(){return void 0===this.childStart&&void 0===this.childEnd},getGroupValues:function(){return this.groupValues},isDummyNode:function(){return this.dummyNode},getStartNode:function(){return this.getStartNode},getNextSibling:function(){return this.nextSibling},
getParentNode:function(){return this.parentNode},getFirstChild:function(){return this.firstChild}};c.prototype={getRootNode:function(){return this.tree[0]&&this.tree[0][0]?this.tree[0][0]:null},getRootNodeMinMax:function(){if(!this.getRootNode()||!this.getRootNode().getSeries())return null;var a=null;if(this.getRootNode().getSeries()){var a=this.getRootNode().getSeries(),b=0,c=0,d=a.length,j;for(j=0;j<d;j++)c<a[j]&&(c=a[j]),b>a[j]&&(b=a[j]);a=[b,c]}return a},getParentAsTotalMinMax:function(a){var b,
c,d,j=0,l=0,n=[],k;b=this.getRootNode();d=a.getSeriesCount();for(c=0;c<d;c++)n[c]=a.getSeries(c).sumBeforeRange;do{if(b!=void 0&&(c=b.isDummyNode(),!c)){a=b.getSeries();for(c=0;c<d;c++){k=a[c]!==void 0?a[c]:void 0;if(typeof k!="number"||typeof k=="number"&&isNaN(k))k=0;n[c]+=k;n[c]>=l&&(l=n[c]);n[c]<j&&(j=n[c])}}if(b&&b.getFirstChild())b=b.getFirstChild();else if(b&&b.getNextSibling())b=b.getNextSibling();else{do b=b&&b.getParentNode();while(b&&b.getNextSibling()===void 0);b=b&&b.getNextSibling()?
b.getNextSibling():void 0}}while(b!==void 0);return j===0&&l===0?null:[j,l]},getLevel:function(){return this.level},getTopLevel:function(){return this.topLevel},getActualLevelsCount:function(){return this.level<this.actualLevels?this.level:this.actualLevels},setLevel:function(a){if(0<=a&&this.getMaxLevel()>=a)this.level=a},getMaxLevel:function(){return this.maxLevel},setMaxLevel:function(a){this.maxLevel=a},isRootLevel:function(){return 0===this.getLevel()},isLeafLevel:function(){return this.getMaxLevel()===
this.getLevel()},collapse:function(a){a?this.level=this.topLevel===void 0?0:this.topLevel:this.level>(this.topLevel===void 0?0:this.topLevel)&&this.level--},expand:function(a){a?this.level=this.getMaxLevel():this.getMaxLevel()>this.level&&this.level++},getNodeCount:function(){var a=0,b=this.getRootNode();null!==b&&(a=b.getChildrenCount()+(b.getSeries()?1:0));return a},getStartNode:function(){return this.startNode},getFirstChild:function(){return this.firstChild},getParentNode:function(){return this.parentNode},
build:function(a){var c=a.getCategoryLevelCount(),d=[],h=0,j=[],l,n,k,m,o,p,q;this.actualLevels=0;if(0<=c){l=c+1;for(n=0;n<=l;n++)d[n]=[];l=a.categories.length;for(n=0;n<l;n++){q=a.categories[n].groupValues;q===void 0&&(q=[]);k=a.categories[n].value;q=this.filterEmptyString(q);k===""&&(k=q[0],q=q.slice(1));j=a.getSummariesForCategoryIndex(k,q);o=j[0];m=j[1];j=q.length+1;o=new b(this,j,k,o);o.groupValues=q;o.index=h++;o.valueDisplayText=m;o.dummyNode=!1;if(n===0)this.startNode=o;d[j].push(o)}for(n=
0;n<=c;n++){j=c-n;p=d[j+1];l=p.length;l>0&&this.actualLevels++;var r,s,u=[];for(m=h=0;h<l;h++){q=p[h].groupValues;s=p[h].index;if(p[h+1]!==void 0)u=p[h+1].groupValues;if(p[h+1]===void 0||q.toString()!==u.toString()){o=[];for(k=m;k<=h;k++)p[k].getSeries()!==void 0&&o.push(p[k].getSeries());p[h].nextSibling=void 0;k=o;o=k.length;r=[];var v=void 0,x=void 0,w=v=void 0;if(0<o){v=k[0];w=v.length;for(v=0;v<w;v++)for(x=0;x<o;x++)0===x?r[v]=k[0][v]:r[v]+=k[x][v]}o=r;k=p[h].groupValues[0];r=this.lookUpParentNode(d[j],
k,q.slice(1));if(r!==void 0)r.childStart=m,r.childEnd=h,r.dummyNode=!1,p[h].parentNode=r,r.firstChild=p[m];else{o=new b(this,j,k,o,m,h);o.groupValues=q.slice(1);o.index=s;a.suppliedTotals===!1?o.dummyNode=!1:(o.dummyNode=!0,o.value=k,o.series=void 0);if(d[j].length===0)d[j].push(o);else{k=d[j].length;for(q=0;q<k;q++){if(d[j][q].index>=s){d[j].splice(q,0,o);break}q===k-1&&d[j].push(o)}}p[h].parentNode=o;o.firstChild=p[m]}m=h+1}else p[h].nextSibling=p[h+1]}}}this.topLevel=a.suppliedTotals===!0?1:0;
this.tree=d},lookUpParentNode:function(a,b,c){var d,j;for(j=0;j<a.length;j++)if(a[j].value===b&&a[j].groupValues.toString()===c.toString()){d=a[j];break}return d},filterEmptyString:function(a){return a.filter(function(a){return a})}};return d}();
$MA.Graph.BubbleGraphObject=function(a){$MA.Graph.GraphObject.call(this,a);this.initialize();this.isDataScattered=!1;this.pinchScale=1;this.xOverflow=!1;this.colorDataList=new $MA.Hash;this.selectedBubbleObject=void 0;this.shapeDataList=new $MA.Hash;this.selectedValue=this.selectedBubbleObject=void 0;this.bubbleMinSize=5;this.symbolPalette=[];this.monoSymbol=!1};$MA.Graph.BubbleGraphObject.prototype=new $MA.Graph.GraphObject;$MA.Graph.BubbleGraphObject.prototype.getColorDataList=function(){return this.colorDataList};
$MA.Graph.BubbleGraphObject.prototype.getShape=function(a){var b="circle";a<this.drawObjects.length&&(b=this.drawObjects[a].shape.toLowerCase());return b};$MA.Graph.BubbleGraphObject.prototype.pointInCircle=function(a,b,c,d,e){return(a-d)*(a-d)+(b-e)*(b-e)<=(c+2)*(c+2)};$MA.Graph.BubbleGraphObject.prototype.pointInRect=function(a,b,c,d,e,f){return a-c<=e&&e<=a+c&&b-d<=f&&f<=b+d};
$MA.Graph.BubbleGraphObject.prototype.getUpdatedX=function(a){var b=this.getSeriesCount(),c=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),d=c+this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),e=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),f=e+this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA)-1,g,h,j,l,n,k;for(g=0;g<b;g++){j=this.getSeries(g);n=j.items.length;for(h=0;h<n;h++)if(l=h,k=j.getItemY(h),this.valuesAxis.getValueLoc(f,e,k),k=j.getItemX(h),k=this.categoryAxis.getValueLoc(c,d,
k),l=j.items[l].category.value,l==a)return k}return this.drawObjects[0].x};
$MA.Graph.BubbleGraphObject.prototype.getNearestCategoryLoc=function(a,b){var c=9999,d=this.getSeriesCount(),e=[],f=99999,g=0,h=0,j=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),l=j+this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),n=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),k=n+this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA)-1,m,o,p,q,r,s,u;for(m=0;m<d;m++){p=this.getSeries(m);r=p.items.length;f=99999;for(o=g=0;o<r;o++){s=o;u=p.getItemY(o);this.valuesAxis.getValueLoc(k,n,u);u=
p.getItemX(o);u=this.categoryAxis.getValueLoc(j,l,u);q=this.drawObjects[o];var v=this.pointInCircle(q.x,q.y,q.radius,a,b);if(p.items[s].otherValues)for(q=0;q<p.items[s].otherValues.length;q++);q=Math.abs(u-a);if(d==1&&v&&this.isDataScattered){f=q;g=s;h=u;if(g>=0&&g<this.drawObjects.length)this.selectedBubbleObject=this.drawObjects[g];e.push({Series:p,ItemNumber:g,LocX:h,SeriesMin:f,Category:p.items[g].category.value,SeriesNo:m})}else q<f&&(f=q,g=s,h=u)}(d>1||e.length==0)&&e.push({Series:p,ItemNumber:g,
LocX:h,SeriesMin:f,Category:p.items[g].category.value,SeriesNo:m});f<c&&(c=f)}d=[];for(q=0;q<e.length;++q)(Math.abs(c-e[q].SeriesMin)<0.01||this.isDataScattered)&&d.push({Series:e[q].Series,ItemNumber:e[q].ItemNumber,LocX:e[q].LocX,Category:p.items[e[q].ItemNumber].category.value,SeriesNo:e[q].SeriesNo});if(this.isDataScattered&&this.selectedBubbleObject==void 0)this.selectedBubbleObject=this.drawObjects[[e[0].ItemNumber]];return this.selectedValue=d};
$MA.Graph.BubbleGraphObject.prototype.constructColorDataList=function(){var a=[],b,c,d,e;for(b=this.getSeriesCount()-1;b>=0;b--){d=this.getSeries(b);e=d.items.length;for(c=0;c<e;c++){var f=d.getItemColorData(c,"color");f!=null&&f!=""&&a.push(f)}}b=a.length;for(c=d=0;c<b;c++)if(e=a[c],!this.colorDataList.containsKey(e)){f=d;if(e=="null"||e=="")f=0;this.colorDataList.set(e,f);d++}};
$MA.Graph.BubbleGraphObject.prototype.constructShapeDataList=function(){var a=[],b,c,d,e,f;for(b=this.getSeriesCount()-1;b>=0;b--){e=this.getSeries(b);f=e.items.length;for(c=0;c<f;c++)d=e.getItemColorData(c,"shape"),d!=null&&a.push(d)}b=a.length;for(c=d=0;c<b;c++)if(e=a[c],!this.shapeDataList.containsKey(e)){f=d;if(e=="null"||e==""||e==0)f=0;this.shapeDataList.set(e,f);d++}};
$MA.Graph.BubbleGraphObject.prototype.plotDefault=function(){var a,b,c,d,e,f,g,h,j=0,l=0,n,k,m;this.constructColorDataList();this.constructShapeDataList();e=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA);f=e+this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA);h=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA);g=h+this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA)-1;var o=this.getMaxBubbleSize(),p=this.getMaxBubbleHeight(),q=0;this.isDataScattered||(q=this.calcBarEntryWidth(f-e),e+=this.calcBubbleStartPos(f-
e));n=this.getSeriesCount();var r,s=0,u,v;for(u=0;u<n;u++){a=this.getSeries(u);d=a.items.length;j=e;for(v=0;v<d;v++){k=v;c=a.getItemY(v);l=this.valuesAxis.getValueLoc(g,h,c);b=a.getItemX(v);var x;this.isDataScattered&&(j=this.categoryAxis.getValueLoc(e,f,b));if(a.isEnabled()==!1||this.valuesAxis.outOfBound(c))b=0;else{var w;if(a.items[k].otherValues!=void 0)for(b=0;b<a.items[k].otherValues.length;b++)c=a.items[k].otherValues[b],c.width?x=w=c.width:c.hasOwnProperty("height")&&(x=c.height==null&&typeof c.height==
"object"?void 0:c.height);else x=w=a.items[k].yValue;b=Math.abs(Math.round(w/o*this.paintSize/10)*this.pinchScale);r=this._parent.getDrawArea();c=r.width*0.7/2;r=r.height*0.7/2;if((b<this.bubbleMinSize||w==void 0)&&a.items[k].yValue!=null)b=this.bubbleMinSize,b*=this.pinchScale;if(p>0)m=Math.abs(Math.round(x/p*this.paintSize/10)*this.pinchScale);else if(p==0||p==void 0)m=b;if(m==void 0&&p==void 0||(m<4||w==void 0)&&a.items[k].yValue!=null)m=this.bubbleMinSize,m*=this.pinchScale;c>r?b>r&&(b=r):r>c&&
b>c&&(b=c)}c=a.drawContext;if(this.borderColor!=void 0)c.strokeBrush=this.borderColor;var y;this.isDataScattered?(y=a.items[k].originalIndex,y==void 0&&(y=v),r=y):(r=this.getRealIndex(u,v,n),y=v);this.colorDataList.length>0&&(c=this.colorDataList.get(a.getItemColorData(y,"color")),c==void 0&&(c=0),c=this.getDrawContext(c));if(this.isCustomDataPointsColor&&r>=this.dataPointsColorMinIndex&&r<=this.dataPointsColorMaxIndex&&this.dataPointsColorHash.containsKey("CustomDataPointsColor"+r)&&(c=this.getCustomContext(this.dataPointsColorHash.get("CustomDataPointsColor"+
r).toString()),c===null))c=a.drawContext;r=this.shapeDataList.get(a.getItemColorData(y,"shape"));r=this.monoSymbol&&this.symbolPalette.length>0?this.symbolPalette[0]:!this.monoSymbol&&this.symbolPalette.length>0?this.symbolPalette[r%this.symbolPalette.length].toLowerCase():"circle";if(r==void 0||r==null)r="circle";r=="star"&&b<8&&(b=m=8);this.isDataScattered&&(k=a.items[k],this.categoryAxis.customMinValue==!0&&k.category.value<this.categoryAxis.minValue&&(b=void 0),this.categoryAxis.customMaxValue==
!0&&k.category.value>this.categoryAxis.maxValue&&(b=void 0),this.valuesAxis.customMinValue==!0&&k.yValue<this.valuesAxis.minValue&&(b=void 0),this.valuesAxis.customMaxValue==!0&&k.yValue>this.valuesAxis.maxValue&&(b=void 0));this.drawObjects.push(new $MA.Graph.Bubble2D(this,c,a.items[v],j,l,b,r,m));this.isDataScattered||(j+=q)}s++}};
$MA.Graph.BubbleGraphObject.prototype.getRealIndex=function(a,b,c){var d=this.firstItem,e,f,g;for(e=0;e<=b;e++)for(f=0;f<c;f++)if(g=this.getSeries(f),g=g.items[e].yValue,g!=null&&d++,e==b&&f==a){if(g==void 0||g==null||isNaN(g))d=-1;break}return d};
$MA.Graph.BubbleGraphObject.prototype.scale=function(){var a,b;a=this.getMinItemValue();b=this.getMaxItemValue();this.valuesAxis.setScale(a,b);this.isDataScattered?(this.categoryAxis.dataType=$MA.Graph.DataType.DOUBLE,a=this.getMinXValue(),b=this.getMaxXValue(),this.categoryAxis.setScale(a,b)):this.categoryAxis.setScale(1,this.categories.length)};
$MA.Graph.BubbleGraphObject.prototype.arrange=function(){$MA.Graph.GraphObject.prototype.arrange.call(this);if(!this.isDataScattered&&(this.xOverflow=!1,this.paintSize/10>this.calcBubbleStartPos(this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA))))this.xOverflow=!0};$MA.Graph.BubbleGraphObject.prototype.setPinchScale=function(a){this.pinchScale=1/a};
$MA.Graph.BubbleGraphObject.prototype.getTrueMaxXValue=function(){var a,b,c,d,e=null,f=this.categoryAxis.maxValue-this.categoryAxis.minValue,g=this.getMaxBubbleSize();c=this.getSeriesCount();var h,j;for(h=0;h<c;h++){a=this.getSeries(h);b=a.items.length;for(j=0;j<b;j++)d=a.items[j].getBubbleValue(),d/=g,d=a.items[j].category.value+f*0.1*d,e==null?e=d:d>e&&(e=d)}return e};
$MA.Graph.BubbleGraphObject.prototype.getTrueMinXValue=function(){var a,b,c,d,e=null,f=this.categoryAxis.maxValue-this.categoryAxis.minValue,g=this.getMaxBubbleSize();c=this.getSeriesCount();var h,j;for(h=0;h<c;h++){a=this.getSeries(h);b=a.items.length;for(j=0;j<b;j++)d=a.items[j].getBubbleValue(),d/=g,d=a.items[j].category.value-f*0.1*d,e==null?e=d:d<e&&(e=d)}return e};
$MA.Graph.BubbleGraphObject.prototype.getTrueMaxYValue=function(){var a,b,c,d,e=null,f=this.valuesAxis.maxValue-this.valuesAxis.minValue,g=this.getMaxBubbleSize();c=this.getSeriesCount();var h,j;for(h=0;h<c;h++){a=this.getSeries(h);b=a.items.length;for(j=0;j<b;j++)d=a.items[j].getBubbleValue(),d/=g,d=a.items[j].yValue+f*0.1*d,e==null?e=d:d>e&&(e=d)}return e};
$MA.Graph.BubbleGraphObject.prototype.getTrueMinYValue=function(){var a,b,c,d,e=null,f=this.valuesAxis.maxValue-this.valuesAxis.minValue,g=this.getMaxBubbleSize();c=this.getSeriesCount();var h,j;for(h=0;h<c;h++){a=this.getSeries(h);b=a.items.length;for(j=0;j<b;j++)d=a.items[j].getBubbleValue(),d/=g,d=a.items[j].yValue-f*0.1*d,e==null?e=d:d<e&&(e=d)}return e};
$MA.Graph.BubbleGraphObject.prototype.getMinXValue=function(){var a,b=null,c,d=this.getSeriesCount();for(c=0;c<d;c++)a=this.getSeries(c),a=a.getMinXValue(),a!=null&&(b==null?b=a:a<b&&(b=a));return b};$MA.Graph.BubbleGraphObject.prototype.getMaxXValue=function(){var a,b=null,c,d=this.getSeriesCount();for(c=0;c<d;c++)a=this.getSeries(c),a=a.getMaxXValue(),a!=null&&(b==null?b=a:a>b&&(b=a));return b};
$MA.Graph.BubbleGraphObject.prototype.calcBarEntryWidth=function(a){if(this.isDataScattered)a=$MA.Graph.GraphObject.prototype.calcBarEntryWidth.call(this,a);else{if(!this.xOverflow)return $MA.Graph.GraphObject.prototype.calcBarEntryWidth.call(this,a);var b=this.paintSize/10,c=this.getMaxItemCount(),a=c>1?(a-2*b)/(c-1):$MA.Graph.GraphObject.prototype.calcBarEntryWidth.call(this,a)}return a};
$MA.Graph.BubbleGraphObject.prototype.calcBubbleStartPos=function(a){this.xOverflow||(this.calcBarEntryWidth(a),this.calcBarGap(a));if(this.getMaxItemCount()>1){if(a=this.paintSize/10,this.categoryAxis.catStartPos&&a<this.categoryAxis.catStartPos)a=this.categoryAxis.catStartPos}else a=(this.calcBarEntryWidth(a)+this.calcBarGap(a))/2;return a};$MA.Graph.BubbleGraphObject.prototype.resetDrawObj=function(a){a.incr=a.radius/$MA.Graph.GraphObject.ANIMATIONCOUNT;a.radius=0};
$MA.Graph.BubbleGraphObject.prototype.animateDrawObj=function(a){a.radius+=a.incr;a.plotPrimitives()};$MA.Graph.BubbleGraphObject.prototype.getMaxBubbleHeight=function(){var a,b,c=this.getSeriesCount(),d;for(d=0;d<c;d++)a=this.getSeries(d),a.isEnabled()!=!1&&(a=a.getMaxBubbleHeight(),b==void 0?b=a:a>b&&(b=a));return isNaN(b)?void 0:b};
$MA.Graph.BubbleGraphObject.prototype.getMaxBubbleSize=function(){var a,b,c=this.getSeriesCount(),d;for(d=0;d<c;d++)a=this.getSeries(d),a.isEnabled()!=!1&&(a=a.getMaxBubbleSize(),b==void 0?b=a:a>b&&(b=a));return b};
$MA.Graph.BubbleGraphObject.prototype.getCustomisedFillBrush=function(a,b){var c;if(this.isDataScattered)c=this.dataPointsColorHash.containsKey("CustomDataPointsColor"+b)?new $MA.Brush(this.dataPointsColorHash.get("CustomDataPointsColor"+b).toString()):void 0;else{var d=b<0?0:b,e=this.getSeriesCount(),f=-1,g;if(this.isCustomDataPointsColor==!0){f+=this.firstItem;var h;for(c=0;c<=d;c++)for(h=0;h<e;h++)if(g=this.getSeries(h),g=g.items[c].yValue,g!=null&&f++,c==d&&h==a){if(g==void 0||g==null||isNaN(g))f=
-1;break}c=this.dataPointsColorHash.containsKey("CustomDataPointsColor"+f)?new $MA.Brush(this.dataPointsColorHash.get("CustomDataPointsColor"+f).toString()):void 0}}return c};$MA.Graph.ColumnGraphObject=function(a){$MA.Graph.GraphObject.call(this,a);this.initialize();this.modernLook=!0;this.startLegend=0;this.accumulatedValues=[];this.level=0;this.itemIncr=1;this.showWFConnectingLine=!0;this.lineDef=new $MA.Graph.LineDefinition};$MA.Graph.ColumnGraphObject.prototype=new $MA.Graph.GraphObject;
$MA.Graph.ColumnGraphObject.prototype.getCategoryNodes=function(a){var b=this.getSeriesCount(),c=[],d,e,f,g,h,j,l,n;a*=b;a>=this.drawObjects.length&&(a=this.drawObjects.length-1);if(0<=a&&this.drawObjects.length>a)for(f=0;f<b;f++){e=this.getSeries(f).isEnabled();d=[];g=this.drawObjects[a+f];h={value:g.item.yValue,x:g.x,y:g.y,width:g.width,height:g.height};d.push(h);j=g.item.otherValues;if(e&&j){f=0;for(e=j.length;f<e;f++)h=j[f],null!=h&&void 0!=h?(l=this.getValueLoc(h),n=this.dataArea.origin-l):(l=
h,n=void 0),h={value:h,x:g.x,y:l,width:g.width,height:n},d.push(h)}c.push(d)}return c};$MA.Graph.ColumnGraphObject.prototype.getMaxItemCount=function(){return this.isHierarchy?this.getNodeCount():$MA.Graph.GraphObject.prototype.getMaxItemCount.apply(this)};
$MA.Graph.ColumnGraphObject.prototype.plotDefault=function(){var a,b,c=this.getMaxItemCount();if(0<c){var d=this.getSeriesCount();if(0<d){var e=Math.round(this.calcBarWidth(this.dataArea.width)),f=Math.round(e*0.03*Math.sqrt(d)),g;g=d===1?e:Math.round(e*(1-(this.is3DObjects?0:this.overlap))+f/(d-1));var f=d==1?e:e-f,h=this.calcBarEntryWidth(this.dataArea.width),j=this.dataArea.left+this.calcBarGap(this.dataArea.width);this.baseStartX=j+e*(this.totalBarEntries?this.totalBarEntries-1:d)/2;this.baseIncrX=
h;if(this.isHierarchy)if(this.level=0,this.isWaterfall){for(a=0;a<d;a++)this.accumulatedValues[a]=this.getSeries(a).sumBeforeRange;this.parentAsTotal&&this.showTotal?this.plotHierarchyWFChildrenFirst(f,g,e,h,[j]):this.plotHierarchyWF(f,g,e,h,[j])}else this.plotHierarchyNode(f,g,e,h,[j]);else{var l=-1;l+=this.firstItem;var n;if(this.isWaterfall){n=[];for(a=0;a<d;a++)n.push(this.getSeries(a).sumBeforeRange)}var k,m,o;a=0;var p,q,r;if("graph"===this.drawingContentType){k=this.categoryAxis.primaryLine;
if(!k||!k.width)k=this.valuesAxis.primaryLine;k&&k.width&&(a=k.width/2)}for(k=0;k<c;k++){var s;s=j+h*k;r=!0;for(m=0;m<d;m++){var u=null,v=null;p=this.getSeries(m);var x=p.isEnabled(),w,y=p.drawContext;w=p.items[k];k>=p.items.length?(this.isWaterfall&&this.showTotal&&k==p.items.length?w={}:(w={y:0},x=!1),o=this.dataArea.origin):o=this.getValueLoc(w.yValue);if(this.isWaterfall){if(this.showTotal&&k==c-1)w.yValue=n[m],b=w.yValue,this.valuesAxis.percentage&&(b*=100),b=$MA.convertor.format(b,this.totalFormat),
w.category={value:$MA.getLocalisation(null,"Total","Total"),displayValue:$MA.getLocalisation(null,"Total","Total")},this.valuesAxis.percentage&&(b+="%"),w.valueDisplayText=b,o=this.getValueLoc(w.yValue),b=w.yValue>=0?o:this.dataArea.origin,o=Math.abs(this.dataArea.origin-o);else{var A=w.yValue;if(typeof A!="number"||typeof A=="number"&&isNaN(A))A=0;b=this.getValueLoc(A>0?n[m]+A:n[m]);o=Math.abs(this.getValueLoc(n[m]+A)-this.getValueLoc(n[m]));n[m]+=A}x?w.yValue!=0&&w.yValue!=null&&w.yValue!=void 0&&
o<=2&&(u=b,v=o,w.yValue>0&&(b-=2-o),o=2):o=0}else this.dataArea.origin>o?x==!1?(b=this.dataArea.bottom,o=0):(b=o,o=this.dataArea.origin-o):(b=this.dataArea.origin,o=x==!1?0:o-b),x&&w.yValue>=this.valuesAxis.minValue&&w.yValue!=0&&w.yValue!=null&&w.yValue!=void 0&&o<=2&&(o=2,b=w.yValue>0?this.dataArea.origin-2:this.dataArea.origin+2);"graph"===this.drawingContentType&&(x=this.dataArea.bottom-a,b>x?(b-=a,u=u===null?null:u-a):b+o>x&&(o-=a));this.isWaterfall&&n[m]>0&&b+o>=this.dataArea.bottom&&(b-=2);
w.yValue!=null&&(l=l===-1?0:l+this.itemIncr);if((!this.showTotal||this.showTotal&&k<c-1)&&this.isCustomDataPointsColor&&l>=this.dataPointsColorMinIndex&&l<=this.dataPointsColorMaxIndex&&this.dataPointsColorHash.containsKey("CustomDataPointsColor"+l))if(y=this.getCustomContext(this.dataPointsColorHash.get("CustomDataPointsColor"+l).toString()),y===null)y=p.drawContext;this.drawObjects.push(new $MA.Graph.Bar2D(this,y,w,s,b,f,o,this.is3DObjects,e,w.yValue<0));if(this.isWaterfall&&this.showWFConnectingLine&&
!(this.showTotal&&k==c-1)&&w.yValue!==0&&w.yValue!==void 0&&d===1){p={x:s+e,y:w.yValue<0?b+o:b};if(r){if(q!==void 0)w.yValue>0&&(b=p.y+o),y.strokeBrush=new $MA.Brush($MA.Brushes.gray.color),this.WFConnLineObjects.push(new $MA.Graph.DashedLine2D(this,y,void 0,q.x,q.y,p.x-e,b,this.lineDef));p.y=u!==null?w.yValue<0?u+v:u:p.y;r=!1}q=p}s+=g}}}}}};
$MA.Graph.ColumnGraphObject.prototype.plotStacked=function(){var a=this.getMaxItemCount();if(a!=0){var b=this.getSeriesCount(),c=this.calcBarWidth(this.dataArea.width),d=this.dataArea.left+this.calcBarGap(this.dataArea.width),e=this.calcBarEntryWidth(this.dataArea.width);this.baseStartX=d+c/2;this.baseIncrX=e;var f,g,h,j,l,n,k;f=d;var m;this.isHundredPercent&&(m=this.getItemSumPerCategory());if(this.isHierarchy)this.level=0,this.plotStackedHierarchyNode(c,e,[d]);else{var o=-1;o+=this.firstItem;var p,
q;for(p=0;p<a;p++){h=d=0;n=l=this.dataArea.origin;for(q=0;q<b;q++){k=this.getSeries(q);g=k.isEnabled();var r=k.drawContext,s=k.items[p];this.isHundredPercent?(j=k.getItemYDouble(p),j/=m[p],g==!1&&(j=0)):(j=k.getItemYDouble(p),k.isEnabled()==!1&&(j=0));s.yValue!=null&&(o=o===-1?0:o+this.itemIncr);if(this.isCustomDataPointsColor&&o>=this.dataPointsColorMinIndex&&o<=this.dataPointsColorMaxIndex&&this.dataPointsColorHash.containsKey("CustomDataPointsColor"+o)&&(r=this.getCustomContext(this.dataPointsColorHash.get("CustomDataPointsColor"+
o).toString()),r===null))r=k.drawContext;j<0?(g=this.getValueLoc(j+h),this.drawObjects.push(new $MA.Graph.Bar2D(this,r,k.items[p],f,n,c,g-n,this.is3DObjects,c)),h+=j,n=g):(g=this.getValueLoc(j+d),this.drawObjects.push(new $MA.Graph.Bar2D(this,r,k.items[p],f,g,c,l-g,this.is3DObjects,c)),d+=j,l=g)}f+=e}}}};
$MA.Graph.ColumnGraphObject.prototype.plotHierarchyNode=function(a,b,c,d,e,f){var g=!1;void 0===f&&(f=this.getRootNode(),g=!0);var h=this.getSeriesCount();if(null!==f){var j=f.getSeries(),l=this.suppliedTotals&&j===void 0,n=f.getChildren(),k=n.length,m,o,p,q,r,s,u,v;if(this.childrenFirst)for(m=0;m<k;m++)this.plotHierarchyNode(a,b,c,d,e,n[m]),l||(e[0]+=d);if(!l){var x=e[0];this.suppliedTotals&&c==0&&($MA.log.warning("Insufficient width to plot columns for all data."),c=a=b=h=1);for(m=0;m<h;m++){o=
this.getSeries(m);p=o.isEnabled();q=j[m]!==void 0?j[m]:void 0;s=f.getLevel();if(s>this.level)this.level=s;this.isWaterfall&&g&&(q+=this.getSeries(m).sumBeforeRange);s=this.getValueLoc(q);r=g?$MA.getLocalisation(null,"Total","Total"):f.getValue();u=f.getGroupValues();v=u.slice(0);v=v.length===0?r:this.categoriesDisplayOrder==="rootToLeaf"?v.reverse().join(", ")+", "+r:r+", "+v.join(", ");r={yValue:q,value:r,displayValue:r,groupValues:u,valueDisplayText:f.getValueDisplayText(m),category:{value:v},parentSeries:{name:o.name}};
if(!this.isWaterfall||g)this.dataArea.origin>s?p?(u=s,p=this.dataArea.origin-s):(u=this.dataArea.bottom,p=0):(u=this.dataArea.origin,p=p?s-u:0);else{if(typeof q!="number"||typeof q=="number"&&isNaN(q))$MA.log.warning("Value "+String(q)+" is not a valid number."),q=0;u=this.getValueLoc(q>0?this.accumulatedValues[m]+q:this.accumulatedValues[m]);p=p?Math.abs(this.getValueLoc(this.accumulatedValues[m]+q)-this.getValueLoc(this.accumulatedValues[m])):0;0===k?this.accumulatedValues[m]+=q:this.childrenFirst&&
(p=this.accumulatedValues[m]-q,u=this.getValueLoc(q>0?p+q:p),p=Math.abs(this.getValueLoc(p+q)-this.getValueLoc(p)))}this.suppliedTotals&&p>0&&p<1&&(p=1);this.drawObjects.push(new $MA.Graph.Bar2D(this,o.drawContext,r,x,u,a,p,!1,c,q<0));x+=b}}if(!this.childrenFirst){l||(e[0]+=d);for(m=0;m<k;m++)this.plotHierarchyNode(a,b,c,d,e,n[m])}}};
$MA.Graph.ColumnGraphObject.prototype.plotStackedHierarchyNode=function(a,b,c,d){if(this.hierarchyObjects==void 0)this.hierarchyObjects=[];var e=!1;void 0===d&&(d=this.getRootNode(),e=!0);var f=this.getSeriesCount();if(null!==d){var g=0,h=d.getSeries(),j=this.suppliedTotals&&h===void 0,l=d.getChildren(),n=l.length,k,m,o,p,q,r,s;if(this.childrenFirst)for(k=0;k<n;k++)this.plotStackedHierarchyNode(a,b,c,l[k]),j||(c[0]+=b);if(!j){var u=c[0];this.isHundredPercent&&(g=this.getTotalSumPerCategory(h));var v=
0,x=0,w=this.dataArea.origin,y=this.dataArea.origin,A;for(k=0;k<f;k++){m=this.getSeries(k);A=m.drawContext;o=m.isEnabled();p=h[k]!==void 0?h[k]:void 0;q=d.getLevel();if(q>this.level)this.level=q;e&&(p+=this.getSeries(k).sumBeforeRange);this.isHundredPercent&&(p/=g,o==!1&&(p=0));q=e?$MA.getLocalisation(null,"Total","Total"):d.getValue();r=d.getGroupValues();s=r.slice(0);s=s.length===0?q:this.categoriesDisplayOrder==="rootToLeaf"?s.reverse().join(", ")+", "+q:q+", "+s.join(", ");m={yValue:p,value:q,
displayValue:q,groupValues:r,valueDisplayText:d.getValueDisplayText(k),category:{value:s},parentSeries:{name:m.name}};o==!1&&(p=0);p<0?(o=this.getValueLoc(p+x),this.drawObjects.push(new $MA.Graph.Bar2D(this,A,m,u,y,a,o-y,this.is3DObjects,a)),x+=p,y=o):(o=this.getValueLoc(p+v),this.drawObjects.push(new $MA.Graph.Bar2D(this,A,m,u,o,a,w-o,this.is3DObjects,a)),v+=p,w=o)}}if(!this.childrenFirst){j||(c[0]+=b);for(k=0;k<n;k++)this.plotStackedHierarchyNode(a,b,c,l[k])}}};
$MA.Graph.ColumnGraphObject.prototype.getTotalSumPerCategory=function(a){var b,c=0,d;for(b=0;b<a.length;b++)d=this.getSeries(b),d.isEnabled()==!0&&(c+=a[b]);return c};$MA.Graph.ColumnGraphObject.prototype.resetDrawObj=function(a){a.incr=a.height/$MA.Graph.GraphObject.ANIMATIONCOUNT;a.y+=a.height;a.height=0};$MA.Graph.ColumnGraphObject.prototype.animateDrawObj=function(a){a.y-=a.incr;a.height+=a.incr;a.plotPrimitives()};
$MA.Graph.ColumnGraphObject.prototype.getCustomisedFillBrush=function(a,b){var c,d=b<0?0:b,e=this.getSeriesCount(),f=-1,g,h=this.showTotal||this.isWaterfall&&this.isHierarchy;if(this.isCustomDataPointsColor==!0){f+=this.firstItem;var j;for(c=0;c<=d;c++)for(j=0;j<e;j++)if(g=this.getSeries(j),h&&d===g.items.length&&c==d){if(f++,j==a)break}else if(g=g.items[c].yValue,g!=null&&f++,c==d&&j==a){if(g==void 0||g==null||isNaN(g))f=-1;break}c=this.dataPointsColorHash.containsKey("CustomDataPointsColor"+f)?
new $MA.Brush(this.dataPointsColorHash.get("CustomDataPointsColor"+f).toString()):void 0}return c};
$MA.Graph.ColumnGraphObject.prototype.plotHierarchyWF=function(){var a=this.getSeriesCount(),b=this.calcBarWidth(this.dataArea.width),c=b*0.03*Math.sqrt(a),d;d=a===1?b:b*(1-(this.is3DObjects?0:this.overlap))+c/(a-1);var e=this.getSeriesCount(),f,g=this.hierarchy.getTopLevel(),h=this.hierarchy.getLevel(),j=this.dataArea.left+this.calcBarGap(this.dataArea.width),c=a==1?b:b-c,l=!0,n,k,m,o,p,q,r,s=this.getRootNode();this.hierarchy.getMaxLevel();for(k=0;k<a;k++)this.accumulatedValues[k]=this.getSeries(k).sumBeforeRange;
var u,v,x,a=j,w=0;do{if(s!==void 0&&(k=s.isDummyNode(),!k)){n=s.getSeries();b>0&&b<=1&&($MA.log.warning("Insufficient width to plot columns for all data."),b=c=d=e=1);x=!0;for(k=0;k<e;k++){j=this.getSeries(k);m=j.isEnabled();o=n[k]!==void 0?n[k]:void 0;f=s.getLevel();l=f===g?!0:!1;q=this.getValueLoc(o);p=s.getValue();p===void 0&&l&&(p="Total");r=s.getGroupValues();u=r.slice(0);u=u.length===0?p:this.categoriesDisplayOrder==="rootToLeaf"?u.reverse().join(", ")+", "+p:p+", "+u.join(", ");p={yValue:o,
value:p,displayValue:p,groupValues:r,valueDisplayText:s.getValueDisplayText(k),category:{value:u},parentSeries:{name:j.name}};w++;if(typeof o!="number"||typeof o=="number"&&isNaN(o))$MA.log.warning("Value "+String(o)+" is not a valid number."),o=0;l?(this.accumulatedValues[k]===0?this.dataArea.origin>q?m?(l=q,m=this.dataArea.origin-q):(l=this.dataArea.bottom,m=0):(l=this.dataArea.origin,m=m?q-l:0):(l=this.getValueLoc(o>0?this.accumulatedValues[k]+o:this.accumulatedValues[k]),m=m?Math.abs(this.getValueLoc(this.accumulatedValues[k]+
o)-this.getValueLoc(this.accumulatedValues[k])):0),this.accumulatedValues[k]+=o):(l=this.getValueLoc(o>0?this.accumulatedValues[k]+o:this.accumulatedValues[k]),m=m?Math.abs(this.getValueLoc(this.accumulatedValues[k]+o)-this.getValueLoc(this.accumulatedValues[k])):0,f<=h&&(this.accumulatedValues[k]+=o));m>0&&m<1&&(m=1);if(f<=h){this.drawObjects.push(new $MA.Graph.Bar2D(this,j.drawContext,p,a,l,c,m,!1,b,o<0));if(this.isWaterfall&&this.showWFConnectingLine&&o!==0&&o!==void 0&&e===1){o={x:a+d,y:o<0?l+
m:l};if(x){if(v!==void 0)p.yValue>0&&(l=o.y+m),j.drawContext.strokeBrush=new $MA.Brush($MA.Brushes.gray.color),this.WFConnLineObjects.push(new $MA.Graph.DashedLine2D(this,j.drawContext,void 0,v.x,v.y,o.x-d,l,this.lineDef));x=!1}v=o}a+=b}}if(f<=h&&(a+=b,f>this.level))this.level=f}if(s.getFirstChild())s=s.getFirstChild();else if(s.getNextSibling())s=s.getNextSibling();else{do s=s.getParentNode();while(s&&s.getNextSibling()===void 0);s=s&&s.getNextSibling()?s.getNextSibling():void 0}}while(s!==void 0);
if(this.showTotal&&!this.parentAsTotal){e=n.length;b>0&&b<=1&&($MA.log.warning("Insufficient width to plot columns for all data."),b=c=e=1);for(k=0;k<e;k++)j=this.getSeries(k),m=j.isEnabled(),o=this.accumulatedValues[k],q=Math.abs(this.getValueLoc(o)),p=$MA.getLocalisation(null,"Total","Total"),r=[],d=s&&s.getValueDisplayText(k)!==void 0?s.getValueDisplayText(k):o,d=$MA.convertor.format(d,this.totalFormat),p={yValue:o,value:p,displayValue:p,groupValues:r,valueDisplayText:d,category:{value:p},parentSeries:{name:j.name}},
this.dataArea.origin>q?m?(l=q,m=this.dataArea.origin-q):(l=this.dataArea.bottom,m=0):(l=this.dataArea.origin,m=m?q-l:0),m>0&&m<1&&(m=1),this.drawObjects.push(new $MA.Graph.Bar2D(this,j.drawContext,p,a,l,c,m,!1,b,o<0)),a+=b}};
$MA.Graph.ColumnGraphObject.prototype.plotHierarchyWFChildrenFirst=function(a,b,c,d,e,f){f===void 0&&(f=this.getStartNode());var g=!1,h,j,l,n,k,m,o,p,q,e=e[0];l=this.getSeriesCount();n=this.hierarchy.getMaxLevel();var r,d=this.hierarchy.getTopLevel(),s=this.hierarchy.getLevel(),u;if(this.showTotal)for(j=0;j<l;j++)this.accumulatedValues[j]=this.getSeries(j).sumBeforeRange;else for(h=0;h<=n;h++){this.accumulatedValues[h]=[];for(j=0;j<l;j++)this.accumulatedValues[h][j]=this.getSeries(j).sumBeforeRange}for(;f.getFirstChild()!=
void 0;)f=f.getFirstChild();do{j=f.isDummyNode();if(!j){h=f.getSeries();l=h.length;c>0&&c<=1&&($MA.log.warning("Insufficient width to plot columns for all data."),c=a=b=l=1);for(j=0;j<l;j++){n=this.getSeries(j);k=n.isEnabled();m=h[j];r=f.getLevel();g=r===d?!0:!1;if(r>this.level)this.level=r;g&&(m+=this.getSeries(j).sumBeforeRange);p=this.getValueLoc(m);o=f.getValue();o===void 0&&g&&(o=$MA.getLocalisation(null,"Total","Total"));q=f.getGroupValues();u=q.slice(0);u=u.length===0?o:this.categoriesDisplayOrder===
"rootToLeaf"?u.reverse().join(", ")+", "+o:o+", "+u.join(", ");o={yValue:m,value:o,displayValue:o,groupValues:q,category:{value:u},parentSeries:{name:n.name}};if(g)this.dataArea.origin>p?k?(g=p,k=this.dataArea.origin-p):(g=this.dataArea.bottom,k=0):(g=this.dataArea.origin,k=k?p-g:0);else{if(typeof m!="number"||typeof m=="number"&&isNaN(m))$MA.log.warning("Value "+String(m)+" is not a valid number."),m=0;this.showTotal?(g=this.getValueLoc(m>0?this.accumulatedValues[j]+m:this.accumulatedValues[j]),
k=k?Math.abs(this.getValueLoc(this.accumulatedValues[j]+m)-this.getValueLoc(this.accumulatedValues[j])):0,r<=s&&(this.accumulatedValues[j]+=m)):(g=this.getValueLoc(m>0?this.accumulatedValues[r][j]+m:this.accumulatedValues[r][j]),k=k?Math.abs(this.getValueLoc(this.accumulatedValues[r][j]+m)-this.getValueLoc(this.accumulatedValues[r][j])):0,r<=s&&(this.accumulatedValues[r][j]+=m))}k>0&&k<1&&(k=1);r<=s&&(this.drawObjects.push(new $MA.Graph.Bar2D(this,n.drawContext,o,e,g,a,k,!1,c,m<0)),e+=b)}r<=s&&(e+=
a)}if(f.getNextSibling())for(f=f.getNextSibling();f.getFirstChild()!=void 0;)f=f.getFirstChild();else f=f.getParentNode()}while(f!==void 0)};$MA.Graph.LineGraphObject=function(a){$MA.Graph.GraphObject.call(this,a);this.initialize();this.lineDef=new $MA.Graph.LineDefinition;this.graphLineWidth=1;this.modernLook=!0;this.level=this.startLegend=0};$MA.Graph.LineGraphObject.prototype=new $MA.Graph.GraphObject;$MA.Graph.LineGraphObject.SHOWDOTSWIDTH=60;
$MA.Graph.LineGraphObject.prototype.drawGridsBack=function(){$MA.Graph.GraphObject.prototype.drawGridsBack.call(this);if(void 0!=this.upperThreshold||void 0!=this.lowerThreshold||void 0!=this.reference){var a=this.dataArea.left,b=this.dataArea.width,c=this.dataArea.right,d=this.dataArea.top,e=this.dataArea.bottom,f=$MA.Graph.SeriesBrushes.fillPalette.length-1,f=new $MA.Graph.DrawContext(this.getSeriesFillBrush(f),this.getSeriesStrokeBrush(f),this.getSeriesInsetShadowBrush(f),0.2),g,h,j,l=this.xAxis.labelDisplayDef;
void 0!=this.upperThreshold&&(g=this.getValueLoc(this.upperThreshold),this.annotationObjects.push(new $MA.Graph.Bar2D(this,f,null,a,d,b,g-d)),h=new $MA.Graph.Data(l,this.upperThreshold),j=h.getTextSize(this.context),g=d+(g-d)/2-j.height,g<d&&(g=d),this.annotationObjects.push(new $MA.Graph.Text2D(this,h,a+50,d+(g-d)/2,j.width,j.height)));void 0!=this.lowerThreshold&&(g=this.getValueLoc(this.lowerThreshold),this.annotationObjects.push(new $MA.Graph.Bar2D(this,f,null,a,g,b,e-g)),h=new $MA.Graph.Data(l,
this.lowerThreshold),j=h.getTextSize(this.context),g=e-(e-g)/2,g+j.height>e&&(g=e-j.height),this.annotationObjects.push(new $MA.Graph.Text2D(this,h,a+50,g,j.width,j.height)));void 0!=this.reference&&(g=this.getValueLoc(this.reference),this.annotationObjects.push(new $MA.Graph.Line2D(this,f,null,a,g,c,g,this.lineDef)))}};
$MA.Graph.LineGraphObject.prototype.calcDisplayEveryNLabels=function(){var a=this.calcBarEntryWidth(this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA));if(this.categoryAxis.labelsEveryN!=-1&&this.xAxisSize!=void 0&&this.categories.length>0&&this.categories[0].groupValues==void 0){var b=this.xAxisSize.width;this.categoryAxis.labelsEveryN=b<=a?0:Math.ceil(1.5*b/a)}this.showDots=a>=$MA.Graph.LineGraphObject.SHOWDOTSWIDTH};
$MA.Graph.LineGraphObject.prototype.getNoOfVisibleCategories=function(){var a=this.getSeriesCount(),b=this.drawObjects,c;0<a?(c=b.length,1<c&&b[1]instanceof $MA.Graph.Symbol2D&&(c/=2),c/=a):c=0;return c};
$MA.Graph.LineGraphObject.prototype.getCategoryNodes=function(a){var b=this.getSeriesCount(),c=this.getMaxItemCount(),d=[],e,f,g,h,j,l,n,k,m=0;if(0<=a&&a<c)for(c=0;c<b;c++){f=this.getSeries(c).isEnabled();e=[];h=this.drawObjects[m+1];n=(k=h instanceof $MA.Graph.Symbol2D?!0:!1)?a*2:a;h=this.drawObjects[m+n];void 0==h?(j={},n=h=void 0):(n=f?h.item.xCoord:void 0,j=f?h.item.yCoord:void 0,j={value:h.item.yValue,x:n,y:j},h=h.item.otherValues);e.push(j);if(f&&h){f=0;for(g=h.length;f<g;f++)l=h[f],j=null!=
l&&void 0!=l?this.getValueLoc(l):l,j={value:l,x:n,y:j},e.push(j)}d.push(e);e=this.getSeries(c).items.length;k&&(e*=2);m+=e}return d};
$MA.Graph.LineGraphObject.prototype.plotDefault=function(){var a=this.getMaxItemCount();if(a!=0){var b=this.getSeriesCount(),c;if(void 0!==this.baseStartX&&void 0!==this.baseIncrX)c=this.baseStartX,a=this.baseIncrX;else if(c=this.dataArea.left,a==1)a=this.dataArea.width/2,c+=a;else{var d=this.calcLineStartPos(this.dataArea.width);c+=d;a=(this.dataArea.width-2*d)/(a-1)}var d=(this.width+this.height)/200,e,f,g,h,j,l,n,k,m,o,p,q,r,s,u=-1,v,x;this.showDots=this.calcBarEntryWidth(this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA))>=
$MA.Graph.LineGraphObject.SHOWDOTSWIDTH;"graph"===this.drawingContentType?(x=new $MA.Graph.LineDefinition,x.width=this.graphLineWidth):x=this.lineDef;if(this.isHierarchy)this.level=0,this.plotHierarchyNode(x,a,[c]),this.plotDrawObjects();else{var w,y,A;for(w=0;w<b;w++){e=this.getSeries(w);f=e.isEnabled();r=o=new $MA.Graph.DrawContext(e.drawContext.fillBrush,e.drawContext.fillBrush,e.drawContext.insetShadowBrush);n=e.items.length;v=p=!1;var B;for(B=0;B<n;B++){this.trendCategory&&e.getItemX(B)>=this.trendCategory&&
(p=!0);y=g=c+a*(B/this.itemIncr);k=e.items[B];A=h=void 0!==k.yValue&&null!==k.yValue?this.getValueLoc(e.getItemYDouble(B)):void 0;h=this.getLineStartAndEndPosition(m,k,g,h,j,l);j=h.start.x;l=h.start.y;g=h.end.x;h=h.end.y;k.xCoord=g;k.yCoord=h;0===B&&(j=g,l=h);B==n-1&&(g-=1);s=void 0;u=this.getRealIndex(w,B,b);this.isCustomDataPointsColor&&u>=this.dataPointsColorMinIndex&&u<=this.dataPointsColorMaxIndex&&this.dataPointsColorHash.containsKey("CustomDataPointsColor"+u)&&(s=this.dataPointsColorHash.get("CustomDataPointsColor"+
u).toString(),s=new $MA.Graph.DrawContext(new $MA.Brush(s),new $MA.Brush(s),o.getInsertShadowBrush()));o=s!=void 0?s:r;if(v&&(void 0===h||k.yValue<this.valuesAxis.minValue||k.yValue>this.valuesAxis.maxValue))q.isLast=!0,v=!1;if(!f||void 0===h||void 0===l)q=new $MA.Graph.Line2D(this,o,k,-1,-1,-1,-1,x);else{q=p?new $MA.Graph.DashedLine2D(this,o,k,j,l,g,h,x):new $MA.Graph.Line2D(this,o,k,j,l,g,h,x);if(!v&&n-1>B)v=!0,q.isFirst=!0;if(v&&n-1===B)q.isLast=!0,v=!1}j=!0;if(m!=void 0&&m.yValue==0&&(k.yValue<
this.yAxis.minValue||k.yValue>this.yAxis.maxValue)&&B>=0)this.showDots=j=!1,q=new $MA.Graph.Line2D(this,q.drawContext,k,null,null,null,null,x);else if(k.yValue<this.yAxis.minValue||k.yValue>this.yAxis.maxValue)j=!1;this.drawObjects.push(q);this.showDots&&j&&!this.valuesAxis.outOfBound(k.yValue)&&!this.animation&&f&&void 0!==h&&this.auxiliaryObjects.push(new $MA.Graph.Symbol2D(this,o,k,$MA.Graph.SymbolType.CIRCLE,g,h,d,d));j=y;l=A;m=k}}}}};
$MA.Graph.LineGraphObject.prototype.getRealIndex=function(a,b,c){var d;d=this.firstItem+-1;var e,f,g;for(e=0;e<=b;e++)for(f=0;f<c;f++)if(g=this.getSeries(f),g=g.items[e].yValue,g!=null&&d++,e==b&&f==a){if(g==void 0||g==null||isNaN(g))d=-1;break}return d};
$MA.Graph.LineGraphObject.prototype.plotHierarchyNode=function(a,b,c,d){if(this.hierarchyObjects==void 0)this.hierarchyObjects=[];var e,f=!1;void 0===d&&(d=this.getRootNode(),f=!0);var g=this.getSeriesCount();if(null!==d){var h=d.getSeries(),j=this.suppliedTotals&&h===void 0,l=d.getChildren(),n=l.length,k,m,o,p,q,r,s;if(this.childrenFirst)for(k=0;k<n;k++)this.plotHierarchyNode(a,b,c,l[k]),j||(c[0]+=b);if(!j){p=c[0];for(k=0;k<g;k++){o=h[k]!==void 0?h[k]:void 0;e=this.getSeries(k);m=e.isEnabled();q=
d.getLevel();if(q>this.level)this.level=q;f&&(o+=this.getSeries(k).sumBeforeRange);q=this.getValueLoc(o);r=f?$MA.getLocalisation(null,"Total","Total"):d.getValue();s=d.getGroupValues();e={seriesNo:k,seriesEnabled:m,valueDisplayText:d.getValueDisplayText(k),yValue:o,value:r,displayValue:r,currX:p,currY:q,lineDef:this.lineDef,groupValues:s,name:e.name};this.hierarchyObjects.push(e)}}if(!this.childrenFirst){j||(c[0]+=b);for(k=0;k<n;k++)this.plotHierarchyNode(a,b,c,l[k])}}};
$MA.Graph.LineGraphObject.prototype.plotDrawObjects=function(){if(this.hierarchyObjects){var a,b,c,d,e,f,g,h,j,l,n,k,m,o,p,q;n=this.getSeriesCount();m=this.hierarchyObjects.length;k=(this.width+this.height)/200;var r,s,u,v;for(r=0;r<n;r++){c=this.getSeries(r);g=c.isEnabled();h=new $MA.Graph.DrawContext(c.drawContext.fillBrush,c.drawContext.fillBrush,c.drawContext.insetShadowBrush);o=!0;p=0;q=r;for(s=0;s<m;s++)if(j=this.hierarchyObjects[s],j.seriesNo===r){c=j.currX;d=j.currY;u=j.lineDef;e=j.groupValues.slice(0);
v=e.length===0?j.value:this.categoriesDisplayOrder==="rootToLeaf"?e.reverse().join(", ")+", "+j.value:j.value+", "+e.join(", ");e=c;f=d;d=this.getLineStartAndEndPosition(l,j,c,d,a,b);a=d.start.x;b=d.start.y;c=d.end.x;d=d.end.y;0===s&&(a=c,b=d);s==m-1&&(c-=1);j={yValue:j.yValue,value:j.value,displayValue:j.displayValue,xCoord:c,yCoord:d,itemNo:p,seriesNo:q,groupValues:j.groupValues,valueDisplayText:j.valueDisplayText,category:{value:v},parentSeries:{name:j.name}};a=o||d==void 0||!g?new $MA.Graph.Line2D(this,
h,j,-1,-1,-1,-1,u):new $MA.Graph.Line2D(this,h,j,a,b,c,d,u);b=!0;if(l!=void 0&&l.yValue==0&&(j.yValue<this.yAxis.minValue||j.yValue>this.yAxis.maxValue)&&s>=0)this.showDots=b=!1,a=new $MA.Graph.Line2D(this,h,j,null,null,null,null,u);else if(j.yValue<this.yAxis.minValue||j.yValue>this.yAxis.maxValue)b=!1;this.drawObjects.push(a);this.showDots&&b&&g&&d!=void 0&&this.auxiliaryObjects.push(new $MA.Graph.Symbol2D(this,h,j,$MA.Graph.SymbolType.CIRCLE,c,d,k,k));p++;a=e;b=f;l=j;o=!1}}this.hierarchyObjs=void 0}};
$MA.Graph.LineGraphObject.prototype.getMaxItemCount=function(){return this.isHierarchy?this.getNodeCount():$MA.Graph.GraphObject.prototype.getMaxItemCount.apply(this)};$MA.Graph.LineGraphObject.prototype.plotStacked=function(){this.plotDefault()};$MA.Graph.LineGraphObject.prototype.calcLineStartPos=function(a){a=this.calcBarGap(a);return a<10?10:a};
$MA.Graph.LineGraphObject.prototype.clearItems=function(){var a=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),b=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),c=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),d=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA);this.context.clearRect(a+1,b+1,d-2,c-2)};
$MA.Graph.LineGraphObject.prototype.resetDrawObj=function(a){var b=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA)+this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA);if(a.y1!=void 0)a.incr1=(b-a.y1)/$MA.Graph.GraphObject.ANIMATIONCOUNT,a.y1=b;if(a.y2!=void 0)a.incr2=(b-a.y2)/$MA.Graph.GraphObject.ANIMATIONCOUNT,a.y2=b};$MA.Graph.LineGraphObject.prototype.animateDrawObj=function(a){a.y1!=void 0&&(a.y1-=a.incr1);a.y2!=void 0&&(a.y2-=a.incr2);a.plotPrimitives()};
$MA.Graph.LineGraphObject.prototype.getCustomisedFillBrush=function(a,b){var c,d=this.getSeriesCount(),e;if(this.isCustomDataPointsColor==!0){c=this.firstItem+-1;var f,g;for(f=0;f<=b;f++)for(g=0;g<d;g++)if(e=this.getSeries(g),e=e.items[f].yValue,e!=null&&c++,f==b&&g==a){if(e==void 0||e==null||isNaN(e))c=-1;break}c=this.dataPointsColorHash.containsKey("CustomDataPointsColor"+c)?new $MA.Brush(this.dataPointsColorHash.get("CustomDataPointsColor"+c).toString()):void 0}return c};
$MA.Graph.LineGraphObject.prototype.setShowDotsWidth=function(a){$MA.Graph.LineGraphObject.SHOWDOTSWIDTH=a};$MA.Graph.LineGraphObject.prototype.setGraphLineWidth=function(a){this.graphLineWidth=a};
$MA.Graph.LineGraphObject.prototype.getLineStartAndEndPosition=function(a,b,c,d,e,f){var g=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),h=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),h=g+h;if(a==null){if(b.yValue>this.valuesAxis.maxValue||b.yValue<this.valuesAxis.minValue)d=void 0}else a.yValue>this.valuesAxis.maxValue&&b.yValue>this.valuesAxis.maxValue||a.yValue<this.valuesAxis.minValue&&b.yValue<this.valuesAxis.minValue?f=d=void 0:a.yValue>this.valuesAxis.maxValue&&b.yValue<=this.valuesAxis.maxValue&&
b.yValue>=this.valuesAxis.minValue?(e=this.calcCoordinateX(e,f,c,d,g,"top"),f=g):b.yValue>this.valuesAxis.maxValue&&a.yValue<=this.valuesAxis.maxValue&&a.yValue>=this.valuesAxis.minValue?(c=this.calcCoordinateX(e,f,c,d,g,"top"),d=g):a.yValue<this.valuesAxis.minValue&&b.yValue<=this.valuesAxis.maxValue&&b.yValue>=this.valuesAxis.minValue?(e=this.calcCoordinateX(e,f,c,d,h,"bottom"),f=h):b.yValue<this.valuesAxis.minValue&&a.yValue<=this.valuesAxis.maxValue&&a.yValue>=this.valuesAxis.minValue?(c=this.calcCoordinateX(e,
f,c,d,h,"bottom"),d=h):a.yValue>this.valuesAxis.maxValue&&b.yValue<this.valuesAxis.minValue?(e=this.calcCoordinateX(e,f,c,d,g,"top"),f=g,c=this.calcCoordinateX(e,f,c,d,h,"bottom"),d=h):a.yValue<this.valuesAxis.minValue&&b.yValue>this.valuesAxis.maxValue&&(e=this.calcCoordinateX(e,f,c,d,h,"bottom"),f=h,c=this.calcCoordinateX(e,f,c,d,g,"top"),d=g);return{start:{x:e,y:f},end:{x:c,y:d}}};
$MA.Graph.PieGraphObject=function(a){$MA.Graph.GraphObject.call(this,a);this.initialize();this.legend.location=$MA.Graph.LegendType.LEFT;this.lineDef=new $MA.Graph.LineDefinition(1);this.showLabels=!0;this.isDonut=!1};$MA.Graph.PieGraphObject.prototype=new $MA.Graph.GraphObject;$MA.Graph.PieGraphObject.prototype.setValueBubblePosition=function(a){this.valueBubblePosition=a};
$MA.Graph.PieGraphObject.prototype.getLegendList=function(){var a=this.legend.legendList,b,c;if(!a&&(a=[],c=this.seriesList[0])){var d,e=c.items.length;for(d=0;d<e;d++){b=c.items[d].originalIndex;if(b==void 0)b=this.maxPies;this.chartBrushes!=void 0&&(b%=this.chartBrushes.length);b={name:c.items[d].category.displayValue,fillBrush:this.getSeriesFillBrush(b).toString(),graphObjIndex:0};a.push(b)}}return a};$MA.Graph.PieGraphObject.prototype.getValueBubbleHeight=function(){return this.valueBubbleHeight};
$MA.Graph.PieGraphObject.prototype.plot=function(a){this.canvas=a;this.height=a.height;this.width=a.width;this.context=a.getContext?a.getContext("2d"):null;this.initData();this.getIsCustomDataPointsColor();this.scale();this.resize();this.arrange();this.redraw()};$MA.Graph.PieGraphObject.prototype.redraw=function(){this.reset();this.drawTitle();this.drawLegend();this.isStacked?this.plotStacked():this.plotDefault()};
$MA.Graph.PieGraphObject.prototype.calcSize=function(){var a=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DISPLAY),b=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DISPLAY),c=a,d=b,e=this.valueBubble?this.getValueBubbleHeight():0,f=0,g=0;this.valueBubblePosition==="top"?d-=e:this.valueBubblePosition==="side"&&(c-=$MA.Graph.LEFT_SLIDER_MIN_SIZE);if(!(d<10||c<10))this.paintSize=d>c?c:d,this.valueBubblePosition==="side"?(f=this.legend.location===$MA.Graph.LegendType.RIGHT?a-this.paintSize/2:this.paintSize/
2,g=b/2):this.valueBubblePosition==="top"&&(f=a/2,g=e+(b-e)/2),this.centerY=this.drawAreas.getY($MA.Graph.DrawAreaType.DISPLAY)+g,this.centerX=this.drawAreas.getX($MA.Graph.DrawAreaType.DISPLAY)+f};$MA.Graph.PIE_OTHERS="Others";$MA.Graph.LEFT_SLIDER_MIN_SIZE=80;
$MA.Graph.PieGraphObject.prototype.initData=function(){function a(a,b){b.sortY();a.categories.sort(function(a,c){return b.getYByX(c.value)-b.getYByX(a.value)})}var b,c;if(this.categories&&$MA.Chart.PieChartCategoryTextMaxLength>3){c=this.categories.length;for(b=0;b<c;b++){var d=this.categories[b].displayValue.toString();this.categories[b].displayValue=d.length>$MA.Chart.PieChartCategoryTextMaxLength?d.substring(0,$MA.Chart.PieChartCategoryTextMaxLength-3)+"...":d}}d=this.getSeriesCount();if(!(d<1)){var e,
f;for(e=d-1;e>=0;e--){d=this.getSeries(e);for(b=0;b<d.items.length;b++){if(d.items[b].originalIndex==void 0)d.items[b].originalIndex=b;f=d.items[b].yValue;f==""||f==null||f==void 0?(d.items[b].yValue=0,d.items[b].isNull=!0):d.items[b].isNull=!1}var g=d.removeNegativeItems();f=[];c=this.categories.length;for(b=0;b<c;b++)0>g.indexOf(b)&&f.push(this.categories[b]);if(f.length<this.categories.length)this.categories=f;var h=d.items.length;(!d.items[this.maxPies]||!d.items[this.maxPies].others)&&a(this,
d);if(h>this.maxPies+1){c=[];g=0;for(b=this.maxPies;b<h;b++){f=d.items[b].yValue;if(f==""||f==null||f==void 0)f=0;g+=Math.abs(f);c.push(d.items[b])}b=$MA.getLocalisation(null,$MA.Graph.PIE_OTHERS,$MA.Graph.PIE_OTHERS);d.items.length=this.maxPies;d.add(b,g);d.items[this.maxPies].others=c;this.categories.length=this.maxPies;b=new $MA.Graph.Category(b);this.categories.push(b);d.items[this.maxPies].setCategory(b)}}}};
$MA.Graph.PieGraphObject.prototype.plotDefault=function(){var a,b,c,d,e,f,g,h,j,l=0,n,k,m,o,p;d=0;var q,r,s,u,v;e=this.getSeriesCount();if(e==1){j=Math.floor(this.paintSize/2)-4;var l=this.computeTruePieRadius(j),x=0;for(u=e-1;u>=0;u--){p=this.getSeries(u);p.getItems();g=f=l*((u+1)/e);p.isSelected()&&(g*=1-$MA.Graph.PIE_EXPLODE_PERCENT/100);h=l*(u/e);b=0;n=Math.PI/2;a=p.getYPosSum();var w=Math.PI/2;if(a!=0){for(s=0;s<p.items.length;s++){c=Math.abs(p.getItemYDouble(s))/a;b+=c;x==0&&(w-=Math.PI*b,n=
w);k=n;n=Math.PI*2*b+w;b==1&&(n+=1.0E-5);p.items[s].yCoord=c*100;p.items[s].xCoord=p.items[s].getXDisplayValue();if(p.items[s].others)for(d=0;d<p.items[s].others.length;d++)m=p.items[s].others[d],m.yCoord=$MA.getDouble(m.yValue)*100/a,m.xCoord=m.getXDisplayValue();d=p.getItemPieExplodePercent(s);d/=100;m=this.centerX;o=this.centerY;q=p.items[s].originalIndex;if(q==void 0)q=this.maxPies;this.chartBrushes!=void 0&&(q%=this.chartBrushes.length);q=new $MA.Graph.DrawContext(this.getSeriesFillBrush(q),
this.getSeriesStrokeBrush(q),this.getSeriesInsetShadowBrush(q));r++;this.isCustomDataPointsColor&&s<this.maxPies&&this.dataPointsColorHash.containsKey("CustomDataPointsColor"+p.items[s].originalIndex)&&(v=this.dataPointsColorHash.get("CustomDataPointsColor"+p.items[s].originalIndex).toString(),q=new $MA.Graph.DrawContext(new $MA.Brush(v),q.getStrokeBrush(),q.getInsertShadowBrush()));m=new $MA.Graph.PieSlice2D(this,q,p.items[s],m,o,g,n,k,this.isDonut);m.orgRadius=f;if(d>0)m.offsetPercent=d;this.drawObjects.push(m);
e==1&&this.showLabels&&(c=new $MA.Graph.Data(this.pieDisplayDef,Number(c*100).toFixed(2)),d=c.getTextSize(this.context),c!=null&&(m=(n+k)/2,k=this.centerX+(0.5-1.1*j*Math.cos(m)),m=this.centerY+(0.5-1.1*j*Math.sin(m)),o=k>this.centerX?!0:!1,q=m<this.centerY?!1:!0,this.drawObjects.push(new $MA.Graph.Text2D(this,c,k-(o?0:d.width),m-(q?0:d.height),d.width,d.height))));x++}if(e>1&&this.showLabels)c=p.label,d=c.getTextSize(this.context),c!=null&&(m=Math.PI*((u+1)/(e+1))+Math.PI/2,a=this.centerX+(0.5-(h+
g)/2*Math.cos(m)),g=this.centerY+(0.5-(h+g)/2*Math.sin(m)),k=this.centerX+(0.5-1.1*j*Math.cos(m)),m=this.centerY+(0.5-1.1*j*Math.sin(m)),this.drawObjects.push(new $MA.Graph.Line2D(this,this.getLineBrush(),null,a,g,k,m,this.lineDef)),o=k>this.centerX?!0:!1,q=m<this.centerY?!1:!0,this.drawObjects.push(new $MA.Graph.Text2D(this,c,k-(o?0:d.width),m-(q?0:d.height),d.width,d.height)))}}}};
$MA.Graph.PieGraphObject.prototype.resetDrawObj=function(a){a.incr=Math.PI*2/$MA.Graph.GraphObject.ANIMATIONCOUNT;a.offset=Math.PI};$MA.Graph.PieGraphObject.prototype.animateDrawObj=function(a){a.offset+=a.incr;a.generate()};
$MA.Graph.PieGraphObject.prototype.clearItems=function(){var a=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),b=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),c=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),d=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA);this.context.clearRect(a+1,b+1,d-2,c-2)};
$MA.Graph.PieGraphObject.prototype.getDrawObject=function(a){var b,c=this.drawObjects.length,d,e=0,f;for(d=0;d<c;d++)if(b=this.drawObjects[d],b.item!=void 0){e++;f=b;var g=b.radStart+b.offset,h=b.radEnd+b.offset;g%=2*Math.PI;g<0&&(g+=Math.PI*2);h%=2*Math.PI;h<0&&(h+=Math.PI*2);g<h&&(g+=Math.PI*2);a<0&&(a+=Math.PI*2);if(a>=h&&a<=g)return b}if(e==1)return f};
$MA.Graph.PieGraphObject.prototype.getSelectedPieSlices=function(){var a,b,c=this.drawObjects.length,d=[];for(b=0;b<c;b++)a=this.drawObjects[b],a.item!==void 0&&a.item.selected&&(a={name:a.item.xCoord,percent:a.item.yCoord,value:a.item.yValue,color:a.drawContext.getFillBrush(),others:a.item.others,valueDisplayText:a.item.valueDisplayText,isNull:a.item.isNull},d.push(a));return d};
$MA.Graph.PieGraphObject.prototype.select=function(a){var b,c,d,e=this.drawObjects.length;this.getSeries(0).getItems();var f;for(f=0;f<e;f++)if(b=this.drawObjects[f],b.item!=void 0)void 0===c&&(d=$MA.Graph.PIE_EXPLODE_PERCENT/100,c=b.orgRadius*(1-d)),b.radius=a?c:b.orgRadius,b.offsetPercent=b.item.selected?d:0,b.generate(!0);$MA.platform.blackberry&&a&&this.legend.location==$MA.Graph.LegendType.TOP&&this.context.clearRect(0,this.canvas.height-11,this.canvas.width,11)};
$MA.Graph.PieGraphObject.prototype.rotate=function(a,b){var c,d,e=this.drawObjects.length;for(c=0;c<e;c++)d=this.drawObjects[c],d.item!=void 0&&(d.offset+=a,d.generate(!0),c==0&&b&&$MA.platform.blackberry&&(this.context.clearRect(b[0],b[1],b[2],b[3]),d.generate(!0)))};
$MA.Graph.PieGraphObject.prototype.rotateRefresh=function(a){var b,c,d=this.drawObjects.length;for(b=0;b<d;b++)c=this.drawObjects[b],c.item!=void 0&&(c.generate(!0),b==0&&a&&$MA.platform.blackberry&&(this.context.clearRect(a[0],a[1],a[2],a[3]),c.generate(!0)));$MA.platform.blackberry&&this.getSelectedPieSlices().length>0&&this.legend.location==$MA.Graph.LegendType.TOP&&this.context.clearRect(0,this.canvas.height-11,this.canvas.width,11)};
$MA.Graph.PieGraphObject.prototype.getCustomisedFillBrush=function(a){var b,c=-1;if(this.isCustomDataPointsColor)a<this.maxPies?(b=this.getSeries(0),b=b.items[a],b=b.originalIndex,c=b!=void 0?b:a):c=void 0,b=this.dataPointsColorHash.containsKey("CustomDataPointsColor"+c)?new $MA.Brush(this.dataPointsColorHash.get("CustomDataPointsColor"+c).toString()):void 0;return b};
$MA.Graph.TableBarGraphObject=function(a){$MA.Graph.GraphObject.call(this,a);this.initialize();this.legend.location=$MA.Graph.LegendType.BOTTOM;this.xAxis=this.valuesAxis;this.xAxis.labelDisplayDef.font.rotation=0;this.xAxis.majorTic=$MA.Graph.TicType.NONE;this.xAxis.hideValue=!1;this.yAxis=this.categoryAxis;this.yAxis.labelDisplayDef.font.rotation=270;this.yAxis.majorTic=$MA.Graph.TicType.NONE;this.yAxis.hideValue=!1;this.modernLook=!0;this.firstRow=this.firstRow!=0?this.firstRow:0;this.valueBubbleValue=
-1;this.fontSize="14px";this.fontFamily="Helvetica";this.rowHeaderBkColor=this.dimTitleBkColor="#DDDDDD";this.contentsBkColor=this.colHeadersBkColor="#F7F7F7";this.legendBkColor="black";this.legendColor="white";this.separatorLineColor=this.gridLineColor="#DDDDDD";this.textColor="#333333";this.textShadowColor="white";this.startLegend=0;this.beginGridShadowColor="rgba(0,0,0,0.2)";this.endGridShadowColor="rgba(0,0,0,0)";this.lineDef=new $MA.Graph.LineDefinition;this.showDots=!0;this.getStyles();this.graphLineWidth=
1;this.chartDataWidth=this.categoryColumnWidth=this.valueColumnWidth=this.tableWidthPercent=void 0;this.vericaLabelWidth=14+2*$MA.Graph.TableBarGraphObject.PADDING};$MA.Graph.TableBarGraphObject.prototype=new $MA.Graph.GraphObject;$MA.Graph.TableBarGraphObject.PADDING=10;$MA.Graph.TableBarGraphObject.ROWHEIGHT=44;
$MA.Graph.TableBarGraphObject.prototype.calcTableWidth=function(){var a=this.chartDataWidth,b;this.tableWidthPercent!=void 0&&(b=a*this.tableWidthPercent);if(this.getMaxItemCount()==0)return 0;var c=this.getSeriesCount();if(c==0)return 0;var d,e,f,g,h=a=0;this.context.font=this.fontSize+" "+this.fontFamily;var j=this.xAxis.displayDef.format,l=this.yAxis.displayDef.format,n,k,m;for(k=0;k<c;k++){d=this.getSeries(k);e=d.items.length;for(m=n=0;m<e;m++){f=d.items[m];g=$MA.format(f.getXValue(),l);g=this.context.measureText(g);
if(g.width>a)a=g.width;g=f.valueDisplayText!=void 0?f.valueDisplayText:$MA.format(f.yValue,j);g=this.context.measureText(g);if(g.width>h)h=g.width;this.showTotal&&typeof f.yValue=="number"&&!isNaN(f.yValue)&&(n+=f.yValue)}if(this.showTotal&&(g=$MA.format(n,j),g=this.context.measureText(g),g.width>h))h=g.width}if(this.dimTitle!=void 0&&this.tableWidthPercent==void 0&&(g=this.context.measureText(this.dimTitle),g.width>a))a=g.width;if(this.rowHeader!=void 0&&this.tableWidthPercent==void 0&&(g=this.context.measureText(this.rowHeader),
g.width>h))h=g.width;c=this.getCategoryLevelCount();d=0;this.columnX=[];this.columnX.push(0);this.vericaLabelWidth=14+2*$MA.Graph.TableBarGraphObject.PADDING;if(c>0)for(e=0;e<c;e++)d+=this.vericaLabelWidth,this.columnX.push(d);if(this.tableWidthPercent!=void 0){this.valueColumnWidth=h+20+3;this.categoryColumnWidth=b-this.valueColumnWidth;a=b/2;if(a>this.valueColumnWidth&&c==0)this.categoryColumnWidth=this.valueColumnWidth=a;if(this.categoryColumnWidth<30&&(this.categoryColumnWidth=30,c==0))this.valueColumnWidth=
b-this.categoryColumnWidth-20;if(c>0){a=(b-d)/2;this.valueColumnWidth=a-10;this.categoryColumnWidth=a-10;if(this.categoryColumnWidth<0)this.categoryColumnWidth=0;if(this.categoryColumnWidth>0&&this.categoryColumnWidth<30)d+=this.valueColumnWidth;else if(this.categoryColumnWidth<=0){if(a=b/(c+1),d>=b){for(h=0;h<=c;h++)this.columnX[h]=h*a;this.vericaLabelWidth=a;d=c*a;this.valueColumnWidth=this.categoryColumnWidth=0}}else d+=this.categoryColumnWidth;this.columnX.push(d)}else this.columnX.push(this.categoryColumnWidth);
d=b}else if(d+=a+20+3,this.columnX.push(d),d+=h+20+3,this.tableValue==!1)return this.columnX[this.columnX.length-1];return d};
$MA.Graph.TableBarGraphObject.prototype.arrange=function(){$MA.Graph.GraphObject.prototype.arrange.call(this);this.chartDataWidth=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA);var a=this.calcTableWidth();this.tableWidth=a;var b=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),b=a-b,c=this.xAxis.getMaxStringSize(),d=this.categories.length;this.drawAreas.setX($MA.Graph.DrawAreaType.DATA,a);a=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA);a=a-b-c.width;this.drawAreas.setWidth($MA.Graph.DrawAreaType.DATA,
a<0?0:a);this.drawAreas.setY($MA.Graph.DrawAreaType.DATA,$MA.Graph.TableBarGraphObject.ROWHEIGHT);d<=0||this.legend.location==$MA.Graph.LegendType.NONE?this.drawAreas.setHeight($MA.Graph.DrawAreaType.DATA,this.height-$MA.Graph.TableBarGraphObject.ROWHEIGHT):(d=this.drawAreas.getHeight($MA.Graph.DrawAreaType.LEGEND),this.drawAreas.setHeight($MA.Graph.DrawAreaType.DATA,this.height-$MA.Graph.TableBarGraphObject.ROWHEIGHT-d),this.drawAreas.set($MA.Graph.DrawAreaType.LEGEND,0,this.height-d,this.width,
d));a=this.drawAreas.getWidth($MA.Graph.DrawAreaType.XAXIS);this.drawAreas.setWidth($MA.Graph.DrawAreaType.XAXIS,a-b);if(this.secondaryAxis)this.secondaryAxis.majorGridLine=!1,b=this.xAxis.getMaxStringSize().height+this.xAxis.majorTicLength+5,d=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),this.drawAreas.setHeight($MA.Graph.DrawAreaType.DATA,d-b)};$MA.Graph.TableBarGraphObject.prototype.resetData=function(){$MA.Graph.GraphObject.prototype.resetData.call(this);this.firstRow=0};
$MA.Graph.TableBarGraphObject.prototype.plotDefault=function(){if(this.getMaxItemCount()!=0){var a=this.getSeriesCount();if(a!=0){var b=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),c=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),d=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),e=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),f=c+e,g=this.calcBarWidth(e),d=b+d,h=this.valuesAxis.getOriginLoc(b,d);h<0&&(h=0>this.valuesAxis.maxValue?d:b);var j=this.calcBarGap(e),e=g+2*this.calcBarGap(e);
this.baseStartY=c+e*a/2;this.baseIncrY=e*a;var l,n,k,m,o=this.categories.length;n=Math.floor(this.firstRow/a);var p=n*a-1,q=-1;this.getTheFirstItem();q+=this.firstItem;var r;if(this.isWaterfall){r=[];var s;for(s=0;s<a;s++)r.push(this.getSeries(s).sumBeforeRange);this.showTotal&&o++}var u,v,x;for(s=n;s<o;s++){if(c>f)break;x=!0;for(u=0;u<a;u++){var w=null,y=null;p++;if(c>f)break;if(!(p<this.firstRow)){l=this.getSeries(u);var A=l.drawContext;n=l.getItemY(s);n!=null&&q++;if(l.isEnabled()){if(this.isWaterfall)if(this.showTotal&&
s==o-1)n=r[u],k=this.valuesAxis.getValueLoc(b,d,n),m=k>h?h:k,k=Math.abs(k-h);else{if(typeof n!="number"||typeof n=="number"&&isNaN(n))n=0;m=k=this.valuesAxis.getValueLoc(b,d,n>0?r[u]:r[u]+n);k=Math.abs(this.valuesAxis.getValueLoc(b,d,r[u]+n)-this.valuesAxis.getValueLoc(b,d,r[u]));r[u]+=n;n!==0&&k<2&&(w=m,y=k,n<0&&(m-=2-k),k=2)}else k=this.valuesAxis.getValueLoc(b,d,n),k>h?(m=h,k-=h):(m=k-2,k=h-k);if((!this.showTotal||this.showTotal&&s<o-1)&&this.isCustomDataPointsColor&&q>=this.dataPointsColorMinIndex&&
q<=this.dataPointsColorMaxIndex&&this.dataPointsColorHash.containsKey("CustomDataPointsColor"+q))if(A=this.getCustomContext(this.dataPointsColorHash.get("CustomDataPointsColor"+q).toString()),A===null)A=l.drawContext;c+j+g<f?this.drawObjects.push(new $MA.Graph.Bar2D(this,A,l.items[s],m,c+j,k,g,this.is3DObjects,g,n<0)):this.drawObjects.push(new $MA.Graph.Bar2D(this,A,l.items[s],m,c+j,k,f-c-j,this.is3DObjects,f-c-j,n<0));if(this.isWaterfall&&this.showWFConnectingLine&&n!==0&&a===1&&!(this.showTotal&&
s==o-1)){l={x:n<0?m:m+k,y:c+e*0.75};if(x){if(v!==void 0)n<0&&(m=l.x+k),A.strokeBrush=new $MA.Brush($MA.Brushes.gray.color),this.WFConnLineObjects.push(new $MA.Graph.DashedLine2D(this,A,void 0,v.x,v.y,m,l.y-e*0.5,this.lineDef));l.x=w!==null?n<0?w:w+y:l.x;x=!1}v=l}}c+=e}}}this.plotData();this.plotGradientRect();this.calcDisplayEveryNLabels();this.plotXAxis();this.plotX2Axis()}}};
$MA.Graph.TableBarGraphObject.prototype.getTheFirstItem=function(){var a=0,b=0,c=this.getSeriesCount(),d=this.categories.length,e,f,g;for(e=0;e<=d;e++)for(f=0;f<c;f++){b++;if(b>this.firstRow){e=d;break}g=this.getSeries(f);g=g.getItemY(e);g!=null&&a++}this.firstItem=a};
$MA.Graph.TableBarGraphObject.prototype.plotVertical=function(){if(this.getMaxItemCount()!=0){var a=this.getSeriesCount();if(a!=0){var b=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),c=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),d=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),e=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),f=c+e,g=this.calcBarWidth(e),d=b+d,h=g+2*this.calcBarGap(e),j=1;void 0!==this.baseStartY&&void 0!==this.baseIncrY?(e=this.baseStartY,g=this.baseIncrY,j=g/
h):(e=c+h/2,g=h);var l=(this.width+this.height)/200,n,k,m,o,p,q,r=Math.floor(this.firstRow/j),j=this.firstRow%j,s;for(s=0;s<j;s++)e-=h;e<c&&r++;var u;"graph"===this.drawingContentType?(u=new $MA.Graph.LineDefinition,u.width=this.graphLineWidth):u=this.lineDef;var v,x,w,y,A,B,D;for(v=0;v<a;v++){h=this.getSeries(v);w=h.isEnabled();y=n=new $MA.Graph.DrawContext(h.drawContext.fillBrush,h.drawContext.fillBrush,h.drawContext.insetShadowBrush);m=e;A=h.items.length;o=p=void 0;s=!1;n=null;r>0&&r<=A&&(h.items[r-
1].yValue!==void 0&&h.items[r-1].yValue!==null&&(n={yValue:h.items[r-1].yValue},p=this.valuesAxis.getValueLoc(b,d,h.getItemY(r-1)),m<c?(o=m,m+=g):o=m-g),m<c&&(m+=g));for(x=r;x<A;x++){j=h.items[x];k=h.getItemY(x);B=k=void 0!==j.yValue&&null!==j.yValue?this.valuesAxis.getValueLoc(b,d,k):void 0;D=m;m=this.getLineStartAndEndPosition(n,j,k,m,p,o);p=m.start.x;o=m.start.y;k=m.end.x;m=m.end.y;m>f&&(s=!0);s&&k!==void 0&&(o<f?(k=this.calcCoordinateX(p,o,k,m,f,"bottom"),m=f):o=m=void 0);p!=void 0&&o<c&&(m>c?
(p=this.calcCoordinateX(p,o,k,m,c,"top"),o=c):o=m=void 0);j.xCoord=k;j.yCoord=m;0===x&&(p=k,o=m);x==A-1&&(k-=1);q=j.yValue<this.valuesAxis.minValue&&n!=null&&n.yValue<this.valuesAxis.minValue;n=this.getRealIndex(v,x,a);this.isCustomDataPointsColor&&n>=this.dataPointsColorMinIndex&&n<=this.dataPointsColorMaxIndex&&this.dataPointsColorHash.containsKey("CustomDataPointsColor"+n)&&this.getCustomContext(this.dataPointsColorHash.get("CustomDataPointsColor"+n).toString());n=y;o=!w||q||void 0===m||void 0===
o?new $MA.Graph.Line2D(this,n,j,-1,-1,-1,-1,u):new $MA.Graph.Line2D(this,n,j,p,o,k,m,u);this.drawObjects.push(o);this.showDots&&j.yValue>=this.valuesAxis.minValue&&!this.animation&&w&&void 0!==m&&!s&&this.drawObjects.push(new $MA.Graph.Symbol2D(this,n,j,$MA.Graph.SymbolType.CIRCLE,k,m,l,l));p=B;o=m=D;n=j;if(s)break;m+=g}}}}};
$MA.Graph.TableBarGraphObject.prototype.getRealIndex=function(a,b,c){var d;d=this.firstItem+-1;var e,f,g;for(e=0;e<=b;e++)for(f=0;f<c;f++)if(g=this.getSeries(f),g=g.items[e].yValue,g!=null&&d++,e==b&&f==a){if(g==void 0||g==null||isNaN(g))d=-1;break}return d};
$MA.Graph.TableBarGraphObject.prototype.isCategoryLabelVisible=function(a,b,c){var d=this.getSeriesCount();if(b+1<this.categories.length){var e=this.categories[b].groupValues[c],f,g;for(f=b+1;f<this.categories.length;f++)if(g=this.categories[f].groupValues[c],e!=g)break;return this.context.measureText(e).width<=(f-b-1)*$MA.Graph.TableBarGraphObject.ROWHEIGHT+(d-a-1)*$MA.Graph.TableBarGraphObject.ROWHEIGHT+2*$MA.Graph.TableBarGraphObject.PADDING}};
$MA.Graph.TableBarGraphObject.prototype.getEllipsesiedText=function(a,b){b<10?a="...":b<5&&(a=".");for(var c=new $MA.Graph.Data(this.xAxis.displayDef,a),d=c.getTextSize(this.context);a!=""&&d.width>b&&a!="...";)a=a.substring(0,a.length-4)+"...",c.value=a,d=c.getTextSize(this.context);return a};
$MA.Graph.TableBarGraphObject.prototype.plotData=function(){if(this.getMaxItemCount()!=0){var a=this.getSeriesCount();if(a!=0){var b=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),c=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),d=b+c,e,f=this.calcBarWidth(c)+2*this.calcBarGap(c),g=$MA.Graph.TableBarGraphObject.PADDING,h=g+14,j,l,n,k=this.context;k.save();k.beginPath();k.rect(0,0,this.tableWidth,d);k.clip();k.fillStyle=this.dimTitleBkColor;l=this.columnX[this.columnX.length-1];k.fillRect(0,
0,l,b);k.fillStyle=this.colHeadersBkColor;k.fillRect(0,b,l,c);k.fillStyle=this.rowHeaderBkColor;var m=this.columnX[this.columnX.length-1];l=this.tableWidth-this.columnX[this.columnX.length-1];k.fillRect(m,0,l,b);k.fillStyle=this.contentsBkColor;k.fillRect(m,b,l,c);k.font=this.fontSize+" "+this.fontFamily;var m=this.xAxis.displayDef.format,o=this.yAxis.displayDef.format,p=this.columnX.length,q;if(this.dimTitle!=void 0)e=this.dimTitle,q=this.columnX[p-2]+g,this.tableWidthPercent!=void 0&&(this.valueColumnWidth>
25&&this.valueColumnWidth<35?(e="...",q-=4):this.valueColumnWidth<=25?(e=".",q-=2):e=this.getEllipsesiedText(e,this.categoryColumnWidth-2*g)),k.fillStyle=this.textShadowColor,k.fillText(e,q,h+1),k.fillStyle=this.textColor,k.fillText(e,q,h);if(this.rowHeader!=void 0)e=this.rowHeader,q=this.columnX[p-1]+g,this.tableWidthPercent!=void 0&&(this.valueColumnWidth>25&&this.valueColumnWidth<35?(e="...",q-=4):this.valueColumnWidth<=25?(e=".",q-=2):e=this.getEllipsesiedText(e,this.valueColumnWidth-2*g)),k.fillStyle=
this.textShadowColor,k.fillText(e,q,h+1),k.fillStyle=this.textColor,k.fillText(e,q,h);k.fillStyle=this.textColor;var r=this.getCategoryLevelCount(),s;if(r>0){s=[];for(j=0;j<r;j++)s[j]=""}l=b;var u=this.categories.length;k.strokeStyle=this.gridLineColor;for(j=1;j<p;j++)this.drawLine(k,this.columnX[j],0,this.columnX[j],b);k.strokeStyle=this.separatorLineColor;var v=(u*a-this.firstRow)*f;for(j=1;j<p-1;j++)v>c?this.drawLine(k,this.columnX[j],b,this.columnX[j],b+c):this.drawLine(k,this.columnX[j],b,this.columnX[j],
b+v);k.strokeStyle=this.gridLineColor;v>c?this.drawLine(k,this.columnX[p-1],b,this.columnX[p-1],b+c):this.drawLine(k,this.columnX[p-1],b,this.columnX[p-1],b+v);this.drawLine(k,0,l,this.tableWidth,l);var x=Math.floor(this.firstRow/a),c=x*a-1,v=this.firstRow-Math.floor(this.firstRow/a)*a,w;if(this.isWaterfall){w=[];for(j=0;j<a;j++)w.push(this.getSeries(j).sumBeforeRange)}for(var y;x<u;x++){if(l+f*0.35>d)break;for(y=0;y<a;y++){c++;if(l+f*0.35>d)break;if(!(c<this.firstRow)){j=Math.floor((c-this.firstRow+
v)/a);var A;A=j==this.valueBubbleValue?"Bold "+this.fontSize+" "+this.fontFamily:this.fontSize+" "+this.fontFamily;k.font=A;j=this.getSeries(y);n=j.items[x];this.showTotal&&typeof n.yValue=="number"&&!isNaN(n.yValue)&&(w[y]+=n.yValue);if(l==b||y==0){if(n.getXValue()!=void 0)e=$MA.format(n.getXValue(),o),this.tableWidthPercent!=void 0&&(this.categoryColumnWidth>25&&this.valueColumnWidth<35?e="...":this.categoryColumnWidth<=25?e=".":(j=this.categoryColumnWidth-2*g,e=this.getEllipsesiedText(e,j))),k.font=
A,k.fillText(e,this.columnX[p-2]+g,l+h);if(r>0&&(!this.showTotal||this.showTotal&&x<u-1)){var B=this.categories[x].groupValues;if(B!=void 0)for(j=0;j<B.length;j++)if(B[j]!=s[j]){q=this.columnX[B.length-1-j]+g;if(l!=b||this.isCategoryLabelVisible(y,x,j))e=B[j],this.vericaLabelWidth<25&&(e="...",q-=g),k.font=A,this.drawVerticalText(k,e,q,l+h);s[j]=B[j];this.drawLine(k,this.columnX[B.length-1-j],l,this.columnX[B.length-j],l)}}}j=n.yValue;n.valueDisplayText!=void 0?j=n.valueDisplayText:n.yValue!=void 0&&
(j=$MA.format(n.yValue,m));e=j;q=this.columnX[p-1]+g;this.tableWidthPercent!=void 0&&(this.valueColumnWidth>17&&this.valueColumnWidth<35?(e="...",q-=4):this.valueColumnWidth<=17?(e=".",q-=2):e=this.getEllipsesiedText(e,this.valueColumnWidth));k.font=A;e!=void 0&&k.fillText(e,q,l+h);l!=b&&y==0?(k.strokeStyle=this.separatorLineColor,this.drawLine(k,this.columnX[p-2],l,this.tableWidth,l)):(k.strokeStyle=this.gridLineColor,this.drawLine(k,this.columnX[p-1],l,this.tableWidth,l));l+=f}}}if(x==u&&y==a&&
this.isWaterfall&&this.showTotal&&l<d){k.strokeStyle=this.separatorLineColor;this.drawLine(k,0,l,this.tableWidth,l);j=Math.floor((++c-this.firstRow+v)/a);k.font=j==this.valueBubbleValue?"Bold "+this.fontSize+" "+this.fontFamily:this.fontSize+" "+this.fontFamily;k.fillText($MA.format($MA.getLocalisation(null,"Total","Total"),o),this.columnX[0]+g,l+h);k.strokeStyle=this.gridLineColor;for(y=0;y<a&&l<=d;y++)k.fillText($MA.format(isNaN(w[y])?"":w[y],m),this.columnX[p-1]+g,l+h),this.drawLine(k,this.columnX[p-
1],l,this.tableWidth,l),l+=f}k.restore();k.save();if(l<d)k.strokeStyle=this.separatorLineColor,this.drawLine(k,this.columnX[p-1],l,this.tableWidth,l),y==a&&(this.drawLine(k,this.columnX[p-2],l,this.columnX[p-1],l),x==u&&this.drawLine(k,0,l,this.columnX[p-2],l));k.restore()}}};$MA.Graph.TableBarGraphObject.prototype.updateValueBubbleValue=function(a){this.valueBubbleValue=a};
$MA.Graph.TableBarGraphObject.prototype.plotXAxis=function(){var a=this.xAxis;if(this.primaryAxis)a=this.primaryAxis;var b=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),c=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),d=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),e=this.tableWidth,f=c/(a.ticLabels.length-1),g=this.context;g.save();g.font=a.displayDef.font.toString();g.strokeStyle=(new $MA.Brush(a.primaryLine.strokeBrush.color)).toString();g.fillStyle=(new $MA.Brush(a.primaryLine.strokeBrush.color)).toString();
g.lineWidth=a.primaryLine.width?a.primaryLine.width:this.lineDef;var h;a.primaryLine.visible&&this.drawLine(g,e,b,e+c,b);if(!a.hideValue)for(c=0;c<a.ticLabels.length;c++)a.isLabelVisible(c)&&(h=a.ticLabels[c],h.getTextSize(this.context),this.drawLine(g,e,b,e,b-a.majorTicLength),this.context.fillText(h.toString(),e,b-a.majorTicLength)),e+=f;g.restore();if(a.majorGridLine&&a.majorGridLine.visible){e=parseInt(this.tableWidth,10);g.save();g.strokeStyle="rgba(176,176,176,0.3)";for(c=0;c<a.ticLabels.length;c++)a.isLabelVisible(c)&&
this.drawLine(g,e,b,e,b+d),e+=f;g.restore()}};
$MA.Graph.TableBarGraphObject.prototype.plotX2Axis=function(){if(this.secondaryAxis){var a=this.secondaryAxis,b=a.getMaxStringSize(),c=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),d=this.drawAreas.getY($MA.Graph.DrawAreaType.DATA),e=this.drawAreas.getHeight($MA.Graph.DrawAreaType.DATA),f=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA);e+=d;this.tableWidth=this.calcTableWidth();var g=f/(a.ticLabels.length-1);this.context.clearRect(0,e,f,b.height+a.majorTicLength+5);var h=this.context;h.save();
h.font=a.displayDef.font.toString();h.strokeStyle=(new $MA.Brush(a.primaryLine.strokeBrush.color)).toString();h.fillStyle=(new $MA.Brush(a.primaryLine.strokeBrush.color)).toString();h.lineWidth=a.primaryLine.width?a.primaryLine.width:this.lineDef;var j;a.primaryLine.visible&&this.drawLine(h,c,e,c+f,e);if(!a.hideValue)for(f=0;f<a.ticLabels.length;f++)a.isLabelVisible(f)&&(j=a.ticLabels[f],j.getTextSize(this.context),this.drawLine(h,c,e,c,e+a.majorTicLength),this.context.fillText(j.toString(),c,e+a.majorTicLength+
b.height)),c+=g;h.restore();if(a.majorGridLine&&a.majorGridLine.visible){c=parseInt(this.tableWidth,10);h.save();h.strokeStyle="rgba(176,176,176,0.3)";for(f=0;f<a.ticLabels.length;f++)a.isLabelVisible(f)&&this.drawLine(h,c,e,c,d),c+=g;h.restore()}}};
$MA.Graph.TableBarGraphObject.prototype.drawLegend=function(){if(this.legend.legends==void 0)this.legend.legends=this.getAllLegends();if(!(this.legend.legends.length==1||this.legend.location==$MA.Graph.LegendType.NONE)){var a=this.context;a.save();var b=this.drawAreas.getY($MA.Graph.DrawAreaType.LEGEND),c=this.drawAreas.getHeight($MA.Graph.DrawAreaType.LEGEND);a.font=this.legend.fontStyle+" "+this.legend.fontHeight+"px "+this.legend.fontFamily;var d,e=0,f=this.legend.legends,g,h,j;for(g=this.startLegend;g<
f.length;g++)if(h=f[g],h.isEnabled=this.legendStates.containsKey(h.graphObjIndex+"_"+h.legend_name)?this.legendStates.get(h.graphObjIndex+"_"+h.legend_name):!0,d=a.measureText(h.legend_name),d=d.width,d=34+d+20,e+=d,j=g,e>this.width)break;g=(e>this.width?this.width:e)-4;h=(this.startLegend>0||e>this.width?0:this.width-e)+2;a.fillStyle=this.legendBkColor;a.fillRect(0,b,this.width,c);var e=b+c/2,l=26;l>c&&(l=c);d=a.createLinearGradient(0,e-l/2+2,0,e+l/2+2);d.addColorStop(0,"#838383");d.addColorStop(0.5,
"#000000");a.fillStyle=d;a.strokeStyle="#515151";a.beginPath();$MA.ContextHelper.roundRect(a,h,e-l/2+2,g,l,6);a.closePath();a.fill();a.stroke();if($MA.platform.blackberry)a.clearRect(0,b,this.width,c),a.fillStyle=this.legendBkColor,a.fillRect(0,b,this.width,c),a.fillStyle=d,a.fill(),a.stroke();var b=h,n;for(g=this.startLegend;g<=j;g++){h=f[g];d=a.measureText(h.legend_name);d=d.width;d=34+d+20;c=new $MA.Graph.Series(this,f[g].legend_name);n=new $MA.Graph.DrawContext($MA.Brushes.transparent,$MA.Brushes.transparent);
c.drawContext=n;c.enabled=h.isEnabled;c.graphObjIndex=h.graphObjIndex;this.annotationObjects.push(new $MA.Graph.Rectangle2D(this,n,c,b,e-12,d,24));n=a.globalAlpha;if(!h.isEnabled)a.globalAlpha=0.5;a.fillStyle=c.drawContext.insetShadowBrush?c.drawContext.insetShadowBrush.toString():c.drawContext.fillBrush.toString();a.fillStyle=(new $MA.Brush(f[g].legend_color)).toString();a.beginPath();$MA.ContextHelper.roundRect(a,b+9,e-7,16,16,4);a.closePath();a.fill();a.fillStyle=this.legend.fontColor;a.fillText(h.legend_name,
b+34,e+7);if(g>this.startLegend)a.strokeStyle="#515151",this.drawLine(a,b,e-l/2+2,b,e+l/2+2);if(!h.isEnabled)a.globalAlpha=n;b+=d}a.restore()}};
$MA.Graph.TableBarGraphObject.prototype.isLegendMovable=function(){if(this.legend.legends==void 0)this.legend.legends=this.getAllLegends();if(!(this.legend.legends.length==1||this.legend.location==$MA.Graph.LegendType.NONE)){var a=this.context,b=this.legend.legends,c,d,e=0;for(c=0;c<b.length;c++)d=b[c],d=a.measureText(d.legend_name),e+=34+d.width+20;return e>this.width}};
$MA.Graph.TableBarGraphObject.prototype.updateStartLegend=function(a){if(this.legend.legends==void 0)this.legend.legends=this.getAllLegends();if(!(this.legend.legends.length==1||this.legend.location==$MA.Graph.LegendType.NONE)){var b=this.legend.legends,c;if(!(this.startLegend==0&&a>0)){var d=this.context;d.font=this.legend.fontStyle+" "+this.legend.fontHeight+"px "+this.legend.fontFamily;var e,f=0;for(e=this.startLegend;e<b.length;e++)c=b[e],c=d.measureText(c.legend_name),f+=34+c.width+20;f<=this.width&&
a<0||(this.startLegend-=a)}}};$MA.Graph.TableBarGraphObject.prototype.drawLine=function(a,b,c,d,e){a.beginPath();a.moveTo(b,c);a.lineTo(d,e);a.closePath();a.stroke()};$MA.Graph.TableBarGraphObject.prototype.drawVerticalText=function(a,b,c,d){var e=a.measureText(b);a.save();a.translate(c,d+e.width);a.rotate(1.5*Math.PI);a.fillText(b,10,14);a.restore()};$MA.Graph.TableBarGraphObject.prototype.calcBarWidth=function(){return $MA.Graph.TableBarGraphObject.ROWHEIGHT/2};
$MA.Graph.TableBarGraphObject.prototype.calcBarEntryWidth=function(){return this.getSeriesCount()*$MA.Graph.TableBarGraphObject.ROWHEIGHT};$MA.Graph.TableBarGraphObject.prototype.calcBarGap=function(){return $MA.Graph.TableBarGraphObject.ROWHEIGHT/4};
$MA.Graph.TableBarGraphObject.prototype.calcDisplayEveryNLabels=function(){var a=[this.primaryAxis,this.secondaryAxis],b=a.length,c;for(c=0;c<b;c++)if(a[c]&&a[c].labelsEveryN!=-1){var d=this.drawAreas.getWidth($MA.Graph.DrawAreaType.XAXIS)/(a[c].calcMajorDivs>0?a[c].calcMajorDivs:a.DEFAULTMAJORDIVS),e=a[c].getMaxStringSize();a[c].labelsEveryN=e.width+10>d?Math.ceil((e.width+10)/d):0}};
$MA.Graph.TableBarGraphObject.prototype.resetDrawObj=function(a){a.incr=a.width/$MA.Graph.GraphObject.ANIMATIONCOUNT;a.width=0};$MA.Graph.TableBarGraphObject.prototype.animateDrawObj=function(a){a.width+=a.incr;a.plotPrimitives()};
$MA.Graph.TableBarGraphObject.prototype.plotGradientRect=function(){var a=this.context;a.save();var b=this.getSeriesCount(),c=this.getNumberOfVisibleCategories()*b;this.isWaterfall&&this.showTotal&&(c+=b);b=$MA.Graph.TableBarGraphObject.ROWHEIGHT*(c+1);if(b>this.height)b=this.height,this.legend&&this.legend.location!=$MA.Graph.LegendType.NONE&&(c=this.drawAreas.getHeight($MA.Graph.DrawAreaType.LEGEND),b-=c);c=a.createLinearGradient(0,$MA.Graph.TableBarGraphObject.ROWHEIGHT,0,$MA.Graph.TableBarGraphObject.ROWHEIGHT+
7);c.addColorStop(0,this.beginGridShadowColor);c.addColorStop(1,this.endGridShadowColor);a.fillStyle=c;a.fillRect(0,$MA.Graph.TableBarGraphObject.ROWHEIGHT,this.tableWidth,7);c=a.createLinearGradient(0,0,7,0);c.addColorStop(0,this.beginGridShadowColor);c.addColorStop(1,this.endGridShadowColor);a.fillStyle=c;a.fillRect(0,0,7,b);var d,e=this.columnX.length;for(d=0;d<e;d++)c=a.createLinearGradient(this.columnX[d],0,this.columnX[d]+7,0),c.addColorStop(0,this.beginGridShadowColor),c.addColorStop(1,this.endGridShadowColor),
a.fillStyle=c,a.fillRect(this.columnX[d],0,7,b);c=a.createLinearGradient(this.tableWidth,0,this.tableWidth+7,0);c.addColorStop(0,this.beginGridShadowColor);c.addColorStop(1,this.endGridShadowColor);a.fillStyle=c;a.fillRect(this.tableWidth,0,7,b);a.restore()};$MA.Graph.TableBarGraphObject.prototype.setHorizontalBarHeight=function(a){$MA.Graph.TableBarGraphObject.ROWHEIGHT=a};
$MA.Graph.TableBarGraphObject.prototype.getStyles=function(){var a=$MA.getCSSRule(".chart_table_shadow");if(a!=void 0){if(a.style.background!="")this.beginGridShadowColor=a.style.background;if(a.style.color!="")this.endGridShadowColor=a.style.color}a=$MA.getCSSRule(".chart_xaxis");if(a!=void 0){if(a.style.fontFamily!="")this.xAxis.displayDef.font.family=a.style.fontFamily;if(a.style.fontSize!="")this.xAxis.displayDef.font.size=parseInt(a.style.fontSize,10)}a=$MA.getCSSRule(".chart_yaxis");if(a!=void 0){if(a.style.fontFamily!=
"")this.yAxis.displayDef.font.family=a.style.fontFamily;if(a.style.fontSize!="")this.yAxis.displayDef.font.size=parseInt(a.style.fontSize,10)}};$MA.Graph.TableBarGraphObject.prototype.getCustomisedFillBrush=function(){};
$MA.Graph.TableBarGraphObject.prototype.getLineStartAndEndPosition=function(a,b,c,d,e,f){var g=this.drawAreas.getX($MA.Graph.DrawAreaType.DATA),h=this.drawAreas.getWidth($MA.Graph.DrawAreaType.DATA),h=g+h;if(a==null){if(b.yValue>this.valuesAxis.maxValue||b.yValue<this.valuesAxis.minValue)c=void 0}else a.yValue>this.valuesAxis.maxValue&&b.yValue>this.valuesAxis.maxValue||a.yValue<this.valuesAxis.minValue&&b.yValue<this.valuesAxis.minValue?e=c=void 0:a.yValue>this.valuesAxis.maxValue&&b.yValue<=this.valuesAxis.maxValue&&
b.yValue>=this.valuesAxis.minValue?(f=this.calcCoordinateY(e,f,c,d,h,"right"),e=h):b.yValue>this.valuesAxis.maxValue&&a.yValue<=this.valuesAxis.maxValue&&a.yValue>=this.valuesAxis.minValue?(d=this.calcCoordinateY(e,f,c,d,h,"right"),c=h):a.yValue<this.valuesAxis.minValue&&b.yValue<=this.valuesAxis.maxValue&&b.yValue>=this.valuesAxis.minValue?(f=this.calcCoordinateY(e,f,c,d,g,"left"),e=g):b.yValue<this.valuesAxis.minValue&&a.yValue<=this.valuesAxis.maxValue&&a.yValue>=this.valuesAxis.minValue?(d=this.calcCoordinateY(e,
f,c,d,g,"left"),c=g):a.yValue>this.valuesAxis.maxValue&&b.yValue<this.valuesAxis.minValue?(f=this.calcCoordinateY(e,f,c,d,h,"right"),e=h,d=this.calcCoordinateY(e,f,c,d,g,"left"),c=g):a.yValue<this.valuesAxis.minValue&&b.yValue>this.valuesAxis.maxValue&&(f=this.calcCoordinateY(e,f,c,d,g,"left"),e=g,d=this.calcCoordinateY(e,f,c,d,h,"right"),c=h);return{start:{x:e,y:f},end:{x:c,y:d}}};$MA.Graph.TableBarGraphObject.prototype.drawGridsBack=function(){};
$MA.Graph.TableBarGraphObject.prototype.drawXLabel=function(){};$MA.Graph.TableBarGraphObject.prototype.drawYLabel=function(){};$MA.Graph.TableBarGraphObject.prototype.drawGridsFront=function(){};$MA.Graph.TableBarGraphObject.prototype.setGraphLineWidth=function(a){this.graphLineWidth=a};
$MA.Graph.Share=function(a,b,c){function d(a){f.mouseProcess(a);a.preventDefault();a.stopPropagation()}function e(a){a.touches.length>0?f.mouseProcess(a.touches.item(0),a.type):f.mouseProcess(null,a.type);a.preventDefault();a.stopPropagation()}this.tool=null;this.orgCanvas=a;this.orgContext=this.orgCanvas.getContext("2d");this.toolbar=b;this.toolbarCallback=c;b=a.parentNode;this.canvas=document.createElement("canvas");b.appendChild(this.canvas);this.canvas.style.position="absolute";this.canvas.style.left=
"0px";this.canvas.style.top="0px";this.canvas.width=a.width;this.canvas.height=a.height;this.contentImageCanvas=document.createElement("canvas");this.contentImageCanvas.width=this.canvas.width;this.contentImageCanvas.height=this.canvas.height;var f=this;this.canvas.addEventListener("mousedown",function(a){f.mouseProcess(a);a.preventDefault();a.stopPropagation()},!1);this.canvas.addEventListener("mousemove",d,!1);this.canvas.addEventListener("mouseup",d,!1);this.canvas.addEventListener("touchstart",
function(a){a.touches.length>0&&f.mouseProcess(a.touches.item(0),a.type);a.preventDefault();a.stopPropagation()},!1);this.canvas.addEventListener("touchmove",e,!1);this.canvas.addEventListener("touchend",e,!1);this.canvas.onselectstart=function(){return!1};this.context=this.canvas.getContext("2d");this.reset()};
$MA.Graph.Share.prototype.reset=function(){this.history={pos:-1,data:[]};this.selected=-1;this.colors=null;this.color=$MA.Graph.Share.PEN_COLOR;this.contentImageCanvas.getContext("2d").drawImage(this.orgCanvas,0,0)};$MA.Graph.Share.prototype.updateSize=function(){this.canvas.width=this.orgCanvas.width;this.canvas.height=this.orgCanvas.height};$MA.Graph.Share.prototype.getSize=function(){return{w:this.orgCanvas.width,h:this.orgCanvas.height}};$MA.Graph.Share.SELECT_COLOR="blue";
$MA.Graph.Share.PEN_COLOR="red";$MA.Graph.Share.SELECT_SIZE=2;$MA.Graph.Share.TEXT_SIZE=20;var g_maGraphShareMask=null,g_maGraphShareWindow=null,g_maGraphShare=null,g_maGraphShareToolDefault="Pencil",g_maGraphShareImagesFolder="../images/",g_maGraphSharePaddnig=10;
$MA.Graph.Share.show=function(a,b){g_maGraphShareImagesFolder=b!=void 0?b:$MA.imagesFolder;g_maGraphShareMask=document.createElement("div");g_maGraphShareMask.style.position="absolute";g_maGraphShareMask.style.top="0px";g_maGraphShareMask.style.left="0px";g_maGraphShareMask.style.width=window.innerWidth+"px";g_maGraphShareMask.style.height=window.innerHeight+"px";g_maGraphShareMask.style.backgroundColor="black";g_maGraphShareMask.style.opacity=0.6;g_maGraphShareMask.style.filter="alpha(opacity=60)";
g_maGraphShareMask.onselectstart=function(){return!1};document.body.appendChild(g_maGraphShareMask);g_maGraphShareWindow=document.createElement("div");g_maGraphShareWindow.style.zIndex=1E3;g_maGraphShareWindow.style.position="absolute";g_maGraphShareWindow.style.top=g_maGraphSharePaddnig+"px";g_maGraphShareWindow.style.left=g_maGraphSharePaddnig+"px";g_maGraphShareWindow.style.backgroundColor="white";document.body.appendChild(g_maGraphShareWindow);var c=window.innerWidth;c-=68;g_maGraphShareWindow.innerHTML=
"<div id='g_maToolbar' class='chart_toolbar' style='text-align:center;height:40px;vertical-align:middle;'><h1 style='position:relative;top:4px;'>Chart Sharing</h1><button style='position:absolute;float:left;left:5px;top:4px;margin-left:4px;height:30px;cursor:pointer;' class='chart_button' onclick='javascript:$MA.Graph.Share.hide()'>Close</button><button onclick='javascript:void($MA.Graph.Share.sendMail())' id='g_maSendMailButton' class='chart_button' style='position:relative;float:right;top:3px;margin-right:4px;height:30px;cursor:pointer;display:none'>Send Email</button><button onclick='javascript:void($MA.Graph.Share.saveIt())' id='g_maSaveButton' style='position:absolute;float:right;top:4px;left:"+
c+"px;margin-right:4px;height:30px;cursor:pointer;' class='chart_button'>Save</button></div><div style='position:relative'><canvas id='g_maPainter'></canvas></div><div id='g_maToolbar2' class='chart_toolbar' style='height:40px;cursor:pointer;'>&nbsp;&nbsp;<img src='"+g_maGraphShareImagesFolder+"undo_d_BarButtonItem.png' style='position:relative;top:6px;border:1px solid transparent' id='g_maUndoButton' alt='Undo' title='Undo' onclick='javascript:void($MA.Graph.Share.goHistory(-1))' />&nbsp;<img src='"+
g_maGraphShareImagesFolder+"redo_d_BarButtonItem.png' style='position:relative;top:6px;border:1px solid transparent' id='g_maRedoButton' alt='Redo' title='Redo' onclick='javascript:void($MA.Graph.Share.goHistory(1))' />&nbsp;&nbsp;<img src='"+g_maGraphShareImagesFolder+"move_BarButtonItem.png' style='position:relative;top:6px;border:1px solid transparent' id='g_maMoveButton' alt='Move' title='Move' onclick='javascript:void($MA.Graph.Share.moveIt(this))' />&nbsp;<img src='"+g_maGraphShareImagesFolder+
"erase_d_BarButtonItem.png' style='position:relative;top:6px;border:1px solid transparent' id='g_maDeleteButton' alt='Delete' title='Delete' onclick='javascript:void($MA.Graph.Share.deleteIt())' />&nbsp;&nbsp;<img src='"+g_maGraphShareImagesFolder+"colorpicker_BarButtonItem.png' style='position:relative;top:6px;border:1px solid transparent' id='g_maColorButton' alt='Color Picker' title='Color Picker' onclick='javascript:void($MA.Graph.Share.selectColor())' />&nbsp;&nbsp;<img src='"+g_maGraphShareImagesFolder+
"draw_BarButtonItem.png' style='position:relative;top:6px;border:1px solid transparent' id='g_maPencilButton' alt='Pencil' title='Pencil' onclick='javascript:void($MA.Graph.Share.selectTool(this, 1))' />&nbsp;<img src='"+g_maGraphShareImagesFolder+"drawline_BarButtonItem.png' style='position:relative;top:6px;border:1px solid transparent' id='g_maLineButton' alt='Line' title='Line' onclick='javascript:void($MA.Graph.Share.selectTool(this, 2))' />&nbsp;<img src='"+g_maGraphShareImagesFolder+"drawrectangle_BarButtonItem.png' style='position:relative;top:6px;border:1px solid transparent' id='g_maRectButton' alt='Rectangle' title='Rectangle' onclick='javascript:void($MA.Graph.Share.selectTool(this, 3))' />&nbsp;<img src='"+
g_maGraphShareImagesFolder+"drawcircle_BarButtonItem.png' style='position:relative;top:6px;border:1px solid transparent' id='g_maEllipseButton' alt='Ellipse' title='Ellipse' onclick='javascript:void($MA.Graph.Share.selectTool(this, 4))' />&nbsp;<img src='"+g_maGraphShareImagesFolder+"annotation_BarButtonItem.png' style='position:relative;top:6px;border:1px solid transparent' id='g_maTextButton' alt='Text' title='Text' onclick='javascript:void($MA.Graph.Share.selectTool(this, 5))' />&nbsp;&nbsp;</div>";
g_maGraphShareWindow.style.width=window.innerWidth-g_maGraphSharePaddnig*2+"px";g_maGraphShareWindow.style.height=window.innerHeight-g_maGraphSharePaddnig*2+"px";var c=document.getElementById("g_maPainter"),d=document.getElementById("g_maToolbar"),e=document.getElementById("g_maToolbar2");c.width=g_maGraphShareWindow.clientWidth;c.height=g_maGraphShareWindow.clientHeight-d.offsetHeight-e.offsetHeight;a.copyGraphTo(c);g_maGraphShare=new $MA.Graph.Share(c,e,$MA.Graph.Share.toolbarCallback);g_maGraphShare.setTool(g_maGraphShareToolDefault);
$MA.Graph.Share.toolChanged(document.getElementById("g_maPencilButton"));if($MA.sendGraphShareMail)document.getElementById("g_maSendMailButton").style.display="",document.getElementById("g_maSaveButton").style.display="none"};
$MA.Graph.Share.refresh=function(){if(g_maGraphShareMask){g_maGraphShareMask.style.width=window.innerWidth+"px";g_maGraphShareMask.style.height=window.innerHeight+"px";g_maGraphShareWindow.style.width=window.innerWidth-g_maGraphSharePaddnig*2+"px";g_maGraphShareWindow.style.height=window.innerHeight-g_maGraphSharePaddnig*2+"px";var a=document.getElementById("g_maPainter"),b=document.getElementById("g_maToolbar"),c=document.getElementById("g_maToolbar2");a.width=g_maGraphShareWindow.clientWidth;a.height=
g_maGraphShareWindow.clientHeight-b.offsetHeight-c.offsetHeight;g_maGraphShare.updateSize();g_maGraphShare.refresh()}};$MA.Graph.Share.sendMail=function(){$MA.sendGraphShareMail&&$MA.sendGraphShareMail("g_maPainter")};$MA.Graph.Share.selectTool=function(a,b){var c=g_maGraphShareToolDefault;switch(b){case 1:c="Pencil";break;case 2:c="Line";break;case 3:c="Rect";break;case 4:c="Ellipse";break;case 5:c="Text"}g_maGraphShare.setTool(c);$MA.Graph.Share.toolChanged(a)};
$MA.Graph.Share.toolbarCallback=function(){document.getElementById("g_maDeleteButton").src=g_maGraphShare.selected==-1?g_maGraphShareImagesFolder+"erase_d_BarButtonItem.png":g_maGraphShareImagesFolder+"erase_BarButtonItem.png";document.getElementById("g_maUndoButton").src=g_maGraphShare.isUndo()?g_maGraphShareImagesFolder+"undo_BarButtonItem.png":g_maGraphShareImagesFolder+"undo_d_BarButtonItem.png";document.getElementById("g_maRedoButton").src=g_maGraphShare.isRedo()?g_maGraphShareImagesFolder+"redo_BarButtonItem.png":
g_maGraphShareImagesFolder+"redo_d_BarButtonItem.png";document.getElementById("g_maColorButton").style.backgroundColor=g_maGraphShare.color};$MA.Graph.Share.saveIt=function(){var a=document.getElementById("g_maPainter");window.open().location=a.toDataURL()};$MA.Graph.Share.goHistory=function(a){g_maGraphShare.goHistory(a)};$MA.Graph.Share.moveIt=function(a){g_maGraphShare.setMoveTool();$MA.Graph.Share.toolChanged(a)};
$MA.Graph.Share.toolChanged=function(a){document.getElementById("g_maMoveButton").style.borderColor="transparent";document.getElementById("g_maPencilButton").style.borderColor="transparent";document.getElementById("g_maLineButton").style.borderColor="transparent";document.getElementById("g_maRectButton").style.borderColor="transparent";document.getElementById("g_maEllipseButton").style.borderColor="transparent";document.getElementById("g_maTextButton").style.borderColor="transparent";a.style.borderColor=
"red"};$MA.Graph.Share.deleteIt=function(){g_maGraphShare.deleteSelect()};$MA.Graph.Share.selectColor=function(){g_maGraphShare.selectColor(document.getElementById("g_maColorButton"))};$MA.Graph.Share.hide=function(){g_maGraphShareMask&&(g_maGraphShare.hideColor(),document.body.removeChild(g_maGraphShareMask),document.body.removeChild(g_maGraphShareWindow),g_maGraphShareWindow=g_maGraphShareMask=null)};$MA.Graph.Share.prototype.setColor=function(a){this.color=a;this.tool.colorChanged()};
$MA.Graph.Share.prototype.setTool=function(a){this.tool!=null&&this.tool.clear();this.selected=-1;this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this.refresh();switch(a){case "Pencil":this.tool=new $MA.Graph.Share.Tools.Pencil;break;case "Line":this.tool=new $MA.Graph.Share.Tools.Line;break;case "Rect":this.tool=new $MA.Graph.Share.Tools.Rect;break;case "Ellipse":this.tool=new $MA.Graph.Share.Tools.Ellipse;break;case "Text":this.tool=new $MA.Graph.Share.Tools.Text;break;case "Move":this.tool=
new $MA.Graph.Share.Tools.Move}this.tool.canvas=this.canvas;this.tool.context=this.context;this.tool.share=this;this.tool.init()};$MA.Graph.Share.prototype.setMoveTool=function(){this.setTool("Move")};$MA.Graph.Share.prototype.updateOrg=function(a){a=a==void 0?!0:a;this.orgContext.drawImage(this.canvas,0,0);a&&(this.addHistory(),this.toolbarCallback());this.context.clearRect(0,0,this.canvas.width,this.canvas.height)};
$MA.Graph.Share.prototype.addHistory=function(){this.history.data.length=this.history.pos+1;this.history.data.push(this.tool.getData());this.history.pos++};$MA.Graph.Share.prototype.goHistory=function(a){a=this.history.pos+a;if(a>=-1&&a<this.history.data.length)this.history.pos=a;if(this.selected>this.history.pos)this.selected=-1;this.refresh()};
$MA.Graph.Share.prototype.select=function(a,b){this.selected=-1;var c;for(c=0;c<=this.history.pos;c++){var d=this.getRatioPos(a,b,this.history.data[c].size);if(this.history.data[c].isSelect(d.x,d.y)){this.selected=c;break}}this.refresh()};$MA.Graph.Share.prototype.getRatioPos=function(a,b,c){this.canvas.width!=c.w&&(a*=c.w/this.canvas.width);this.canvas.height!=c.h&&(b*=c.h/this.canvas.height);return{x:a,y:b}};
$MA.Graph.Share.prototype.deleteSelect=function(){if(this.selected!=-1)this.history.data.length=this.history.pos+1,this.history.data.splice(this.selected,1),this.selected>=this.history.data.length&&this.selected--,this.history.pos=this.history.data.length-1,this.refresh()};
$MA.Graph.Share.prototype.refresh=function(){this.orgContext.clearRect(0,0,this.orgCanvas.width,this.orgCanvas.height);this.orgContext.drawImage(this.contentImageCanvas,0,0,this.orgCanvas.width,this.orgCanvas.height);var a;for(a=0;a<=this.history.pos;a++)if(this.history.data[a].draw(this.tool.canvas,this.tool.context),this.updateOrg(!1),this.selected==a){var b=this.history.data[a].getRect();this.orgCanvas.width!=this.history.data[a].size.w&&(b.x*=this.orgCanvas.width/this.history.data[a].size.w,b.w*=
this.orgCanvas.width/this.history.data[a].size.w);this.orgCanvas.height!=this.history.data[a].size.h&&(b.y*=this.orgCanvas.height/this.history.data[a].size.h,b.h*=this.orgCanvas.height/this.history.data[a].size.h);this.drawSelectRect(b)}this.toolbarCallback()};$MA.Graph.Share.prototype.isUndo=function(){return this.history.pos>-1};$MA.Graph.Share.prototype.isRedo=function(){return this.history.pos<this.history.data.length-1};
$MA.Graph.Share.prototype.move=function(a,b,c,d){this.selected!=-1&&(this.history.data[this.selected].move(c-a,d-b),this.refresh())};
$MA.Graph.Share.prototype.drawSelectRect=function(a){var b=this.orgContext.fillStyle;this.orgContext.fillStyle=$MA.Graph.Share.SELECT_COLOR;this.orgContext.fillRect(a.x-$MA.Graph.Share.SELECT_SIZE,a.y-$MA.Graph.Share.SELECT_SIZE,$MA.Graph.Share.SELECT_SIZE*2,$MA.Graph.Share.SELECT_SIZE*2);this.orgContext.fillRect(a.x+a.w/2-$MA.Graph.Share.SELECT_SIZE,a.y-$MA.Graph.Share.SELECT_SIZE,$MA.Graph.Share.SELECT_SIZE*2,$MA.Graph.Share.SELECT_SIZE*2);this.orgContext.fillRect(a.x+a.w-$MA.Graph.Share.SELECT_SIZE,
a.y-$MA.Graph.Share.SELECT_SIZE,$MA.Graph.Share.SELECT_SIZE*2,$MA.Graph.Share.SELECT_SIZE*2);this.orgContext.fillRect(a.x-$MA.Graph.Share.SELECT_SIZE,a.y+a.h/2-$MA.Graph.Share.SELECT_SIZE,$MA.Graph.Share.SELECT_SIZE*2,$MA.Graph.Share.SELECT_SIZE*2);this.orgContext.fillRect(a.x+a.w-$MA.Graph.Share.SELECT_SIZE,a.y+a.h/2-$MA.Graph.Share.SELECT_SIZE,$MA.Graph.Share.SELECT_SIZE*2,$MA.Graph.Share.SELECT_SIZE*2);this.orgContext.fillRect(a.x-$MA.Graph.Share.SELECT_SIZE,a.y+a.h-$MA.Graph.Share.SELECT_SIZE,
$MA.Graph.Share.SELECT_SIZE*2,$MA.Graph.Share.SELECT_SIZE*2);this.orgContext.fillRect(a.x+a.w/2-$MA.Graph.Share.SELECT_SIZE,a.y+a.h-$MA.Graph.Share.SELECT_SIZE,$MA.Graph.Share.SELECT_SIZE*2,$MA.Graph.Share.SELECT_SIZE*2);this.orgContext.fillRect(a.x+a.w-$MA.Graph.Share.SELECT_SIZE,a.y+a.h-$MA.Graph.Share.SELECT_SIZE,$MA.Graph.Share.SELECT_SIZE*2,$MA.Graph.Share.SELECT_SIZE*2);this.orgContext.fillStyle=b};
$MA.Graph.Share.prototype.mouseProcess=function(a,b){if(a){var c=$MA.getMouseXY(a,this.canvas);a._x=c.x;a._y=c.y}b=b==void 0?a.type:b;switch(b){case "touchstart":this.tool.touchstart(a);break;case "touchmove":this.tool.touchmove(a);break;case "touchend":this.tool.touchend(a);break;case "mousedown":this.tool.mousedown(a);break;case "mousemove":this.tool.mousemove(a);break;case "mouseup":this.tool.mouseup(a)}};
$MA.Graph.Share.prototype.selectColor=function(a){if(this.colors==null)this.colors=new $MA.Graph.Share.Utils.ColorPicker(a),this.colors.init(this);this.colors.isShown()?this.colors.hideColors():this.colors.showColors()};$MA.Graph.Share.prototype.hideColor=function(){this.colors&&this.colors.isShown()&&this.colors.hideColors()};$MA.Graph.Share.Utils={};
$MA.Graph.Share.Utils.getX=function(a){var b=a.x!=void 0?a.x:0,b=a.offsetParent!=void 0?$MA.Graph.Share.Utils.getX(a.offsetParent):b;return a.offsetLeft+b};$MA.Graph.Share.Utils.getY=function(a){var b=a.y!=void 0?a.y:0,b=a.offsetParent!=void 0?$MA.Graph.Share.Utils.getY(a.offsetParent):b;return a.offsetTop+b};
$MA.Graph.Share.Utils.ColorPicker=function(a){function b(){c.selectColor(this.style.backgroundColor)}this.colors=["black","navy","blue","green","teal","lime","aqua","maroon","purple","olive","gray","silver","red","fuchsia","yellow","white"];this.colorDiv=null;this.parentDiv=a;this.share=null;var c=this;this.init=function(a){if(this.colorDiv==null){this.share=a;this.colorDiv=document.createElement("div");this.colorDiv.style.zIndex=2E3;document.body.appendChild(this.colorDiv);for(a=0;a<this.colors.length;a++){var c=
document.createElement("div");c.style.display="block";c.style.width="30px";c.style.height="30px";c.style.cursor="pointer";c.style.cursor="hand";c.style.backgroundColor=this.colors[a];c.onclick=b;this.colorDiv.appendChild(c)}}};this.showColors=function(){var a;for(a=0;a<this.colorDiv.children.length;a++){var b=this.colorDiv.children[a];b.style.border=this.share.color==b.style.backgroundColor?"2px solid red":"1px solid #ccc"}this.colorDiv.style.position="absolute";this.colorDiv.style.left=$MA.Graph.Share.Utils.getX(this.parentDiv)+
"px";this.colorDiv.style.display="block";a=$MA.Graph.Share.Utils.getY(this.parentDiv)+this.parentDiv.offsetHeight;this.colorDiv.style.top=a+this.colorDiv.offsetHeight>window.innerHeight?a-this.parentDiv.offsetHeight-this.colorDiv.offsetHeight+"px":a+"px"};this.hideColors=function(){this.colorDiv.style.display="none"};this.isShown=function(){return this.colorDiv.style.display=="block"};this.selectColor=function(a){this.hideColors();this.share.setColor(a);this.share.toolbarCallback()}};
$MA.Graph.Share.Tools=function(){this.context=this.canvas=null};$MA.Graph.Share.Tools.Data=function(){this.draw=function(){};this.isSelect=function(){return!1}};
$MA.Graph.Share.Tools.PencilData=function(){$MA.Graph.Share.Tools.Data.call(this);this.data=[];this.size=this.color=void 0;this.draw=function(a,b){(new $MA.Graph.Share.Tools.Pencil).draw(a,b,this)};this.push=function(a){this.data.push(a)};this.getPoint=function(a){return{x:this.data[a][0],y:this.data[a][1]}};this.getSize=function(){return this.data.length};this.isSelect=function(a,b){var c=this.getRect();return!(a<c.x||a>c.x+c.w||b<c.y||b>c.y+c.h)};this.getRect=function(){var a=Number.MAX_VALUE,b=
Number.MIN_VALUE,c=Number.MAX_VALUE,d=Number.MIN_VALUE,e;for(e=0;e<this.data.length;e++)this.data[e][0]<a&&(a=this.data[e][0]),this.data[e][0]>b&&(b=this.data[e][0]),this.data[e][1]<c&&(c=this.data[e][1]),this.data[e][1]>d&&(d=this.data[e][1]);return{x:a,y:c,w:b-a,h:d-c}};this.move=function(a,b){var c;for(c=0;c<this.data.length;c++)this.data[c][0]+=a,this.data[c][1]+=b}};
$MA.Graph.Share.Tools.LineData=function(){$MA.Graph.Share.Tools.Data.call(this);this.y1=this.x1=this.y0=this.x0=0;this.size=this.color=void 0;this.draw=function(a,b){(new $MA.Graph.Share.Tools.Line).draw(a,b,this)};this.isSelect=function(a,b){var c=this.getRect();return!(a<c.x||a>c.x+c.w||b<c.y||b>c.y+c.h)};this.getRect=function(){return{x:Math.min(this.x0,this.x1),y:Math.min(this.y0,this.y1),w:Math.abs(this.x1-this.x0),h:Math.abs(this.y1-this.y0)}};this.move=function(a,b){this.x0+=a;this.x1+=a;this.y0+=
b;this.y1+=b}};$MA.Graph.Share.Tools.RectData=function(){$MA.Graph.Share.Tools.Data.call(this);this.h=this.w=this.y=this.x=0;this.size=this.color=void 0;this.draw=function(a,b){(new $MA.Graph.Share.Tools.Rect).draw(a,b,this)};this.isSelect=function(a,b){var c=this.getRect();return!(a<c.x||a>c.x+c.w||b<c.y||b>c.y+c.h)};this.getRect=function(){return this};this.move=function(a,b){this.x+=a;this.y+=b}};
$MA.Graph.Share.Tools.EllipseData=function(){$MA.Graph.Share.Tools.Data.call(this);this.h=this.w=this.y=this.x=0;this.size=this.color=void 0;this.draw=function(a,b){(new $MA.Graph.Share.Tools.Ellipse).draw(a,b,this)};this.isSelect=function(a,b){var c=this.getRect();return!(a<c.x||a>c.x+c.w||b<c.y||b>c.y+c.h)};this.getRect=function(){return this};this.move=function(a,b){this.x+=a;this.y+=b}};
$MA.Graph.Share.Tools.TextData=function(){$MA.Graph.Share.Tools.Data.call(this);this.context=null;this.y=this.x=0;this.text="";this.size=this.color=void 0;this.draw=function(a,b){(new $MA.Graph.Share.Tools.Text).draw(a,b,this)};this.isSelect=function(a,b){var c=this.getRect();return!(a<c.x||a>c.x+c.w||b<c.y||b>c.y+c.h)};this.getRect=function(){return{x:this.x,y:this.y,w:this.context.measureText(this.text).width,h:$MA.Graph.Share.TEXT_SIZE}};this.move=function(a,b){this.x+=a;this.y+=b}};
$MA.Graph.Share.Tools.Pencil=function(){var a=this;a.started=!1;a.data=new $MA.Graph.Share.Tools.PencilData;this.touchstart=function(b){a.mousedown(b)};this.touchmove=function(b){a.mousemove(b)};this.touchend=function(b){a.mouseup(b)};this.mousedown=function(b){a.data.color=a.share.color;a.data.size=a.share.getSize();a.context.strokeStyle=a.data.color;a.context.beginPath();a.context.moveTo(b._x,b._y);a.started=!0;a.data.push([b._x,b._y])};this.mousemove=function(b){a.started&&(a.context.lineTo(b._x,
b._y),a.context.stroke(),a.data.push([b._x,b._y]))};this.mouseup=function(b){if(a.started)b&&a.mousemove(b),a.context.closePath(),a.started=!1,a.share.updateOrg(),a.data=new $MA.Graph.Share.Tools.PencilData};this.init=function(){};this.clear=function(){};this.getData=function(){return a.data};this.draw=function(a,c,d){c.clearRect(0,0,a.width,a.height);var e=1,f=1;a.width!=d.size.w&&(e=a.width/d.size.w);a.height!=d.size.h&&(f=a.height/d.size.h);c.strokeStyle=d.color;c.beginPath();a=d.getPoint(0);c.moveTo(a.x*
e,a.y*f);var g;for(g=1;g<d.getSize();g++)a=d.getPoint(g),c.lineTo(a.x*e,a.y*f),c.stroke();c.closePath()};this.colorChanged=function(){}};
$MA.Graph.Share.Tools.Line=function(){var a=this;a.started=!1;a.data=new $MA.Graph.Share.Tools.LineData;this.touchstart=function(b){a.mousedown(b)};this.touchmove=function(b){a.mousemove(b)};this.touchend=function(b){a.mouseup(b)};this.mousedown=function(b){a.started=!0;a.data.size=a.share.getSize();a.data.x0=b._x;a.data.y0=b._y;a.data.color=a.share.color;a.context.strokeStyle=a.data.color};this.mousemove=function(b){if(a.started)a.data.x1=b._x,a.data.y1=b._y,a.draw(a.canvas,a.context,a.data)};this.mouseup=
function(b){if(a.started)b&&a.mousemove(b),a.started=!1,a.share.updateOrg(),a.data=new $MA.Graph.Share.Tools.LineData};this.init=function(){};this.clear=function(){};this.getData=function(){return a.data};this.draw=function(a,c,d){c.clearRect(0,0,a.width,a.height);var e=d.x0,f=d.x1,g=d.y0,h=d.y1;a.width!=d.size.w&&(e*=a.width/d.size.w,f*=a.width/d.size.w);a.height!=d.size.h&&(g*=a.height/d.size.h,h*=a.height/d.size.h);c.strokeStyle=d.color;c.beginPath();c.moveTo(e,g);c.lineTo(f,h);c.stroke();c.closePath()};
this.colorChanged=function(){}};
$MA.Graph.Share.Tools.Rect=function(){var a=this;a.started=!1;a.data=new $MA.Graph.Share.Tools.RectData;this.touchstart=function(b){a.mousedown(b)};this.touchmove=function(b){a.mousemove(b)};this.touchend=function(b){a.mouseup(b)};this.mousedown=function(b){a.started=!0;a.data.size=a.share.getSize();a.x0=b._x;a.y0=b._y;a.data.color=a.share.color;a.context.strokeStyle=a.data.color};this.mousemove=function(b){if(a.started){var c=Math.min(b._x,a.x0),d=Math.min(b._y,a.y0),e=Math.abs(b._x-a.x0),b=Math.abs(b._y-
a.y0);a.data.x=c;a.data.y=d;a.data.w=e;a.data.h=b;a.context.clearRect(0,0,a.canvas.width,a.canvas.height);e&&b&&a.context.strokeRect(c,d,e,b)}};this.mouseup=function(b){if(a.started)b&&a.mousemove(b),a.started=!1,a.share.updateOrg(),a.data=new $MA.Graph.Share.Tools.RectData};this.init=function(){};this.clear=function(){};this.getData=function(){return a.data};this.draw=function(a,c,d){c.clearRect(0,0,a.width,a.height);var e=d.x,f=d.w,g=d.y,h=d.h;a.width!=d.size.w&&(e*=a.width/d.size.w,f*=a.width/
d.size.w);a.height!=d.size.h&&(g*=a.height/d.size.h,h*=a.height/d.size.h);c.strokeStyle=d.color;c.strokeRect(e,g,f,h)};this.colorChanged=function(){}};
$MA.Graph.Share.Tools.Ellipse=function(){var a=this;a.started=!1;a.data=new $MA.Graph.Share.Tools.EllipseData;this.touchstart=function(b){a.mousedown(b)};this.touchmove=function(b){a.mousemove(b)};this.touchend=function(b){a.mouseup(b)};this.mousedown=function(b){a.started=!0;a.data.size=a.share.getSize();a.x0=b._x;a.y0=b._y;a.data.color=a.share.color;a.context.strokeStyle=a.data.color};this.mousemove=function(b){if(a.started){var c=Math.min(b._y,a.y0),d=Math.abs(b._x-a.x0),e=Math.abs(b._y-a.y0);
a.data.x=Math.min(b._x,a.x0);a.data.y=c;a.data.w=d;a.data.h=e;a.context.clearRect(0,0,a.canvas.width,a.canvas.height);d&&e&&a.draw(a.canvas,a.context,a.data)}};this.mouseup=function(b){if(a.started)b&&a.mousemove(b),a.started=!1,a.share.updateOrg(),a.data=new $MA.Graph.Share.Tools.EllipseData};this.init=function(){};this.clear=function(){};this.getData=function(){return a.data};this.draw=function(a,c,d){c.clearRect(0,0,a.width,a.height);var e=d.x,f=d.w,g=d.y,h=d.h;a.width!=d.size.w&&(e*=a.width/d.size.w,
f*=a.width/d.size.w);a.height!=d.size.h&&(g*=a.height/d.size.h,h*=a.height/d.size.h);var a=f/2*0.5522848,j=h/2*0.5522848,l=e+f,n=g+h,f=e+f/2,h=g+h/2;c.strokeStyle=d.color;c.beginPath();c.moveTo(e,h);c.bezierCurveTo(e,h-j,f-a,g,f,g);c.bezierCurveTo(f+a,g,l,h-j,l,h);c.bezierCurveTo(l,h+j,f+a,n,f,n);c.bezierCurveTo(f-a,n,e,h+j,e,h);c.closePath();c.stroke()};this.colorChanged=function(){}};
$MA.Graph.Share.Tools.Text=function(){var a=this;a.data=new $MA.Graph.Share.Tools.TextData;this.inputText=null;this.defaultFontSize=$MA.Graph.Share.TEXT_SIZE+"px Helvetica";this.y=this.x=0;this.touchstart=function(b){a.mousedown(b)};this.touchmove=function(b){a.mousemove(b)};this.touchend=function(b){a.mouseup(b)};this.mousedown=function(b){a.data.context=a.context;a.data.size=a.share.getSize();a.data.color=a.share.color;a.context.fillStyle=a.data.color;a.data.x=b._x;a.data.y=b._y;a.data.text=a.inputText.value;
a.drawText(a.canvas,a.context,a.data)};this.mousemove=function(b){a.context.clearRect(0,0,a.canvas.width,a.canvas.height);a.data.size=a.share.getSize();a.data.x=b._x;a.data.y=b._y;a.data.text=a.inputText.value;a.drawText(a.canvas,a.context,a.data)};this.drawText=function(b,c,d){var e=d.x,f=d.y;b.width!=d.size.w&&(e*=b.width/d.size.w);b.height!=d.size.h&&(f*=b.height/d.size.h);c.fillStyle=d.color;c.font=a.defaultFontSize;c.textBaseline="top";c.fillText(d.text,e,f)};this.mouseup=function(){a.share.updateOrg();
a.data=new $MA.Graph.Share.Tools.TextData};this.init=function(){function b(b){a.onChangeText(b)}var c=document.createElement("input");c.id="inputText";c.type="text";c.size=15;c.value="Text";a.share.toolbar.appendChild(c);c.addEventListener("input",b,!1);c.addEventListener("change",b,!1);a.inputText=c;a.data.size=a.share.getSize();a.data.color=a.share.color;a.context.fillStyle=a.data.color};this.onChangeText=function(){a.context.clearRect(0,0,a.canvas.width,a.canvas.height);a.drawText(a.canvas,a.context,
a.data)};this.clear=function(){a.share.toolbar.removeChild(a.inputText);a.inputText=null};this.getData=function(){return a.data};this.draw=function(b,c,d){c.clearRect(0,0,b.width,b.height);a.drawText(b,c,d)};this.colorChanged=function(){a.data.color=a.share.color;a.context.fillStyle=a.data.color}};
$MA.Graph.Share.Tools.Move=function(){var a=this;a.started=!1;this.touchstart=function(b){a.mousedown(b)};this.touchmove=function(b){a.mousemove(b)};this.touchend=function(b){a.mouseup(b)};this.mousedown=function(b){a.started=!0;a.share.select(b._x,b._y);a.x0=b._x;a.y0=b._y};this.mousemove=function(b){if(a.started)a.share.move(a.x0,a.y0,b._x,b._y),a.x0=b._x,a.y0=b._y};this.mouseup=function(b){if(a.started)b&&a.mousemove(b),a.started=!1,a.share.updateOrg(!1)};this.init=function(){};this.clear=function(){};
this.colorChanged=function(){}};$MA.BI=function(){};$MA.BI.Object=function(a){this._parent=a};$MA.BI.Object.prototype.getOwner=function(){for(var a=this;a!=null&&!(a instanceof $MA.BI.ChartObject);)a=a._parent;return a};$MA.BI.Object.prototype.getParent=function(){return this._parent};$MA.BI.WhatIfColumn=function(a){$MA.BI.Object.call(this,a);this.max=this.min=this.value=this.variableType=this.displayName=this.name=void 0;this.step=1;this.decimals=2};$MA.BI.WhatIfColumn.NAME=0;
$MA.BI.WhatIfColumn.DISPLAYNAME=1;$MA.BI.WhatIfColumn.VARIABLETYPE=2;$MA.BI.WhatIfColumn.VALUE=3;$MA.BI.WhatIfColumn.MIN=4;$MA.BI.WhatIfColumn.MAX=5;$MA.BI.WhatIfColumn.STEP=6;$MA.BI.WhatIfColumn.DECIMALS=7;
$MA.BI.WhatIfColumn.propertyIds=new $MA.Hash("displayname",$MA.BI.WhatIfColumn.DISPLAYNAME,"name",$MA.BI.WhatIfColumn.NAME,"variabletype",$MA.BI.WhatIfColumn.VARIABLETYPE,"value",$MA.BI.WhatIfColumn.VALUE,"min",$MA.BI.WhatIfColumn.MIN,"max",$MA.BI.WhatIfColumn.MAX,"step",$MA.BI.WhatIfColumn.STEP,"decimals",$MA.BI.WhatIfColumn.DECIMALS);$MA.BI.WhatIfColumn.prototype=new $MA.BI.Object;
$MA.BI.WhatIfColumn.prototype.setProperty=function(a,b){var c=$MA.BI.WhatIfColumn.propertyIds.get(a.toLowerCase());if(c==void 0)return!1;switch(c){case $MA.BI.WhatIfColumn.DISPLAYNAME:this.displayName=b;break;case $MA.BI.WhatIfColumn.NAME:this.name=b;break;case $MA.BI.WhatIfColumn.VARIABLETYPE:this.variableType=b;break;case $MA.BI.WhatIfColumn.VALUE:this.value=b;break;case $MA.BI.WhatIfColumn.MIN:this.min=b;break;case $MA.BI.WhatIfColumn.MAX:this.max=b;break;case $MA.BI.WhatIfColumn.STEP:this.step=
b;break;case $MA.BI.WhatIfColumn.DECIMALS:this.decimals=b}return!0};
$MA.BI.WhatIfColumn.prototype.getProperty=function(a){a=$MA.BI.WhatIfColumn.propertyIds.get(a.toLowerCase());if(a!=void 0)switch(a){case $MA.BI.WhatIfColumn.DISPLAYNAME:return this.displayName;case $MA.BI.WhatIfColumn.NAME:return this.name;case $MA.BI.WhatIfColumn.VARIABLETYPE:return this.variableType;case $MA.BI.WhatIfColumn.VALUE:return this.value;case $MA.BI.WhatIfColumn.MIN:return this.min;case $MA.BI.WhatIfColumn.MAX:return this.max;case $MA.BI.WhatIfColumn.STEP:return this.step;case $MA.BI.WhatIfColumn.DECIMALS:return this.decimals}};
$MA.BI.WhatIfColumns=function(a){$MA.BI.Object.call(this,a);this.columns=[];this.builtin=!0};$MA.BI.WhatIfColumns.COLUMN=0;$MA.BI.WhatIfColumns.BUILTIN=1;$MA.BI.WhatIfColumns.propertyIds=new $MA.Hash("column",$MA.BI.WhatIfColumns.COLUMN,"builtin",$MA.BI.WhatIfColumns.BUILTIN);$MA.BI.WhatIfColumns.prototype=new $MA.BI.Object;
$MA.BI.WhatIfColumns.prototype.createObject=function(a){a=$MA.BI.WhatIfColumns.propertyIds.get(a.toLowerCase());if(a==void 0)return null;var b=null;switch(a){case $MA.BI.WhatIfColumns.COLUMN:b=new $MA.BI.WhatIfColumn(this),this.columns.push(b)}return b};$MA.BI.WhatIfColumns.prototype.setProperty=function(a,b){var c=$MA.BI.WhatIfColumns.propertyIds.get(a.toLowerCase());if(c==void 0)return!1;switch(c){case $MA.BI.WhatIfColumns.BUILTIN:this.builtin=b==="false"?!1:!0}return!0};
$MA.BI.WhatIfColumns.prototype.getProperty=function(a){a=$MA.BI.WhatIfColumns.propertyIds.get(a.toLowerCase());if(a!=void 0)switch(a){case $MA.BI.WhatIfColumns.BUILTIN:return this.builtin}};$MA.BI.ZoomingLevel=function(a){$MA.BI.Object.call(this,a);this.title=this.query=this.categoryColumn=void 0};$MA.BI.ZoomingLevel.CATEGORYCOLUMN=0;$MA.BI.ZoomingLevel.QUERY=1;$MA.BI.ZoomingLevel.TITLE=2;
$MA.BI.ZoomingLevel.propertyIds=new $MA.Hash("categorycolumn",$MA.BI.ZoomingLevel.CATEGORYCOLUMN,"query",$MA.BI.ZoomingLevel.QUERY,"title",$MA.BI.ZoomingLevel.TITLE);$MA.BI.ZoomingLevel.prototype=new $MA.BI.Object;
$MA.BI.ZoomingLevel.prototype.setProperty=function(a,b){var c=$MA.BI.ZoomingLevel.propertyIds.get(a.toLowerCase());if(c==void 0)return!1;switch(c){case $MA.BI.ZoomingLevel.CATEGORYCOLUMN:this.categoryColumn=b;break;case $MA.BI.ZoomingLevel.QUERY:this.query=b;break;case $MA.BI.ZoomingLevel.TITLE:this.title=b}return!0};
$MA.BI.ZoomingLevel.prototype.getProperty=function(a){a=$MA.BI.ZoomingLevel.propertyIds.get(a.toLowerCase());if(a!=void 0)switch(a){case $MA.BI.ZoomingLevel.CATEGORYCOLUMN:return this.categoryColumn;case $MA.BI.ZoomingLevel.QUERY:return this.query;case $MA.BI.ZoomingLevel.TITLE:return this.title}};$MA.BI.ZoomingLevels=function(a){$MA.BI.Object.call(this,a)};$MA.BI.ZoomingLevels.ZOOMINGLEVEL=0;$MA.BI.ZoomingLevels.propertyIds=new $MA.Hash("zoominglevel",$MA.BI.ZoomingLevels.ZOOMINGLEVEL);
$MA.BI.ZoomingLevels.prototype=new $MA.BI.Object;$MA.BI.ZoomingLevels.prototype.createObject=function(a){a=$MA.BI.ZoomingLevels.propertyIds.get(a.toLowerCase());if(a==void 0)return null;var b=null;switch(a){case $MA.BI.ZoomingLevels.ZOOMINGLEVEL:b=new $MA.BI.ZoomingLevel(this),this.getOwner().zoomingLevels.push(b)}return b};
$MA.BI.ChartObject=function(a){$MA.BI.Object.call(this,a);this.zoomingLevels=[];this.dataview=this.whatIfColumns=void 0;this.dvObj=new $MA.DataView.DataViewObject(this);this.dvObj.setProperty("Style","graph");this.graph=this.dvObj.createObject("graph");this.level=0;this.seriesFilterValues=this.categoryFilterValues=this.maxVisibleItems=void 0};$MA.BI.ChartObject.ANIMATION=0;$MA.BI.ChartObject.CATEGORY=1;$MA.BI.ChartObject.CHARTTYPE=2;$MA.BI.ChartObject.NAME=3;$MA.BI.ChartObject.QUERY=4;
$MA.BI.ChartObject.SERIES=5;$MA.BI.ChartObject.TITLE=6;$MA.BI.ChartObject.WHATIFCOLUMNS=7;$MA.BI.ChartObject.VALUES=8;$MA.BI.ChartObject.ZOOMINGLEVELS=9;$MA.BI.ChartObject.PIESTYLE=10;$MA.BI.ChartObject.CATEGORIES=11;$MA.BI.ChartObject.LEGEND=12;$MA.BI.ChartObject.SUBGRAPH=13;$MA.BI.ChartObject.SHOWTOTAL=14;$MA.BI.ChartObject.PARENTASTOTAL=15;$MA.BI.ChartObject.SUPPLIEDTOTALS=16;
$MA.BI.ChartObject.propertyIds=new $MA.Hash("animation",$MA.BI.ChartObject.ANIMATION,"category",$MA.BI.ChartObject.CATEGORY,"charttype",$MA.BI.ChartObject.CHARTTYPE,"piestyle",$MA.BI.ChartObject.PIESTYLE,"name",$MA.BI.ChartObject.NAME,"query",$MA.BI.ChartObject.QUERY,"series",$MA.BI.ChartObject.SERIES,"title",$MA.BI.ChartObject.TITLE,"values",$MA.BI.ChartObject.VALUES,"whatifcolumns",$MA.BI.ChartObject.WHATIFCOLUMNS,"zoominglevels",$MA.BI.ChartObject.ZOOMINGLEVELS,"categories",$MA.BI.ChartObject.CATEGORIES,
"legend",$MA.BI.ChartObject.LEGEND,"chart",$MA.BI.ChartObject.SUBGRAPH,"layer",$MA.BI.ChartObject.SUBGRAPH,"showtotal",$MA.BI.ChartObject.SHOWTOTAL,"parentastotal",$MA.BI.ChartObject.PARENTASTOTAL,"suppliedtotals",$MA.BI.ChartObject.SUPPLIEDTOTALS);$MA.BI.ChartObject.prototype=new $MA.BI.Object;
$MA.BI.ChartObject.prototype.createObject=function(a){var b=$MA.BI.ChartObject.propertyIds.get(a.toLowerCase());if(b==void 0)return null;var c=null;switch(b){case $MA.BI.ChartObject.CATEGORY:case $MA.BI.ChartObject.CATEGORIES:case $MA.BI.ChartObject.SERIES:case $MA.BI.ChartObject.VALUES:case $MA.BI.ChartObject.SUBGRAPH:c=this.graph.createObject(a);break;case $MA.BI.ChartObject.WHATIFCOLUMNS:this.whatIfColumns=c=new $MA.BI.WhatIfColumns(this);break;case $MA.BI.ChartObject.ZOOMINGLEVELS:c=new $MA.BI.ZoomingLevels(this)}return c};
$MA.BI.ChartObject.prototype.setProperty=function(a,b){var c=a.indexOf(".");if(c>0){var d=a.substring(0,c).toLowerCase(),e=a.substring(c+1,a.length),f;if(d.indexOf("values[")==0)c=this.getIndex(d),c!=-1&&(f=this.graph.getValueObject(c));else if(d.indexOf("categories[")==0)c=this.getIndex(d),c!=-1&&(f=this.graph.getCategoryObject(c));else if(d.indexOf("values")==0)f=this.graph.values;else if(d.indexOf("category")==0)f=this.graph.category;else if(d.indexOf("zoominglevels")==0)c=this.getIndex(d),c!=
-1&&this.zoomingLevels.length>c&&(f=this.zoomingLevels[c]);else if(d.indexOf("whatifcolumns")==0)c=this.getIndex(d),c!=-1&&this.whatIfColumns!=void 0&&this.whatIfColumns.columns.length>c&&(f=this.whatIfColumns.columns[c]);else if(f=this.graph.getObject(d),!f&&(f=this.graph.getGraph(d)))c=e.indexOf("."),c>0&&(d=e.substring(0,c).toLowerCase(),e=e.substring(c+1),f=f.getObject(d));if(f!=void 0)return f.setProperty(e,b);return!1}c=$MA.BI.ChartObject.propertyIds.get(a.toLowerCase());if(c==void 0)return!1;
switch(c){case $MA.BI.ChartObject.CHARTTYPE:case $MA.BI.ChartObject.PIESTYLE:case $MA.BI.ChartObject.ANIMATION:case $MA.BI.ChartObject.LEGEND:case $MA.BI.ChartObject.NAME:case $MA.BI.ChartObject.QUERY:case $MA.BI.ChartObject.TITLE:case $MA.BI.ChartObject.SHOWTOTAL:case $MA.BI.ChartObject.PARENTASTOTAL:case $MA.BI.ChartObject.SUPPLIEDTOTALS:this.graph.setProperty(a,b)}return!0};
$MA.BI.ChartObject.prototype.getIndex=function(a){var b=a.lastIndexOf("["),c=a.lastIndexOf("]");if(b>0&&c>0)return a=a.substring(b+1,c),parseInt(a,10);return-1};
$MA.BI.ChartObject.prototype.getProperty=function(a){var b=a.indexOf(".");if(b>0){var c=a.substring(0,b).toLowerCase(),a=a.substring(b+1,a.length),d;if(c.indexOf("values[")==0)b=this.getIndex(c),b!=-1&&(d=this.graph.getValueObject(b));else if(c.indexOf("categories[")==0)b=this.getIndex(c),b!=-1&&(d=this.graph.getCategoryObject(b));else if(c.indexOf("zoominglevels")==0)b=this.getIndex(c),b!=-1&&this.zoomingLevels.length>b&&(d=this.zoomingLevels[b]);else if(c.indexOf("whatifcolumns")==0)b=this.getIndex(c),
b!=-1&&this.whatIfColumns!=void 0&&this.whatIfColumns.columns.length>b&&(d=this.whatIfColumns.columns[b]);else if(d=this.graph.getObject(c),!d&&(d=this.graph.getGraph(c)))b=a.indexOf("."),b>0&&(c=a.substring(0,b).toLowerCase(),a=a.substring(b+1),d=d.getObject(c));if(d!=void 0)return d.getProperty(a)}else{b=$MA.BI.ChartObject.propertyIds.get(a.toLowerCase());if(b==void 0)return!1;switch(b){case $MA.BI.ChartObject.CHARTTYPE:case $MA.BI.ChartObject.PIESTYLE:case $MA.BI.ChartObject.ANIMATION:case $MA.BI.ChartObject.LEGEND:case $MA.BI.ChartObject.NAME:case $MA.BI.ChartObject.QUERY:case $MA.BI.ChartObject.TITLE:case $MA.BI.ChartObject.SHOWTOTAL:case $MA.BI.ChartObject.PARENTASTOTAL:case $MA.BI.ChartObject.SUPPLIEDTOTALS:return this.graph.getProperty(a)}}};
$MA.BI.ChartObject.prototype.getChartType=function(){return this.graph.getChartType()};$MA.BI.ChartObject.prototype.getQuery=function(){return this.graph.getQueries()};$MA.BI.ChartObject.prototype.retrieve=function(a){var b=this._parent;this.retrievingFlag=!0;b.trigger("retrievestart",b.id);if(b=window.executeMAQuery)if(a instanceof Array){var c,d=a.length;for(c=0;c<d;c++)b(this,a[c].query,this.filterValues,a[c].name)}else b(this,a,this.filterValues)};
$MA.BI.ChartObject.prototype.setDataTable=function(a,b){a!=void 0&&(this.dvObj.setTable(a.getTable(),b),this.resetDataTable(a,b),a.setCallBack(this))};
$MA.BI.ChartObject.prototype.resetDataTable=function(a,b){var c=this._parent,d=this.dvObj.getGraphGob().getGraph(b),e=d.getTable();c.categorySortOrder?e.sortOrder=c.categorySortOrder:this.dvObj.setTableSortOrder(b);var f=d.getCategoryCount();d.resetExprs();var g;if(this.zoomingLevels.length>0){g=this.zoomingLevels[this.level].categoryColumn;d.setCategoryExpr(d.parseExpr(this.dvObj,g));for(f=this.level-1;f>=0;f--)d.addGroupExpr(d.parseExpr(this.dvObj,this.zoomingLevels[f].categoryColumn))}else if(f>
1){d.setCategoryExpr(d.parseExpr(this.dvObj,d.getCategoryColumn(f-1)));for(f-=2;f>=0;f--)d.addGroupExpr(d.parseExpr(this.dvObj,d.getCategoryColumn(f)))}else d.setCategoryExpr();g=d.getValueCount();for(f=0;f<g;f++){var h=d.getValueObject(f).getProperty("Expression");this.dvObj.currentGraph=b;d.setValueExpr(f,d.parseExpr(this.dvObj,h))}if(d.getObject("Series"))f=d.getObject("Series").column,d.setSeriesExpr(d.parseExpr(this.dvObj,f));this.zoomingLevels.length==0&&c.chartView&&this.chartType=="bubble"&&
(f=c.chartView.getGraph(),g=d.getObject("Category").getProperty("Column"),(d=this.dvObj.getTableColumn(g))&&f.setDataScattered(d.type==$MA.TableColumnType.DOUBLE));if(e.getRowCount()>0)c.trigger("retrieveend",c.id),this.retrievingFlag=!1};$MA.BI.ChartObject.prototype.resetGraphExprs=function(){this.dvObj.getGraphGob().resetExprs()};
$MA.BI.ChartObject.prototype.refresh=function(){var a=this._parent;if(a.chartView){if(this.retrievingFlag)a.trigger("retrieveend",a.id),this.retrievingFlag=!1;if(a.chartView.refreshAction==void 0)a.chartView.refreshAction="initialize"}a.refresh()};$MA.BI.ChartObject.prototype.getNumberOfZoomingLevels=function(){return this.zoomingLevels.length};$MA.BI.DrillDownObject=function(a){$MA.BI.Object.call(this,a);this.chartObjs=[]};$MA.BI.DrillDownObject.CHART=0;
$MA.BI.DrillDownObject.propertyIds=new $MA.Hash("chart",$MA.BI.DrillDownObject.CHART);$MA.BI.DrillDownObject.prototype=new $MA.BI.Object;$MA.BI.DrillDownObject.prototype.createObject=function(a){a=$MA.BI.DrillDownObject.propertyIds.get(a.toLowerCase());if(a==void 0)return null;var b=null;switch(a){case $MA.BI.DrillDownObject.CHART:b=new $MA.BI.ChartObject,this.chartObjs.push(b)}return b};
$MA.BI.SimpleChartView=function(a,b){this.id=a;this.graphViewElem=this.titleBarElem=void 0;this.lastTouchEvent=new Date;this.chartObj=b;this.isDataChanged=!1;this.orientation=window.orientation;this.selectedCategoryValue="";this.selectedCategoryGroup=[];this.selectedCategoryIndex=0;this.secondaryPercentage=this.primaryAxisPalette=this.secondaryAxisPalette=this.secondaryAxisShowPrimaryLine=this.secondaryAxisShowGrid=this.secondaryAxisThickness=this.secondaryAxisShowLabel=this.secondaryAxisCustomColorValue=
this.secondaryAxisCustomMaxValue=this.secondaryAxisCustomMinValue=void 0;(this.elem=document.getElementById(a))&&this.elem.addEventListener("touchstart",this.onChartTouchStart,!1)};$MA.BI.SimpleChartView.TITLEBAR_HEIGHT=28;$MA.BI.SimpleChartView.BUBBLE_VALUE_HEIGHT=25;$MA.BI.SimpleChartView.CLICK_TOLERANCE=3;
$MA.BI.SimpleChartView.prototype.onChartTouchStart=function(a){if(a.srcElement.id==this.id||a.srcElement instanceof HTMLCanvasElement)document.activeElement!=a.srcElement&&$MA.triggerJQueryEvent(document.activeElement,"hide"),a.preventDefault(),a.stopPropagation()};$MA.BI.SimpleChartView.getOwner=function(a){for(;a&&a.macontrol==void 0;)a=a.parentNode;return a};
$MA.BI.SimpleChartView.prototype.createTitleBar=function(a){var b=document.createElement("div");b.id=this.id+"_title";b.style.position="relative";b.style.width="100%";b.style.height=$MA.BI.SimpleChartView.TITLEBAR_HEIGHT+"px";b.style.borderTop="1px";b.style.borderBottom="1px";b.className="chart_titlebar";var c=$MA.getCSSRule(".chart_titlebar");if(c==void 0)b.style.background="#008FD3";var d=document.createElement("label");d.style.position="absolute";d.style.top="5px";d.style.left="5px";d.className=
"chart_title";c=$MA.getCSSRule(".chart_titlebar > .chart_title");if(c==void 0)d.style.color="#FFFFFF";d.style.height="100%";d.style.fontSize="12px";b.appendChild(d);d=document.createElement("canvas");d.style.cssFloat="right";d.width=$MA.BI.SimpleChartView.TITLEBAR_HEIGHT;d.height=$MA.BI.SimpleChartView.TITLEBAR_HEIGHT;d.className="fullscreen_icon";d.hasOwnProperty("ontouchend")?d.addEventListener("touchend",this.maximize,!1):d.addEventListener("mousedown",this.maximize,!1);var e=d.getContext?d.getContext("2d"):
null,c=$MA.getCSSRule(".chart_titlebar > .fullscreen_icon");if(c==void 0)e.strokeStyle="#FFFFFF",e.rect(3,3,$MA.BI.SimpleChartView.TITLEBAR_HEIGHT-8,$MA.BI.SimpleChartView.TITLEBAR_HEIGHT-8),e.stroke();b.appendChild(d);a.appendChild(b);this.titleBarElem=b};
$MA.BI.SimpleChartView.prototype.maximize=function(a){var b=$MA.BI.SimpleChartView.getOwner(a.target);if(!(b==void 0||b.offsetHeight==0)){var a=$MA.BI.SimpleChartView.getChartView(b),c=a.chartObj._parent;if(b.hasOwnProperty("ontouchend")){if(b=new Date,b.getTime()-a.lastTouchEvent.getTime()>500)c.trigger("maximize",a.id),a.lastTouchEvent=b}else c.trigger("maximize",a.id)}};
$MA.BI.SimpleChartView.prototype.createGraphView=function(a){var b=document.createElement("div");b.id=this.id+"_graph";b.style.position="relative";b.style.width=this.getGraphViewWidth(a);b.style.height=this.getGraphViewHeight(a);b.className="chart";if($MA.getCSSRule(".chart")==void 0)a.style.background="white";a.appendChild(b);this.graphViewElem=b;new $MA.DataView(b.id)};$MA.BI.SimpleChartView.prototype.getChart=function(){return this.elem.macontrol};$MA.BI.SimpleChartView.getChart=function(a){return a.macontrol};
$MA.BI.SimpleChartView.getChartView=function(a){return $MA.BI.SimpleChartView.getChart(a).chartView};$MA.BI.SimpleChartView.prototype.getGraphView=function(){return this.graphViewElem.macontrol};$MA.BI.SimpleChartView.prototype.refreshGraphView=function(){this.getGraphView().refresh();this.whatIfViewElem==void 0&&this.chartObj.whatIfColumns&&!this.chartObj.whatIfColumns.builtin&&this.initializeWIView()};$MA.BI.SimpleChartView.prototype.refreshGraphData=function(){this.getGraphView().refreshData()};
$MA.BI.SimpleChartView.prototype.redrawGraphView=function(){var a=this.getGraphElem();this.getGraph().redraw(a)};$MA.BI.SimpleChartView.prototype.getGraphGob=function(){return this.getGraphView().dvObj.getGraphGob()};$MA.BI.SimpleChartView.prototype.getGraphElem=function(){var a=this.graphViewElem.children;return a[a.length-1].children[0]};$MA.BI.SimpleChartView.prototype.getGraph=function(){return this.getGraphElem().macontrol};
$MA.BI.SimpleChartView.prototype.getGraphViewHeight=function(a){return this.titleBarElem==void 0?a.offsetHeight+"px":a.offsetHeight-$MA.BI.SimpleChartView.TITLEBAR_HEIGHT+"px"};$MA.BI.SimpleChartView.prototype.getGraphViewWidth=function(){return"100%"};$MA.BI.SimpleChartView.prototype.getTableView=function(){return this.tableViewElem.macontrol};$MA.BI.SimpleChartView.prototype.getRangeSelectorView=function(){return this.rangeSelectorViewElem.macontrol};
$MA.BI.SimpleChartView.prototype.getRangeSelectorTextView=function(){var a=null,b=this.rangeSelectorViewElem;if(b&&b.textElem)a=b.textElem.macontrol;return a};$MA.BI.SimpleChartView.prototype.setTitle=function(a){if(this.titleBarElem)this.titleBarElem.children[0].innerHTML=a};$MA.BI.SimpleChartView.prototype.setLegend=function(a){this.getGraph().setLegend(a)};
$MA.BI.SimpleChartView.prototype.setLegendOffset=function(a,b){(this instanceof $MA.BI.PieChartView||this instanceof $MA.BI.SimplePieChartView)&&this.getGraph().setLegendOffset(a,b)};$MA.BI.SimpleChartView.prototype.setDataPointsColor=function(a,b){this.getGraph().setDataPointsColor(a,b)};$MA.BI.SimpleChartView.prototype.getProperty=function(a){return this.chartObj.getProperty(a)};$MA.BI.SimpleChartView.prototype.getSelectedCategory=function(){return this.selectedCategoryValue};
$MA.BI.SimpleChartView.prototype.getSelectedCategoryGroup=function(){return this.selectedCategoryGroup};$MA.BI.SimpleChartView.prototype.getSelectedSeries=function(a){var b=this.selectedSeriesName.length;if(a!=void 0){var c;for(c=0;c<b;c++)if(this.selectedSeriesName[c].chartName==a)return this.selectedSeriesName[c].seriesName}else if(b>0)return this.selectedSeriesName[0].seriesName};$MA.BI.SimpleChartView.prototype.getFirstItem=function(){return this.getGraphGob().getFirstItem()};
$MA.BI.SimpleChartView.prototype.setFirstItem=function(a){this.getGraphGob().setFirstItem(a)};$MA.BI.SimpleChartView.prototype.getMaxItems=function(){return this.getGraphGob().getMaxItems()};$MA.BI.SimpleChartView.prototype.setMaxItems=function(a){this.getGraphGob().setMaxItems(a)};$MA.BI.SimpleChartView.prototype.getSelectedCategoryIndexRel=function(){return this.selectedCategoryIndex-this.getGraphGob().getFirstItem()};$MA.BI.SimpleChartView.prototype.getSelectedCategoryIndex=function(){return this.selectedCategoryIndex};
$MA.BI.SimpleChartView.prototype.setSelectedCategoryIndex=function(a,b){var c,d;c=this.getGraphGob();b&&c.getMaxItems()>0&&(d=c.getFirstItem(),c=d+c.getMaxItems()-1,a<d?a=d:a>c&&(a=c));this.selectedCategoryIndex=a};$MA.BI.SimpleChartView.prototype.refreshSelectedCategoryIndex=function(){this.setSelectedCategoryIndex(this.selectedCategoryIndex,!0)};
$MA.BI.SimpleChartView.prototype.retrieve=function(a){var b=this.chartObj,c=b.dvObj;if(a){var d=c.getGraphGob();d.setFirstItem(0);d.setMaxItems();c.setTableBuffer("display",[]);this.categoryList=void 0;this.isDataChanged=!0;this.refreshAction="initialize";b.retrieve(a);c.getRowCount()!=0&&this.refreshAsync()}};$MA.BI.SimpleChartView.prototype.setPrimaryAxisProperties=function(){};
$MA.BI.SimpleChartView.prototype.setSecondaryAxisProperties=function(a,b){var c=a.split(".")[2];if(c=="min")this.secondaryAxisCustomMinValue=$MA.parseFloat(b);else if(c=="max")this.secondaryAxisCustomMaxValue=$MA.parseFloat(b);else if(c=="color")this.secondaryAxisCustomColorValue=b;else if(c=="showlabel")this.secondaryAxisShowLabel=b;else if(c=="thickness")this.secondaryAxisThickness=b;else if(c=="showgrid")this.secondaryAxisShowGrid=b;else if(c=="showprimaryline")this.secondaryAxisShowPrimaryLine=
b;else if(c=="percentage")this.secondaryPercentage=b;var d=this.getGraph(),e=this.getGraphGob(),f=e.getChildrenCount(),g,h,j;for(j=0;j<f;j++)if(g=e.getGraph(j),h=g.getObject("values"),g=g.getName(),h=h.getProperty("secondaryAxis")){c=="color"?d.setPrimaryLineColor("values",this.secondaryAxisCustomColorValue,g):c=="min"?d.setValueAxisMin(this.secondaryAxisCustomMinValue,g):c=="max"?d.setValueAxisMax(this.secondaryAxisCustomMaxValue,g):c=="showlabel"?d.setAxisLabelVisibility("values",this.secondaryAxisShowLabel,
g):c=="thickness"?d.setPrimaryLineThickness("values",this.secondaryAxisThickness,g):c=="showgrid"?d.setMajorGridLine("values",this.secondaryAxisShowGrid,g):c=="showprimaryline"?d.setPrimaryLine("values",this.secondaryAxisShowPrimaryLine,g):c=="percentage"&&d.setPercentage("values",this.secondaryPercentage,g);break}};
$MA.BI.SimpleChartView.prototype.getSecondaryAxisProperties=function(a){a=a.split(".")[2];switch(a){case "min":if(this.secondaryAxisCustomMinValue)return this.secondaryAxisCustomMinValue;break;case "max":if(this.secondaryAxisCustomMinValue)return this.secondaryAxisCustomMaxValue;break;case "color":if(this.secondaryAxisCustomMinValue)return this.secondaryAxisCustomColorValue;break;case "showlabel":if(this.secondaryAxisCustomMinValue)return this.secondaryAxisShowLabel;break;case "thickness":if(this.secondaryAxisCustomMinValue)return this.secondaryAxisThickness;
break;case "showgrid":if(this.secondaryAxisCustomMinValue)return this.secondaryAxisShowGrid;break;case "showprimaryline":if(this.secondaryAxisCustomMinValue)return this.secondaryAxisShowPrimaryLine;break;case "percentage":if(this.secondaryPercentage)return this.secondaryPercentage}var b=this.getGraphGob(),c=b.getChildrenCount(),d,e;if(c>0){var f,g;for(f=0;f<c;f++)d=b.getGraph(f),g=d.getObject("values"),(d=g.getProperty("secondaryAxis"))&&(e=g)}if(e)switch(a){case "min":return e.getProperty("min");
case "max":return e.getProperty("max");case "color":return e.getProperty("color");case "showlabel":return e.getProperty("showlabel");case "thickness":return e.getProperty("thickness");case "showgrid":return e.getProperty("showgrid");case "showprimaryline":return e.getProperty("showprimaryline");case "percentage":return e.getProperty("percentage")}};
$MA.BI.SimpleChartView.prototype.setPalette=function(a,b){b!=void 0&&b.toLowerCase()=="secondaryaxis"?this.secondaryAxisPalette=a:b==void 0||b.toLowerCase()=="primaryaxis"?this.primaryAxisPalette=a:this.getGraph().setPalette(a,b);this.refreshAction="initialize"};
$MA.BI.SimpleChartView.prototype.setProperty=function(a,b){var c=this.getGraph(),a=a.toString(),b=b.toString();if(this.chartObj.setProperty(a,b)){var d=a.indexOf(".");if(d>0){var e=a.substring(0,d).toLowerCase(),f=a.substring(d+1,a.length);if(e.indexOf("category")===0||e.indexOf("series")===0){if(f=="column")this.chartObj.resetGraphExprs();else if(f=="format")c.setFormat(e,b);else if(f=="displayname")c.setLabel(e,b);else if(e.indexOf("category")===0)d=this.getGraphGob(),d=d.getObject(e),d=d.getProperty(f),
f=="min"?c.setCategoryAxisMin(d):f=="max"?c.setCategoryAxisMax(d):f=="showlabel"?c.setAxisLabelVisibility("category",d):f=="showprimaryline"?c.setPrimaryLine("category",d):f=="color"?c.setPrimaryLineColor("category",d):f=="thickness"?c.setPrimaryLineThickness("category",d):f=="showgrid"?c.setMajorGridLine("category",d):f=="displaylastlabel"?c.setDisplayLastCategoryLabel("category",d):f=="sortorder"?(this.chartObj.resetDataTable(),this.refreshAction="initialize"):f=="percentage"&&c.setPercentage(e,
d);this.refreshAsync()}else if(e=="values")d=this.getGraphGob(),d=d.getObject(e),d=d.getProperty(f),f=="min"?(this.enableSecondaryAxis(),c.setValueAxisMin(d)):f=="max"?(this.enableSecondaryAxis(),c.setValueAxisMax(d)):f=="showlabel"?c.setAxisLabelVisibility(e,d):f=="showgrid"?c.setMajorGridLine(e,d):f=="showprimaryline"?c.setPrimaryLine(e,d):f=="color"?c.setPrimaryLineColor(e,d):f=="thickness"?c.setPrimaryLineThickness(e,d):f=="percentage"&&c.setPercentage(e,d),this.refreshAsync();else if(e.indexOf("value")==
0)f=="expression"?this.chartObj.resetGraphExprs():f=="format"?c.setFormat("values",b):f=="displayname"&&c.setLabel("values",b),this.refreshAsync();else if(e.indexOf("categories")==0)f=="expression"?this.chartObj.resetGraphExprs():f=="format"?c.setFormat("category",b):f=="displayname"&&c.setLabel("category",b),this.refreshAsync();else if(e.indexOf("zoominglevels")==0)if(c=a.lastIndexOf("["),e=a.lastIndexOf("]"),c=a.substring(c+1,e),c=parseInt(c,10),f=="query"&&c==this.chartObj.level)this.retrieve(b);
else if(f=="categorycolumn"&&c==this.chartObj.level)d=this.getGraphGob(),f=this.getGraphView(),d.setCategoryExpr(d.parseExpr(f.dvObj,b)),this.refreshAsync();else{if(f=="title")document.getElementById(this.id+"_toolbar_sz_"+c).innerHTML=b}else{var g=e,d=f.indexOf(".");d>0&&(e=f.substring(0,d).toLowerCase(),f=f.substring(d+1).toLowerCase(),"values"===e&&(d=this.getGraphGob().getGraph(g),d=d.getObject(e),d=d.getProperty(f),"secondaryaxis"===f?c.setSecondaryValueAxis(d,g):"min"===f?c.setValueAxisMin(d,
g):"max"===f?c.setValueAxisMax(d,g):"showlabel"===f&&c.setAxisLabelVisibility("values",d,g),this.refreshAsync()))}}else a=="query"?this.retrieve(b):a=="title"?this.setTitle(b):a=="animation"?c.setAnimation(b):a=="legend"&&c.setLegend(b);return!0}return!1};
$MA.BI.SimpleChartView.prototype.triggerTapEvent=function(a){if(a.target==this.valueBubbleViewElem){var b;a.changedTouches?(b=a.changedTouches.item(0),b=$MA.getMouseXY(b,a.srcElement)):b=$MA.getMouseXY(a);a=b.x+this.valueBubbleViewElem.offsetLeft;b=b.y+this.valueBubbleViewElem.offsetTop;var c=this.valueBubbleViewElem.slider;this.fillSelectedValues(this.getGraph().getObjectAtPointer(a,b,c.value));if(this.longPressPos!=void 0)this.abortLongPress(),a=this.chartObj._parent,a.trigger("tap",a.id)}};
$MA.BI.SimpleChartView.prototype.stopEvent=function(a){a.preventDefault();a.type!=="mouseup"&&a.stopPropagation()};$MA.BI.SimpleChartView.prototype.getEventPos=function(a,b){var c=void 0!==a.offsetX?a.offsetX:a.layerX,d=void 0!==a.offsetY?a.offsetY:a.layerY;b&&a.target.slider==void 0&&(c-=this.valueBubbleViewElem.offsetLeft,d-=this.valueBubbleViewElem.offsetTop);return{x:c,y:d}};
$MA.BI.SimpleChartView.prototype.onMouseDown=function(a){var b=this.getGraph(),c=this.getEventPos(a);this.tappedInLegend=this.startY=this.startX=void 0;if(a.target.slider==void 0){if(b.pointInLegend(c.x,c.y))this.startX=c.x,this.startY=c.y,this.tappedInLegend=!0}else if(!b.graphObj.suppliedTotals||b.graphObj.drawObjects.length)this.valueBubbleViewElem.style.display="",this.clickValueBubble(this,c.x,c.y,a.clientX,a.clientY,!0,this.elem);this.stopEvent(a)};
$MA.BI.SimpleChartView.prototype.onMouseMove=function(a){var b=this.getEventPos(a),c=this.getGraph();if(this.tappedInLegend){var d=this.startX-b.x,e=this.startY-b.y;if(Math.abs(d)>$MA.BI.SimpleChartView.CLICK_TOLERANCE||Math.abs(e)>$MA.BI.SimpleChartView.CLICK_TOLERANCE)c.doScrollLegend(d,e),this.startX=b.x,this.startY=b.y,this.legendScrolling=!0}else if(a.target.slider)c=this.getSlider(),d=b.x,b=b.y,c.dragging?this.moveValueBubble(d,b,a.clientX,a.clientY,this.elem):c.scrolling&&c.doScroll!=void 0&&
c.doScroll(d,b);this.stopEvent(a)};
$MA.BI.SimpleChartView.prototype.onMouseUp=function(a){var b=this.getGraph(),c=this.getSlider();if(this.legendScrolling)this.tappedInLegend=this.legendScrolling=!1;else if(this.tappedInLegend)b.selectLegend(this.startX,this.startY),c.plot(),this.refreshChartViews(),this.startY=this.startX=this.tappedInLegend=void 0;else{var d;if(b.isDataScattered()){if(c.value!=void 0&&c.value.length>0)d=c.value[0].ItemNumber}else d=c.value;this.selectedCategoryValue=b.getCategoryValue(d);this.selectedCategoryGroup=
b.getCategoryList(d,!0);this.setSelectedCategoryIndex(this.getGraphGob().getFirstItem()+d);this.targetIsSlider||this.triggerTapEvent(a);this.targetIsSlider=!1;d=this.getEventPos(a);var e=d.x,f=d.y;d=b.getSeriesList();var g;g=c.legends?c.legends.length:0;var h=this.getGraphGob();if(c.onMouseUp!=void 0&&c.onMouseUp(e,f)){for(e=0;e<g;++e)f=c.legends[e],b.setSeriesState(f.seriesValue,f.isEnabled(),f.graphObjIndex);this.refreshChartViews();if(b.graphType.indexOf("percent")>=0){c.text=b.getDataString(c.value,
h.getValueFormat(0));f=c.text.split("\n");c.reset();c.categoryText=b.getCategoryString(c.value);c.categoryDisplayText=b.getCategoryDisplayText(c.value);for(e=0;e<d.length;++e){g=d[e];var j=b.getSeriesString(g.name);c.addLegend(g,j,f[e],b.getSeriesFillBrush(e),g.isEnabled(),c.categoryText)}}c.plot()}if(c.scrolling)c.scrolling=!1;if(c.dragging)b.isDataScattered()?(c.currentX=c.value[0].LocX-c.dataX,c.dragging=!1):(c.update(),c.text=b.getDataString(c.value,h.getValueFormat(0))),c.plot()}this.updateWhatIfVariableControls();
this.stopEvent(a)};
$MA.BI.SimpleChartView.prototype.updateWhatIfVariableControls=function(){if(this.whatIfViewElem&&this.whatIfViewElem.offsetHeight>0&&this.chartObj.whatIfColumns){var a=this.valueBubbleViewElem.slider,b=this.whatIfViewElem._whatifnames,c=this.getGraphView().dvObj,d=this.getGraph(),e=this.getGraphGob(),a=d.getCategoryValue(a.value),f,g,h=this.chartObj.whatIfColumns.columns,j,l;for(j=0;j<b.length;j++)for(l=0;l<this.whatIfViewElem._seriesnumber;l++){this.whatIfViewElem._seriesnumber==1?f=e.getCategoryColumn()+
"=='"+a+"'":(f="and ("+e.getCategoryColumn()+"=='"+a+"', ",f+=e.getSeriesColumn()+"=='"+d.getSeriesName(l)+"')");g=c.find(f);var n=this.whatIfViewElem.id+"__series"+l+"__table_"+b[j];f=document.getElementById(n);var k=c.getItem(g,f.__whatifid__);if(f!=void 0){if(parseFloat(k)>f.max)f.max=k;else if(parseFloat(k)<f.min)f.min=k;f.__whatifvariabletype__.toLowerCase()=="float"?(g=h[j],f.value=k.toFixed(parseInt(g.decimals,10))):(f.value=Math.floor(k),window.jQuery&&($=jQuery.noConflict(),$("#"+f.id).slider("refresh")));
if(!this.chartObj.whatIfColumns.builtin&&(n=document.getElementById(n+"_slider")))n.value=Math.floor(f.value)}}}};$MA.BI.SimpleChartView.prototype.onDblClick=function(a){var b=this.getGraph();if(a.target==this.valueBubbleViewElem){var c=a.offsetX!=void 0?a.offsetX:a.layerX,a=a.offsetY!=void 0?a.offsetY:a.layerY;c+=this.valueBubbleViewElem.offsetLeft;a+=this.valueBubbleViewElem.offsetTop;b=b.getObjectAtPointer(c,a,this.valueBubbleViewElem.slider.value);this.fillSelectedValues(b);b.length>0&&this.setDrillDown(b[0].drawObj)}};
$MA.BI.SimpleChartView.prototype.initializeCSS=function(){var a=$MA.getCSSRule(".chart"),b=document.getElementById(this.id);if(a==void 0&&b.style.background=="")b.style.background="white";var b=0,c="Helvetica";if(a){if(a.style.color!="")b=a.style.color;if(a.style.fontFamily!="")c=a.style.fontFamily}var d=this.getGraph();d.setFontBrush(new $MA.Brush(b));d.setFont(c);if(this.getGraphGob().graphType=="tablebar"){if(a=$MA.getCSSRule(".chart_table"))a.style.fontSize!=""&&d.setTableStyle("fontSize",a.style.fontSize),
a.style.fontFamily!=""&&d.setTableStyle("fontFamily",a.style.fontFamily),a.style.color!=""&&d.setTableStyle("textColor",a.style.color);(a=$MA.getCSSRule(".chart_table_dimension_title"))&&a.style.backgroundColor!=""&&d.setTableStyle("dimensionTitle",a.style.backgroundColor);(a=$MA.getCSSRule(".chart_table_row_header"))&&a.style.backgroundColor!=""&&d.setTableStyle("rowHeader",a.style.backgroundColor);(a=$MA.getCSSRule(".chart_table_column_headers"))&&a.style.backgroundColor!=""&&d.setTableStyle("columnHeaders",
a.style.backgroundColor);(a=$MA.getCSSRule(".chart_table_contents"))&&a.style.backgroundColor!=""&&d.setTableStyle("contents",a.style.backgroundColor)}};$MA.BI.SimpleChartView.prototype.applyWaterfallStyle=function(){var a=this.getGraph(),b=a.graphType.indexOf("waterfall");if(b>=0){var c=this.getGraphGob(),d={};if(b>=0)d.showTotal=c.showTotal;if(a.graphType.indexOf("hierarchy")==0)d.parentAsTotal=c.parentAsTotal;a.graphObj.applyWaterfallStyle(d)}};
$MA.BI.SimpleChartView.prototype.initialize=function(){var a=this.getGraph();a.setTitle("");a.setValueBubbleHeight(0);a.graphType!="pie"&&a.graphType!="donut"&&a.setLegend("none");a.setMajorTicType("category","none");a.setPrimaryLine("values",!1);a.setMajorGridLine("values",!0);a.setAxisLineBrush("values","majorgrid",new $MA.Brush(15198183));a.setAnimation(!1);a.setLegend(this.getProperty("legend"));var b=this;a.bind("draw",function(){b.chartObj._parent.trigger("draw",b.id)});this.applyWaterfallStyle();
this.initializeCSS();var c=this.getGraphGob();this.setTitle(c.title);this.applyValueAxisCustomisation(a,c);this.applyCategoryAxisCustomisation(a,c);c.getCategoryCount()>1&&a.groupCategory(!0);a=this.getGraphView();this.refreshAction="initialize";a.dvObj.getRowCount()>0&&this.refreshAsync()};$MA.BI.SimpleChartView.prototype.reset=function(){this.graphViewElem=this.titleBarViewElem=null};$MA.BI.SimpleChartView.prototype.refreshAsync=function(a){this.chartObj._parent.refresh(a)};
$MA.BI.SimpleChartView.prototype.refresh=function(){var a=document.getElementById(this.id);if(a!=void 0){var b=$MA.BI.SimpleChartView.getChart(a);b.trigger("renderstart");if(this.refreshAction){var c=this.getGraphView().dvObj,d=this.getGraphGob();c.initializeGraphData([d.getCategoryColumn()],d.getSeriesColumn());this.refreshAction=void 0}this.graphViewElem.style.width=this.getGraphViewWidth(a);this.graphViewElem.style.height=this.getGraphViewHeight(a);this.refreshGraphView();b.trigger("renderend")}};
$MA.BI.SimpleChartView.prototype.applyCSS=function(){this.initializeCSS();this.getTableView().getStyles();this.valueBubbleViewElem&&this.valueBubbleViewElem.slider.getStyles();this.rangeSelectorViewElem&&this.getRangeSelector().getStyles();this.refresh()};$MA.BI.SimpleChartView.prototype.getRangeSelector=function(){if(this.rangeSelectorViewElem)return this.rangeSelectorViewElem.rangeSelector};
$MA.BI.SimpleChartView.prototype.setRangeSelector=function(a){this.rangeSelectorViewElem&&(this.rangeSelectorViewElem.rangeSelector=a)};$MA.BI.SimpleChartView.prototype.getRangeSelectorCanvasElem=function(){var a=this.rangeSelectorViewElem;if(a)return a.macontrol.getElement("canvas_1")};$MA.BI.SimpleChartView.prototype.getRangeSelectorTextCanvasElem=function(){var a=this.rangeSelectorViewElem;if(a&&a.textElem)return a.textElem.macontrol.getElement("canvas_1")};
$MA.BI.SimpleChartView.prototype.enableSecondaryAxis=function(){var a=this.getGraphGob(),b=this.getGraph(),c=a.getChildrenCount(),d,e;if(c>0){var f;for(f=0;f<c;f++)d=a.getGraph(f),e=d.getObject("values"),e=e.getProperty("secondaryAxis"),d=d.getName(),e&&b.enableSecondaryValueAxis(d)}};
$MA.BI.SimpleChartView.prototype.applyValueAxisCustomisation=function(a,b){var c=b.getChildrenCount(),d=null,e,f;if(c>0){var g,h;for(g=0;g<c;g++){e=b.getGraph(g);h=e.getObject("values");f=h.getProperty("secondaryAxis");e=e.getName();if(f&&(d=h.list,d.length>0))d=d[0].displayName,a.setSecondaryValueAxisDisplayName(d,e);f&&a.setSecondaryValueAxis(f,e);f?a.setPalette(this.secondaryAxisPalette,e,"secondaryaxis"):a.setPalette(this.primaryAxisPalette,e,"primaryaxis");d=h.getProperty("color");f&&this.secondaryAxisCustomColorValue!=
void 0?a.setPrimaryLineColor("values",this.secondaryAxisCustomColorValue,e):d!==void 0&&a.setPrimaryLineColor("values",d,e);d=h.getProperty("min");f&&this.secondaryAxisCustomMinValue!=void 0?a.setValueAxisMin(this.secondaryAxisCustomMinValue,e):d!==void 0&&a.setValueAxisMin(d,e);d=h.getProperty("max");f&&this.secondaryAxisCustomMaxValue!=void 0?a.setValueAxisMax(this.secondaryAxisCustomMaxValue,e):d!==void 0&&a.setValueAxisMax(d,e);d=h.getProperty("showgrid");f&&this.secondaryAxisShowGrid!=void 0?
a.setMajorGridLine("values",this.secondaryAxisShowGrid,e):d!==void 0&&a.setMajorGridLine("values",d,e);d=h.getProperty("showprimaryline");f&&this.secondaryAxisShowPrimaryLine!=void 0?a.setPrimaryLine("values",this.secondaryAxisShowPrimaryLine,e):d!==void 0&&a.setPrimaryLine("values",d,e);d=h.getProperty("percentage");f&&this.secondaryPercentage!=void 0?a.setPercentage("values",this.secondaryPercentage,e):d!==void 0&&a.setPercentage("values",d,e);d=h.getProperty("showlabel");f&&this.secondaryAxisShowLabel!=
void 0?a.setAxisLabelVisibility("values",this.secondaryAxisShowLabel,e):d!==void 0&&a.setAxisLabelVisibility("values",d,e);d=h.getProperty("thickness");f&&this.secondaryAxisThickness!=void 0?a.setPrimaryLineThickness("values",this.secondaryAxisThickness,e):d!==void 0&&a.setPrimaryLineThickness("values",d,e)}}else c=b.getObject("Values").getProperty("Min"),f=b.getObject("Values").getProperty("Max"),c!==void 0&&a.setValueAxisMin(c),f!==void 0&&a.setValueAxisMax(f),c=b.getObject("Values").getProperty("ShowLabel"),
c!==void 0&&a.setAxisLabelVisibility("values",c),c=b.getObject("Values").getProperty("ShowPrimaryLine"),c!==void 0&&a.setPrimaryLine("values",c),c=b.getObject("Values").getProperty("Thickness"),c!==void 0&&a.setPrimaryLineThickness("values",c),c=b.getObject("Values").getProperty("Color"),c!==void 0&&a.setPrimaryLineColor("values",c),c=b.getObject("Values").getProperty("ShowGrid"),c!==void 0&&a.setMajorGridLine("values",c),e=a.graphObj.name,(f=b.getObject("Values").getProperty("secondaryAxis"))?a.setPalette(this.secondaryAxisPalette,
e,"secondaryaxis"):a.setPalette(this.primaryAxisPalette,e,"primaryaxis")};
$MA.BI.SimpleChartView.prototype.applyCategoryAxisCustomisation=function(a,b){var c=b.getObject("Category").getProperty("Min"),d=b.getObject("Category").getProperty("Max");c!==void 0&&a.setCategoryAxisMin(c);d!==void 0&&a.setCategoryAxisMax(d);c=b.getObject("Category").getProperty("ShowLabel");c!==void 0&&a.setAxisLabelVisibility("category",c);c=b.getObject("Category").getProperty("ShowPrimaryLine");c!==void 0&&a.setPrimaryLine("category",c);c=b.getObject("Category").getProperty("Thickness");c!==
void 0&&a.setPrimaryLineThickness("category",c);c=b.getObject("Category").getProperty("Color");c!==void 0&&a.setPrimaryLineColor("category",c);c=b.getObject("Category").getProperty("ShowGrid");c!==void 0&&a.setMajorGridLine("category",c);c=b.getObject("Category").getProperty("DisplayLastLabel");c!==void 0&&a.setDisplayLastCategoryLabel("category",c)};
$MA.BI.SimpleChartView.prototype.refreshChartViews=function(){this.rangeSelectorViewElem&&this.showRangeSelectorFlag?this.refreshRangeSelectorView():this.refreshGraphView()};$MA.BI.SimpleChartView.prototype.getChartType=function(){return this.chartObj.getChartType()};$MA.BI.SimpleChartView.prototype.setMonoColor=function(a){this.getGraph().setMonoColor(a)};$MA.BI.SimpleChartView.getSelectedBubbleInfo=function(){};
$MA.BI.SimpleChartView.prototype.setHorizontalBarHeight=function(a){a==void 0||a==null||isNaN(a)||a<=0||(this.getGraph().setHorizontalBarHeight(a),this.refreshAsync(!1))};$MA.BI.SimpleChartView.prototype.getNumberOfVisibleCategories=function(){return this.getGraph().getNumberOfVisibleCategories()};$MA.BI.SimpleChartView.prototype.setShowDotsWidth=function(a){a==void 0||a==null||isNaN(a)||a<0||(this.getGraph().setShowDotsWidth(a),this.refreshAsync(!1))};
$MA.BI.SimpleChartView.prototype.fillSelectedValues=function(a){var b,c,d=a.length;this.selectedSeriesName=[];this.selectedCategoryGroup=this.selectedCategoryValue=void 0;var e={};for(b=0;b<d;b++)if(c=a[b],e=c.name,c=c.drawObj,c!=null&&c.item){c.item.parentSeries&&(e={chartName:e,seriesName:c.item.parentSeries.name},this.selectedSeriesName.push(e));if(this.selectedCategoryValue==void 0&&c.item.category)this.selectedCategoryValue=c.item.category.value;if(this.selectedCategoryGroup==void 0&&c.item.category)this.selectedCategoryGroup=
this.getGraph().getCategoryList(c.item.category,!1)}};$MA.BI.SimpleBarChartView=function(a,b){$MA.BI.SimpleChartView.call(this,a,b);var c=document.getElementById(a);c!=void 0&&(this.createTitleBar(c),this.createGraphView(c),this.getGraphView().bind("initialized",this.onGraphViewInitialized))};$MA.BI.SimpleBarChartView.prototype=new $MA.BI.SimpleChartView;
$MA.BI.SimpleBarChartView.prototype.onGraphViewInitialized=function(a){a=document.getElementById(a).parentNode;a=$MA.BI.SimpleChartView.getChartView(a);a.chartObj._parent.trigger("initialized",a.id);a.initialize()};$MA.BI.SimpleHBarChartView=function(a,b){$MA.BI.SimpleChartView.call(this,a,b);var c=document.getElementById(a);c!=void 0&&(this.createTitleBar(c),this.createGraphView(c),this.getGraphView().bind("initialized",this.onGraphViewInitialized))};$MA.BI.SimpleHBarChartView.prototype=new $MA.BI.SimpleChartView;
$MA.BI.SimpleHBarChartView.prototype.onGraphViewInitialized=function(a){var a=document.getElementById(a).parentNode,a=$MA.BI.SimpleChartView.getChartView(a),b=a.getGraph(),c=a.getGraphGob();b.setTableHeaderNames(c.getCategoryName(),c.getValueName());a.chartObj._parent.trigger("initialized",a.id);a.initialize()};
$MA.BI.SimpleLineChartView=function(a,b){$MA.BI.SimpleChartView.call(this,a,b);var c=document.getElementById(a);c!=void 0&&(this.createTitleBar(c),this.createGraphView(c),this.getGraphView().bind("initialized",this.onGraphViewInitialized))};$MA.BI.SimpleLineChartView.prototype=new $MA.BI.SimpleChartView;
$MA.BI.SimpleLineChartView.prototype.onGraphViewInitialized=function(a){a=document.getElementById(a).parentNode;a=$MA.BI.SimpleChartView.getChartView(a);a.chartObj._parent.trigger("initialized",a.id);a.initialize()};$MA.BI.SimpleBubbleChartView=function(a,b){$MA.BI.SimpleChartView.call(this,a,b);var c=document.getElementById(a);c!=void 0&&(this.createTitleBar(c),this.createGraphView(c),this.getGraphView().bind("initialized",this.onGraphViewInitialized))};$MA.BI.SimpleBubbleChartView.prototype=new $MA.BI.SimpleChartView;
$MA.BI.SimpleBubbleChartView.prototype.onGraphViewInitialized=function(a){var a=document.getElementById(a).parentNode,a=$MA.BI.SimpleChartView.getChartView(a),b=a.getGraph(),c=a.getGraphGob().getObject("Category").getProperty("column");(c=a.chartObj.dvObj.getTableColumn(c))&&c.type==$MA.TableColumnType.DOUBLE&&b.setDataScattered(!0);a.chartObj._parent.trigger("initialized",a.id);a.initialize()};$MA.BI.SimpleBubbleChartView.prototype.getSelectedBubbleInfo=function(a){if(this.getChartType()=="bubble")return this.getGraph().getSelectedBubbleInfo(a)};
$MA.BI.SimplePieChartView=function(a,b){$MA.BI.SimpleChartView.call(this,a,b);var c=document.getElementById(a);c!=void 0&&(this.createTitleBar(c),this.createGraphView(c),this.getGraphView().bind("initialized",this.onGraphViewInitialized))};$MA.BI.SimplePieChartView.prototype=new $MA.BI.SimpleChartView;
$MA.BI.SimplePieChartView.prototype.onGraphViewInitialized=function(a){a=document.getElementById(a).parentNode;a=$MA.BI.SimpleChartView.getChartView(a);a.getGraph().setShowPieLabels(!1);a.chartObj._parent.trigger("initialized",a.id);a.initialize();a.addGraphEvents()};$MA.BI.SimplePieChartView.prototype.reset=function(){$MA.BI.SimpleChartView.prototype.reset.call(this);this.removeGraphEvents()};
$MA.BI.SimplePieChartView.prototype.addGraphEvents=function(){$MA.isTouchEventSupported?(this.graphViewElem.addEventListener("touchstart",this.onTouchStart,!1),this.graphViewElem.addEventListener("touchmove",this.onTouchMove,!1),this.graphViewElem.addEventListener("touchend",this.onTouchEnd,!1)):(this.graphViewElem.addEventListener("mousedown",this.onMouseDown,!1),this.graphViewElem.addEventListener("mouseup",this.onMouseUp,!1))};
$MA.BI.SimplePieChartView.prototype.removeGraphEvents=function(){this.graphViewElem&&($MA.isTouchEventSupported?(this.graphViewElem.removeEventListener("touchstart",this.onTouchStart,!1),this.graphViewElem.removeEventListener("touchmove",this.onTouchMove,!1),this.graphViewElem.removeEventListener("touchend",this.onTouchEnd,!1)):(this.graphViewElem.removeEventListener("mousedown",this.onMouseDown,!1),this.graphViewElem.removeEventListener("mouseup",this.onMouseUp,!1)))};
$MA.BI.SimplePieChartView.prototype.onMouseDown=function(a){var b=$MA.BI.SimpleChartView.getOwner(a.target);if(b!=void 0){var b=$MA.BI.SimpleChartView.getChartView(b),c=b.getGraph(),d=a.offsetX!=void 0?a.offsetX:a.layerX,e=a.offsetY!=void 0?a.offsetY:a.layerY;if(c.pointInLegend(d,e))c.setTapPoint(d,e),c.legendScrolling=!0,b.graphViewElem.onmousemove=b.onMouseMove,b.stopEvent(a)}};
$MA.BI.SimplePieChartView.prototype.onMouseMove=function(a){var b=$MA.BI.SimpleChartView.getOwner(a.target);if(b!=void 0){var b=$MA.BI.SimpleChartView.getChartView(b),c=b.getGraph(),d=a.offsetX!=void 0?a.offsetX:a.layerX,e=a.offsetY!=void 0?a.offsetY:a.layerY;c.legendScrolling&&(c.doScrollLegend(d,e),b.stopEvent(a))}};
$MA.BI.SimplePieChartView.prototype.onMouseUp=function(a){var b=$MA.BI.SimpleChartView.getOwner(a.target);if(b!=void 0){var b=$MA.BI.SimpleChartView.getChartView(b),c=b.getGraph();if(c.legendScrolling)c.legendScrolling=!1,c.setTapPoint(void 0,void 0),b.stopEvent(a)}};
$MA.BI.SimplePieChartView.prototype.onTouchStart=function(a){var b=$MA.BI.SimpleChartView.getOwner(a.target);if(b!=void 0){var b=$MA.BI.SimpleChartView.getChartView(b),c=b.getGraph();if(a.touches.length==1&&!c.inRotatePie){var d=a.touches.item(0),d=$MA.getMouseXY(d,a.target);if(c.pointInLegend(d.x,d.y))c.setTapPoint(d.x,d.y),c.legendScrolling=!0,b.stopEvent(a)}}};
$MA.BI.SimplePieChartView.prototype.onTouchMove=function(a){var b=$MA.BI.SimpleChartView.getOwner(a.target);if(b!=void 0&&a.touches.length==1){var b=$MA.BI.SimpleChartView.getChartView(b),c=b.getGraph(),d=a.touches.item(0),d=$MA.getMouseXY(d,a.target);c.legendScrolling&&(c.doScrollLegend(d.x,d.y),b.stopEvent(a))}};
$MA.BI.SimplePieChartView.prototype.onTouchEnd=function(a){var b=$MA.BI.SimpleChartView.getOwner(a.target);if(b!=void 0){var b=$MA.BI.SimpleChartView.getChartView(b),c=b.getGraph();if(c.legendScrolling)c.legendScrolling=!1,c.setTapPoint(void 0,void 0),b.stopEvent(a)}};
$MA.BI.ChartView=function(a,b){$MA.BI.SimpleChartView.call(this,a,b);this.toolBarElem=this.dynamicAnalysisViewElem=this.whatIfViewElem=this.tableViewElem=this.rangeSelectorViewElem=void 0;this.showRangeSelectorFlag=!0;this.isZoomingLevelChanged=this.isToggleTableMode=!1;this.isDrillLevelChanged=!0;this.graphViewWidth=0;this.legendIconShape="square"};$MA.BI.ChartView.prototype=new $MA.BI.SimpleChartView;$MA.BI.ChartView.RANGESELECTOR_HEIGHT=70;$MA.BI.ChartView.RANGESELECTOR_TEXT_HEIGHT=20;
$MA.BI.ChartView.TOOLBAR_HEIGHT=40;$MA.BI.ChartView.touchTimeSlot=100;$MA.BI.ChartView.LONGPRESS_TIMEOUT=2E3;$MA.BI.ChartView.LONGPRESS_THRESHOLD=100;$MA.BI.ChartView.overrideDefaultSettings=function(){if($MA.screenSize=="small")$MA.BI.ChartView.RANGESELECTOR_HEIGHT=50};$MA.BI.ChartView.overrideDefaultSettings();
$MA.BI.ChartView.prototype.createToolBar=function(a){function b(a){f.onSemanticZooming(a)}var c=a.hasOwnProperty("ontouchend")?"touchend":"click",d=$MA.getCSSRule(".chart_toolbar"),e=document.createElement("div");e.style.position="relative";e.id=this.id+"_toolbar";e.style.width="100%";e.style.height=$MA.BI.ChartView.TOOLBAR_HEIGHT+"px";e.className="chart_toolbar";if(!d)e.style.background="#666666";var f=this,g;g=$MA.BI.SimpleChartView.getChart(a);if(g.events&&g.events.get("chartshared"))g=document.createElement("button"),
g.id=e.id+"_share",g.setAttribute("type","button"),g.style.position="relative",g.style.cssFloat="right",g.style.top="4px",g.style.marginRight="4px",g.style.height="30px",g.className="share_button",g.style.zIndex="10",d?g.style.width="30px":g.innerHTML="Share",g.addEventListener(c,function(a){f.onClickedShare(a)},!1),e.appendChild(g);g=document.createElement("button");g.id=e.id+"_table";g.setAttribute("type","button");g.style.position="relative";g.style.cssFloat="right";g.style.top="4px";g.style.marginRight=
"4px";g.style.height="30px";g.className="table_button";g.style.zIndex="10";d?g.style.width="30px":g.innerHTML="Table";g.addEventListener(c,function(a){f.onToggleTable(a)},!1);e.appendChild(g);if(this instanceof $MA.BI.BarChartView)g=document.createElement("button"),g.id=e.id+"_rangeselector",g.setAttribute("type","button"),g.style.position="relative",g.style.cssFloat="right",g.style.top="4px",g.style.marginRight="4px",g.style.height="30px",g.className="rangeselector_button",g.style.zIndex="10",d?
g.style.width="30px":g.innerHTML="Range Selector",g.addEventListener(c,function(a){f.onToggleRangeSelector(a)},!1),e.appendChild(g);var h=this.chartObj.dvObj.getGraphGob().getValueExpr(0),j;h&&(j=h.getArgs());if(this.chartObj.whatIfColumns)g=document.createElement("button"),g.id=e.id+"_whatif",g.setAttribute("type","button"),g.style.position="relative",g.style.cssFloat="right",g.style.top="4px",g.style.marginRight="4px",g.style.height="30px",g.className="whatif_button",g.style.zIndex="10",d?g.style.width=
"30px":g.innerHTML="What If",g.addEventListener(c,function(a){f.onToggleWhatIf(a)},!1),e.appendChild(g);g=!1;if(g=this.hasDAVariables(h,j))g=document.createElement("button"),g.id=e.id+"_dynamicanalysis",g.setAttribute("type","button"),g.style.position="relative",g.style.cssFloat="right",g.style.top="4px",g.style.marginRight="4px",g.style.height="30px",g.className="da_button",g.style.zIndex="10",d?g.style.width="30px":g.innerHTML="Dynamic Analysis",g.addEventListener(c,function(a){f.onToggleDynamicAnalysis(a)},
!1),e.appendChild(g);j=this.chartObj;for(d=0;d<j.zoomingLevels.length;d++)g=document.createElement("button"),g.id=e.id+"_sz_"+d,g.setAttribute("type","button"),g.innerHTML=j.zoomingLevels[d].title?j.zoomingLevels[d].title:j.zoomingLevels[d].categoryColumn,g.style.top="4px",g.style.marginLeft="4px",g.style.position="relative",g.style.cssFloat="left",g.style.height="30px",g.className="chart_button",g.style.zIndex="10",g.addEventListener(c,b,!1),e.appendChild(g);a.appendChild(e);if(a.parentNode.macontrol&&
a.parentNode.macontrol instanceof $MA.DrillDownGroup)a=document.createElement("canvas"),a.id=e.id+"_breadcrumbs",a.style.left="6px",a.style.top="4px",a.style.position="relative",a.width=10,a.height=$MA.BI.ChartView.TOOLBAR_HEIGHT-10,e.appendChild(a),a.width=document.body.clientWidth-a.offsetLeft>300?300:document.body.clientWidth-a.offsetLeft-1,(new $MA.BI.Breadcrumbs(a.id)).onitemclicked=this.onToolbarBreadcrumbsItemClicked;this.toolBarElem=e;this.highlightCurrentZoomingLevel()};
$MA.BI.ChartView.prototype.onToolbarBreadcrumbsItemClicked=function(a){var b=document.getElementById(this.id),b=$MA.BI.SimpleChartView.getOwner(b),b=$MA.BI.SimpleChartView.getChart(b);if(b.ondrillup)b.ondrillup(a)};$MA.BI.ChartView.prototype.updateToolbarBreadcrumbs=function(a){var b=document.getElementById(this.toolBarElem.id+"_breadcrumbs");b&&b.breadcrumbs.plot(b,a)};
$MA.BI.ChartView.prototype.onSemanticZooming=function(a){a=a.target;if(a.nodeType==3)a=a.parentNode;var b=a.id.lastIndexOf("_");this.setZoomingLevel(parseInt(a.id.substring(b+1,a.id.length),10));this.highlightCurrentZoomingLevel()};$MA.BI.ChartView.prototype.getZoomingLevel=function(){return this.chartObj.level};$MA.BI.ChartView.prototype.setZoomingLevel=function(a){a!=this.chartObj.level&&(a>this.chartObj.level?this.setGroupDownData(a):this.setGroupUpData(a))};
$MA.BI.ChartView.prototype.onClickedShare=function(a){var b=this.chartObj._parent;b.trigger("chartshared",b.id);this.stopEvent(a)};$MA.BI.ChartView.prototype.onToggleWhatIf=function(a){this.tableViewElem&&this.tableViewElem.offsetHeight!=0||this.chartObj.whatIfColumns&&!this.chartObj.whatIfColumns.builtin||(this.whatIfViewElem&&(this.whatIfViewElem.offsetHeight!=0?this.showWhatIfView(!1):this.showWhatIfView(!0)),this.stopEvent(a))};
$MA.BI.ChartView.prototype.onToggleDynamicAnalysis=function(a){this.tableViewElem&&this.tableViewElem.offsetHeight!=0||(this.dynamicAnalysisViewElem&&(this.dynamicAnalysisViewElem.offsetHeight!=0?this.showDynamicAnalysisView(!1):this.showDynamicAnalysisView(!0)),this.stopEvent(a))};
$MA.BI.ChartView.prototype.onToggleTable=function(a){this.isToggleTableMode=!0;this.tableViewElem.offsetHeight!=0?(this.showTableView(!1),this.updateTableViewIcon(!1)):(this.showTableView(!0),this.updateTableViewIcon(!0));this.isDataChanged=this.isDrillLevelChanged=this.isZoomingLevelChanged=this.isToggleTableMode=!1;this.stopEvent(a)};
$MA.BI.ChartView.prototype.onToggleRangeSelector=function(a){this.tableViewElem&&this.tableViewElem.offsetHeight!=0||(this.rangeSelectorViewElem.offsetHeight!=0?this.showRangeSelectorView(!1):this.showRangeSelectorView(!0),this.stopEvent(a))};$MA.BI.ChartView.prototype.createValueBubbleView=function(){var a=document.createElement("canvas");a.id=this.id+"_slider";a.style.position="absolute";this.getGraphElem().parentNode.appendChild(a);this.valueBubbleViewElem=a};
$MA.BI.ChartView.prototype.createRangeSelectorView=function(a){var b=document.createElement("div");b.id=this.id+"_rangeSelector";b.style.position="relative";b.style.marginLeft="5%";b.style.width="93%";b.style.marginTop="10px";b.style.marginBottom="10px";b.style.height=$MA.BI.ChartView.RANGESELECTOR_HEIGHT-$MA.BI.ChartView.RANGESELECTOR_TEXT_HEIGHT+"px";b.className="chart_range_selector";a.appendChild(b);this.rangeSelectorViewElem=b;var c=new $MA.DataView(b.id),d=document.createElement("div");d.id=
this.id+"_rangeSelectorText";d.style.position="relative";d.style.marginLeft="5%";d.style.width="93%";d.style.marginTop="0px";d.style.marginBottom="0px";d.style.height=$MA.BI.ChartView.RANGESELECTOR_TEXT_HEIGHT-2+"px";a.appendChild(d);a=new $MA.DataView(d.id);b.textElem=d;c.textView=a};
$MA.BI.ChartView.prototype.createTableView=function(a){var b=document.createElement("div");b.id=this.id+"_table";b.style.position="relative";b.style.width="100%";b.style.height="0px";b.className="chart_table";if($MA.getCSSRule(".chart_table")==void 0)a.style.background="white";a.appendChild(b);this.tableViewElem=b;new $MA.BI.ChartTableDataView(b.id,this.graphViewElem,this.chartObj)};$MA.BI.ChartView.prototype.createWhatIfView=function(){};$MA.BI.ChartView.prototype.showWhatIfView=function(){};
$MA.BI.ChartView.prototype.initializeWhatIfView=function(){};$MA.BI.ChartView.prototype.createDynamicAnalysisView=function(){};$MA.BI.ChartView.prototype.showDynamicAnalysisView=function(){};$MA.BI.ChartView.prototype.initializeDynamicAnalysisView=function(){};$MA.BI.ChartView.prototype.hasDAVariables=function(){return!1};$MA.BI.ChartView.prototype.generateRangeSelectorSyntax=function(){return'<DataView Style="canvas"><Table DataSource="none"/><Canvas Name="canvas_1" Band="background" SizeToDisplay="true"/></DataView>'};
$MA.BI.ChartView.prototype.generateTableSyntax=function(){return'<DataView Style="canvas"><Table DataSource="none"/><Canvas Name="canvas_1" Band="background" SizeToDisplay="true"/></DataView>'};
$MA.BI.ChartView.prototype.showTableView=function(a){var b=document.getElementById(this.id).offsetHeight;if(a){this.toolBarElem&&this.toolBarElem.style.display!="none"&&(b-=this.toolBarElem.offsetHeight);this.graphViewElem.style.display="none";if(this.rangeSelectorViewElem)this.rangeSelectorViewElem.style.display="none",this.rangeSelectorViewElem.textElem.style.display="none";if(this.whatIfViewElem&&(!this.chartObj.whatIfColumns||this.chartObj.whatIfColumns&&this.chartObj.whatIfColumns.builtin))this.whatIfViewElem.style.display=
"none";if(this.dynamicAnalysisViewElem)this.dynamicAnalysisViewElem.style.display="none";this.initializeTableView();this.tableViewElem.style.height=b+"px";this.tableViewElem.style.display="";this.refreshTableView();if(this.orientation!=window.orientation)this.orientation=window.orientation}else this.tableViewElem.style.height="0px",this.tableViewElem.style.display="none",this.graphViewElem.style.display="",this.refreshViews(),this.refreshValueBubbleView(!0)};
$MA.BI.ChartView.prototype.showRangeSelectorView=function(a){this.showRangeSelectorFlag=a;this.refreshViews();this.refreshValueBubbleView(!0)};
$MA.BI.ChartView.prototype.refreshViews=function(){var a=document.getElementById(this.id).offsetHeight;this.toolBarElem&&this.toolBarElem.style.display!="none"&&(a-=this.toolBarElem.offsetHeight);if(this.rangeSelectorViewElem)this.showRangeSelectorFlag?(this.rangeSelectorViewElem.style.display="",this.rangeSelectorViewElem.textElem.style.display="",this.refreshRangeSelectorView(),a-=$MA.BI.ChartView.RANGESELECTOR_HEIGHT+20):(this.rangeSelectorViewElem.style.display="none",this.rangeSelectorViewElem.textElem.style.display=
"none");if(this.showWhatIfFlag)this.dynamicAnalysisViewElem.style.display="none",this.whatIfViewElem.style.display="",this.whatIfViewElem.scrollHeight>a*0.5?(this.graphViewElem.style.height=a*0.5+"px",this.refreshGraphView(),this.whatIfViewElem.style.height=a*0.5+"px"):(this.graphViewElem.style.height=a-this.whatIfViewElem.scrollHeight+"px",this.refreshGraphView(),this.whatIfViewElem.style.height=this.whatIfViewElem.scrollHeight+"px");else if(this.showDynamicAnalysisFlag)this.whatIfViewElem.style.display=
"none",this.dynamicAnalysisViewElem.style.display="",this.dynamicAnalysisViewElem.scrollHeight>a*0.5?(this.graphViewElem.style.height=a*0.5+"px",this.refreshGraphView(),this.dynamicAnalysisViewElem.style.height=a*0.5+"px"):(this.graphViewElem.style.height=a-this.dynamicAnalysisViewElem.scrollHeight+"px",this.refreshGraphView(),this.dynamicAnalysisViewElem.style.height=this.dynamicAnalysisViewElem.scrollHeight+"px");else{if(this.whatIfViewElem&&(!this.chartObj.whatIfColumns||this.chartObj.whatIfColumns&&
this.chartObj.whatIfColumns.builtin))this.whatIfViewElem.style.display="none";if(this.dynamicAnalysisViewElem)this.dynamicAnalysisViewElem.style.display="none";this.graphViewElem.style.height=a+"px";this.refreshGraphView()}};$MA.BI.ChartView.prototype.showToolBar=function(a){if(this.toolBarElem!=void 0)this.toolBarElem.style.display=a?"":"none",this.refreshAsync()};
$MA.BI.ChartView.prototype.refreshRangeSelectorView=function(){this.rangeSelectorViewElem&&this.showRangeSelectorFlag&&(this.getRangeSelector().reset(),this.getRangeSelectorView().refresh(),this.getRangeSelectorTextView().refresh())};$MA.BI.ChartView.prototype.refreshTableView=function(){var a=this.getTableView();a&&a.dvObj&&a.refresh()};
$MA.BI.ChartView.prototype.initializeData=function(){if(this.refreshAction!=void 0){var a=this.getGraphGob(),b=this.getGraphView().dvObj;if(b.getRowCount()!=0){var c;for(c=0;c<a.getChildrenCount();c++)b.setTableSortOrder(a.getGraph(c).name);c=this.getGroupByValues();b.initializeGraphData(c,a.getSeriesColumn());this.initializeGraphView();var d;if(this.refreshAction=="initialize"){b=document.getElementById(this.id);if(b==void 0)return;b=$MA.BI.SimpleChartView.getChart(b);if(b.numberOfVisibleCategory==
0)this.setVisibleCategoryCount(a.getMaxItems());else{if(a.getMaxItems()>0&&b.numberOfVisibleCategory>a.getMaxItems())b.numberOfVisibleCategory=a.getMaxItems();this.setNumberOfVisibleCategories(b.numberOfVisibleCategory)}this.tableViewElem.offsetHeight!=0?this.updateTable():this.resetTable()}else this.refreshAction=="groupUp"?(b=this.getCategoryCount(),d=this.lastItemCount/b,c=Math.floor(a.getFirstItem()/d),d=Math.ceil(a.getMaxItems()/d),c+d>=b?a.setFirstItem(b-d-1):a.setFirstItem(c),this.setVisibleCategoryCount(d),
this.tableViewElem.offsetHeight!=0?this.updateTable():this.resetTable()):this.refreshAction=="groupDown"?(d=this.getCategoryCount()/this.lastItemCount,a.setFirstItem(Math.floor(d*a.getFirstItem())),this.setVisibleCategoryCount(Math.ceil(d*a.getMaxItems())),this.tableViewElem.offsetHeight!=0?this.updateTable():this.resetTable()):this.refreshAction=="updateTable"?this.tableViewElem.offsetHeight!=0?this.updateTable():this.resetTable():this.refreshAction=="resetTable"&&this.resetTable();this.refreshAction=
void 0}}};$MA.BI.ChartView.prototype.getGraphViewHeight=function(a){a=a.offsetHeight;return this.toolBarElem==void 0||this.toolBarElem.style.display=="none"?a+"px":a-$MA.BI.ChartView.TOOLBAR_HEIGHT+"px"};
$MA.BI.ChartView.prototype.refresh=function(){var a=document.getElementById(this.id);if(a!=void 0){var b=$MA.BI.SimpleChartView.getChart(a);b.trigger("beforerender");if(this.graphWidth!=this.graphViewElem.offsetWidth){if(void 0===this.refreshAction)this.refreshAction="initialize";this.graphWidth=this.graphViewElem.offsetWidth}this.initializeData();b.trigger("renderstart");this.graphViewElem.style.width=this.getGraphViewWidth(a);if(this.tableViewElem.offsetHeight!=0)this.showTableView(!0);else{var c=
this.getGraph();c.setValueBubbleHeight(this.getValueBubbleHeight());c.setValueBubblePosition(this.getValueBubblePosition());this.whatIfViewElem&&this.showWhatIfFlag?this.showWhatIfView(!0):this.dynamicAnalysisViewElem&&this.showDynamicAnalysisFlag?this.showDynamicAnalysisView(!0):(this.graphViewElem.style.height=this.getGraphViewHeight(a),this.refreshChartViews(),this.refreshValueBubbleView(!0))}b.trigger("renderend")}};
$MA.BI.ChartView.prototype.onAnimationEnd=function(a){(a=$MA.BI.SimpleChartView.getOwner(a))&&$MA.BI.SimpleChartView.getChart(a).trigger("animationend")};
$MA.BI.ChartView.prototype.initialize=function(){var a=this.getGraphGob(),b=1;this.setTitle(a.title);var c=this.getGraph();c.setTitle("");c.setValueBubble(!0);if(a.categories&&a.categories.list)b=a.categories.list.length;var d=c.graphObjs,e=d.length,f,g;for(f=0;f<e;f++)if(g=a.getGraph(d[f].name),g=g.getObject("values"),g=g.getProperty("secondaryAxis"),c.setPrimaryLine("values",!1,d[f]),c.setMajorGridLine("values",!g,d[f]),c.setAxisLineBrush("values","majorgrid",new $MA.Brush(15198183),d[f]),c.setMajorGridLine("category",
!1,d[f]),c.setAxisLineBrush("category","majorgrid",new $MA.Brush(15198183),d[f]),c.setMajorTicType("category","none",d[f]),d[f].graphType.indexOf("hierarchy")>=0)d[f].suppliedTotals=a.suppliedTotals,d[f].hierarchyMaxLevel=b;c.setAnimation(this.getProperty("animation"));c.setLegend(this.getProperty("legend"));c.onanimationend=this.onAnimationEnd;this.graphViewWidth=this.graphViewElem.offsetWidth;var h=this;c.bind("draw",function(){h.chartObj._parent.trigger("draw",h.id)});this.applyWaterfallStyle();
this.initializeCSS();this.initializeRangeSelectorView();this.initializeWhatIfView();this.initializeDynamicAnalysisView();this.showRangeSelectorFlag=!0;this.showWhatIfFlag=this.tableViewElem&&this.tableViewElem.offsetHeight!=0?!0:!1;this.showDynamicAnalysisFlag=this.dynamicAnalysisViewElem&&this.dynamicAnalysisViewElem.offsetHeight!=0?!0:!1;this.chartObj._parent.trigger("initialized",this.id);this.refreshAction="initialize";this.getGraphView().dvObj.getRowCount()>0&&this.refreshAsync()};
$MA.BI.ChartView.prototype.setTitle=function(a){var b=this.chartObj._parent;b.trigger("titlechanged",b.id,a)};
$MA.BI.ChartView.prototype.setGroupUpData=function(a,b){if(!(this.chartObj.zoomingLevels.length==0||a<0||a>=this.chartObj.zoomingLevels.length)){var c=this.chartObj.zoomingLevels[a];this.setTitle(c.title);var d=this.getGraphView().dvObj,e=this.getCategoryCount();this.chartObj.level=a;if(!b&&c.query)d.setTableBuffer("display",[]),this.categoryList=void 0,this.chartObj.retrieve(c.query);if(!b){var f=this.getGraph();this.getChartType()==="bubble"&&(c=d.getTableColumn(c.categoryColumn))&&f.setDataScattered(c.type==
$MA.TableColumnType.DOUBLE);f.groupCategory(a>0);this.refreshAction="groupUp";this.lastItemCount=e;this.lastVisibleCountRatio=this.getMaxItems()/e;this.isZoomingLevelChanged=!0;d.getRowCount()!=0&&this.refresh()}}};
$MA.BI.ChartView.prototype.setGroupDownData=function(a){if(!(this.chartObj.zoomingLevels.length==0||a<0||a>=this.chartObj.zoomingLevels.length)){var b=this.chartObj.zoomingLevels[a];this.setTitle(b.title);var c=this.getGraphView().dvObj,d=this.getCategoryCount();this.chartObj.level=a;if(b.query)c.setTableBuffer("display",[]),this.categoryList=void 0,this.chartObj.retrieve(b.query);var e=this.getGraph();this.getChartType()==="bubble"&&(b=c.getTableColumn(b.categoryColumn))&&e.setDataScattered(b.type==
$MA.TableColumnType.DOUBLE);e.groupCategory(a>0);this.refreshAction="groupDown";this.lastItemCount=d;this.lastVisibleCountRatio=this.getMaxItems()/d;this.isZoomingLevelChanged=!0;c.getRowCount()!=0&&this.refresh()}};
$MA.BI.ChartView.prototype.setDrillDown=function(a){if(a!=void 0){var b=this.getGraph(),c=b.getSeriesList(),d,e,f,g=0;for(d=0;d<c.length;d++)e=c[d],e.isEnabled()&&(f=e,g++);a=b.getDataValue(a);b=this.chartObj._parent;if(a)if(b.ondrilldown)if(g==1)b.ondrilldown(a,f.name);else b.ondrilldown(a);else this.abortLongPress(),b.trigger("doubletap",b.id)}};
$MA.BI.ChartView.prototype.initializeRangeSelectorView=function(){if(this.rangeSelectorViewElem){var a=this.generateRangeSelectorSyntax(),b=this.getRangeSelectorView();b.create(a);b.textView.create(a);a=this.createRangeSelector();this.setRangeSelector(a);a.onChanged(this.onRangeSelectorChanged,this);b.bind("draw",a.plot,a)}};
$MA.BI.ChartView.prototype.initializeTableView=function(){var a=this.getTableView();if(!a.dvObj){var b=this.getGraph(),c=this.getGraphView(),d=b.getSeriesCount();if(d==0&&(c.refresh(),d=b.getSeriesCount(),d==0))return;var a=c.dvObj,e=a.getGraphGob(),c=new $MA.DataView.Table(a);c.createDataBuffer("display");var f=a.getRowCount(),g=e.getCategoryCount(),h,j,l,n=e.getValueExpr(0),k=e.getValueExpr(1),m=e.getSeriesExpr(),o,p,q=[];if(this.chartObj.zoomingLevels.length==0)if(g>1)for(p=0;p<g;p++)j=e.getCategoryColumn(p),
c.addColumn("string",j,e.getCategoryName(p)),(j=a.getTableColumn(j))&&q.push(j.id);else j=e.getCategoryColumn(),c.addColumn("string",j,e.getCategoryName()),(j=a.getTableColumn(j))&&q.push(j.id);else for(p=0;p<=this.chartObj.level;p++)j=this.chartObj.zoomingLevels[p].categoryColumn,c.addColumn("string",j,this.chartObj.zoomingLevels[p].title),(j=a.getTableColumn(j))&&q.push(j.id);var r;p=q.length;if(e.series==void 0)if(j=e.getValueName(),c.addColumn("number",j),e.graphType=="bubble"&&k!=void 0){j=e.getValueName(1);
c.addColumn("number",j);for(e=0;e<f;e++){b=a.getRow(e);a.exprRow=e;d=n.evaluate();l=k.evaluate();o=[];for(r=0;r<p;r++)o[r]=b[q[r]];o[r]=d;o[r+1]=l;c.addRow(o)}}else for(e=0;e<f;e++){b=a.getRow(e);a.exprRow=e;d=n.evaluate();o=[];for(r=0;r<p;r++)o[r]=b[q[r]];o[r]=d;c.addRow(o)}else if(j=this.getGroupByValues(),a.initializeGraphData(j,e.getSeriesColumn()),e.graphType=="bubble"){j=e.getSeriesName();c.addColumn("string",j);j=e.getValueName();c.addColumn("number",j);k&&(j=e.getValueName(1),c.addColumn("number",
j));for(e=0;e<f;e++){b=a.getRow(e);a.exprRow=e;j=m.evaluate();d=n.evaluate();k&&(l=k.evaluate());o=[];for(r=0;r<p;r++)o[r]=b[q[r]];o[r]=j;o[r+1]=d;k&&(o[r+2]=l);c.addRow(o)}}else{l=new $MA.Hash;for(e=0;e<d;e++)c.addColumn("number",b.getSeriesName(e)),l.set(b.getSeriesName(e),p+e);for(e=0;e<f;e++){b=a.getRow(e);a.exprRow=e;d=n.evaluate();j=m.evaluate();if(a.isGroupHeader(b)){o=[];for(r=0;r<p;r++)o[r]=b[q[r]];for(r=p;r<c.columns.length;r++)o[r]=void 0}k=l.get(j);h==void 0?o[k]=d:h[k]=d;a.isGroupTrailer(b)&&
(h==void 0?c.addRow(o):h=void 0)}}h=this.generateTableSyntax();a=this.getTableView();a.create(h);a.bind("draw",a.plot);a.dvObj.setTable(c);if(this.chartObj.zoomingLevels.length>0||g>1)j=this.getGroupByValues(),a.dvObj.groupData(j,c)}};
$MA.BI.ChartView.prototype.initializeGraphView=function(){var a=this.chartObj.dvObj,b=a.getRowCount();if(b==0)this.categoryList=void 0;else{var c,d,e,f,g=a.getGraphGob();d=g.getObject("Series");var h=g.getCategoryExpr(),j=g.getValueExpr(0),l=[],n=[],k=this.chartObj.zoomingLevels.length==0?g.getCategoryCount():this.chartObj.level+1,m=this.getGraph();g.getCategoryCount()>1&&m.groupCategory(!0);var o,p=!1;this.getChartType().indexOf("waterfall")==0&&(p=!0,o=0);var q,r=[];if(d==void 0){a.exprRow=0;e=
d=c=j.evaluate();this.applyValueAxisCustomisation(m,g);this.applyCategoryAxisCustomisation(m,g);for(q=0;q<b;q++)a.exprRow=q,c=j.evaluate(),p&&(o+=c,c=o),c<d?d=c:c>e&&(e=c),k==1&&!m.isDataScattered()?(c=h.evaluate(),f=l[c],f==void 0?(l[c]=n.length,n.push(q)):r.push(q)):n.push(q)}else{var s=[],u=[],v=g.getSeriesExpr();a.exprRow=0;e=d=c=j.evaluate();this.applyValueAxisCustomisation(m,g);this.applyCategoryAxisCustomisation(m,g);for(q=0;q<b;q++)if(a.exprRow=q,c=j.evaluate(),p&&(o+=c,c=o),c<d?d=c:c>e&&
(e=c),c=v.evaluate(),s[c]==void 0&&(s[c]=!0,u.push(c)),c=a.getRow(q),a.isGroupHeader(c))k==1&&!m.isDataScattered()?(c=h.evaluate(),f=l[c],f==void 0?(l[c]=n.length,n.push(q)):r.push(q)):n.push(q);b=a.getTable().sortOrder;b instanceof Array&&(b=b[0]);(b=="a"||b=="d")&&u.sort();g.seriesList=u}m.setScale(d,e);this.categoryList=n;if(r.length>0){for(q=r.length-1;q>=0;q--)a.deleteRow(r[q]);this.initializeGraphView()}}};
$MA.BI.ChartView.prototype.getCategoryValue=function(a){if(this.categoryList==void 0||a>=this.categoryList.length)return"";var b=this.categoryList[a],a=this.getGraphGob(),c=a.getCategoryExpr(),d=a.getCategoryFormat(),e=a.getCategoryCount(),f=[],g=this.getSlider(),h=this.chartObj.dvObj;h.exprRow=b;if(this.chartObj.level==0)if(e>1){b=h.getRow(b);for(e-=1;e>=0;e--)if(c=a.getCategoryColumn(e),c=h.getTableColumn(c))d=a.getCategoryFormat(e),c=$MA.format(b[c.id],d),c!=""&&f.push(c)}else c=$MA.format(c.evaluate(),
d),f.push(c);else{b=h.getRow(b);for(e=this.chartObj.level;e>=0;e--)if(c=this.chartObj.zoomingLevels[e].categoryColumn,c=h.getTableColumn(c))c=$MA.format(b[c.id],d),c!=""&&f.push(c)}g.categoriesDisplayOrder=="rootToLeaf"&&f.reverse();return f.join(", ")};$MA.BI.ChartView.prototype.getCategoryCount=function(){if(this.categoryList)return this.categoryList.length;return 0};$MA.BI.ChartView.prototype.getVisibleCategoryCount=function(){return this.chartObj.maxVisibleItems||Number.MAX_VALUE};
$MA.BI.ChartView.prototype.setVisibleCategoryCount=function(a){var b=this.getGraphGob(),c=this.getChartType();if(-1!==c.indexOf("column")||c=="line"){var d;d=this.graphViewElem.style.display=="none"?this.tableViewElem.offsetWidth/44:this.graphViewElem.offsetWidth/44;a>d?b.setMaxItems(Math.floor(d)):a==1?this.getCategoryCount()>1&&b.setMaxItems(2):b.setMaxItems(a);this.chartObj.maxVisibleItems=-1!==c.indexOf("column")?Math.floor(d):void 0}else this.chartObj.maxVisibleItems=void 0,b.setMaxItems(a)};
$MA.BI.ChartView.prototype.setNumberOfVisibleCategories=function(a){var b=this.getGraphGob(),c=this.getChartType();if(-1!==c.indexOf("column")||c=="line"){var c=this.graphViewElem.style.display=="none"?this.tableViewElem.offsetWidth/44:this.graphViewElem.offsetWidth/44,d=this.getCategoryCount();a>c?(a>d&&(a=d),b.setMaxItems(a)):a==1?d>1&&b.setMaxItems(2):b.setMaxItems(a);this.chartObj.maxVisibleItems=void 0}else this.chartObj.maxVisibleItems=void 0,b.setMaxItems(a)};
$MA.BI.ChartView.prototype.getGroupByValues=function(){var a,b=[];if(this.chartObj.zoomingLevels.length==0){var c=this.getGraphGob(),d=c.getCategoryCount();if(d>1)for(a=0;a<d;a++)b.push(c.getCategoryColumn(a));else b.push(c.getCategoryColumn())}else for(a=0;a<=this.chartObj.level;a++)c=this.chartObj.zoomingLevels[a],b.push(c.categoryColumn);return b};$MA.BI.ChartView.prototype.updateTable=function(){this.resetTable();this.initializeTableView()};
$MA.BI.ChartView.prototype.resetTable=function(){this.getTableView().dvObj=void 0};$MA.BI.ChartView.prototype.setDataTable=function(a,b){if(this.tableViewElem!=void 0){var c=this.getGraphGob();c.setFirstItem(0);c.setMaxItems();this.resetTable();this.chartObj.setDataTable(a,b);this.refreshAction="initialize";this.refreshAsync()}};
$MA.BI.ChartView.prototype.touchEndListener=function(a){var b=$MA.isTouchEventSupported;if(void 0!==this.sliderUpdater)clearTimeout(this.sliderUpdater),this.sliderUpdater=void 0;if(b)this.onTouchEnd(a);else this.onMouseUp(a)};
$MA.BI.ChartView.prototype.startLongPress=function(a){void 0!==this.longPressTimer&&clearTimeout(this.longPressTimer);this.longPressPos=$MA.isTouchEventSupported?$MA.getMouseXY(a.touches.item(0),a.target):$MA.getMouseXY(a);var b=this;this.longPressTimer=setTimeout(function(){var c=b.longPressPos.x,d=b.longPressPos.y;if(b.graphViewElem){if(a.target.slider!==void 0)c+=parseInt(b.valueBubbleViewElem.style.left,10),d+=parseInt(b.valueBubbleViewElem.style.top,10),b.targetIsSlider=!0;var e=b.getGraph();
if(e.pointInChart(c,d)&&!e.pointInLegend(c,d)&&!b.targetIsSlider)c=b.chartObj._parent,b.touchEndListener(a),c.trigger("longpress",c.id);b.longPressTimer=void 0;b.longPressPos=void 0}},$MA.BI.ChartView.LONGPRESS_TIMEOUT)};
$MA.BI.ChartView.prototype.abortLongPress=function(a){if(void 0!==this.longPressTimer)if(a==void 0)clearTimeout(this.longPressTimer),this.longPressTimer=void 0;else{var b=this.longPressPos,c;c=$MA.isTouchEventSupported?$MA.getMouseXY(a.touches.item(0),a.target):$MA.getMouseXY(a);var d=(b.x-c.x)*(b.x-c.x),b=(b.y-c.y)*(b.y-c.y);if(a==void 0||d+b>$MA.BI.ChartView.LONGPRESS_THRESHOLD)clearTimeout(this.longPressTimer),this.longPressTimer=void 0}};
$MA.BI.ChartView.prototype.addGraphEvents=function(){var a=window.navigator.msPointerEnabled,b=this;$MA.isTouchEventSupported?(this.touchStartListener=function(a){b.onTouchStart(a);a.touches.length>1?b.abortLongPress(a):b.startLongPress(a);document.activeElement!=a.srcElement&&$MA.triggerJQueryEvent(document.activeElement,"hide")},this.touchMoveListener=function(a){b.onTouchMove(a);b.abortLongPress(a)},this.graphViewElem.addEventListener("touchstart",this.touchStartListener,!1),this.graphViewElem.addEventListener("touchmove",
this.touchMoveListener,!1),a="touchend"):(this.touchStartListener=function(a){b.touchStarted=!0;b.onMouseDown(a);b.startLongPress(a);document.activeElement!=a.srcElement&&$MA.triggerJQueryEvent(document.activeElement,"hide")},this.touchDoubleListener=function(a){b.onDblClick(a)},this.touchMoveListener=function(a){b.touchStarted&&(b.onMouseMove(a),b.abortLongPress(a))},a?(this.graphViewElem.addEventListener("MSPointerDown",this.touchStartListener,!1),this.graphViewElem.addEventListener("MSPointerMove",
this.touchMoveListener,!1),a="MSPointerUp"):(this.graphViewElem.addEventListener("mousedown",this.touchStartListener,!1),this.graphViewElem.addEventListener("mousemove",this.touchMoveListener,!1),this.graphViewElem.addEventListener("dblclick",this.touchDoubleListener,!1),a="mouseup"));this.graphViewElem.addEventListener(a,function(a){b.touchStarted=!1;b.touchEndListener(a);b.abortLongPress(a)},!1)};
$MA.BI.ChartView.prototype.removeGraphEvents=function(){var a=window.navigator.msPointerEnabled;$MA.isTouchEventSupported?(this.graphViewElem.removeEventListener("touchstart",this.touchStartListener,!1),this.graphViewElem.removeEventListener("touchmove",this.touchMoveListener,!1),this.graphViewElem.removeEventListener("touchend",this.touchEndListener,!1)):a?(this.graphViewElem.removeEventListener("MSPointerDown",this.touchStartListener,!1),this.graphViewElem.removeEventListener("MSPointerUp",this.touchEndListener,
!1),this.graphViewElem.removeEventListener("MSPointerMove",this.touchMoveListener,!1)):(this.graphViewElem.removeEventListener("mousedown",this.touchStartListener,!1),this.graphViewElem.removeEventListener("mouseup",this.touchEndListener,!1),this.graphViewElem.removeEventListener("mousemove",this.touchMoveListener,!1),this.graphViewElem.removeEventListener("dblclick",this.touchDoubleListener,!1))};
$MA.BI.ChartView.prototype.highlightCurrentZoomingLevel=function(a){if(this.chartObj.zoomingLevels.length!=0&&this.toolBarElem){var b=this.id+"_toolbar";if(this.isZoomingLevelChanged){var a=this.getZoomingLevel(),c=this.chartObj.zoomingLevels.length,d;for(d=0;d<c;d++)d===a?document.getElementById(b+"_sz_"+d).style.color="#F0AB00":document.getElementById(b+"_sz_"+d).style.color="#fff"}else a==void 0&&(a=0),document.getElementById(b+"_sz_"+a).style.color="#F0AB00"}};
$MA.BI.ChartView.prototype.updateTableViewIcon=function(a){if(this.toolBarElem&&this.toolBarElem.getElementsByClassName("table_button"))a?this.toolBarElem.getElementsByClassName("table_button")[0].className="graph_button":this.toolBarElem.getElementsByClassName("graph_button")[0].className="table_button"};
$MA.BI.ChartView.prototype.getValueDisplayNames=function(a,b){var c=0,d="",e=this.getGraph().graphObjs,f=this.getGraphGob().children,g,h=e.length;for(g=0;g<h;g++)if(c+=e[g].getSeriesCount(),c>a){var j=f[g].values.list[0].displayName;j&&d.indexOf(j)<0&&(d+=(d===""?"":" | ")+j);if(c>b)break}return d};
$MA.BI.BarChartView=function(a,b){$MA.BI.ChartView.call(this,a,b);this.valueBubbleViewElem=void 0;this.currentItems=0;var c=this.elem;c&&(this.createToolBar(c),this.createGraphView(c),this.getGraphView().bind("initialized",this.onGraphViewInitialized,this),this.addGraphEvents(),this.createRangeSelectorView(c),this.createTableView(c),(!this.chartObj.whatIfColumns||this.chartObj.whatIfColumns&&this.chartObj.whatIfColumns.builtin)&&this.createWhatIfView(c),this.createDynamicAnalysisView(c))};
$MA.BI.BarChartView.prototype=new $MA.BI.ChartView;$MA.BI.BarChartView.prototype.createRangeSelector=function(){return new $MA.BI.RangeSelector(this.rangeSelectorViewElem,this)};$MA.BI.BarChartView.prototype.onGraphViewInitialized=function(){this.createValueBubbleView();this.valueBubbleViewElem.style.display="";$MA.BI.ValueBubble.create("hbvs",this.valueBubbleViewElem.id);this.slider=this.valueBubbleViewElem.slider;this.initialize()};
$MA.BI.BarChartView.prototype.reset=function(){this.toolBarViewElem=null;this.getGraphView().unbind("initialized");this.removeGraphEvents();this.dynamicAnalysisViewElem=this.whatIfViewElem=this.tableViewElem=this.graphViewElem=null};
$MA.BI.BarChartView.prototype.onTouchStart=function(a){this.single_tap=this.needsRefresh=!1;var b=this.getGraph();this.tapMoved=this.tappedInLegend=void 0;if(a.targetTouches.length==1){var c=a.targetTouches.item(0),d=new Date,e=d.getTime()-this.lastTouchEvent.getTime(),f=$MA.getMouseXY(c,a.target);this.startX=f.x;this.startY=f.y;if(e>500)if(this.single_tap=!0,a.target.slider!==void 0)this.onValueBubbleViewTouchStart(a);else{if(b.pointInLegend(this.startX,this.startY))this.tappedInLegend=!0}else a.touches.length==
1&&e>50&&a.target.slider!=void 0&&(f=$MA.getMouseXY(c,a.srcElement),b=b.getObjectAtPointer(f.x+this.valueBubbleViewElem.offsetLeft,f.y+this.valueBubbleViewElem.offsetTop,this.valueBubbleViewElem.slider.value),this.fillSelectedValues(b),b.length>0&&this.setDrillDown(b[0].drawObj));this.lastTouchEvent=d;this.lastTouchIsTap=a.touches.length>1?!1:!0}else if(a.targetTouches.length==2)this.startTouchX1=a.targetTouches[0].clientX,this.startTouchX2=a.targetTouches[1].clientX,this.startTouchX=this.startTouchX1,
this.lastTouchEvent=new Date,this.needsRefresh=!0;this.stopEvent(a)};
$MA.BI.BarChartView.prototype.onTouchMove=function(a){var b=new Date,c=b-this.lastTouchEvent,d=this.getGraph();if(a.targetTouches.length==1){var b=a.targetTouches.item(0),b=$MA.getMouseXY(b,a.target),e=this.startX-b.x,f=this.startY-b.y;if(Math.abs(e)>$MA.BI.SimpleChartView.CLICK_TOLERANCE||Math.abs(f)>$MA.BI.SimpleChartView.CLICK_TOLERANCE)this.tapMoved=!0;if(this.tappedInLegend){if(Math.abs(e)>$MA.BI.SimpleChartView.CLICK_TOLERANCE||Math.abs(f)>$MA.BI.SimpleChartView.CLICK_TOLERANCE)d.doScrollLegend(e,
f),this.startX=b.x,this.startY=b.y,this.legendScrolling=!0}else this.onValueBubbleViewTouchMove(a)}else if(a.targetTouches.length==2&&c>$MA.BI.ChartView.touchTimeSlot){var f=a.targetTouches[0],g=a.targetTouches[1],c=f.clientX-this.startTouchX1,h=g.clientX-this.startTouchX2;if(c<-15&&h<-15)c=1;else if(c>15&&h>15)c=2;else{var h=Math.abs(f.clientX-g.clientX),j=Math.abs(this.startTouchX1-this.startTouchX2),c=h-j;if(c=c<-15?3:c>15?4:void 0)e=a.scale?1/a.scale:j/h,isFinite(e)||(c=void 0)}if(c){var l=this.getCategoryCount(),
h=this.getFirstItem(),j=this.getMaxItems();if(c<3){if(c===1&&h+j<l?h++:c===2&&h>0?h--:c=void 0,c)c===1?h+1+j<l?d.setEndSwipe(!0):d.setEndSwipe(!1):h-1>0?d.setStartSwipe(!0):d.setStartSwipe(!1),this.startTouchX1=f.clientX,this.startTouchX2=g.clientX}else d=this.getVisibleCategoryCount(),d>l&&(d=l),e=Math.round(e*j+0.5),e<2&&j>1&&(e=2),e>d&&(e=d),j!=e?(h=Math.floor(h-(e-j)/2),h<0?h=0:h+e>d&&(h=d-e),this.setMaxItems(e)):c=void 0;if(c)this.setFirstItem(h),this.refreshSelectedCategoryIndex(),this.refreshGraphView(),
this.refreshValueBubbleView(!0),this.lastTouchEvent=b,this.needsRefresh=!0;this.swipeOrPinch=c}}if(2<=a.targetTouches.length)this.tapMoved=!0;this.lastTouchIsTap=!1;this.stopEvent(a)};
$MA.BI.BarChartView.prototype.onTouchEnd=function(a){var b=this.getGraph(),c=this.slider;if(this.needsRefresh)b.setStartSwipe(!1),b.setEndSwipe(!1),this.refreshSelectedCategoryIndex(),this.refreshRangeSelectorView(),this.refreshValueBubbleView(!0),this.needsRefresh=void 0;if(this.legendScrolling)this.tappedInLegend=this.legendScrolling=!1;else if(this.tappedInLegend)b.selectLegend(this.startX,this.startY),c.plot(),this.refreshChartViews(),this.tappedInLegend=void 0;else{c=b.isDataScattered()?c.value[0].ItemNumber:
c.value;this.selectedCategoryValue=b.getCategoryValue(c);this.selectedCategoryGroup=b.getCategoryList(c,!0);this.setSelectedCategoryIndex(this.getGraphGob().getFirstItem()+c);this.onValueBubbleViewTouchEnd(a);this.single_tap&&(!this.targetIsSlider||!b.getValueBubble())&&!this.tapMoved&&this.triggerTapEvent(a);if(this.targetIsSlider)this.targetIsSlider=!1;this.single_tap=void 0}this.tapMoved=this.swipeOrPinch=void 0;this.stopEvent(a)};
$MA.BI.BarChartView.prototype.slashChart=function(a){var b=this;if(!(b.count>0)){var c=b.getGraphGob(),d=function(){b.count++;if(b.count>=b.animationCount)b.count=0,b.refreshGraphView(),b.refreshRangeSelectorView(),setTimeout(function(){b.refreshValueBubbleView(!0)},100);else{var e=b.getCategoryCount(),f=c.getFirstItem(),g=c.getMaxItems();a<0&&f+g<e?(c.setFirstItem(f+1),b.refreshGraphView(),b.refreshValueBubbleView(!0),setTimeout(d,100)):a>0&&f>0?(c.setFirstItem(f-1),b.refreshGraphView(),b.refreshValueBubbleView(!0),
setTimeout(d,100)):(b.refreshGraphView(),b.refreshRangeSelectorView(),b.refreshValueBubbleView(!0))}};b.animationCount=Math.floor(Math.abs(a)*10-3);if(b.animationCount<=0)b.animationCount=1;if(b.animationCount>5)b.animationCount=5;b.count=0;setTimeout(d,10)}};$MA.BI.BarChartView.prototype.onRangeSelectorChanged=function(a){a=a==void 0?!0:a;this.refreshSelectedCategoryIndex();this.refreshGraphView();a&&this.refreshValueBubbleView(!0)};
$MA.BI.BarChartView.prototype.refreshValueBubbleView=function(a){var b=this.getSlider(),c=this.getGraph(),d=c.getDataRect(),e=d[0],f=d[1],g=d[2],h=d[3],d=c.getValueBubble(),j=0;d&&c.checkValueBubbleStyle($MA.ValueBubbleStyle.TOP)&&(j=b.getHeight(),j=f>j?j:f);this.valueBubbleViewElem.style.top=f-j+"px";this.valueBubbleViewElem.style.left=e+"px";this.valueBubbleViewElem.width=g;this.valueBubbleViewElem.height=h+j;if(!(c.graphObj.suppliedTotals&&c.graphObj.drawObjects.length==0))b.incr=c.getElementIncrX(),
b.itemSize=c.getElementWidth(),c=c.getElementStartX(),e=b.itemSize/2,b.startX=c,d&&b.show(this,c,j,e,a,this.getSelectedCategoryIndexRel())};$MA.BI.BarChartView.prototype.getGraphViewHeight=function(a){a=a.offsetHeight;this.showRangeSelectorFlag&&(a-=$MA.BI.ChartView.RANGESELECTOR_HEIGHT+20);return this.toolBarElem==void 0||this.toolBarElem.style.display=="none"?a+"px":a-$MA.BI.ChartView.TOOLBAR_HEIGHT+"px"};
$MA.BI.HBarChartView=function(a,b){$MA.BI.ChartView.call(this,a,b);this.currentY=this.currentX=0;this.lastRedrawTime=this.lastTouchEvent;var c=document.getElementById(a);c!=void 0&&(this.createToolBar(c),this.createGraphView(c),this.getGraphView().bind("initialized",this.onGraphViewInitialized,this),this.addGraphEvents(),this.createTableView(c),(!this.chartObj.whatIfColumns||this.chartObj.whatIfColumns&&this.chartObj.whatIfColumns.builtin)&&this.createWhatIfView(c),this.createDynamicAnalysisView(c))};
$MA.BI.HBarChartView.prototype=new $MA.BI.ChartView;$MA.BI.HBarChartView.prototype.onGraphViewInitialized=function(){var a=this.getGraph(),b=this.getGraphGob();a.setTableHeaderNames(b.getCategoryName(),b.getValueName());this.createValueBubbleView();$MA.BI.ValueBubble.create("vs",this.valueBubbleViewElem.id);this.initialize();a.setValueBubble(!1)};
$MA.BI.HBarChartView.prototype.reset=function(){this.toolBarViewElem=null;this.getGraphView().unbind("initialized");this.removeGraphEvents();this.dynamicAnalysisViewElem=this.whatIfViewElem=this.tableViewElem=this.graphViewElem=null};$MA.BI.HBarChartView.prototype.getMaxItems=function(){var a=this.getGraph(),b=a.calcBarWidth()+2*a.calcBarGap(),a=a.getDataRect()[3];return Math.floor(a/b)};
$MA.BI.HBarChartView.prototype.onMouseDown=function(a){var b=this.getGraph();this.firstRow=b.getTableFirstRow();this.rowDiff=0;this.maxItems=this.getMaxItems();this.lastRedrawTime=new Date;var c=this.getRowCount();this.legendMoving=!1;this.valueBubbleViewElem.style.display="";var d=a.target.slider?a.layerX:a.layerX-this.valueBubbleViewElem.offsetLeft,e=a.target.slider?a.layerY:a.layerY-this.valueBubbleViewElem.offsetTop,f=this.valueBubbleViewElem.slider;if(!b.pointInLegend(void 0!==a.offsetX?a.offsetX:
a.layerX,void 0!==a.offsetY?a.offsetY:a.layerY))f.reset(),f.currentX=d,f.currentY=e,f.update(),f.value<(c-this.firstRow)/b.getSeriesCount(0)&&(b.getValueBubble()&&(c=b.getTableFirstRow(),c=Math.floor(c/b.getSeriesCount(0)),f.value+=c,this.updateValueBubble(),f.value-=c),f.plot(),b.updateValueBubbleValue(f.value),this.redrawGraphView()),f.dragging=!0;d=a.target.slider?a.layerX+this.valueBubbleViewElem.offsetLeft:a.layerX;e=a.target.slider?a.layerY+this.valueBubbleViewElem.offsetTop:a.layerY;this.currentX=
d;this.currentY=e;this.stopEvent(a)};
$MA.BI.HBarChartView.prototype.onMouseMove=function(a){var b=this.getSlider(),c=this.getGraph(),d=c.calcBarWidth(),e=a.target.slider?a.layerX+this.valueBubbleViewElem.offsetLeft:a.layerX,f=a.target.slider?a.layerY+this.valueBubbleViewElem.offsetTop:a.layerY;if(b.dragging){if(e=Math.round((this.currentY-f)/d),b=this.getRowCount(),e!=this.rowDiff)d=this.firstRow+e,d>=0&&d+this.maxItems<=b&&(c.setTableFirstRow(d),this.redrawGraphView()),this.rowDiff=e}else if(c.pointInLegend(e,f)&&c.isLegendMovable()&&
Math.abs(this.currentX-e)>=d)b=0,b=this.currentX>e?-1:1,this.currentX=e,this.legendMoving=!0,c.updateStartLegend(b),this.redrawGraphView();this.stopEvent(a)};
$MA.BI.HBarChartView.prototype.onMouseUp=function(a){var b=this.getGraph(),c=this.valueBubbleViewElem.slider;a.target==this.valueBubbleViewElem?(this.selectedCategoryValue=b.getCategoryValue(c.value),this.selectedCategoryGroup=b.getCategoryList(c.value,!0)):(this.selectedCategoryValue=this.selectedCategoryGroup="",this.selectedSeriesName=[]);var d=a.target.slider?a.layerY+this.valueBubbleViewElem.offsetTop:a.layerY;this.slashChart((d-this.currentY)/((new Date).getTime()-this.lastRedrawTime.getTime()),
this.elem);var e=void 0!==a.offsetX?a.offsetX:a.layerX,f=void 0!==a.offsetY?a.offsetY:a.layerY;if(c.dragging)d=a.target.slider?a.layerY:a.layerY-this.valueBubbleViewElem.offsetTop,c.currentY=d,b.pointInLegend(e,f)||this.updateSliderView();this.legendMoving==!1&&b.pointInLegend(e,f)&&(b.selectLegend(e,f),this.redrawGraphView(),this.updateSliderView());this.triggerTapEvent(a);this.stopEvent(a)};
$MA.BI.HBarChartView.prototype.slashChart=function(a){var b=this,c=function(){b.count++;if(!(b.count>b.animationCount)){var d=b.getRowCount(),e=1;a>0&&(e=-1);var f=b.getGraph(),e=f.getTableFirstRow()+e;e>=0&&e+b.maxItems<=d&&(f.setTableFirstRow(e),b.updateSliderView(),setTimeout(c,70))}};this.animationCount=Math.floor(Math.abs(a)*10-3);this.count=0;setTimeout(c,70)};
$MA.BI.HBarChartView.prototype.onDblClick=function(a){a=this.getGraph().getObjectAtPointer(a.target.slider?a.layerX+this.valueBubbleViewElem.offsetLeft:a.layerX,a.target.slider?a.layerY+this.valueBubbleViewElem.offsetTop:a.layerY,this.valueBubbleViewElem.slider.value);this.fillSelectedValues(a);a.length>0&&this.setDrillDown(a[0].drawObj)};
$MA.BI.HBarChartView.prototype.onTouchStart=function(a){this.lastRedrawTime=new Date;if(a.touches.length==1){var b=a.touches.item(0),b=$MA.getMouseXY(b,a.srcElement),c=b.x,d=b.y,e=this.getGraph(),b=new Date,f=b.getTime()-this.lastTouchEvent.getTime();if(f>500)if(this.isDrillDown=!1,e.pointInLegend(c,d))this.currentX=c,this.currentY=d,this.legendMoving=!1;else{this.currentX=c;this.currentY=d;this.firstRow=e.getTableFirstRow();this.rowDiff=0;this.maxItems=this.getMaxItems();var g=this.getRowCount();
this.valueBubbleViewElem.style.display="";c=a.target.slider?c:c-this.valueBubbleViewElem.offsetLeft;d=a.target.slider?d:d-this.valueBubbleViewElem.offsetTop;f=this.valueBubbleViewElem.slider;if(!e.pointInLegend(void 0!==a.offsetX?a.offsetX:a.layerX,void 0!==a.offsetY?a.offsetY:a.layerY))f.reset(),f.currentX=c,f.currentY=d,f.update(),f.value<(g-this.firstRow)/e.getSeriesCount(0)&&(e.getValueBubble()&&(c=e.getTableFirstRow(),c=Math.floor(c/e.getSeriesCount(0)),f.value+=c,this.updateValueBubble(),f.value-=
c),f.plot(),e.updateValueBubbleValue(f.value),this.redrawGraphView()),f.dragging=!0}else if(a.touches.length==1&&f>50)this.isDrillDown=!0,c=a.target.slider?c+this.valueBubbleViewElem.offsetLeft:c,d=a.target.slider?d+this.valueBubbleViewElem.offsetTop:d,e=e.getObjectAtPointer(c,d,this.valueBubbleViewElem.slider.value),this.fillSelectedValues(e),e.length>0&&this.setDrillDown(e[0].drawObj);this.lastTouchEvent=b;this.lastTouchIsTap=a.touches.length>1?!1:!0}this.stopEvent(a)};
$MA.BI.HBarChartView.prototype.onTouchMove=function(a){if(a.touches.length==1){var b=this.getGraph(),c=b.calcBarWidth(),d=a.touches.item(0),e=$MA.getMouseXY(d,a.srcElement),d=e.x,e=e.y,f=Math.round((this.currentY-e)/c),g=this.getRowCount();if(f!=this.rowDiff){var h=this.firstRow+f;h>=0&&h+this.maxItems<=g&&(b.setTableFirstRow(h),this.redrawGraphView());this.rowDiff=f}if(b.isLegendMovable()&&b.pointInLegend(d,e)&&Math.abs(this.currentX-d)>=c)c=0,c=this.currentX>d?-1:1,this.currentX=d,this.legendMoving=
!0,b.updateStartLegend(c),this.redrawGraphView()}this.lastTouchIsTap=!1;this.stopEvent(a)};
$MA.BI.HBarChartView.prototype.onTouchEnd=function(a){var b=this.getGraph(),c=this.valueBubbleViewElem.slider;a.target==this.valueBubbleViewElem?(this.selectedCategoryValue=b.getCategoryValue(c.value),this.selectedCategoryGroup=b.getCategoryList(c.value,!0)):(this.selectedCategoryValue=this.selectedCategoryGroup="",this.selectedSeriesName=[]);if(!this.isDrillDown){var d=$MA.getMouseXY(a.changedTouches[0],a.srcElement);if(c.dragging)c.currentY=a.target.slider?d.y:d.y-this.valueBubbleViewElem.offsetTop,
this.slashChart((d.y-this.currentY)/((new Date).getTime()-this.lastRedrawTime.getTime())),b.pointInLegend(d.x,d.y)||this.updateSliderView();this.legendMoving==!1&&b.pointInLegend(d.x,d.y)&&(b.selectLegend(d.x,d.y),this.redrawGraphView(),this.updateSliderView());this.triggerTapEvent(a);this.stopEvent(a)}};$MA.BI.HBarChartView.prototype.getRowCount=function(){var a=this.getGraph(),b=a.getSeriesCount(0),c=this.getCategoryCount();a.graphObj.showTotal&&c++;return b*c};
$MA.BI.HBarChartView.prototype.refreshValueBubbleView=function(){var a=this.valueBubbleViewElem.slider,b=this.getGraph(),c=b.getDataRect(),d=c[0],e=c[2],f=c[3];this.valueBubbleViewElem.style.top=c[1]+"px";this.valueBubbleViewElem.style.left=d+"px";this.valueBubbleViewElem.width=e;this.valueBubbleViewElem.height=f;c=b.getSeriesCount(0);d=b.getTableFirstRow();a.startY=-(d%c)*(b.calcBarWidth()+2*b.calcBarGap());a.incr=b.calcBarEntryWidth();a.itemSize=a.incr;a.offset=a.incr/2;a.update();a.reset();a.value<
(this.getRowCount()-b.getTableFirstRow())/b.getSeriesCount(0)&&(b.getValueBubble()&&(c=Math.floor(d/b.getSeriesCount(0)),a.value+=c,this.updateValueBubble(),a.value-=c),a.plot(b.graphType==="waterfallbar"),b.updateValueBubbleValue(a.value))};
$MA.BI.HBarChartView.prototype.updateSliderView=function(){var a=this.valueBubbleViewElem.slider,b=this.getGraph(),c=b.getSeriesCount(0),d=b.getTableFirstRow();a.startY=-(d%c)*(b.calcBarWidth()+2*b.calcBarGap());a.update();if(a.value<(this.getRowCount()-d)/b.getSeriesCount(0)){if(b.getValueBubble()){var e=Math.floor(d/b.getSeriesCount(0));a.value+=e;this.updateValueBubble();a.value-=e}a.plot();b.updateValueBubbleValue(a.value);this.redrawGraphView()}a.categoryText=b.getCategoryString(Math.floor(d/
c)+a.value)};$MA.BI.HBarChartView.prototype.resetTable=function(){var a=this.getGraph(),b=this.getGraphGob();this.chartObj.zoomingLevels.length==0?a.setTableHeaderNames(b.getCategoryName(),b.getValueName()):this.chartObj.zoomingLevels[this.chartObj.level].title?a.setTableHeaderNames(this.chartObj.zoomingLevels[this.chartObj.level].title,b.getValueName()):a.setTableHeaderNames(this.chartObj.zoomingLevels[this.chartObj.level].categoryColumn,b.getValueName());this.getTableView().dvObj=void 0};
$MA.BI.HBarChartView.prototype.refreshGraphView=function(){var a=this.getGraphElem(),b=this.getGraph();this.graphWidth==this.graphViewElem.offsetWidth&&this.isToggleTableMode&&!this.isZoomingLevelChanged&&!this.isDataChanged?(b.refreshBrush(),b.redraw(a)):(b.updateValueBubbleValue(-1),this.getGraphView().refresh())};
$MA.BI.HBarChartView.prototype.initializeData=function(){var a;if("groupUp"===this.refreshAction||"groupDown"===this.refreshAction)this.refreshAction="updateTable",a=0;$MA.BI.ChartView.prototype.initializeData.call(this);void 0!==a&&(a=this.getCategoryCount(),this.setFirstItem(0),$MA.BI.ChartView.prototype.setMaxItems.call(this,a),this.setVisibleCategoryCount(a))};
$MA.BI.HBarChartView.prototype.showTableValue=function(a){var b=this.getGraphElem(),c=this.getGraph();c&&(c.showTableValue(a),c.refresh(b,!1),this.refreshValueBubbleView(!1))};$MA.BI.HBarChartView.prototype.showValueBubble=function(){};$MA.BI.LineChartView=function(a,b){$MA.BI.BarChartView.call(this,a,b)};$MA.BI.LineChartView.prototype=new $MA.BI.BarChartView;
$MA.BI.LineChartView.prototype.onDblClick=function(a){var b=this.getGraph();if(a.target.slider!=void 0){var c=a.offsetX!=void 0?a.offsetX:a.layerX,a=a.offsetY!=void 0?a.offsetY:a.layerY;c+=this.valueBubbleViewElem.offsetLeft;a+=this.valueBubbleViewElem.offsetTop;b=b.getLineObjectAtPointer(c,a,this.valueBubbleViewElem.slider.value);b!=null&&this.setDrillDown(b)}};
$MA.BI.LineChartView.prototype.refreshValueBubbleView=function(a){var b=this.valueBubbleViewElem.slider,c=this.getGraph(),d=c.getDataRect(),e=d[0],f=d[1],g=d[2],h=d[3],d=0;c.getValueBubble()&&c.checkValueBubbleStyle($MA.ValueBubbleStyle.TOP)&&(d=b.getHeight(),d=f>d?d:f);this.valueBubbleViewElem.style.top=f-d+"px";this.valueBubbleViewElem.style.left=e+"px";this.valueBubbleViewElem.width=g;this.valueBubbleViewElem.height=h+d;e=c.getMaxItemCount();f=c.calcLineStartPos(g);e==1?(b.incr=g/2,b.center=!0):
(b.incr=(g-2*f)/(e-1),b.center=!1);b.itemSize=c.getElementWidth();if(!(b.itemSize<=0))b.gap=f,c.getValueBubble()&&b.show(this,f,d,0,a,this.getSelectedCategoryIndexRel())};
$MA.BI.BubbleChartView=function(a,b){$MA.BI.ChartView.call(this,a,b);var c=document.getElementById(a);c&&(this.createToolBar(c),this.createGraphView(c),this.getGraphView().bind("initialized",this.onGraphViewInitialized,this),this.addGraphEvents(),this.createTableView(c),(!this.chartObj.whatIfColumns||this.chartObj.whatIfColumns&&this.chartObj.whatIfColumns.builtin)&&this.createWhatIfView(c),this.createDynamicAnalysisView(c))};$MA.BI.BubbleChartView.prototype=new $MA.BI.ChartView;
$MA.BI.BubbleChartView.prototype.onGraphViewInitialized=function(){var a=this.getGraph();a.setLegend("none");var b=this.chartObj.dvObj.getTableColumn(this.getGraphGob().getObject("Category").getProperty("column"));b&&b.type==$MA.TableColumnType.DOUBLE&&a.setDataScattered(!0);this.createValueBubbleView();$MA.BI.ValueBubble.create("hbvs",this.valueBubbleViewElem.id);this.initialize()};
$MA.BI.BubbleChartView.prototype.reset=function(){this.toolBarViewElem=null;this.getGraphView().unbind("initialized");this.removeGraphEvents();this.dynamicAnalysisViewElem=this.whatIfViewElem=this.tableViewElem=this.graphViewElem=null};var startTouchX1,startTouchX2,startTouchX,isSwipe;
$MA.BI.BubbleChartView.prototype.onTouchStart=function(a){this.single_tap=this.needsRefresh=!1;var b=this.getGraph();this.tapMoved=this.tappedInLegend=void 0;if(a.targetTouches.length==1){var c=a.targetTouches.item(0),d=new Date,e=d.getTime()-this.lastTouchEvent.getTime(),f=$MA.getMouseXY(c,a.target);this.startX=f.x;this.startY=f.y;if(e>500)if(this.single_tap=!0,a.target.slider!==void 0)this.onValueBubbleViewTouchStart(a);else{if(b.pointInLegend(this.startX,this.startY))this.tappedInLegend=!0}else a.touches.length==
1&&e>50&&a.target.slider!=void 0&&(f=$MA.getMouseXY(c,a.srcElement),b=b.getObjectAtPointer(f.x+this.valueBubbleViewElem.offsetLeft,f.y+this.valueBubbleViewElem.offsetTop,this.valueBubbleViewElem.slider.value),this.fillSelectedValues(b),b.length>0&&this.setDrillDown(b[0].drawObj));this.lastTouchEvent=d;this.lastTouchIsTap=a.touches.length>1?!1:!0}else if(a.targetTouches.length==2)this.startTouchX1=a.targetTouches[0].clientX,this.startTouchX2=a.targetTouches[1].clientX,this.startTouchX=this.startTouchX1,
this.lastTouchEvent=new Date,this.needsRefresh=!0;this.stopEvent(a)};
$MA.BI.BubbleChartView.prototype.onTouchMove=function(a){var b=new Date,c=b-this.lastTouchEvent,d=this.getGraph();if(a.targetTouches.length==1){var b=a.targetTouches.item(0),b=$MA.getMouseXY(b,a.target),e=this.startX-b.x,f=this.startY-b.y;if(Math.abs(e)>$MA.BI.SimpleChartView.CLICK_TOLERANCE||Math.abs(f)>$MA.BI.SimpleChartView.CLICK_TOLERANCE)this.tapMoved=!0;if(this.tappedInLegend){if(Math.abs(e)>$MA.BI.SimpleChartView.CLICK_TOLERANCE||Math.abs(f)>$MA.BI.SimpleChartView.CLICK_TOLERANCE)d.doScrollLegend(e,
f),this.startX=b.x,this.startY=b.y,this.legendScrolling=!0}else this.onValueBubbleViewTouchMove(a)}else if(a.targetTouches.length==2&&c>$MA.BI.ChartView.touchTimeSlot){var f=a.targetTouches[0],g=a.targetTouches[1],c=f.clientX-this.startTouchX1,h=g.clientX-this.startTouchX2;if(c<-15&&h<-15)c=1;else if(c>15&&h>15)c=2;else{var h=Math.abs(f.clientX-g.clientX),j=Math.abs(this.startTouchX1-this.startTouchX2),c=h-j;if(c=c<-15?3:c>15?4:void 0)e=a.scale?1/a.scale:j/h,isFinite(e)||(c=void 0)}if(c){var l=this.getCategoryCount(),
h=this.getFirstItem(),j=this.getMaxItems();if(c<3){if(c===1&&h+j<l?h++:c===2&&h>0?h--:c=void 0,c)c===1?h+1+j<l?d.setEndSwipe(!0):d.setEndSwipe(!1):h-1>0?d.setStartSwipe(!0):d.setStartSwipe(!1),this.startTouchX1=f.clientX,this.startTouchX2=g.clientX}else d=this.getVisibleCategoryCount(),d>l&&(d=l),e=Math.round(e*j+0.5),e<2&&j>1&&(e=2),e>d&&(e=d),j!=e?(h=Math.floor(h-(e-j)/2),h<0?h=0:h+e>d&&(h=d-e),this.setMaxItems(e)):c=void 0;if(c)this.setFirstItem(h),this.refreshSelectedCategoryIndex(),this.refreshGraphView(),
this.refreshValueBubbleView(!0),this.lastTouchEvent=b,this.needsRefresh=!0;this.swipeOrPinch=c}}if(2<=a.targetTouches.length)this.tapMoved=!0;this.lastTouchIsTap=!1;this.stopEvent(a)};
$MA.BI.BubbleChartView.prototype.onTouchEnd=function(a){var b=this.getGraph(),c=this.slider;if(this.needsRefresh)b.setStartSwipe(!1),b.setEndSwipe(!1),this.refreshSelectedCategoryIndex(),this.refreshRangeSelectorView(),this.refreshValueBubbleView(!0),this.needsRefresh=void 0;if(this.legendScrolling)this.tappedInLegend=this.legendScrolling=!1;else if(this.tappedInLegend)b.selectLegend(this.startX,this.startY),c&&c.plot(),this.refreshChartViews(),this.tappedInLegend=void 0;else{var d;try{d=b.isDataScattered()?
c.value[0].ItemNumber:c.value}catch(e){}this.selectedCategoryValue=b.getCategoryValue(d);this.selectedCategoryGroup=b.getCategoryList(d,!0);this.setSelectedCategoryIndex(this.getGraphGob().getFirstItem()+d);this.onValueBubbleViewTouchEnd(a);this.single_tap&&(!this.targetIsSlider||!b.getValueBubble())&&!this.tapMoved&&this.triggerTapEvent(a);if(this.targetIsSlider)this.targetIsSlider=!1;this.single_tap=void 0}this.tapMoved=this.swipeOrPinch=void 0;this.stopEvent(a)};
$MA.BI.BubbleChartView.prototype.slashChart=function(a){var b=this;if(!(b.count>0)){var c=function(){b.count++;if(b.count>=b.animationCount)b.count=0,b.refreshGraphView(),setTimeout(function(){b.refreshValueBubbleView(!0)},100);else{var d=b.getGraphGob(),e=d.getFirstItem(),f=d.getMaxItems(),g=b.getCategoryCount();a<0&&e+f<g?(d.setFirstItem(e+1),b.refreshGraphView(),b.refreshValueBubbleView(!0),setTimeout(c,100)):a>0&&e>0?(d.setFirstItem(e-1),b.refreshGraphView(),b.refreshValueBubbleView(!0),setTimeout(c,
100)):(b.refreshGraphView(),b.refreshValueBubbleView(!0))}};b.animationCount=Math.floor(Math.abs(a)*10-3);if(b.animationCount<=0)b.animationCount=1;if(b.animationCount>5)b.animationCount=5;b.count=0;setTimeout(c,10)}};
$MA.BI.BubbleChartView.prototype.refreshValueBubbleView=function(a){var b=this.valueBubbleViewElem.slider,c=this.getGraph(),d=c.getDataRect(),e=d[0],f=d[1],g=d[2],d=d[3],h=0;c.getValueBubble()&&c.checkValueBubbleStyle($MA.ValueBubbleStyle.TOP)&&(h=b.getHeight(),h=f>h?h:f);this.valueBubbleViewElem.style.top=f-h+"px";this.valueBubbleViewElem.style.left=e+"px";this.valueBubbleViewElem.width=g;this.valueBubbleViewElem.height=d+h;b.incr=c.getElementIncrX();b.itemSize=c.getElementWidth();this.valueBubbleViewElem.style.display=
"";c.isDataScattered()?b.show(this,c.getElementStartX(),h,b.itemSize/2,a):b.show(this,c.calcBubbleStartPos(g)-b.incr/2,h,b.incr/2,a)};$MA.BI.BubbleChartView.prototype.getSelectedBubbleInfo=function(){if(this.getChartType()=="bubble")return this.getGraph().getSelectedBubbleInfo()};$MA.BI.BubbleChartView.prototype.setMonoSymbol=function(a){var b=this.getGraph(),b=this.getGraph();b.setMonoSymbol(a)};
$MA.BI.BubbleChartView.prototype.setSymbolPalette=function(a){var b=this.getGraph(),b=this.getGraph();b.setSymbolPalette(a)};$MA.BI.SimpleChartView.prototype.setBubbleBorderColor=function(a){this.getGraph().setBubbleBorderColor(a)};$MA.BI.SimpleChartView.prototype.setBubbleMinSize=function(a){this.getGraph().setBubbleMinSize(a)};
$MA.BI.PieChartView=function(a,b){var c=this;$MA.BI.ChartView.call(this,a,b);this.clickTouch=!1;var d=document.getElementById(a);if(d!=void 0)this.createToolBar(d),this.createGraphView(d),this.getGraphView().bind("initialized",this.onGraphViewInitialized,this),this.addGraphEvents(),this.createTableView(d),(!this.chartObj.whatIfColumns||this.chartObj.whatIfColumns&&this.chartObj.whatIfColumns.builtin)&&this.createWhatIfView(d),this.createDynamicAnalysisView(d),this.onMouseMoveListener=function(a){c.onMouseMove(a)}};
$MA.BI.PieChartView.prototype=new $MA.BI.ChartView;$MA.BI.PieChartView.CLICK_TOLERANCE=3;$MA.BI.PieChartView.prototype.onGraphViewInitialized=function(){this.getGraph().setShowPieLabels(!1);this.createValueBubbleView();$MA.BI.ValueBubble.create("pbvs",this.valueBubbleViewElem.id);this.initialize()};
$MA.BI.PieChartView.prototype.reset=function(){this.toolBarViewElem=null;this.getGraphView().unbind("initialized");this.removeGraphEvents();this.dynamicAnalysisViewElem=this.whatIfViewElem=this.tableViewElem=this.graphViewElem=null;this.clickTouch=!1};$MA.BI.PieChartView.prototype.initSliderCenter=function(){var a=this.valueBubbleViewElem.slider,b=this.getGraph().getCenter();a.centerX=b[0]-this.valueBubbleViewElem.offsetLeft;a.centerY=b[1]-this.valueBubbleViewElem.offsetTop};
$MA.BI.PieChartView.prototype.onSingleTouchStart=function(a){var b=this.valueBubbleViewElem,c=this.getGraph(),d=this.getSlider();this.tappedInLegends=void 0;var e=this.startX,f=this.startY;a.target!=b?(e-=b.offsetLeft,f-=b.offsetTop):(this.startX+=b.offsetLeft,this.startY+=b.offsetTop);this.lastX=this.startX;this.lastY=this.startY;d.x=e;d.y=f;d.updating(d.x,d.y);this.rotateValue=0;if(c.pointInLegend(this.startX,this.startY))this.tappedInLegends=!0,c.getValueBubble()||this.showValueBubble(!0),d.plot();
else if(c.getValueBubble())if(this.tappedInLegends=!1,d.onMouseDown(e,f)>0)d.dragging=!1;else if(d.dragging=!0,!d.hasPieSelected())a=d.getRadian(),b=c.getPieFillBrush(a),d.text=c.getPieDataString(a),b!=void 0&&(d.setLegends([c.getPieSlice(a)]),d.plot())};
$MA.BI.PieChartView.prototype.onSingleTouchMove=function(a,b,c){var d=this.getGraph(),e;if(this.tappedInLegends){if(e=this.startX-b,a=this.startY-c,Math.abs(e)>$MA.BI.SimpleChartView.CLICK_TOLERANCE||Math.abs(a)>$MA.BI.SimpleChartView.CLICK_TOLERANCE)d.doScrollLegend(e,a),this.startX=b,this.startY=c,this.legendScrolling=!0,d.getValueBubble()&&(e=this.getSlider(),e.plot()),d.refreshPie()}else if(d.getValueBubble()){var f=this.valueBubbleViewElem;e=this.getSlider();a.target!=f&&(b-=f.offsetLeft,c-=
f.offsetTop);if(e.scrolling)e.doScroll(b,c);else if(e.dragging&&(this.lastX=b,this.lastY=c,a.target==f&&(this.lastX+=f.offsetLeft,this.lastY+=f.offsetTop),e.updating(b,c),b=!0,e.hasPieSelected()&&(Math.abs(this.rotateValue+e.value)>=Math.PI/18?b=!1:this.rotateValue+=e.value),b)){if(!e.hasPieSelected()&&(b=e.getRadian(),d.getPieFillBrush(b)!=void 0))e.text=d.getPieDataString(b),e.setLegends([d.getPieSlice(b)]),e.plot();d.rotatePie(e.value)}}};
$MA.BI.PieChartView.prototype.onMouseDown=function(a){if(!this.getGraph().inRotatePie)this.initSliderCenter(),this.startX=a.offsetX!=void 0?a.offsetX:a.layerX,this.startY=a.offsetY!=void 0?a.offsetY:a.layerY,this.valueBubbleViewElem.style.display="",this.onSingleTouchStart(a),this.graphViewElem.onmousemove=this.onMouseMoveListener;this.stopEvent(a)};
$MA.BI.PieChartView.prototype.onMouseMove=function(a){this.onSingleTouchMove(a,a.offsetX!=void 0?a.offsetX:a.layerX,a.offsetY!=void 0?a.offsetY:a.layerY);this.stopEvent(a)};
$MA.BI.PieChartView.prototype.onMouseUp=function(a){var b=this.getGraph();if(this.legendScrolling)this.legendScrolling=!1;else{var c=this.getSlider(),d=a.offsetX!=void 0?a.offsetX:a.layerX,e=a.offsetY!=void 0?a.offsetY:a.layerY,f=d,g=e;a.target!=this.valueBubbleViewElem?(d-=this.valueBubbleViewElem.offsetLeft,e-=this.valueBubbleViewElem.offsetTop):(f+=this.valueBubbleViewElem.offsetLeft,g+=this.valueBubbleViewElem.offsetTop);var h=!1;if(c.scrolling){c.onMouseUp(d,e);c.scrolling=!1;return}if(c.dragging)c.update(),
this.graphViewElem.onMouseMove=void 0;Math.abs(f-this.startX)<$MA.BI.PieChartView.CLICK_TOLERANCE&&Math.abs(g-this.startY)<$MA.BI.PieChartView.CLICK_TOLERANCE&&(this.tappedInLegends?b.selectLegend(f,g)&&(b.selectPie(),h=!0):this.triggerTapEvent(a));c.hasPieSelected()&&this.rotateValue!=0&&b.rotatePie(-1*this.rotateValue);this.rotateValue=0;!h&&!c.hasPieSelected()&&(d=c.getRadian(),(e=b.getRadianDrawObject(d))&&b.rotatePie(d-((e.radEnd+e.radStart)/2+e.offset)+Math.PI*2));this.refreshValueBubbleLegends();
c.plot()}this.tappedInLegends=void 0;this.stopEvent(a)};
$MA.BI.PieChartView.prototype.onTouchStart=function(a){var b=this.getGraph();if(a.touches.length==1&&!b.inRotatePie){var c=a.touches.item(0),d=$MA.getMouseXY(c,a.target);this.startX=d.x;this.startY=d.y;this.valueBubbleViewElem.style.display="";this.initSliderCenter();c=new Date;if(!this.clickTouch||c.getTime()-this.lastTouchEvent.getTime()>500)this.onSingleTouchStart(a);else a.target==this.valueBubbleViewElem&&(b=b.getObjectAtPointer(d.x+this.valueBubbleViewElem.offsetLeft,d.y+this.valueBubbleViewElem.offsetTop,
this.valueBubbleViewElem.slider.value),this.fillSelectedValues(b),b.length>0&&this.setDrillDown(b[0].drawObj));this.lastTouchEvent=c}this.stopEvent(a)};
$MA.BI.PieChartView.prototype.onTouchMove=function(a){var b=new Date;if(a.touches.length==1){var c=a.touches.item(0),c=$MA.getMouseXY(c,a.target),d=c.x,e=c.y;if($MA.Browser.isJB42StockBrowser){if(this.plotByShow){var c=this.getSlider().context.canvas,f=c.width;c.width=f;this.plotByShow=!1}this.onSingleTouchMove(a,d,e)}else if(!this.pieMoveTimerId){if(this.plotByShow)c=this.getSlider().context.canvas,f=c.width,c.width=f,this.plotByShow=!1;var g=this;this.pieMoveTimerId=setTimeout(function(){g.onSingleTouchMove(a,
d,e);g.pieMoveTimerId=null},50)}this.lastTouchEvent=b}this.stopEvent(a)};
$MA.BI.PieChartView.prototype.onTouchEnd=function(a){if(this.pieMoveTimerId)clearTimeout(this.pieMoveTimerId),this.pieMoveTimerId=null;var b=this.valueBubbleViewElem.slider;b.dragging&&b.update();this.clickTouch=!1;var c=this.getGraph();if(this.legendScrolling)this.legendScrolling=void 0;else{var d=this.lastX,e=this.lastY,f=!1;if(b.scrolling)b.onMouseUp(d,e),b.scrolling=!1;else{if(Math.abs(d-this.startX)<$MA.BI.PieChartView.CLICK_TOLERANCE&&Math.abs(e-this.startY)<$MA.BI.PieChartView.CLICK_TOLERANCE)this.tappedInLegends?
c.selectLegend(d,e)&&(c.selectPie(),f=!0):(this.clickTouch=!0,this.triggerTapEvent(a));b.hasPieSelected()&&this.rotateValue!=0&&c.rotatePie(-1*this.rotateValue);this.rotateValue=0;!f&&!b.hasPieSelected()&&(d=b.getRadian(),(e=c.getRadianDrawObject(d))&&c.rotatePie(d-((e.radEnd+e.radStart)/2+e.offset)+Math.PI*2));this.refreshValueBubbleLegends();b.plot()}}this.tappedInLegend=void 0;this.stopEvent(a)};
$MA.BI.PieChartView.prototype.refreshValueBubbleLegends=function(){var a=this.getGraph(),b=this.getSlider(),c=a.getSelectedPieSlices();0<c.length?b.setLegends(c,!0):(c=b.getRadian(),b.setLegends([a.getPieSlice(c)]))};
$MA.BI.PieChartView.prototype.refreshValueBubbleView=function(a){var b=this.valueBubbleViewElem.slider,c=this.getGraph(),d=c.getDisplayRect(),e=d[0],f=d[1],g=d[2],d=d[3],h=80;f<h&&(h=f);this.valueBubbleViewElem.style.top=f-h+"px";this.valueBubbleViewElem.style.left=e+"px";this.valueBubbleViewElem.width=g;this.valueBubbleViewElem.height=d+h;b.radius=c.getPieRadius();b.yOffset=f;c.getValueBubble()?c.setValueBubbleHeight(b.getHeight()):c.setValueBubbleHeight(0);this.valueBubbleViewElem.style.display=
"";this.initSliderCenter();b.show(this,a)};$MA.BI.PieChartView.prototype.showValueBubble=function(a){this.getGraph().setValueBubble(a);this.refresh()};$MA.BI.PieChartView.prototype.getValueBubbleHeight=function(){return this.getGraph().getValueBubble()?$MA.BI.ChartView.prototype.getValueBubbleHeight.call(this):0};
$MA.BI.ChartTableDataView=function(a,b,c){$MA.DataView.call(this,a);this.graphViewElem=b;this.chartObj=c;this.columnX=[];this.format=void 0;this.firstRow=0;this.maxRows=10;this.rowDiff=this.tableWidth=0;this.lastCol=this.startCol=this.getFirstContentsColumn();this.moveable=!1;this.columnW=[];this.fontSize="14px";this.fontFamily="Helvetica";this.textColor="black";this.rowHeaderBkColor=this.dimTitleBkColor="#DDDDDD";this.contentsBkColor=this.colHeadersBkColor="#F7F7F7";this.gridLineColor="white";this.separatorLineColor=
"#DDDDDD";this.lastRedrawTime=this.lastTouchEvent=new Date;this.textShadowColor="white";if(a=document.getElementById(a)){var d=this;$MA.isTouchEventSupported?(a.addEventListener("touchstart",function(a){d.onTouchStart(a)},!1),a.addEventListener("touchmove",function(a){d.onTouchMove(a)},!1),a.addEventListener("touchend",function(a){d.onTouchEnd(a)},!1)):(a.addEventListener("mousedown",function(a){d.onMouseDown(a)},!1),a.addEventListener("mouseup",function(a){d.onMouseUp(a)},!1),a.addEventListener("dblclick",
function(a){d.onDblClick(a)},!1))}this.getStyles()};$MA.BI.ChartTableDataView.prototype=new $MA.DataView;$MA.BI.ChartTableDataView.PADDING=10;$MA.BI.ChartTableDataView.ROWHEIGHT=44;$MA.BI.ChartTableDataView.getOwner=function(a){for(;a&&a.macontrol==void 0;)a=a.parentNode;return a};$MA.BI.ChartTableDataView.getCanvasElem=function(a){return a.macontrol.getElement("canvas_1")};$MA.BI.ChartTableDataView.getTableView=function(a){return a.macontrol};$MA.BI.ChartTableDataView.prototype.getGraphView=function(){return this.graphViewElem.macontrol};
$MA.BI.ChartTableDataView.prototype.getGraphElem=function(){var a=this.graphViewElem.children;return a[a.length-1].children[0]};$MA.BI.ChartTableDataView.prototype.getGraph=function(){return this.getGraphElem().macontrol};
$MA.BI.ChartTableDataView.prototype.getStyles=function(){var a=$MA.getCSSRule(".chart_table");if(a){if(a.style.fontSize!="")this.fontSize=a.style.fontSize;if(a.style.fontFamily!="")this.fontFamily=a.style.fontFamily;if(a.style.color!="")this.textColor=a.style.color;if(a.style.background!="")this.gridLineColor=a.style.background}if((a=$MA.getCSSRule(".chart_table_dimension_title"))&&a.style.backgroundColor!="")this.dimTitleBkColor=a.style.backgroundColor;if((a=$MA.getCSSRule(".chart_table_row_header"))&&
a.style.backgroundColor!="")this.rowHeaderBkColor=a.style.backgroundColor;if((a=$MA.getCSSRule(".chart_table_column_headers"))&&a.style.backgroundColor!="")this.colHeadersBkColor=a.style.backgroundColor;if((a=$MA.getCSSRule(".chart_table_contents"))&&a.style.backgroundColor!="")this.contentsBkColor=a.style.backgroundColor};$MA.BI.ChartTableDataView.prototype.stopEvent=function(a){a.preventDefault();a.stopPropagation()};
$MA.BI.ChartTableDataView.prototype.mouseMoveListener=function(a){var b=$MA.BI.ChartTableDataView.getOwner(a.target);if(b!=void 0)$MA.BI.ChartTableDataView.getTableView(b).onMouseMove(a)};
$MA.BI.ChartTableDataView.prototype.onMouseDown=function(a){this.currentX=a.layerX;this.currentY=a.layerY;this.rowDiff=0;this.lastRedrawTime=new Date;(this.firstRow+this.maxRows-1<=this.dvObj.getRowCount()||this.moveable)&&document.getElementById(this.id).addEventListener("mousemove",this.mouseMoveListener,!1);var b=this.getFocusRow(a.layerY),c=this.getFocusCol(a.layerX);if(b>=0&&c>=0)this.clickRow=b,this.clickCol=c,this.redraw();this.stopEvent(a)};
$MA.BI.ChartTableDataView.prototype.onMouseMove=function(a){var b=Math.round((this.currentY-a.layerY)/($MA.BI.ChartTableDataView.ROWHEIGHT/2)),c=this.dvObj.getRowCount();this.isShowTotal()&&c++;if(b!=this.rowDiff){var d=this.firstRow+b;if(d>=0&&d+this.maxRows-1<=c)this.firstRow=d,this.redraw();this.rowDiff=b}if(Math.abs(this.currentX-a.layerX)>=$MA.BI.ChartTableDataView.ROWHEIGHT){c=0;c=this.currentX>a.layerX?1:-1;this.currentX=a.layerX;if(this.startCol==this.getFirstContentsColumn()&&c<0)return;
b=this.dvObj.getTableColumns();d=document.getElementById(this.id);if(this.lastCol==b.length-1&&c>0&&this.tableWidth<=d.offsetWidth)return;c=this.startCol+c;if(c>=this.getFirstContentsColumn()&&c<b.length)this.startCol=c,this.redraw()}this.stopEvent(a)};$MA.BI.ChartTableDataView.prototype.onMouseUp=function(a){document.getElementById(this.id).removeEventListener("mousemove",this.mouseMoveListener,!1);this.slashTable((a.layerY-this.currentY)/((new Date).getTime()-this.lastRedrawTime.getTime()));this.stopEvent(a)};
$MA.BI.ChartTableDataView.prototype.slashTable=function(a){var b=this,c=function(){b.count++;if(!(b.count>b.animationCount)){var d=b.dvObj.getRowCount(),e=1;a>0&&(e=-1);e=b.firstRow+e;if(e>=0&&e+b.maxRows-1<=d)b.firstRow=e,b.redraw(),setTimeout(c,70)}};b.animationCount=Math.floor(Math.abs(a)*10-3);b.count=0;setTimeout(c,70)};$MA.BI.ChartTableDataView.prototype.onDblClick=function(a){a=this.getFocusRow(a.layerY);a>=0&&this.setDrillDown(a)};
$MA.BI.ChartTableDataView.prototype.getFocusRow=function(a){var b=this.dvObj.getRowCount(),b=this.firstRow+this.maxRows>b?b:this.firstRow+this.maxRows,c=$MA.BI.ChartTableDataView.ROWHEIGHT,d,e;for(d=this.firstRow;d<b;d++)if(e=c+(d-this.firstRow)*$MA.BI.ChartTableDataView.ROWHEIGHT,a>=e&&a<e+$MA.BI.ChartTableDataView.ROWHEIGHT)return d;return-1};
$MA.BI.ChartTableDataView.prototype.getFocusCol=function(a){var b=this.getFirstContentsColumn(),c;for(c=0;c<b;c++)if(a>=this.columnX[c]&&a<this.columnX[c+1])return c;return-1};
$MA.BI.ChartTableDataView.prototype.highlightCell=function(a,b){var c=this.dvObj,d=c.getRowCount(),e=this.firstRow+this.maxRows>d?d:this.firstRow+this.maxRows,d=c.getRow(a),f=d[b],g=1,h=a,j=!1;a<this.firstRow&&(j=!0,g=0);a>e&&(g=0);var l;for(l=a-1;l>=this.firstRow;l--)if(d=c.getRow(l),(!this.chartObj.graph.suppliedTotals||f!=="")&&d[b]==f)l>e||(g++,h=l);else break;for(l=a+1;l<e;l++)if(d=c.getRow(l),(!this.chartObj.graph.suppliedTotals||f!=="")&&d[b]==f)l<this.firstRow||(g++,j&&(h=l,j=!1));else break;
e=this.context;e.fillStyle="#0090D5";if(g>0)if(this.chartObj.graph.suppliedTotals&&g==1){d=c.getRow(a);c=this.columnW[b];g=this.getFirstContentsColumn()-1;if(f==""){for(l=b+1;l<=g;l++)c+=this.columnW[l];do b--,c+=this.columnW[b];while(b>=0&&d[b]==="")}else if(b<g&&d[b+1]==="")for(l=b+1;l<=g;l++)c+=this.columnW[l];e.fillRect(this.columnX[b],(a-this.firstRow+1)*$MA.BI.ChartTableDataView.ROWHEIGHT,c,$MA.BI.ChartTableDataView.ROWHEIGHT)}else e.fillRect(this.columnX[b],(h-this.firstRow+1)*$MA.BI.ChartTableDataView.ROWHEIGHT,
this.columnW[b],g*$MA.BI.ChartTableDataView.ROWHEIGHT)};$MA.BI.ChartTableDataView.prototype.setDrillDown=function(a){var b=this.dvObj,c=this.getFirstContentsColumn(),b=b.getRow(a),a=[];for(c-=1;c>=0;c--)a.push(b[c]);c=document.getElementById(this.id);c=$MA.BI.SimpleChartView.getChart(c.parentNode);if(c.ondrilldown)c.ondrilldown(a)};
$MA.BI.ChartTableDataView.prototype.onTouchStart=function(a){var b=a.touches.item(0),c=$MA.getMouseXY(b,a.srcElement);this.currentX=c.x;this.currentY=c.y;this.rowDiff=0;this.lastRedrawTime=b=new Date;if(b.getTime()-this.lastTouchEvent.getTime()<=500){var d=this.getFocusRow(c.y);d>=0&&this.setDrillDown(d)}else if(d=this.getFocusRow(c.y),c=this.getFocusCol(c.x),d>=0&&c>=0)this.clickRow=d,this.clickCol=c,this.redraw();this.lastTouchEvent=b;this.stopEvent(a)};
$MA.BI.ChartTableDataView.prototype.onTouchMove=function(a){var b=$MA.BI.ChartTableDataView.ROWHEIGHT/2,c=a.touches.item(0),c=$MA.getMouseXY(c,a.srcElement),d=Math.round((this.currentY-c.y)/b),e=this.dvObj.getRowCount();this.isShowTotal()&&e++;if(d!=this.rowDiff){var f=this.firstRow+d;if(f>=0&&f+this.maxRows-1<=e)this.firstRow=f,this.redraw();this.rowDiff=d}if(Math.abs(this.currentX-c.x)>=b){b=0;b=this.currentX>c.x?1:-1;this.currentX=c.x;if(this.startCol==this.getFirstContentsColumn()&&b<0){this.stopEvent(a);
return}c=this.dvObj.getTableColumns();d=document.getElementById(this.id);if(this.lastCol==c.length-1&&b>0&&this.tableWidth<=d.offsetWidth){this.stopEvent(a);return}b=this.startCol+b;if(b>=this.getFirstContentsColumn()&&b<c.length)this.startCol=b,this.redraw()}this.stopEvent(a)};$MA.BI.ChartTableDataView.prototype.onTouchEnd=function(a){this.slashTable(($MA.getMouseXY(a.changedTouches[0],a.srcElement).y-this.currentY)/((new Date).getTime()-this.lastRedrawTime.getTime()));this.stopEvent(a)};
$MA.BI.ChartTableDataView.prototype.getFirstContentsColumn=function(){var a=this.getGraphView(),b=1;a.dvObj&&(b=a.dvObj.getGraphGob().getCategoryCount());return this.chartObj.zoomingLevels.length==0?b:this.chartObj.level+1};
$MA.BI.ChartTableDataView.prototype.intializeTable=function(a){var b=this.getFirstContentsColumn(),c=this.dvObj.getTableColumns(),d,e=7;for(d=0;d<b;d++)this.columnX[d]=e,e+=this.columnW[d];for(d=this.startCol;d<c.length;d++)if(this.columnX[d]=e,e+=this.columnW[d],this.lastCol=d,e>a.offsetWidth){this.moveable=!0;break}this.tableWidth=e};
$MA.BI.ChartTableDataView.prototype.calColumnWidth=function(a){var b=this.dvObj,c=b.getTableColumns(),d=b.getRowCount(),e=this.getFirstContentsColumn(),f,g;this.moveable=!1;var h=this.chartObj.dvObj.getGraphGob().getObject("values").list[0].getProperty("displaytext"),j=-1,l=this.chartObj.dvObj.getTable();if(h!=void 0&&(g=l.getColumn(h)))j=g.id;a=$MA.BI.ChartTableDataView.getCanvasElem(a);a=a.getContext?a.getContext("2d"):null;a.font=this.fontSize+" "+this.fontFamily;for(h=0;h<c.length;h++)this.columnW[h]=
h>=e-1?100:34;for(var n=this.isShowTotal(),h=e-1;h<c.length;h++){g=c[h];f=a.measureText(g.displayName);var k=f.width,m=0;for(g=0;g<d;g++)if(f=b.getRow(g),f=f[h],h==e-1?f=$MA.format(f,this.categoryFormat):(n&&typeof f=="number"&&!isNaN(f)&&(m+=f),j!==-1&&(f=l.displayBuffer[g][j]),f=$MA.format(f,this.format)),f=a.measureText(f),k<f.width)k=f.width;if(n&&(f=a.measureText($MA.format(isNaN(m)?"":m,this.format)),k<f.width))k=f.width;this.columnW[h]=k+$MA.BI.ChartTableDataView.PADDING*2}};
$MA.BI.ChartTableDataView.prototype.plotBackground=function(a){var b=this.context,c=$MA.BI.ChartTableDataView.ROWHEIGHT,d=a.offsetHeight-c,e=this.getFirstContentsColumn();b.fillStyle=this.dimTitleBkColor;var f=this.columnX[e];b.fillRect(0,0,f,c);b.fillStyle=this.colHeadersBkColor;b.fillRect(0,c,f,d);b.fillStyle=this.rowHeaderBkColor;var g=this.columnX[e],f=a.offsetWidth-this.columnX[e];b.fillRect(g,0,f,c);b.fillStyle=this.contentsBkColor;b.fillRect(g,c,f,d)};
$MA.BI.ChartTableDataView.prototype.plotDimensionTitle=function(){var a=this.context,b=$MA.BI.ChartTableDataView.PADDING,c=this.getFirstContentsColumn(),d=this.dvObj.getTableColumns(),e;a.fillStyle=this.textColor;var f;for(f=0;f<c;f++)if(f==c-1)e=d[f],a.fillStyle=this.textShadowColor,a.fillText(e.displayName,b+this.columnX[f],b+14+1),a.fillStyle=this.textColor,a.fillText(e.displayName,b+this.columnX[f],b+14)};
$MA.BI.ChartTableDataView.prototype.plotRowHeader=function(){var a=this.context,b=$MA.BI.ChartTableDataView.PADDING,c=this.getFirstContentsColumn(),d=this.dvObj.getTableColumns(),e,f=d.length-c;a.fillStyle=this.textColor;var g;for(g=this.startCol;g<=this.lastCol;g++)e=d[g],a.fillStyle=this.textShadowColor,a.fillText(e.displayName,b+this.columnX[g],b+14+1),a.fillStyle=this.textColor,a.fillText(e.displayName,b+this.columnX[g],b+14);if(f>1&&!this.isBubble){b=this.getGraph();for(g=this.startCol;g<=this.lastCol;g++)d=
b.getSeriesFillBrush(g-c),a.fillStyle=d.toString(),a.fillRect(this.columnX[g],0,7,$MA.BI.ChartTableDataView.ROWHEIGHT)}};
$MA.BI.ChartTableDataView.prototype.plotColumnHeaders=function(){var a=this.context,b=$MA.BI.ChartTableDataView.PADDING,c=this.getFirstContentsColumn(),d=this.dvObj,e=d.getRowCount(),e=this.firstRow+this.maxRows>e?e:this.firstRow+this.maxRows,f,g;a.strokeStyle=this.separatorLineColor;var h,j,l;for(h=this.firstRow;h<e;h++){f=d.getRow(h);g=$MA.BI.ChartTableDataView.ROWHEIGHT*(h-this.firstRow+1);for(j=0;j<c;j++)if(a.fillStyle=this.isHightlightCategory(h,j)?"#FFFFFF":this.textColor,j==c-1)this.isDuplicateCategory(h,
j)||(a.fillText($MA.format(f[j],this.categoryFormat),b+this.columnX[j],g+b+14),this.drawLine(this.columnX[j],g,this.columnX[j+1],g));else{var n=$MA.format(f[j],this.categoryFormat),k,m;if(d.isGroupHeader(f,j)){l=this.chkGroupHeight(h,j,this.chartObj.graph.suppliedTotals);if(!l){var o;o=this.chartObj.graph.suppliedTotals?this.getColsWidth(j)-$MA.BI.ChartTableDataView.PADDING*2:this.getRowSpan(h,j)*$MA.BI.ChartTableDataView.ROWHEIGHT-$MA.BI.ChartTableDataView.PADDING*2;for(l=0;l<n.length;l++)if(m=n.substr(0,
l),k=a.measureText(m),k=k.width,k+20>o)break;n=m+"..."}this.chartObj.graph.suppliedTotals?a.fillText($MA.format(n,this.categoryFormat),b+this.columnX[j],g+b+14):this.drawVerticalText(n,b+this.columnX[j],g+b+14);this.drawLine(this.columnX[j],g,this.columnX[j+1],g)}else if(h==this.firstRow){o=!0;l=this.chkGroupHeight(h,j);n=$MA.format(f[j],this.categoryFormat);if(!l){var p=this.getRowSpan(h,j);for(l=0;l<n.length;l++){m=n.substr(0,l);k=a.measureText(m);k=k.width;if(g-this.currentX<=40&&n.length>=3){n=
n.substr(0,3);o=!1;break}if(k+20>p*$MA.BI.ChartTableDataView.ROWHEIGHT-$MA.BI.ChartTableDataView.PADDING*2)break}o&&(n=m+"...")}this.drawVerticalText(n,b+this.columnX[j],g+b+14)}}}if(this.isShowTotal())a.fillStyle=this.textColor,g+=$MA.BI.ChartTableDataView.ROWHEIGHT,a.fillText($MA.format($MA.getLocalisation(null,"Total","Total"),this.categoryFormat),b+this.columnX[0],g+b+14),this.drawLine(this.columnX[0],g,this.columnX[c],g)};
$MA.BI.ChartTableDataView.prototype.isHightlightCategory=function(a,b){if(!this.chartObj.graph.suppliedTotals&&b!=this.clickCol||this.chartObj.graph.suppliedTotals&&a!=this.clickRow)return!1;for(var c=this.dvObj,d=c.getRowCount(),e=c.getRow(a),f=e[b],g=!0,h=a;h!=this.clickRow;){h+=1;if(h>=d)break;e=c.getRow(h);if(e[b]!=f){g=!1;break}}if(h==this.clickRow&&g){if(this.chartObj.graph.suppliedTotals&&b>this.clickCol)return!1;return!0}for(h=a;h!=this.clickRow;){h-=1;if(h<0)return!1;e=c.getRow(h);if(e[b]!=
f)return!1}return!0};$MA.BI.ChartTableDataView.prototype.isDuplicateCategory=function(a,b){var c=this.dvObj,d=c.getRow(a),e=d[b],d=a-1;if(d>=this.firstRow&&(d=c.getRow(d),d[b]==e&&(!this.chartObj.graph.suppliedTotals||e!=="")))return!0;return!1};
$MA.BI.ChartTableDataView.prototype.getRowSpan=function(a,b){var c=this.dvObj,d=c.getRowCount(),d=this.firstRow+this.maxRows>d?d:this.firstRow+this.maxRows,e=c.getRow(a),f=e[b],g,h=1;for(g=a-1;g>=this.firstRow;g--)if(e=c.getRow(g),e[b]==f)h++;else break;for(g=a+1;g<d;g++)if(e=c.getRow(g),e[b]==f)h++;else break;return h};$MA.BI.ChartTableDataView.prototype.getColsWidth=function(a){for(var b=this.getFirstContentsColumn(),c=0;a<b;a++)c+=this.columnW[a];return c};
$MA.BI.ChartTableDataView.prototype.chkGroupHeight=function(a,b,c){var d=this.context.measureText(this.dvObj.getRow(a)[b]).width;if(c){if(d>this.getColsWidth(b)-$MA.BI.ChartTableDataView.PADDING*2)return!1}else if(a=this.getRowSpan(a,b),d>a*$MA.BI.ChartTableDataView.ROWHEIGHT-$MA.BI.ChartTableDataView.PADDING*2)return!1;return!0};
$MA.BI.ChartTableDataView.prototype.plotContents=function(){var a=this.context,b=$MA.BI.ChartTableDataView.PADDING,c=this.dvObj,d=c.getRowCount(),e=this.firstRow+this.maxRows>d?d:this.firstRow+this.maxRows,f,g=this.getFirstContentsColumn();a.fillStyle=this.textColor;var h=this.chartObj.dvObj.getGraphGob().getObject("values"),j=h.list[0].getProperty("displaytext"),l=-1,n=this.chartObj.dvObj.getTable();if(j!=void 0&&(j=n.getColumn(j)))l=j.id;j=-1;if(h.list.length>1&&(h=h.list[1].getProperty("displaytext"),
h!=void 0&&(h=n.getColumn(h))))j=h.id;var k,m,o,p=0;for(k=this.firstRow;k<e;k++){f=c.getRow(k);m=(k-this.firstRow+1)*$MA.BI.ChartTableDataView.ROWHEIGHT+b+14;for(h=this.startCol;h<=this.lastCol;h++)f[h]!=void 0&&(o=$MA.format(f[h],this.format),this.isBubble?this.isMultiSeries?h==g?(o=$MA.format(f[h],this.seriesFormat),a.fillText(o,b+this.columnX[h],m)):h==g+1?(l!=-1&&(o=n.displayBuffer[k],o=o[l]),a.fillText(o,b+this.columnX[h],m)):h==g+2&&(o=$MA.format(f[h],this.bubbleSizeFormat),j!=-1&&(o=n.displayBuffer[k],
o=o[j]),a.fillText(o,b+this.columnX[h],m)):h==g?a.fillText(o,b+this.columnX[h],m):h==g+1&&(o=$MA.format(f[h],this.bubbleSizeFormat),j!=-1&&(o=n.displayBuffer[k],o=o[j]),a.fillText(o,b+this.columnX[h],m)):(l!=-1&&(o=n.displayBuffer[k+h-1+p],o=o[l]),a.fillText(o,b+this.columnX[h],m),h==this.lastCol&&(p+=h-1)))}if(this.isShowTotal()&&e==d){e=[];for(h=g=this.lastCol-this.startCol+1;h--;)e.push(0);for(k=0;k<d;k++){f=c.getRow(k);for(h=0;h<g;h++)e[h]+=f[this.startCol+h]}m+=$MA.BI.ChartTableDataView.ROWHEIGHT;
for(h=0;h<g;h++)c=$MA.format(isNaN(e[h])?"":e[h],this.format),a.fillText(c,b+this.columnX[h+this.startCol],m)}};
$MA.BI.ChartTableDataView.prototype.plotGridLine=function(){var a=this.context,b=this.getFirstContentsColumn(),c=this.dvObj,d=c.getRowCount(),d=this.firstRow+this.maxRows>d?d:this.firstRow+this.maxRows,e=d-this.firstRow,f=this.isShowTotal(),g,h;for(h=0;h<=this.lastCol;h++)if(!(h>=b&&h<this.startCol-1))if(a.strokeStyle=this.gridLineColor,this.drawLine(this.columnX[h],0,this.columnX[h],$MA.BI.ChartTableDataView.ROWHEIGHT),a.strokeStyle=h<b+1?this.separatorLineColor:this.gridLineColor,this.chartObj.graph.suppliedTotals&&
h!=0&&h!=this.lastCol){var j,l;for(g=this.firstRow;g<d;g++)j=c.getRow(g),l=$MA.BI.ChartTableDataView.ROWHEIGHT*(g-this.firstRow+1),j[h]!==""&&this.drawLine(this.columnX[h],l,this.columnX[h],l+$MA.BI.ChartTableDataView.ROWHEIGHT)}else this.drawLine(this.columnX[h],$MA.BI.ChartTableDataView.ROWHEIGHT,this.columnX[h],$MA.BI.ChartTableDataView.ROWHEIGHT*(e+1+(h==0&&f?1:0)));a.strokeStyle=this.separatorLineColor;this.drawLine(this.tableWidth,0,this.tableWidth,$MA.BI.ChartTableDataView.ROWHEIGHT*(e+1));
this.drawLine(0,$MA.BI.ChartTableDataView.ROWHEIGHT,this.tableWidth,$MA.BI.ChartTableDataView.ROWHEIGHT);for(g=2;g<=e+1;g++)g!=e+1?this.drawLine(this.columnX[b],$MA.BI.ChartTableDataView.ROWHEIGHT*g,this.tableWidth,$MA.BI.ChartTableDataView.ROWHEIGHT*g):this.drawLine(this.columnX[0],$MA.BI.ChartTableDataView.ROWHEIGHT*g,this.tableWidth,$MA.BI.ChartTableDataView.ROWHEIGHT*g);f&&this.drawLine(this.columnX[0],$MA.BI.ChartTableDataView.ROWHEIGHT*(e+2),this.tableWidth,$MA.BI.ChartTableDataView.ROWHEIGHT*
(e+2))};
$MA.BI.ChartTableDataView.prototype.plotGradientRect=function(){var a=this.context,b=this.dvObj.getRowCount(),b=(this.firstRow+this.maxRows>b?b:this.firstRow+this.maxRows)-this.firstRow;this.isShowTotal()&&b++;if(!$MA.Browser.isICSStockBrowser){var c=a.createLinearGradient(0,$MA.BI.ChartTableDataView.ROWHEIGHT,0,$MA.BI.ChartTableDataView.ROWHEIGHT+7);c.addColorStop(0,"rgba(0, 0, 0, 0.2)");c.addColorStop(1,"rgba(0, 0, 0, 0)");a.fillStyle=c;a.fillRect(0,$MA.BI.ChartTableDataView.ROWHEIGHT,this.tableWidth,7);
c=a.createLinearGradient(0,0,7,0);c.addColorStop(0,"rgba(0, 0, 0, 0.2)");c.addColorStop(1,"rgba(0, 0, 0, 0)");a.fillStyle=c;a.fillRect(0,0,7,$MA.BI.ChartTableDataView.ROWHEIGHT*(b+1));c=a.createLinearGradient(this.columnX[this.startCol],0,this.columnX[this.startCol]+7,0);c.addColorStop(0,"rgba(0, 0, 0, 0.2)");c.addColorStop(1,"rgba(0, 0, 0, 0)");a.fillStyle=c;a.fillRect(this.columnX[this.startCol],0,7,$MA.BI.ChartTableDataView.ROWHEIGHT*(b+1));c=a.createLinearGradient(this.tableWidth,0,this.tableWidth+
7,0);c.addColorStop(0,"rgba(0, 0, 0, 0.2)");c.addColorStop(1,"rgba(0, 0, 0, 0)");a.fillStyle=c;a.fillRect(this.tableWidth,0,7,$MA.BI.ChartTableDataView.ROWHEIGHT*(b+1))}};
$MA.BI.ChartTableDataView.prototype.plot=function(a){var b=$MA.BI.ChartTableDataView.getTableView(a);b.firstRow=0;b.startCol=b.getFirstContentsColumn();b.lastCol=b.startCol;var c=b.getGraph();b.isBubble=c.graphType=="bubble"?!0:!1;var c=b.getGraphView().dvObj.getGraphGob(),d=c.getValueObject(0);b.format=d.getProperty("Format");if(b.isBubble&&(d=c.getValueObject(1)))b.bubbleSizeFormat=d.getProperty("Format");b.categoryFormat=c.getObject("Category").getProperty("Format");b.isMultiSeries=!1;if(c.getObject("Series"))b.isMultiSeries=
!0,b.seriesFormat=c.getObject("Series").getProperty("Format");b.maxRows=Math.floor(a.offsetHeight/$MA.BI.ChartTableDataView.ROWHEIGHT);b.clickRow=0;b.clickCol=b.startCol-1;b.calColumnWidth(a);b.redraw()};
$MA.BI.ChartTableDataView.prototype.redraw=function(){if(this.dvObj.getTableColumns().length!=0){var a=document.getElementById(this.id),b=$MA.BI.ChartTableDataView.getCanvasElem(a),c=b.getContext?b.getContext("2d"):null;this.context=c;this.intializeTable(a);$MA.Browser.isJBStockBrowser||$MA.Browser.isICSStockBrowser?b.width=b.width:c.clearRect(0,0,b.width,b.height);this.plotBackground(a);c.font=this.fontSize+" "+this.fontFamily;this.plotDimensionTitle();this.plotRowHeader();this.highlightCell(this.clickRow,
this.clickCol);this.plotColumnHeaders();this.plotContents();this.plotGridLine();this.plotGradientRect()}};$MA.BI.ChartTableDataView.prototype.drawLine=function(a,b,c,d){var e=this.context;e.beginPath();e.moveTo(a,b);e.lineTo(c,d);e.closePath();e.stroke()};$MA.BI.ChartTableDataView.prototype.drawVerticalText=function(a,b,c){var d=this.context,e=d.measureText(a);d.save();d.translate(b,c+e.width);d.rotate(1.5*Math.PI);d.fillText(a,10,14);d.restore()};$MA.BI.ChartTableDataView.prototype.isShowTotal=function(){return this.getGraph().graphObj.showTotal};
CanvasRenderingContext2D.prototype.roundedRect=function(a,b,c,d,e,f,g){g==void 0&&(g=!0);f==void 0&&(f=!1);this.beginPath();$MA.platform.blackberry?this.rect(a,b,c,d):(e===void 0&&(e=5),this.moveTo(a+e,b),this.lineTo(a+c-e,b),this.quadraticCurveTo(a+c,b,a+c,b+e),this.lineTo(a+c,b+d-e),this.quadraticCurveTo(a+c,b+d,a+c-e,b+d),this.lineTo(a+e,b+d),this.quadraticCurveTo(a,b+d,a,b+d-e),this.lineTo(a,b+e),this.quadraticCurveTo(a,b,a+e,b));this.closePath();g&&this.stroke();f&&this.fill()};
CanvasRenderingContext2D.prototype.fillRoundedRect=function(a,b,c,d,e,f,g,h,j){e=e==void 0?!0:e;f=f==void 0?!0:f;g=g==void 0?!0:g;h=h==void 0?!0:h;j=j==void 0?5:j;this.beginPath();e?this.moveTo(a+j,b):this.moveTo(a,b);f?(this.lineTo(a+c-j,b),this.quadraticCurveTo(a+c,b,a+c,b+j)):this.lineTo(a+c,b);h?(this.lineTo(a+c,b+d-j),this.quadraticCurveTo(a+c,b+d,a+c-j,b+d)):this.lineTo(a+c,b+d);g?(this.lineTo(a+j,b+d),this.quadraticCurveTo(a,b+d,a,b+d-j)):this.lineTo(a,b+d);e?(this.lineTo(a,b+j),this.quadraticCurveTo(a,
b,a+j,b)):this.lineTo(a,b);this.closePath();this.fill()};
CanvasRenderingContext2D.prototype.drawEllipse=function(a,b,c,d,e){e==void 0&&(e=!0);var f,g,h=a+c/2,j=b+d/2;this.save();this.beginPath();$MA.platform.blackberry?(a=d/c,this.scale(1,a),this.arc(h,j/a,c/2,0,Math.PI*2,!1),this.scale(a,1)):(f=c/2*0.5522848,g=d/2*0.5522848,c=a+c,d=b+d,this.moveTo(a,j),this.bezierCurveTo(a,j-g,h-f,b,h,b),this.bezierCurveTo(h+f,b,c,j-g,c,j),this.bezierCurveTo(c,j+g,h+f,d,h,d),this.bezierCurveTo(h-f,d,a,j+g,a,j));this.closePath();e?this.stroke():this.fill();this.restore()};
$MA.BI.RangeSelector=function(){var a,b,c="20px",d="popup_tt_left.png",e="popup_tt_right.png",f=60;$MA.screenSize=="small"&&(c="14px",d="popup_tt_left_small.png",e="popup_tt_right_small.png",f=40);a=function(a,b){this.elem=a;this.chartView=b;this.graph=b.getGraph();this.maxItems=this.firstItem=this.currentX=0;this.dragMode=void 0;this.leftPopupCanvas=document.createElement("canvas");this.leftPopupCanvas.style.display="block";this.leftPopupCanvas.style.position="absolute";this.leftPopupCanvas.style.zIndex=
1E3;this.leftPopupCanvas.height=0;this.rightPopupCanvas=document.createElement("canvas");this.rightPopupCanvas.style.display="block";this.rightPopupCanvas.style.position="absolute";this.rightPopupCanvas.style.zIndex=1E3;this.rightPopupCanvas.height=0;this.timerForBB=void 0};a.prototype.getCategoryValue=function(a){return this.chartView.getCategoryValue(a)};a.prototype.getCategoryCount=function(){return this.chartView.getCategoryCount()};a.prototype.getVisibleCategoryCount=function(){return this.chartView.getVisibleCategoryCount()};
a.prototype.getFirstItem=function(){return this.chartView.getFirstItem()};a.prototype.setFirstItem=function(a){return this.chartView.setFirstItem(a)};a.prototype.getMaxItems=function(){return this.chartView.getMaxItems()};a.prototype.setMaxItems=function(a){return this.chartView.setMaxItems(a)};a.prototype.initialize=function(){this.getStyles();var a=document.getElementById(this.chartView.id+"_rangeSelector_background");a.appendChild(this.leftPopupCanvas);a.appendChild(this.rightPopupCanvas);this.popTtLeftImg=
new Image;this.popTtLeftImg.src=$MA.imagesFolder+d;this.popTtRightImg=new Image;this.popTtRightImg.src=$MA.imagesFolder+e;this.popTtCenterImg=new Image;this.popTtCenterImg.src=$MA.imagesFolder+"popup_tt_center.png";if(this.elem!=void 0){var a=this.chartView,b=a.getRangeSelectorCanvasElem(),c=this,f=$MA.isTouchEventSupported;b.addEventListener(f?"touchstart":"mousedown",function(a){c.onTouchStart(a)},!1);b.addEventListener(f?"touchmove":"mousemove",function(a){c.onTouchMove(a)},!1);f=f?"touchend":
"mouseup";b.addEventListener(f,function(a){c.onTouchEnd(a)},!1);f==="mouseup"&&b.addEventListener("mouseout",function(a){c.onTouchEnd(a)},!1);this.canvas=b;this.context=b.getContext("2d");this.textCanvas=a.getRangeSelectorTextCanvasElem();this.textContext=this.textCanvas.getContext("2d")}};a.prototype.getStyles=function(){this.strokeColor="#788680";this.strokeWhiteColor="#CDDDD7";this.strokeGreyColor="#B3C3BD";var a=$MA.getCSSRule(".chart_range_selector_stroke");if(a!=void 0){if(a.style.color!="")this.strokeColor=
a.style.color;if(a.style.backgroundColor!="")this.strokeWhiteColor=a.style.backgroundColor;if(a.style.borderColor!="")this.strokeGreyColor=a.style.borderColor}this.toolTipFontColor="black";this.toolTipFontSize=c;this.toolTipFontFamily="Helvetica";this.fontColor="#707070";this.fontSize="12px";this.fontFamily="Helvetica";a=$MA.getCSSRule(".chart_range_selector_text");if(a!=void 0){if(a.style.color!="")this.fontColor=a.style.color;if(a.style.fontSize!="")this.fontSize=a.style.fontSize;if(a.style.fontFamily!=
"")this.fontFamily=a.style.fontFamily}};a.prototype.pointInRegion=function(a){var b=this.getFirstItem(),c=this.getMaxItems(),d=this.elem.offsetWidth,e=this.getCategoryCount();c>e&&(c=e);a-=49;d=(d-98)/e;b*=d;c*=d;var f;a>=b-44&&a<=b?f="left":a>=b+c&&a<=b+c+44?f="right":a>=b&&a<=b+c&&(f="center");return f};a.prototype.setPopupPosition=function(a,b,c,d){var e=!1,k=!1,m=a.getContext("2d");m.font="bold "+this.toolTipFontSize+" "+this.toolTipFontFamily;var o=f,b=m.measureText(b).width,b=b+20+20+7-b%7;
b/7%2!=0&&(b+=7);this.dragMode=="center"&&b>=document.body.clientWidth/2&&(b=document.body.clientWidth/2-1);c-=b/2;var m=document.getElementById(this.chartView.id+"_rangeSelector_background"),m=$MA.getAbsolutePosition(m),p=m.x+c+b-document.body.clientWidth;m.x+c<0?(c=-m.x,e=!0):p>0&&(c-=p+1);b>document.body.clientWidth&&(c=-m.x,b=document.body.clientWidth-1,e=k=!0);a.style.left=c+"px";a.width=b;a.height=o+10;a.style.top=d-a.height+5+"px";return{isLeft:e,left:c,width:b,maxWidth:k}};a.prototype.plotPopup=
function(a,b,c,d,e,k){b&&this.setPopupPosition(a,d,e,k);b=a.getContext("2d");b.save();b.font="bold "+this.toolTipFontSize+" "+this.toolTipFontFamily;var m=this.popTtLeftImg.width,k=f,o=b.measureText(d).width,p=parseInt(this.toolTipFontSize.replace("px",""),10);a.width=a.width;b.drawImage(this.popTtLeftImg,0,0);b.drawImage(this.popTtCenterImg,m,0,a.width-m-m,k);b.drawImage(this.popTtRightImg,a.width-m,0);if(c)b.beginPath(),b.fillStyle="#6F7273",b.strokeStyle="#6F7273",c=e-a.offsetLeft,b.moveTo(c-22-
10,a.height-10),$MA.platform.blackberry?(b.lineTo(c-22,a.height),b.lineTo(c+22,a.height),b.lineTo(c+22+10,a.height-10)):(b.quadraticCurveTo(c-22,a.height-10,c-22,a.height),b.lineTo(c+22,a.height),b.quadraticCurveTo(c+22,a.height-10,c+22+10,a.height-10)),b.lineTo(c-22-10,a.height-10),b.closePath(),c=b.globalAlpha,b.globalAlpha=0.2,b.fill(),b.globalAlpha=c,b.stroke();b.strokeStyle="#6F7273";for(c=0;c<=(a.width-m-m)/7;c++)b.beginPath(),b.moveTo(m+c*7,k-4-8),b.lineTo(m+c*7,k-4),b.closePath(),b.stroke();
b.strokeStyle="#87D9FF";b.beginPath();b.moveTo(a.width/2,7);b.lineTo(a.width/2,k-4);b.closePath();b.stroke();b.fillStyle=this.toolTipFontColor;b.font="bold "+this.toolTipFontSize+" "+this.toolTipFontFamily;b.textBaseline="top";c=(a.width-o)/2;if(o>a.width){c=10;e=d;for(m=0;m<d.length;m++)if(e=d.substr(0,m),o=b.measureText(e).width,o+35>a.width){d=e+"...";break}}b.fillText(d,c,(k-p)/2);b.restore()};a.prototype.plotText=function(a){var a=a!=void 0?a:!1,b=this.canvas,c=this.textCanvas,d=this.textContext;
a?c.height=b.height:c.width=b.width;d.clearRect(0,0,c.width,c.height);var e=parseInt(this.fontSize.replace("px",""),10);d.font=this.fontSize+" "+this.fontFamily;d.fillStyle=this.fontColor;d.textBaseline="top";var f=this.getCategoryValue(this.getCategoryCount()-1),m=d.measureText(f).width;if(a)a=$MA.BI.ChartView.RANGESELECTOR_TEXT_HEIGHT,d.save(),d.translate(a,0),d.rotate(Math.PI/2),d.fillText(this.getCategoryValue(0),0,0),d.restore(),d.save(),d.translate(a,c.height-m-e),d.rotate(Math.PI/2),d.fillText(f,
0,0),d.restore();else{var m=b.width/2,a=this.getCategoryValue(0),o;if(d.measureText(this.getCategoryValue(0)).width>m+5)for(e=0;e<a.length;e++)if(b=a.substr(0,e),o=d.measureText(b),o=o.width,o+25>m){a=b+"...";break}if(d.measureText(f).width>m+5)for(e=0;e<f.length;e++)if(b=f.substr(0,e),o=d.measureText(b),o=o.width,o+25>m){f=b+"...";break}d.fillText(a,0,0);e=d.measureText(f);d.fillText(f,c.width-e.width,0)}};a.prototype.hidePopup=function(){this.leftPopupCanvas.width=0;this.rightPopupCanvas.width=
0};a.prototype.timerPlot=function(){if(!this.rsTimerId){var a=this;this.rsTimerId=setTimeout(function(){a.plot();a.rsTimerId=void 0},50)}};a.prototype.getX=function(a){var b=a.changedTouches;return b&&0<b.length?$MA.getMouseXY(b.item(0),a.srcElement).x:$MA.getMouseXY(a).x};a.prototype.onTouchStart=function(a){var b=a.targetTouches;if(!b||b&&1===b.length){var b=this.getX(a),c=this.pointInRegion(b);if(c!==void 0&&(this.dragMode===void 0||this.dragMode===c)){if(void 0===this.dragMode)this.dragMode=c;
this.currentX=b;this.firstItem=this.getFirstItem();this.maxItems=this.getMaxItems();this.categoryCount=this.getCategoryCount();b=this.getVisibleCategoryCount();if(b>this.categoryCount)b=this.categoryCount;this.visibleCount=b;this.itemWidth=(this.canvas.width-98)/this.categoryCount;this.plot()}}a.preventDefault();a.stopPropagation();document.activeElement!=a.srcElement&&$MA.triggerJQueryEvent(document.activeElement,"hide")};a.prototype.onTouchMove=function(a){var b=a.targetTouches;if((!b||b&&1===b.length)&&
this.dragMode!=void 0)if(b=this.getX(a),b=Math.round((b-this.currentX)/this.itemWidth),b!=0){var c=this.firstItem,d=this.maxItems,e,f;if(this.dragMode=="left")f=c+d-2,d-b>this.visibleCount&&(b=-this.visibleCount+d),e=c+b,e<0?b=-c:e>f&&(b=f-c),c+=b,d-=b;else if(this.dragMode=="center")f=this.categoryCount-d,e=c+b,e<0?e=0:e>f&&(e=f),c=e;else if(this.dragMode=="right"){d+=b;d<2&&(d=2);if(d>this.visibleCount)d=this.visibleCount;c+d>this.categoryCount&&(d=this.categoryCount-c)}this.setFirstItem(c);this.setMaxItems(d);
this.timerPlot()}a.preventDefault();a.stopPropagation()};a.prototype.onTouchEnd=function(a){if(void 0!=this.dragMode){if(this.rsTimerId)clearTimeout(this.rsTimerId),this.rsTimerId=void 0,this.plot();this.hidePopup();this.dragMode=void 0;var b=this.onchanged;b&&typeof b.handler==="function"&&b.handler.call(b.context)}a.preventDefault();a.type!=="mouseup"&&a.stopPropagation()};a.prototype.reset=function(){this.refreshImage=!0};a.prototype.clearAndDrawGraph=function(a,b){this.firstItem=this.getFirstItem();
var c=this.getMaxItems(),d=this.getCategoryCount();c>d&&(c=d);this.maxItems=c;this.setFirstItem(0);this.setMaxItems(this.getCategoryCount());this.chartView.refreshGraphData();this.graph.drawContent(a,b,!0);this.setFirstItem(this.firstItem);this.setMaxItems(this.maxItems);(c=this.onchanged)&&typeof c.handler==="function"&&c.handler.call(c.context,!1)};a.prototype.drawHandles=function(a,b,c,d,e){var f=this.context;f.strokeStyle=this.strokeGreyColor;f.roundedRect(0,0,d,e);f.strokeStyle=this.strokeColor;
f.drawEllipse(a+b-44+5,8,34,e-16);f.strokeStyle=this.strokeWhiteColor;f.drawEllipse(a+b-44+6,9,32,e-18);f.strokeStyle=this.strokeColor;f.strokeRect(a+b,0,c,e);f.strokeStyle=this.strokeGreyColor;f.roundedRect(a+b-44,0,88+c,e);f.drawEllipse(a+b+c+5,8,34,e-16);f.strokeStyle=this.strokeWhiteColor;f.drawEllipse(a+b+c+6,9,32,e-18);f.strokeStyle=this.strokeColor;f.roundedRect(a+b-44+1,1,88+c-2,e-2);f.strokeStyle=this.strokeWhiteColor;f.roundedRect(a+b-44+2,2,88+c-4,e-4)};a.prototype.plot=function(){var a=
this.canvas,b=this.context,c=a.width,d=a.height,e=this.getCategoryCount();a.width=c;if(e>0){var f=this.getFirstItem(),m=this.getMaxItems();m>e&&(m=e);var o=(c-88)/e,e=o*f;o*=m;b.save();var p=b.globalAlpha,q=b.createLinearGradient(0,0,0,d);q.addColorStop(0,"#DDDDDD");q.addColorStop(1,"#222222");b.fillStyle=q;b.globalAlpha=0.5;b.fillRoundedRect(0,0,c,d/2,!0,!0,!1,!1);$MA.platform.blackberry&&(b.clearRect(0,0,c,d,!0,!0,!1,!1),b.fillRoundedRect(0,0,c,d/2,!0,!0,!1,!1));b.fillStyle=q;b.globalAlpha=0.6;
b.fillRoundedRect(0,d/2,c,d/2,!1,!1,!0,!0);b.clearRect(44+e,0,o,d);b.globalAlpha=0.1;b.fillStyle=q;b.fillRoundedRect(44+e,0,o,d/2);b.globalAlpha=0.2;b.fillStyle=q;b.fillRoundedRect(44+e,d/2,o,d/2);b.globalAlpha=p;b.restore();this.refreshImage?(this.clearAndDrawGraph(a,44),this.refreshImage=!1):this.graph.drawContent(a,44);this.drawHandles(44,e,o,c,d);this.plotText();if(this.dragMode){a=this.getCategoryValue(f);f=this.getCategoryValue(f+m-1);b=c=m=!0;if(this.dragMode=="center"){c=this.setPopupPosition(this.leftPopupCanvas,
a,44+e-22+1,0);d=this.setPopupPosition(this.rightPopupCanvas,f,44+e+o+22,0);p=$MA.getAbsolutePosition(document.getElementById(this.chartView.id+"_rangeSelector_background"));if(c.width+d.width+2>=document.body.clientWidth)c.left=-p.x,d.left=c.left+c.width+2,this.leftPopupCanvas.style.left=c.left+"px",this.rightPopupCanvas.style.left=d.left+"px";else if(c.left+c.width>d.left)d.isLeft||p.x+d.left-c.width-2<0?(c.left=-p.x,d.left=c.left+c.width+2,this.leftPopupCanvas.style.left=c.left+"px",this.rightPopupCanvas.style.left=
d.left+"px"):c.isLeft?(d.left=c.left+c.width+2,this.rightPopupCanvas.style.left=d.left+"px"):(c.left=d.left-c.width-2,this.leftPopupCanvas.style.left=c.left+"px"),b=!1;if(c.maxWidth)m=!1;else if(d.left+d.width>=document.body.clientWidth)d.width=document.body.clientWidth-d.left-1,this.rightPopupCanvas.width=d.width;c=!1}this.dragMode!="right"&&this.plotPopup(this.leftPopupCanvas,c,b,a,44+e-22+1,0);m&&this.dragMode!="left"&&this.plotPopup(this.rightPopupCanvas,c,b,f,44+e+o+22,0)}}};return b=function(c,
d){if(!(this instanceof b))return new b(c,d);var e=new a(c,d);e.initialize();this.getStyles=function(){e.getStyles()};this.reset=function(){e.reset()};this.plot=function(){e.plot()};this.onChanged=function(a,b){e.onchanged={handler:a,context:b}}}}();
$MA.BI.ValueBubbleLegend=function(a,b,c,d,e,f){this.seriesValue=a.name;this.graphObjIndex=a.graphObjIndex;this.name=b;this.value=c;this.otherItems=f===void 0?void 0:f;this.legendColor=e;this.isLast=this.isFirst=!1;this.padding=$MA.BI.ValueBubbleLegend.DEFAULT_PADDING;this.fontHeight=$MA.BI.ValueBubbleLegend.DEFAULT_FONTHEIGHT;this.radius=0;this.font="Bold "+this.fontHeight+"px Helvetica";this.txtColor="white";this.bkColor="black";this.valueDisplayText=d;this.showLabel=this.enabled=this.fullDrawn=
!0;this.bottom=this.right=this.top=this.left=0;this.alpha=1;this.strOthers=$MA.getLocalisation(null,"Others","Others");this.secondValue=this.secondName="";this.heightMeasureName=this.shapeMeasureName=this.colorMeasureName=void 0;this.showNullValue=!0;this.categoryDisplayName=this.categoryValue="";this.scatterChart=!1;this.shape=this.valueDisplayName=""};$MA.BI.ValueBubbleLegend.DEFAULT_FONTHEIGHT=14;$MA.BI.ValueBubbleLegend.DEFAULT_PADDING=7;
$MA.BI.ValueBubbleLegend.prototype.switchState=function(){this.enabled?(this.enabled=!1,this.alpha=0.5):(this.enabled=!0,this.alpha=1)};$MA.BI.ValueBubbleLegend.prototype.isEnabled=function(){return this.enabled};$MA.BI.ValueBubbleLegend.prototype.setEnabled=function(a){this.alpha=(this.enabled=a)?1:0.5};$MA.BI.ValueBubbleLegend.prototype.setShowLabel=function(a){this.showLabel=a};
$MA.BI.ValueBubbleLegend.prototype.getString=function(){var a="",b="";if(this.scatterChart){if(this.categoryDisplayName!=void 0)a=this.categoryDisplayName;a+=": "+this.categoryValue+" ";b=this.value==void 0||this.value==""||this.value=="null";if(this.valueDisplayName!=void 0&&(this.showNullValue||!b))a+=this.valueDisplayName,this.scatterChart&&(a+=": ");b=" "}if(this.otherItems===void 0){var c;c=this.valueDisplayText!=void 0?this.valueDisplayText:this.value;var d=this.name;d!=""&&(d=b+d+": ");a+=
this.showLabel?d+c:c;b=this.getBubbleValue("width");if(this.secondName!=""&&b!=void 0&&(this.showNullValue||!(b==void 0||b==""||b=="null")))a+=" ",b==""||b=="null"?this.showNullValue&&(a+=this.secondName+": "+b):a+=this.secondName+": "+b;b=this.colorMeasureName;c=this.getBubbleValue("color");if(b!=""&&!this.showNullValue||!(c==void 0||c==""||c=="null"))b==void 0&&(b="Color"),c==""||c=="null"?this.showNullValue&&(a+="  "+b+": "):a+="  "+b+": "+c;b=this.getBubbleValue("shape");if((this.showNullValue||
!(b==void 0||b==""||b=="null"))&&this.shapeMeasureName!=void 0)b==""||b=="null"?this.showNullValue&&(a+="  "+this.shapeMeasureName+": "):a+="  "+this.shapeMeasureName+": "+b;b=this.getBubbleValue("height");if((this.showNullValue||!(b==void 0||b==""||b=="null"))&&this.heightMeasureName!=void 0)b==""||b=="null"?this.showNullValue&&(a+="  "+this.heightMeasureName+": "):a+="  "+this.heightMeasureName+": "+b}else a=this.strOthers+": "+this.otherItems;return a};
$MA.BI.ValueBubbleLegend.prototype.getBubbleValue=function(a){if(this.otherValues!=void 0){var b,c,d=this.otherValues.length;for(b=0;b<d;b++)if(this.otherValues[b].hasOwnProperty(a)){c=this.otherValues[b].displayText;c=c==null&&typeof c=="object"?void 0:c!=void 0?c:this.otherValues[b][a];break}return c}};$MA.BI.ValueBubbleLegend.prototype.setColorMeasureName=function(a){this.colorMeasureName=a};$MA.BI.ValueBubbleLegend.prototype.setOtherValues=function(a){this.otherValues=a};
$MA.BI.ValueBubbleLegend.prototype.set2ndName=function(a){this.secondName=a};$MA.BI.ValueBubbleLegend.prototype.set2ndValue=function(a){this.secondValue=a};$MA.BI.ValueBubbleLegend.prototype.setFont=function(a){this.font=a};$MA.BI.ValueBubbleLegend.prototype.setPadding=function(a){this.padding=a};$MA.BI.ValueBubbleLegend.prototype.getPadding=function(){return this.padding};$MA.BI.ValueBubbleLegend.prototype.setRadius=function(a){this.radius=a};
$MA.BI.ValueBubbleLegend.prototype.getRadius=function(){return this.radius===0?this.padding:this.radius};$MA.BI.ValueBubbleLegend.prototype.setFontHeight=function(a){this.fontHeight=a};$MA.BI.ValueBubbleLegend.prototype.getFontHeight=function(){return this.fontHeight};$MA.BI.ValueBubbleLegend.getDefaultHeight=function(){return $MA.BI.ValueBubbleLegend.DEFAULT_FONTHEIGHT+2*$MA.BI.ValueBubbleLegend.DEFAULT_PADDING};$MA.BI.ValueBubbleLegend.prototype.getHeight=function(){return this.fontHeight+2*this.padding};
$MA.BI.ValueBubbleLegend.prototype.getWidth=function(a){a.font=this.font;var b;b=this.getString();return this.padding+this.fontHeight+this.padding+a.measureText(b).width+this.padding};$MA.BI.ValueBubbleLegend.prototype.setFirst=function(a){this.isFirst=a};$MA.BI.ValueBubbleLegend.prototype.setLast=function(a){this.isLast=a};$MA.BI.ValueBubbleLegend.prototype.hitTest=function(a,b){return a>=this.left&&a<=this.right&&b>=this.top&&b<=this.bottom};
$MA.BI.ValueBubbleLegend.prototype.drawOtherItems=function(a,b,c,d){a.font=this.font;a.textBaseline="hanging";var e=this.padding,f=a.measureText(this.strOthers).width;f+=2*this.fontHeight;var g=(b.right+b.left-f)/2,h=b.top+2;a.fillStyle=d;a.beginPath();$MA.ContextHelper.roundRect(a,g-e,h,f+2*e,this.fontHeight+2*e,4);a.fill();a.closePath();h+=e;a.fillStyle=this.legendColor;a.beginPath();$MA.ContextHelper.drawStar(a,g,h,this.fontHeight,this.fontHeight,!0);a.fill();a.closePath();a.fillStyle=c;g+=this.fontHeight+
e;a.fillText(this.strOthers,g,h);a.fillStyle=d;a.fillText(this.otherItems,b.left+e,b.bottom-this.fontHeight-2)};
$MA.BI.ValueBubbleLegend.prototype.draw=function(a,b,c,d,e,f){d===void 0&&(d="white");e===void 0&&(e="black");this.txtColor=d;this.bkColor=e;a.font=this.font;a.fillStyle=e;var e=this.getHeight(),g=this.getWidth(a);f!==void 0&&(g=g<f?g:f);var h=b+g,j=c+e,l=this.getRadius();this.left=b;this.right=h;this.top=c;this.bottom=j;f=a.globalAlpha;a.globalAlpha=this.alpha;this.isFirst&&this.isLast?(a.beginPath(),$MA.ContextHelper.roundRect(a,b,c,g,e,l),a.fill(),a.closePath()):this.isFirst?(a.beginPath(),a.moveTo(b+
l,c),a.quadraticCurveTo(b,c,b,c+l),a.lineTo(b,j-l),a.quadraticCurveTo(b,j,b+l,j),a.lineTo(h,j),a.lineTo(h,c),a.closePath(),a.fill()):this.isLast?(a.beginPath(),a.moveTo(b,c),a.lineTo(b,j),a.lineTo(h-l,j),a.quadraticCurveTo(h,j,h,j-l),a.lineTo(h,c+l),a.quadraticCurveTo(h,c,h-l,c),a.closePath(),a.fill()):a.fillRect(b,c,g,e);h=b+this.padding;j=c+this.padding;a.fillStyle=this.legendColor;a.beginPath();this.shape=="star3"?$MA.ContextHelper.drawStar(a,h+7,j+7,this.fontHeight+1,this.fontHeight+1,!0,3):this.shape==
"star4"?$MA.ContextHelper.drawStar(a,h+7,j+7,this.fontHeight+1,this.fontHeight+1,!0,4):this.shape=="star5"?$MA.ContextHelper.drawStar(a,h+7,j+7,this.fontHeight+1,this.fontHeight+1,!0,5):this.shape=="star6"?$MA.ContextHelper.drawStar(a,h+7,j+7,this.fontHeight+1,this.fontHeight+1,!0,6):this.shape=="star7"?$MA.ContextHelper.drawStar(a,h+7,j+7,this.fontHeight+1,this.fontHeight+1,!0,7):this.shape=="star8"?$MA.ContextHelper.drawStar(a,h+7,j+7,this.fontHeight+1,this.fontHeight+1,!0,8):this.shape=="star9"?
$MA.ContextHelper.drawStar(a,h+7,j+7,this.fontHeight+1,this.fontHeight+1,!0,9):this.shape=="diamond"?$MA.ContextHelper.drawDiamond(a,h+7,j+8,this.fontHeight/2,this.fontHeight/2,!0):this.shape=="circle"?$MA.ContextHelper.drawCircle(a,h+this.fontHeight/2,j+this.fontHeight/2,this.fontHeight/2,this.fontHeight/2):this.shape=="triangle"?$MA.ContextHelper.drawTriangle(a,h+7,j+8,this.fontHeight/2,this.fontHeight/2,"bottom"):this.shape=="lefttriangle"?$MA.ContextHelper.drawTriangle(a,h+7,j+8,this.fontHeight/
2,this.fontHeight/2,"left"):this.shape=="righttriangle"?$MA.ContextHelper.drawTriangle(a,h+7,j+8,this.fontHeight/2,this.fontHeight/2,"right"):this.shape=="invertedtriangle"?$MA.ContextHelper.drawTriangle(a,h+7,j+8,this.fontHeight/2,this.fontHeight/2,"top"):$MA.ContextHelper.roundRect(a,h+1,j+1,this.fontHeight-2,this.fontHeight-2,this.fontHeight/8);a.fill();a.closePath();h+=this.fontHeight;h+=this.padding;j+=this.fontHeight/2;a.save();a.beginPath();a.rect(b,c,g,e);a.clip();a.textBaseline="middle";
a.fillStyle=d;b=this.getString();a.fillText(b,h,j);a.closePath();a.restore();a.globalAlpha=f};
$MA.BI.ValueBubble=function(){var a={Slider:function(){this.showValueDisplayName=this.showCategoryDisplayName=this.showCategoryText=!0;this.showValueOnPieChart=!1;this.showNullValue=this.showLegendLabel=!0;this.position="top";this.categoriesDisplayOrder="leafToRoot"}};a.Slider.FILL_COLOR="#000000";a.Slider.STROKE_COLOR="#808080";a.Slider.OUTLINE_COLOR="rgba(128, 128, 128, 0.2)";a.Slider.TEXT_COLOR="#FFFFFF";a.Slider.TEXT_FONT="bold 14px Helvetica";a.Slider.INDICATOR_SIZE=8;a.Slider.BUBBLE_VALUE_HEIGHT=
50;a.Slider.BUBBLE_VALUE_TITLE_HEIGHT=26;a.Slider.BUBBLE_VALUE_TOP_PADDING=4;a.Slider.prototype.getStyles=function(){var b=$MA.getCSSRule(".chart_value_bubble");this.fillColor=a.Slider.FILL_COLOR;this.textColor=a.Slider.TEXT_COLOR;if(b!=void 0){if(b.style.backgroundColor!="")this.fillColor=b.style.backgroundColor;if(b.style.color!="")this.textColor=b.style.color}b=$MA.getCSSRule(".chart_value_bubble_outline");this.outlineColor=a.Slider.OUTLINE_COLOR;this.strokeColor=a.Slider.STROKE_COLOR;if(b!=void 0){if(b.style.backgroundColor!=
"")this.outlineColor=b.style.backgroundColor;if(b.style.color!="")this.strokeColor=b.style.color}this.textFont=a.Slider.TEXT_FONT};a.Slider.prototype.configureSlider=function(a){var b=!1;if(a){var e=a.showCategoryText;if(e!==void 0&&this.showCategoryText!=e)this.showCategoryText=e,b=!0;e=a.showCategoryDisplayName;if(e!==void 0&&this.showCategoryDisplayName!=e)this.showCategoryDisplayName=e,b=!0;e=a.showValueDisplayName;if(e!==void 0&&this.showValueDisplayName!=e)this.showValueDisplayName=e,b=!0;e=
a.showLegendLabel;if(e!==void 0&&this.showLegendLabel!=e)this.showLegendLabel=e,b=!0;e=a.showValueOnPieChart;if(e!==void 0&&this.showValueOnPieChart!=e)this.showValueOnPieChart=e,b=!0;e=a.showNullValue;if(e!==void 0&&this.showNullValue!=e)this.showNullValue=e,b=!0;e=a.position;e!==void 0&&this.setPosition(e)&&(b=!0);a=a.categoriesDisplayOrder;if(a!==void 0&&this.categoriesDisplayOrder!=a)this.categoriesDisplayOrder=a,b=!0}return b};a.Slider.prototype.getConfiguration=function(){return{showCategoryText:this.showCategoryText,
showCategoryDisplayName:this.showCategoryDisplayName,showValueDisplayName:this.showValueDisplayName,showLegendLabel:this.showLegendLabel,showValueOnPieChart:this.showValueOnPieChart,showNullValue:this.showNullValue,position:this.getPosition(),categoriesDisplayOrder:this.categoriesDisplayOrder}};a.Slider.prototype.getHeight=function(){return a.Slider.BUBBLE_VALUE_HEIGHT+this.getTitleHeight()};a.Slider.prototype.setPosition=function(){return!1};a.Slider.prototype.getPosition=function(){return this.position};
a.Slider.prototype.getTitleHeight=function(){var b=6,d=this.showCategoryDisplayName&&this.categoryDisplayName!=void 0&&this.categoryDisplayName!="",e=this.showValueDisplayName&&this.valueDisplayName!=void 0&&this.valueDisplayName!="";if(this.showCategoryText||d||e)b+=a.Slider.BUBBLE_VALUE_TITLE_HEIGHT;return b};a.HSlider=function(b){a.Slider.call(this,b);this.id=b;this.offset=this.startY=this.startX=this.value=this.itemSize=this.incr=0;this.text="";this.center=!1;this.currentX=0;this.dragging=!1;
b=document.getElementById(b);if(b!=void 0)b.slider=this,this.context=b.getContext("2d");this.getStyles()};a.HSlider.prototype=new a.Slider;a.HSlider.prototype.updating=function(a){this.value=this.getValue();this.currentX=a};a.HSlider.prototype.update=function(){this.dragging=!1;this.center?(this.currentX=this.startX+this.offset+this.incr,this.gap&&(this.currentX-=this.gap)):(this.value=this.getValue(),this.currentX=this.startX+this.offset+this.value*this.incr)};a.HSlider.prototype.getValue=function(){var a=
document.getElementById(this.id),b=this.currentX;b<this.startX?b=this.startX:b>a.offsetWidth-this.startX&&(b=a.offsetWidth-this.startX);a=Math.round((b-this.startX-this.offset)/this.incr);this.chartView&&this.chartView.getGraph().graphType.indexOf("bubble")>=0&&(a=a>=this.chartView.getMaxItems()?this.chartView.getMaxItems()-1:a);return a};a.HSlider.prototype.setValue=function(a){this.value=a;this.currentX=this.startX+this.offset+this.value*this.incr};a.HBubbleValueSlider=function(b){a.HSlider.call(this,
b);this.categoryText="";this.categoryDisplayText=void 0;this.dataY=this.dataX=this.clientY=this.clientX=0;this.endIndex=this.startIndex=-1;this.scrolling=this.scrollable=!1;this.prevY=this.prevX=-1;this.padding=7;this.points=this.size=void 0;this.scrollY=this.scrollX=this.mouse_point_y=this.mouse_point_x=0;this.legends=void 0;this.isDrawIntersectionPoints=!1;this.totalLegendsWidth=0;this.valueDisplayName=this.categoryDisplayName=""};a.HBubbleValueSlider.create=function(b){return new a.HBubbleValueSlider(b)};
a.HBubbleValueSlider.prototype=new a.HSlider;a.HBubbleValueSlider.prototype.getCategoryValueDisplay=function(){var a="";this.showCategoryDisplayName&&this.categoryDisplayName!=void 0&&this.categoryDisplayName!=""&&(a=a.concat(this.categoryDisplayName+": "));this.showCategoryText&&(a=this.categoryDisplayText!=void 0&&this.categoryDisplayText!=""?a.concat(this.categoryDisplayText):a.concat(this.categoryText));this.showValueDisplayName&&this.valueDisplayName!=void 0&&this.valueDisplayName!=""&&(a=a.concat("  "+
this.valueDisplayName));return a};a.HBubbleValueSlider.prototype.drawIntersectionPoints=function(a){if(!(this.points===void 0||this.points.length===0||this.isDrawIntersectionPoints===!1)){var b=this.clientX,e,f,g,h,j,l=a.globalAlpha;a.globalAlpha=0.5;var n=!0;this.points[0].length==1&&(n=!1);var k=this.legends.length,m=this.chartView.getGraph(),o;for(o=0;o<k;++o){var p=this.legends[o];if(p.isEnabled()!==!1){e=this.points[m.getSeriesIndex(p.seriesValue,p.graphObjIndex)];if(this.dragging&&n){f=e[0].xCoord;
g=e[0].yCoord;h=e[1].xCoord;j=e[1].yCoord;e=g+(j-g)*(b-f)/(h-f);if(Math.abs(g-j)<=6||Math.abs(f-h)<=6)e=g;if(g<j&&(e>j||e<g)||g>j&&(e>g||e<j))e=j;f=e-this.dataY;isNaN(f)&&(f=g);if(f<0)continue}else b=e[0].xCoord,e=e[0].yCoord,f=e-this.dataY;this.drawIntersectionPoint(a,Math.round(this.currentX),f,p.legendColor.toString())}}a.globalAlpha=l}};a.HBubbleValueSlider.prototype.drawIntersectionPoint=function(a,b,e,f){var g=$MA.getStrokeInsetColors(f);a.lineWidth=1;a.beginPath();a.arc(b,e,8,0,Math.PI*2,!0);
a.closePath();a.fillStyle=f;a.fill();a.strokeStyle=g[0];a.stroke();a.beginPath();a.arc(b,e+1,8,0,Math.PI,!0);a.strokeStyle=g[1];a.stroke()};a.HBubbleValueSlider.prototype.doScroll=function(a,b){this.scrollX+=a-this.prevX;this.scrollY+=b-this.prevY;var e=this.size.right-this.size.left;if(this.totalLegendsWidth+this.scrollX<e)this.scrollX=e-this.totalLegendsWidth;this.prevX=a;this.prevY=b;this.plot()};a.HBubbleValueSlider.prototype.onMouseDown=function(a,b){if(this.legends===void 0)return-1;var e=this.legends.length,
f;for(f=0;f<e;++f){var g=this.legends[f];if(g.hitTest(a,b)){this.selectedLegend=g;if(this.scrollable)this.mouse_point_x=a,this.mouse_point_y=b,this.prevX=a,this.prevY=b,this.scrolling=!0;return 1}}return-1};a.HBubbleValueSlider.prototype.onMouseUp=function(a,b){var e=this.legends?this.legends.length:0,f=Math.abs(a-this.mouse_point_x);if(this.scrolling&&f>30)this.scrolling=!1;else for(f=0;f<e;++f){var g=this.legends[f];if(g.hitTest(a,b)&&this.selectedLegend!=void 0&&this.selectedLegend.name===g.name&&
this.selectedLegend.graphObjIndex===g.graphObjIndex)return this.switchLegendStates(this.selectedLegend),this.selectedLegend}};a.HBubbleValueSlider.prototype.setLegendState=function(a){var b,e,f=this.legends.length;for(b=0;b<f;++b)e=this.legends[b],e.name===a.name&&a.graphObjIndex===e.graphObjIndex&&e.setEnabled(a.isEnabled())};a.HBubbleValueSlider.prototype.switchLegendStates=function(a){var b,e,f=this.legends.length,g=!0;if(!a.isEnabled()||f===1)a.setEnabled(!0),this.setLegendState(a);else{for(b=
0;b<f;++b)if(e=this.legends[b],e.name!==a.name&&e.isEnabled()){g=!1;break}if(g)for(b=0;b<f;++b)e=this.legends[b],e.setEnabled(!0);else a.switchState(),this.setLegendState(a)}};a.HBubbleValueSlider.prototype.reset=function(){this.legends=[];this.points=[]};a.HBubbleValueSlider.prototype.addLegend=function(a,b,e,f,g,h){var j=!1;if(a.graphObj instanceof $MA.Graph.BubbleGraphObject)j=a.graphObj.isDataScattered;if(!j&&!this.showNullValue&&e==="")return null;a=new $MA.BI.ValueBubbleLegend(a,b,e,h,f.toString());
a.setEnabled(g);a.setShowLabel(this.showLegendLabel);if(this.legends===void 0)this.legends=[];this.legends.push(a);return a};a.HBubbleValueSlider.prototype.drawOutLine=function(b,d,e,f){var g=document.getElementById(this.id),h=this.currentX;if(h<0)h=0;else if(h>g.width)h=g.width;var j=a.Slider.INDICATOR_SIZE;b.font=this.textFont;var l=b.measureText(this.getCategoryValueDisplay()).width+2*this.padding;d<l&&(d=l>b.canvas.width?b.canvas.width:l);var l=-1,n=this.chartView.getGraph(),l=n.checkValueBubbleStyle($MA.ValueBubbleStyle.FLOAT)&&
this.currentY?this.currentY:this.startY;l-e<0?l+=e+10:l>g.height&&(l=g.height-10);b.save();b.strokeStyle=this.outlineColor;b.lineWidth=2;var k=h-d/2,m=h+d/2,o=l-j,e=o-e;b.lineJoin="round";b.beginPath();b.moveTo(h,l);h+j>=g.width?(m=g.width-1,k=m-d,f||(k=1,m=g.width-1),b.lineTo(m,o),b.lineTo(m,e+10),b.quadraticCurveTo(m,e,m-10,e),b.lineTo(k+10,e),b.quadraticCurveTo(k,e,k,e+10),b.lineTo(k,o-10),b.quadraticCurveTo(k,o,k+10,o),b.lineTo(h-j,o)):h-j<=0?(k=1,m=k+d,f==!1&&(k=1,m=g.width-1),b.lineTo(k,o),
b.lineTo(k,e+10),b.quadraticCurveTo(k,e,k+10,e),b.lineTo(m-10,e),b.quadraticCurveTo(m,e,m,e+10),b.lineTo(m,o-10),b.quadraticCurveTo(m,o,m-10,o),b.lineTo(h+j,o)):(k<0?(k=1,m=k+d):m>g.width&&(m=g.width-1,k=m-d),f==!1&&(k=1,m=g.width-1),b.lineTo(h+j,o),h+j<m-10&&b.lineTo(m-10,o),b.quadraticCurveTo(m,o,m,o-10),b.lineTo(m,e+10),b.quadraticCurveTo(m,e,m-10,e),b.lineTo(k+10,e),b.quadraticCurveTo(k,e,k,e+10),b.lineTo(k,o-10),b.quadraticCurveTo(k,o,k+10,o),k+10<h-j&&b.lineTo(h-j,o));b.closePath();b.stroke();
b.restore();if(document.getElementById(this.chartView.id).style.background!=="white")d=b.createLinearGradient(0,0,0,o),n.checkValueBubbleStyle($MA.ValueBubbleStyle.FLOAT)||n.checkValueBubbleStyle($MA.ValueBubbleStyle.FLOATTOP)?(d.addColorStop(0,"rgba(221,221,221,0.9)"),d.addColorStop(1,"rgba(255,255,255,0.9)")):(d.addColorStop(0,"rgba(221,221,221,0.8)"),d.addColorStop(1,"rgba(255,255,255,0.2)")),b.fillStyle=d,b.fill();$MA.platform.blackberry&&b.clearRect(0,l,b.canvas.width,b.canvas.height-l);b.fillStyle=
this.outlineColor;b.fillRect(h-this.itemSize/2-6,this.startY,this.itemSize+13,g.height);return{left:k,top:e,right:m,bottom:o}};a.HBubbleValueSlider.prototype.drawLegends=function(a,b,e){a.save();var f=b.right-b.left-2*this.padding,g=14+2*this.padding,h=this.getTitleHeight(),j=this.chartView.getGraph().graphObjs.length;a.beginPath();a.rect(b.left+this.padding,b.top+h,f,g);a.clip();f=this.scrollX;f<0?(f=this.scrollX,g=this.size.right-this.size.left,this.totalLegendsWidth+f<g&&(f=g-this.totalLegendsWidth)):
f=0;this.scrollX=f;var l=b.left+this.padding,n=b.right-this.padding,g=l+f,k=b.top+h,h=this.getCategoryValueDisplay();a.font=this.textFont;var m=a.measureText(h).width,o=m+2*this.padding;o>this.totalLegendsWidth&&(g=l+(o-this.totalLegendsWidth)/2);g<0&&(g=0);g+this.totalLegendsWidth>a.canvas.width&&(g=l+f);for(var p,q,r,o=0;o<e.length;++o)if(p=e[o],f=p.getWidth(a),g+f>=l&&g<=n&&(p.draw(a,g,k,this.textColor,this.fillColor),q===void 0&&(q=o)),g+=f+1,g>n){r=o;break}if(j>1)this.valueDisplayName=this.chartView.getValueDisplayNames(q,
r),h=this.getCategoryValueDisplay(),m=a.measureText(h).width;a.restore();a.fillStyle="black";a.font=this.textFont;a.textBaseline="hanging";if(b.right-b.left>m)g=(b.right+b.left)/2-m/2;else{for(var g=l,s,o=0;o<h.length;o++)if(s=h.substr(0,o),e=a.measureText(s),e=e.width,e+25>b.right-b.left)break;h=s+"..."}a.fillText(h,g,b.top+this.padding)};a.HBubbleValueSlider.prototype.show=function(a,b,e,f,g,h){if(a){this.chartView=a;var j=a.getGraph();try{if(!this.legends||g||a.isDrillLevelChanged){this.startX=
b;this.startY=e;this.offset=f;h!=void 0&&this.setValue(h);this.update();var l=-1,n=-1,k=j.graphObj.selectedValue;j.isDataScattered()&&(l=this.actualX==void 0?-1:this.actualX,n=this.actualY==void 0?-1:this.actualY);if($MA.Browser.isJBStockBrowser){var m=this.dataX;setTimeout(function(){a.clickValueBubble(a,l,n,m,0,!1,a.graphViewElem,!0,k)},150)}else a.clickValueBubble(a,l,n,this.dataX,0,!1,a.graphViewElem,!0,k)}else j.isDataScattered()?this.value=j.getNearestCategoryLoc(this.clientX,this.clientY):
(h!=void 0&&this.setValue(h),this.update()),a.updateValueBubble(),this.plot()}catch(o){$MA.log.error("Error in show slider: "+o.description)}}};a.HBubbleValueSlider.prototype.synValueAndLegends=function(){if(this.isDrawIntersectionPoints&&this.points&&this.points.length>0){var a,b,e=!0,f,g;for(a=0;a<this.points.length;++a){f=this.points[a];for(b=0;b<f.length;++b){g=f[b];if(g.itemNumber===this.value){e=!1;break}if(!e)break}}if(e){for(a=0;a<this.points.length;++a)if(f=this.points[a],f[0].xCoord&&f[0].yCoord)break;
a=999;for(b=0;b<f.length;++b)if(g=f[b],e=Math.abs(g.itemNumber-this.value),e<a)a=e,this.value=g.itemNumber,this.currentX=g.xCoord-this.dataX}}b=this.chartView.getGraph();if(b.isDataScattered()){b=b.getSeriesList();for(f=0;f<this.value.length;++f){a=this.value[f].Series;for(g=0;g<b.length;++g)if(a.name===b[g].name){a.enabled=b[g].enabled;break}}}this.chartView.updateValueBubble()};a.HBubbleValueSlider.prototype.plot=function(){if(!(this.legends===void 0||this.chartView===void 0)){var a=this.chartView.getGraph();
if(a.getValueBubble()){this.ploting=!0;this.synValueAndLegends();var b=this.context,e=b.canvas,f=e.width,g=0,h,j=this.legends.length;e.width=f;for(e=0;e<j;++e)h=this.legends[e],h.setFirst(e===0),h.setLast(e===j-1),g+=h.getWidth(b),e!=j-1&&(g+=1);g+=2*this.padding;this.totalLegendsWidth=g;e=this.padding+this.getTitleHeight();j>0&&(e+=this.legends[0].getHeight());this.scrollable=g>f;this.size=this.drawOutLine(b,g,e,g<=f);this.drawLegends(b,this.size,this.legends);if(this.isDrawIntersectionPoints)if(this.dragging)this.drawIntersectionPoints(b);
else{g=this.legends.length;for(e=0;e<g;++e)if(h=this.legends[e],h.isEnabled()!==!1){j=this.points[a.getSeriesIndex(h.seriesValue,h.graphObjIndex)];for(f=0;f<j.length;++f){var l=j[f];l.itemNumber===this.value&&this.drawIntersectionPoint(b,l.xCoord-this.dataX,l.yCoord-this.dataY,h.legendColor.toString())}}}this.ploting=!1}}};a.PieSlider=function(a){this.id=a;this.yOffset=this.radius=this.y=this.x=this.value=0;this.text="";this.isSelected=!1;this.currentY=this.currentX=0;this.dragging=!1;a=document.getElementById(a);
if(a!=void 0)a.slider=this,this.context=a.getContext("2d");this.getStyles();this.chartView=null};a.PieSlider.create=function(b){return new a.PieSlider(b)};a.PieSlider.prototype=new a.Slider;a.PieSlider.prototype.setChartView=function(a){this.chartView=a};a.PieSlider.prototype.setPosition=function(a){if(a==="top"||a==="side"){if(this.position!=a)return this.position=a,!0}else $MA.log.error("Unknown ValueBubble position : "+a);return!1};a.PieSlider.prototype.updating=function(a,b){this.currentX=a;this.currentY=
b;this.value=this.getValue();this.x=a;this.y=b};a.PieSlider.prototype.update=function(){this.dragging=!1;this.value=this.getValue()};a.PieSlider.prototype.getValue=function(){var a=this.x-this.centerX,b=this.y-this.centerY,e=Math.acos(a/Math.sqrt(a*a+b*b)),a=this.currentX-this.centerX,b=this.currentY-this.centerY,a=Math.acos(a/Math.sqrt(a*a+b*b));return b>0?a-e:e-a};a.PieSlider.DECIMAL=100;a.PieBubbleValueSlider=function(b){a.PieSlider.call(this,b);this.selectedLegend=void 0;this.legendList=[];this.padding=
a.PieBubbleValueSlider.DEFAULT_PADDING;this.scrollY=this.scrollX=this.mouse_point_y=this.mouse_point_x=this.prev_y=this.prev_x=0;this.scrolling=this.scrollable=!1};a.PieBubbleValueSlider.DEFAULT_PADDING=7;a.PieBubbleValueSlider.prototype=new a.PieSlider;a.PieBubbleValueSlider.create=function(b){return new a.PieBubbleValueSlider(b)};a.PieBubbleValueSlider.prototype.onMouseDown=function(a,b){if(this.legendList.length===0)return-1;var e=this.legendList.length,f,g;for(f=0;f<e;++f)if(g=this.legendList[f],
g.hitTest(a,b)){this.selectedLegend=g;if(this.scrollable)this.mouse_point_x=a,this.mouse_point_y=b,this.prevX=a,this.prevY=b,this.scrolling=!0;return 1}return-1};a.PieBubbleValueSlider.prototype.onMouseUp=function(a,b){var e=this.legendList.length,f=Math.abs(a-this.mouse_point_x);if(this.scrolling&&f>30)this.scrolling=!1;else for(f=0;f<e;++f){var g=this.legendList[f];if(g.hitTest(a,b)&&this.selectedLegend.name===g.name)return this.selectedLegend}};a.PieBubbleValueSlider.prototype.doScroll=function(a,
b){this.scrollX+=a-this.prevX;this.scrollY+=b-this.prevY;var e=this.size.right-this.size.left;if(this.totalLegendsWidth+this.scrollX<e)this.scrollX=e-this.totalLegendsWidth;this.prevX=a;this.prevY=b;this.plot()};a.PieBubbleValueSlider.prototype.createLegend=function(b){var d,e,f,g,h,j;d=b.name;e=b.percent;f=b.value;g=b.color;h=b.others;e=Math.round(e*a.PieSlider.DECIMAL);e/=a.PieSlider.DECIMAL;e=b.isNull==!0?"":$MA.format(e,"percent");f<0&&(e="-"+e);if(b.valueDisplayText!=void 0)b.valueDisplayText=
e+" ("+b.valueDisplayText+")";this.showValueOnPieChart&&(j=this.chartView.getGraphGob());var l;if(h){l="";var n;for(n=0;n<h.length;n++)n>0&&(l+="  "),e=h[n].yCoord*a.PieSlider.DECIMAL,e=Math.round(e),e/=a.PieSlider.DECIMAL,e=h[n].isNull==!0?"":$MA.format(e,"percent"),l+=h[n].xCoord+": "+e,h[n].valueDisplayText!=void 0?l+=" ("+h[n].valueDisplayText+")":this.showValueOnPieChart&&(l+=" ("+$MA.format(h[n].yValue,j.getValueFormat(0))+")")}this.showValueOnPieChart&&(e+=" ("+$MA.format(f,j.getValueFormat(0))+
")");b=new $MA.BI.ValueBubbleLegend(d,d,e,b.valueDisplayText,g.toString(),l);b.setShowLabel(this.showLegendLabel);return b};a.PieBubbleValueSlider.prototype.hasPieSelected=function(){return this.isSelected};a.PieBubbleValueSlider.prototype.setLegends=function(a,b){var e=a?a.length:0,f,g;if(e>0){this.legendList=[];for(f=0;f<e;f++)if(g=a[f])g=this.createLegend(g),this.legendList.push(g);this.isSelected=b}};a.PieBubbleValueSlider.prototype.drawOutLine=function(a,b,e,f,g){return this.position==="side"?
this.drawSideOutline(a,b,e,f,g):this.drawTopOutline(a,b,e,f,g)};a.PieBubbleValueSlider.prototype.drawTopOutline=function(b,d,e,f,g){var h=document.getElementById(this.id),j=a.Slider.INDICATOR_SIZE,l=this.centerX,n=this.centerY-this.radius;b.strokeStyle=this.outlineColor;b.lineWidth=2;var k=l-d/2,m=l+d/2,o=n-j,p=o-e;p<1&&(p=1,o=p+e,n=o+j);e=b.createLinearGradient(0,0,0,o);e.addColorStop(0,"rgba(221,221,221,0.8)");e.addColorStop(1,"rgba(255,255,255,0.2)");if(!g)return f&&(k=1,m=h.width-1),b.beginPath(),
$MA.ContextHelper.roundRect(b,k,p,m-k,o-p,10),b.closePath(),b.stroke(),b.fillStyle=e,b.fill(),b={left:k,top:p,right:m,bottom:o,width:m-k};b.lineJoin="round";b.beginPath();b.moveTo(l,n);l+j>=h.width?(m=h.width-1,k=m-d,f&&(k=1,m=h.width-1),b.lineTo(m,o),b.lineTo(m,p+10),b.quadraticCurveTo(m,p,m-10,p),b.lineTo(k+10,p),b.quadraticCurveTo(k,p,k,p+10),b.lineTo(k,o-10),b.quadraticCurveTo(k,o,k+10,o),b.lineTo(l-j,o)):l-j<=0?(k=1,m=k+d,f&&(k=1,m=h.width-1),b.lineTo(k,o),b.lineTo(k,p+10),b.quadraticCurveTo(k,
p,k+10,p),b.lineTo(m-10,p),b.quadraticCurveTo(m,p,m,p+10),b.lineTo(m,o-10),b.quadraticCurveTo(m,o,m-10,o),b.lineTo(l+j,o)):(k<0?(k=1,m=k+d):m>h.width&&(m=h.width-1,k=m-d),f&&(k=1,m=h.width-1),b.lineTo(l+j,o),l+j<m-10&&b.lineTo(m-10,o),b.quadraticCurveTo(m,o,m,o-10),b.lineTo(m,p+10),b.quadraticCurveTo(m,p,m-10,p),b.lineTo(k+10,p),b.quadraticCurveTo(k,p,k,p+10),b.lineTo(k,o-10),b.quadraticCurveTo(k,o,k+10,o),k+10<l-j&&b.lineTo(l-j,o));b.closePath();b.stroke();b.fillStyle=e;b.fill();return b={left:k,
top:p,right:m,bottom:o,width:m-k}};a.PieBubbleValueSlider.prototype.drawSideOutline=function(b,d,e,f,g){var h=document.getElementById(this.id),j=a.Slider.INDICATOR_SIZE,l=0,n=0,k=0;this.pieGraphLegendPos===$MA.Graph.LegendType.RIGHT?(l=this.centerX-this.radius,n=l-d-j,k=l-j):(l=this.centerX+this.radius,n=l+j,k=l+d+j);d=this.centerY;b.strokeStyle=this.outlineColor;b.lineWidth=2;var m=d+e/2,e=m-e,o=b.createLinearGradient(0,0,0,m);o.addColorStop(0,"rgba(221,221,221,0.8)");o.addColorStop(1,"rgba(255,255,255,0.2)");
if(!g)return f&&(this.pieGraphLegendPos===$MA.Graph.LegendType.RIGHT?n=0:k=h.width-1),b.beginPath(),$MA.ContextHelper.roundRect(b,n,e,k-n,m-e,10),b.closePath(),b.stroke(),b.fillStyle=o,b.fill(),b={left:n,top:e,right:k,bottom:m,width:k-n};b.lineJoin="round";b.beginPath();b.moveTo(l,d);k>h.width&&(k=h.width-1);n<0&&(n=0);this.pieGraphLegendPos===$MA.Graph.LegendType.RIGHT?(b.lineTo(k,d+j),d+j<m-10&&b.lineTo(k,m-10),b.quadraticCurveTo(k,m,k-10,m),b.lineTo(n+10,m),b.quadraticCurveTo(n,m,n,m-10),b.lineTo(n,
e+10),b.quadraticCurveTo(n,e,n+10,e),b.lineTo(k-10,e),b.quadraticCurveTo(k,e,k,e+10),e+10<d-j&&b.lineTo(k,d-j)):(b.lineTo(n,d+j),d+j<m-10&&b.lineTo(n,m-10),b.quadraticCurveTo(n,m,n+10,m),b.lineTo(k-10,m),b.quadraticCurveTo(k,m,k,m-10),b.lineTo(k,e+10),b.quadraticCurveTo(k,e,k-10,e),b.lineTo(n+10,e),b.quadraticCurveTo(n,e,n,e+10),e+10<d-j&&b.lineTo(n,d-j));b.closePath();b.stroke();b.fillStyle=o;b.fill();return b={left:n,top:e,right:k,bottom:m,width:k-n}};a.PieBubbleValueSlider.prototype.getRadian=
function(){return this.position==="top"?-Math.PI/2:this.pieGraphLegendPos===$MA.Graph.LegendType.RIGHT?-Math.PI:-0.001};a.PieBubbleValueSlider.prototype.show=function(a,b){if(a)if(this.chartView=a,a.tableViewElem.offsetHeight!=0)this.legend=void 0,this.legendList=[];else{if(b){var e=a.getGraph(),f=this.getRadian(),g=e.getPieFillBrush(f);this.text=e.getPieDataString(f);if(g!=void 0&&(a.refreshValueBubbleLegends(),$MA.Browser.isJBStockBrowser)){this.drawValueBubbleTimer&&clearTimeout(this.drawValueBubbleTimer);
var h=this;this.drawValueBubbleTimer=setTimeout(function(){h.plot();h.drawValueBubbleTimer=void 0;a.plotByShow=!0},150);return}}this.plot()}};a.PieBubbleValueSlider.prototype.drawLegends=function(a,b,e){a.save();var f=this.size.right-this.size.left-2*this.padding;a.beginPath();a.rect(this.size.left+this.padding,this.size.top,f,e);a.clip();f=this.scrollX;f<0?(e=this.size.right-this.size.left,b+f<e&&(f=e-b)):f=0;this.scrollX=f;var b=this.size.left+this.padding,e=this.size.right-this.padding,g=b+f,h=
this.size.top+this.padding,j=this.legendList.length,l,n;for(l=0;l<j;++l)if(n=this.legendList[l],f=n.getWidth(a),g+f>=b&&g<=e&&n.draw(a,g,h,this.textColor,this.fillColor),g+=f+1,g>e)break;a.restore()};a.PieBubbleValueSlider.getDefaultHeight=function(){return 2*a.PieBubbleValueSlider.DEFAULT_PADDING+$MA.BI.ValueBubbleLegend.getDefaultHeight()};a.PieBubbleValueSlider.prototype.getHeightInt=function(a){a|=this.legend;return 2*this.padding+(a?a.getHeight():this.legendList.length>0?this.legendList[0].getHeight():
$MA.BI.ValueBubbleLegend.getDefaultHeight())};a.PieBubbleValueSlider.prototype.getHeight=function(b){b=this.getHeightInt(b);this.position!=="side"&&(b+=a.Slider.INDICATOR_SIZE);return b};a.PieBubbleValueSlider.prototype.plot=function(){var a=this.chartView.getGraph();if(a.getValueBubble()){this.pieGraphLegendPos=a.getLegendPosition();var a=this.context,b=a.canvas,e=b.width;b.width=e;var f=this.padding,g=this.legendList.length,h,j,b=0;if(g>0){for(j=0;j<g;++j)h=this.legendList[j],h.setFirst(j===0),
h.setLast(j===g-1),b+=h.getWidth(a),j!=g-1&&(b+=1);b+=2*f;h=this.getHeightInt(h);f=!1;this.position==="side"?this.pieGraphLegendPos===$MA.Graph.LegendType.RIGHT?(f=this.centerX-this.radius-b<=0,this.scrollable=this.centerX-this.radius-b<0):(f=this.centerX+this.radius+b>=e,this.scrollable=this.centerX+this.radius+b>e):(f=b>=e,this.scrollable=b>e);this.size=this.drawOutLine(a,b,h,f,!this.isSelected);this.drawLegends(a,b,h)}this.totalLegendsWidth=b}};a.VSlider=function(b){a.Slider.call(this,b);this.categoryText=
"";this.id=b;this.currentY=this.offset=this.startY=this.startX=this.value=this.itemSize=this.incr=0;this.dragging=!1;this.legends=void 0;this.padding=7;if(b=document.getElementById(b))b.slider=this,this.context=b.getContext("2d");this.getStyles()};a.VSlider.prototype=new a.Slider;a.VSlider.create=function(b){return new a.VSlider(b)};a.VSlider.prototype.plot=function(a){var b=this.context,e=b.canvas,f=e.width;e.width=f;b.fillStyle=this.outlineColor;b.fillRect(this.startX,this.currentY-this.itemSize/
2,f,this.itemSize);e={left:this.startX,top:this.currentY-this.itemSize/2,right:f,bottom:this.currentY+this.itemSize/2};(arguments.length==0||!a)&&this.drawLegends(b,e,this.legends)};a.VSlider.prototype.updating=function(a,b){this.value=this.getValue();this.currentY=b};a.VSlider.prototype.update=function(){this.dragging=!1;this.value=this.getValue();this.currentY=this.startY+this.offset+this.value*this.incr};a.VSlider.prototype.getValue=function(){var a=document.getElementById(this.id),b=this.currentY;
b<this.startY?b=this.startY:b>a.offsetHeight-this.startY&&(b=a.offsetHeight-this.startY);return Math.round((b-this.startY-this.offset)/this.incr)};a.VSlider.prototype.reset=function(){this.legends=[];this.points=[]};a.VSlider.prototype.addLegend=function(a,b,e,f,g,h){if(!this.showNullValue&&e==="")return null;a=new $MA.BI.ValueBubbleLegend(a,b,e,h,f.toString());a.setEnabled(g);a.setShowLabel(this.showLegendLabel);if(this.legends===void 0)this.legends=[];this.legends.push(a);return a};a.VSlider.prototype.drawLegends=
function(a,b,e){a.save();var f=b.right-b.left-2*this.padding,g=16+2*this.padding,h=this.padding;a.beginPath();a.rect(b.left+this.padding,b.top+h,f,b.bottom-b.top);a.clip();f=b.top+h;h=b.bottom-this.padding;b=b.left+this.padding;if(e){var j,l=f;for(j=0;j<e.length&&l<h;l+=g+this.padding*2){var n=e[j];n.getWidth(a);l>=0&&l+g>=f&&l<=h&&(n.draw(a,b,l,this.textColor,this.fillColor),j++)}}a.restore()};var b=function(a){this.getSlider=function(){return a}};b.prototype.updating=function(a,b){return this.getSlider().updating(a,
b)};b.prototype.update=function(){return this.getSlider().update()};b.prototype.show=function(a,b,e,f,g,h){return this.getSlider().show(a,b,e,f,g,h)};return{create:function(c,d){var e;"hbvs"===c?e=new a.HBubbleValueSlider(d):"vs"===c?e=new a.VSlider(d):"pbvs"===c&&(e=new a.PieBubbleValueSlider(d));if(e)return new b(e)},getPieBubbleValueSliderDefaultHeight:function(){return a.PieBubbleValueSlider.getDefaultHeight()}}}();$MA.BI.ChartView.prototype.isValueBubbleVisible=function(){return this.getGraph().getValueBubble()};
$MA.BI.ChartView.prototype.showValueBubble=function(a){this.getGraph().setValueBubble(a);this.refreshValueBubbleView(!1);this.refreshAsync()};
$MA.BI.ChartView.prototype.setValueBubbleStyle=function(a){var b=!0,c;if(a!=null){var d=this.getGraph();a.style!==void 0&&(b=d.setValueBubbleStyle(a.style));if(a.legendIconShape!==void 0)this.legendIconShape=c=a.legendIconShape;this.valueBubbleViewElem&&this.valueBubbleViewElem.slider&&this.valueBubbleViewElem.slider.configureSlider(a)&&(d.setValueBubbleHeight(this.valueBubbleViewElem.slider.getHeight()),d.setValueBubblePosition(this.valueBubbleViewElem.slider.getPosition()),d.setValueBubbleCategoriesDisplayOrder(this.valueBubbleViewElem.slider.categoriesDisplayOrder))}else b=
!1;return b};$MA.BI.ChartView.prototype.getValueBubbleStyle=function(){var a=this.valueBubbleViewElem.slider.getConfiguration(),b=this.getGraph();a.style=b.getValueBubbleStyle();return a};$MA.BI.ChartView.prototype.getValueBubbleHeight=function(){return this.getSlider().getHeight()};$MA.BI.ChartView.prototype.getValueBubblePosition=function(){return this.getSlider().getPosition()};$MA.BI.ChartView.prototype.getSlider=function(){if(this.valueBubbleViewElem){var a=this.valueBubbleViewElem.slider;if(a)return a}};
$MA.BI.ChartView.prototype.clickValueBubble=function(a,b,c,d,e,f,g,h,j){var l=a.getGraph(),n=b+a.valueBubbleViewElem.offsetLeft,f=c+a.valueBubbleViewElem.offsetTop,k=l.getDrawArea();if(k!=void 0&&!(b>k.width+k.left)){var m=a.getGraphGob(),k=a.valueBubbleViewElem.slider,o=l.graphObjs.length,p;for(p=0;p<o;p++)if(l.graphObjs[p].graphType.indexOf("line")>=0){k.isDrawIntersectionPoints=!0;break}o=0;k.onMouseDown!=void 0&&(o=k.onMouseDown(b,c));if(o>0)this.targetIsSlider=!0,a.targetIsSlider=!0;else{if(o<=
0){k.dragging=h?!1:!0;if(b>=0)k.currentX=b;if(c>=0)k.currentY=c;k.clientX=d-g.offsetLeft;k.clientY=e+g.offsetTop;k.dataX=a.valueBubbleViewElem.offsetLeft;k.dataY=a.valueBubbleViewElem.offsetTop;if(l.isDataScattered()){k.showCategoryText=!1;k.showCategoryDisplayName=!1;k.showValueDisplayName=!1;a=j;a==void 0?(a=l.getNearestCategoryLoc(n,f),c=a[0].LocX):(this.selectedCategoryValue=a[0].Category,c=l.getUpdatedX(a[0].Category));k.value=a;k.actualX=b;k.actualY=f;if(k.value.length<=0)return;k.currentX=
h?c-k.dataX:b}else h?(k.update(),k.text=l.getDataString(k.value,m.getValueFormat(0))):k.updating(b,c)}this.updateValueBubble();k.plot()}}};
$MA.BI.ChartView.prototype.moveValueBubble=function(a,b,c,d,e){var f=this.getGraph(),g=this.getSlider();g.clientX=c-e.offsetLeft;g.clientY=d+e.offsetTop;var h=f.getDrawArea();if(!(b<h.top||a>h.width+h.left||b>h.top+h.height||a>h.left+h.width)){f.isDataScattered()?(g.value=f.getNearestCategoryLoc(c-e.offsetLeft,d-e.offsetTop),g.currentX=a):g.updating(a,b);if(f.getSeriesList()[0].items.length===1&&!f.isDataScattered())g.value=0;this.displayValueBubble()}};
$MA.BI.ChartView.prototype.updateValueBubble=function(){var a=this.getGraph(),b=this.getGraphGob(),c=this.getSlider(),d,e,f,g,h,j,l,n;if(a.isDataScattered()){if(c.reset!=void 0&&c.reset(),c.categoryText!=void 0){c.categoryText=a.getCategoryString(c.value[0].ItemNumber);c.categoryDisplayText=a.getCategoryDisplayText(c.value[0].ItemNumber);c.categoryDisplayName=b.getObject("category").getProperty("displayname");c.valueDisplayName=b.getObject("values").getDisplayName(0);(e=b.getObject("values").getDisplayName(1))||
(e="size");for(d=c.value.length-1;d>=0;d--){h=c.value[d].Series;var k=c.value[d].ItemNumber;j=h.items[k];g=$MA.format(j.yValue,b.getValueFormat(0));l=a.getSeriesString(h.name);var m=c.value[d].SeriesNo;m==void 0&&(m=0);var o=h.items[k].originalIndex;o==void 0&&(o=k);f=a.getCustomisedFillBrush(m,o);m=a.getSeriesFillBrush(m).toString();if(this.getChartType()=="bubble"){var p=a.getColorDataList(),q;p.length>0&&(q=p.get(h.getItemColorData(o,"color")),q==void 0&&(q=0));m!=void 0&&(n=m);q!=void 0&&(n=a.getDrawContext(q).getFillBrush().toString())}else m!=
void 0&&(n=m);f!=void 0&&(n=f);l=c.addLegend(h,l,g,n,h.isEnabled(),j.valueDisplayText);if(l!=null)l.showNullValue=c.showNullValue,h=a.getShape(k),l.shape=h,l.set2ndName(e),h=j.otherValuesDisplayText,h!=void 0&&h.length>0&&h[0]!=void 0||(h=j.otherValues?j.otherValues[0]:j.yValue,$MA.format(h,b.getValueFormat(1))),l.scatterChart=a.isDataScattered(),h=b.getObject("values").getBubbleChartOtherValuesDisplayName("color"),l.setColorMeasureName(h),l.otherValues=j.otherValues,l.valueDisplayName=b.getObject("values").getDisplayName(0),
l.categoryDisplayName=b.getObject("category").getProperty("displayname"),l.categoryValue=a.getCategoryDisplayText(c.value[d].ItemNumber),l.shapeMeasureName=b.getObject("values").getBubbleChartOtherValuesDisplayName("shape"),l.heightMeasureName=b.getObject("values").getBubbleChartOtherValuesDisplayName("height")}}}else if(q=a.getSeriesList(),q.length!=0){if(q[0].items.length==1||a.getMaxItemCount()==1)c.value=0;d=a.getDataDisplayString(c.value,b.getValueFormat(0));c.text=a.getDataString(c.value,b.getValueFormat(0));
k=c.text.split("\n");o=d.split("\n");c.reset!=void 0&&c.reset();if(c.categoryText!=void 0){c.categoryText=a.getCategoryString(c.value);c.categoryDisplayText=a.getCategoryDisplayText(c.value);c.categoryDisplayName=b.getObject("category").getProperty("displayname");c.valueDisplayName=b.getObject("values").getDisplayName(0);g=c.value;for(d=0;d<q.length;++d){h=q[d];if(a.graphType=="tablebar"){n=a.getTableFirstRow();e=n%q.length;if(c.value==Math.floor(n/q.length)&&d<e)continue;!h.isEnabled()&&k.length+
d<q.length&&k.unshift("disabled")}l=a.getSeriesString(h.name);n=h.drawContext.fillBrush;f=a.getCustomisedFillBrush(d,g);f!=void 0&&(n=f);e=o[d]==""?void 0:o[d];l=c.addLegend(h,l,k.shift(),n.toString(),h.isEnabled(),e);if(h.graphObj instanceof $MA.Graph.LineGraphObject&&l!=void 0&&l!=null)l.shape=this.legendIconShape;if(a.graphType.indexOf("bubble")>=0&&l!=null&&(l.showNullValue=c.showNullValue,(e=b.getObject("values").getBubbleChartOtherValuesDisplayName("width"))||(e="size"),j=h.items[c.value],j!=
void 0&&j.otherValuesDisplayText!=void 0))h=j.otherValuesDisplayText,h!=void 0&&h[0]!=void 0&&h.length>0||(h=j.otherValues?j.otherValues[0]:j.yValue,$MA.format(h,b.getValueFormat(1))),l.otherValues=j.otherValues,l.set2ndName(e)}}this.setValueBubblePoints(c,q)}};$MA.BI.ChartView.prototype.displayValueBubble=function(){if(void 0===this.sliderUpdater){var a=this;this.sliderUpdater=setTimeout(function(){a.updateValueBubble();a.getSlider().plot();a.sliderUpdater=void 0},50)}};
$MA.BI.ChartView.prototype.setValueBubblePoints=function(a,b){if(a.isDrawIntersectionPoints){var c,d,e=[];if(b[0].items.length==1)for(c=0;c<b.length;++c)e[c]=[],d=b[c],e[c].push({xCoord:d.items[0].xCoord,yCoord:d.items[0].yCoord,itemNumber:0});else{var f=this.getGraph(),g=a.value,h=-1;d=0;h=a.clientX;if(b[0].items[a.value]!=void 0)c=b[0].items[a.value].xCoord;if(c==void 0){for(d=0;d<f.graphObjs.length;d++)if(f.graphObjs[d].graphType.indexOf("line")>=0)break;c=(c=f.getDrawObject(0,a.value,f.graphObjs[d]))?
c.item.xCoord:0}h=h>c?g+1:g-1;for(c=0;c<b.length;++c){e[c]=[];d=b[c];var j=f.getDrawObject(c,g,f.graphObjs);e[c].push({xCoord:d.items[g]&&d.items[g].xCoord!=void 0?d.items[g].xCoord:j.item.xCoord,yCoord:d.items[g]&&d.items[g].yCoord!=void 0?d.items[g].yCoord:j.item.yCoord,itemNumber:g});var l=f.getDrawObject(c,h,f.graphObjs);l===void 0?e[c].push({xCoord:d.items[g]&&d.items[g].xCoord!=void 0?d.items[g].xCoord:j.item.xCoord,yCoord:d.items[g]&&d.items[g].yCoord!=void 0?d.items[g].yCoord:j.item.yCoord,
itemNumber:g}):e[c].push({xCoord:d.items[h]&&d.items[h].xCoord!=void 0?d.items[h].xCoord:l.item.xCoord,yCoord:d.items[h]&&d.items[h].yCoord!=void 0?d.items[h].yCoord:l.item.yCoord,itemNumber:h})}}a.points=e}};
$MA.BI.ChartView.prototype.onValueBubbleViewTouchStart=function(a){var b=a.changedTouches[0],c=$MA.getMouseXY(b,a.srcElement),d=c.x,c=c.y,e=this.getGraph().getDrawArea();d>e.width+e.left||(a.target.slider==void 0&&(d-=this.valueBubbleViewElem.offsetLeft,c-=this.valueBubbleViewElem.offsetTop),this.clickValueBubble(this,d,c,b.clientX,b.clientY,!1,this.elem))};
$MA.BI.ChartView.prototype.onValueBubbleViewTouchMove=function(a){var b=a.changedTouches[0],c=this.getGraph().getDrawArea(),d=$MA.getMouseXY(b,a.srcElement),a=d.x,d=d.y;a>c.width-5+c.left||(c=this.getSlider(),c.dragging?this.moveValueBubble(a,d,b.pageX,b.pageY,this.elem):c.scrolling&&c.doScroll!=void 0&&c.doScroll(a,d))};
$MA.BI.ChartView.prototype.onValueBubbleViewTouchEnd=function(a){var b=this.valueBubbleViewElem.slider,c=this.getGraph(),d=this.getGraphGob(),e=c.getSeriesList(),e=b.legends.length,f;if(c.getValueBubble()){if(b.dragging)c.isDataScattered()?(b.currentX=b.value[0].LocX-b.dataX,b.dragging=!1):(b.update(),b.text=c.getDataString(b.value,d.getValueFormat(0)));else if(f=a.changedTouches[0],f=$MA.getMouseXY(f,a.srcElement),a=f.x,f=f.y,c.getValueBubble()&&b.onMouseUp!=void 0&&b.onMouseUp(a,f)){for(a=0;a<e;++a)f=
b.legends[a],c.setSeriesState(f.seriesValue,f.isEnabled(),f.graphObjIndex);this.refreshChartViews();if(c.graphType.indexOf("percent")>=0){b.text=c.getDataString(b.value,d.getValueFormat(0));d=b.text.split("\n");b.reset();b.categoryText=c.getCategoryString(b.value);b.categoryDisplayText=c.getCategoryDisplayText(b.value);e=c.getSeriesList();for(a=0;a<e.length;++a){f=e[a];var g=c.getSeriesString(f.name);b.addLegend(f,g,d[a],c.getSeriesFillBrush(a).toString(),f.isEnabled())}}}b.plot();this.updateWhatIfVariableControls()}};
$MA.BI.Breadcrumbs=function(a){this.id=a;a=document.getElementById(a);if(a!=void 0){a.breadcrumbs=this;var b=this;a.addEventListener($MA.isTouchEventSupported?"touchstart":"mousedown",function(a){b.onTouchStart(a)},!1)}this.itemX=[];this.itemWidth=[];this.itemText=[];this.overflow=!1;this.getStyles()};$MA.BI.Breadcrumbs.BKCOLOR="#808080";$MA.BI.Breadcrumbs.TEXTCOLOR="#FFFFFF";$MA.BI.Breadcrumbs.LINEARSTARTCOLOR="#303030";$MA.BI.Breadcrumbs.LINEARENDCOLOR="#A0A0A0";
$MA.BI.Breadcrumbs.prototype.getStyles=function(){this.bkColor=$MA.BI.Breadcrumbs.BKCOLOR;this.textColor=$MA.BI.Breadcrumbs.TEXTCOLOR;var a=$MA.getCSSRule(".chart_breadcrumbs");if(a!=void 0){if(a.style.backgroundColor!="")this.bkColor=a.style.backgroundColor;if(a.style.color!="")this.textColor=a.style.color}};
$MA.BI.Breadcrumbs.prototype.calcItemWidth=function(a,b){var c;for(c=b.length-1;c>=0;c--)this.itemX.pop(),this.itemWidth.pop();var d=document.getElementById(this.id).width,e,f=0;for(c=0;c<b.length;c++)if(e=a.measureText(b[c]),this.itemX[c]=f,this.itemWidth[c]=40+e.width,this.itemText[c]=b[c],f+=40+e.width,d-f<52){this.itemWidth[c]=52;this.itemText[c]="...";break}return f};
$MA.BI.Breadcrumbs.prototype.getX=function(a){return a.touches&&a.touches.item?$MA.getMouseXY(a.touches.item(0),a.srcElement).x:$MA.getMouseXY(a).x};$MA.BI.Breadcrumbs.prototype.onTouchStart=function(a){var b,c=this.getX(a);for(b=this.itemX.length-1;b>=0;b--)if(c>this.itemX[b])break;if(this.onitemclicked)if(this.itemText[b]=="...")this.onitemclicked(-1);else this.onitemclicked(b);a.preventDefault();a.stopPropagation()};
$MA.BI.Breadcrumbs.prototype.plot=function(a,b){var c=a.getContext?a.getContext("2d"):null;c.clearRect(0,0,a.width,a.height);c.font="Bold 14px Helvetica";this.calcItemWidth(c,b);var d,e,f;for(d=b.length-1;d>=0;d--)c.beginPath(),d==0?(e=this.itemX[d],f=this.itemWidth[d]):(e=this.itemX[d]-20,f=this.itemWidth[d]+20),c.strokeStyle="black",c.moveTo(e+f-20,0),c.lineTo(e+f,a.height/2),c.lineTo(e+f-20,a.height),c.stroke(),c.moveTo(e,0),c.lineTo(e+f-20,0),c.lineTo(e+f,a.height/2),c.lineTo(e+f-20,a.height),
c.lineTo(e,a.height),c.closePath(),e=c.createLinearGradient(0,0,e+f,0),e.addColorStop(0,$MA.BI.Breadcrumbs.LINEARSTARTCOLOR),e.addColorStop(1,$MA.BI.Breadcrumbs.LINEARENDCOLOR),c.fillStyle=e,c.fill(),$MA.platform.blackberry&&b.length==1&&(c.clearRect(0,0,a.width,a.height),c.fill()),c.fillStyle=this.textColor,c.fillText(this.itemText[d],this.itemX[d]+5,20)};$MA.BI.DAVariables=void 0;
$MA.BI.GetDAVariable=function(a){if(!(a==void 0||$MA.BI.DAVariables==void 0)){var b;for(b=0;b<$MA.BI.DAVariables.items.length;b++)if($MA.BI.DAVariables.items[b].name==a)return $MA.BI.DAVariables.items[b]}};$MA.BI.DA={};$MA.BI.DA.Variable=function(){this.variableindex=this.choices=this.selection=this.decimals=this.step=this.max=this.min=this.value=this.variableType=this.displayName=this.name=void 0};$MA.BI.DA.Variable.Name=0;$MA.BI.DA.Variable.DISPLAYNAME=1;$MA.BI.DA.Variable.VARIABLETYPE=2;
$MA.BI.DA.Variable.VALUE=3;$MA.BI.DA.Variable.MIN=4;$MA.BI.DA.Variable.MAX=5;$MA.BI.DA.Variable.STEP=6;$MA.BI.DA.Variable.DECIMALS=7;$MA.BI.DA.Variable.SELECTION=8;$MA.BI.DA.Variable.CHOICES=9;
$MA.BI.DA.Variable.propertyIds=new $MA.Hash("name",$MA.BI.DA.Variable.Name,"displayname",$MA.BI.DA.Variable.DISPLAYNAME,"variabletype",$MA.BI.DA.Variable.VARIABLETYPE,"value",$MA.BI.DA.Variable.VALUE,"min",$MA.BI.DA.Variable.MIN,"max",$MA.BI.DA.Variable.MAX,"step",$MA.BI.DA.Variable.STEP,"decimals",$MA.BI.DA.Variable.DECIMALS,"selection",$MA.BI.DA.Variable.SELECTION,"choices",$MA.BI.DA.Variable.CHOICES);
$MA.BI.DA.Variable.prototype.createObject=function(a){a=$MA.BI.DA.Variable.propertyIds.get(a.toLowerCase());if(a==void 0)return null;var b=null;switch(a){case $MA.BI.DA.Variable.CHOICES:this.choices=b=new $MA.BI.DA.VariableChoices}return b};
$MA.BI.DA.Variable.prototype.setProperty=function(a,b){var c=$MA.BI.DA.Variable.propertyIds.get(a.toLowerCase());if(c==void 0)return!1;switch(c){case $MA.BI.DA.Variable.Name:this.name=b;break;case $MA.BI.DA.Variable.DISPLAYNAME:this.displayName=b;break;case $MA.BI.DA.Variable.VARIABLETYPE:this.variableType=b;break;case $MA.BI.DA.Variable.VALUE:this.value=b;break;case $MA.BI.DA.Variable.MIN:this.min=b;break;case $MA.BI.DA.Variable.MAX:this.max=b;break;case $MA.BI.DA.Variable.STEP:this.step=b;break;
case $MA.BI.DA.Variable.DECIMALS:this.decimals=b;break;case $MA.BI.DA.Variable.SELECTION:this.selection=b}return!0};
$MA.BI.DA.Variable.prototype.getValue=function(){var a;switch(this.variableType.toLowerCase()){case "double":case "float":a=parseFloat(this.value.toString());break;case "integer":a=parseInt(this.value.toString(),10);break;case "boolean":a=$MA.parseBool(this.value);break;case "date":a=$MA.parseDate(this.value.toString());break;case "enum":if(this.choices!=void 0&&this.choices.items.length>parseInt(this.selection,10))a=this.choices.items[parseInt(this.selection,10)].value}return a};
$MA.BI.DA.Variables=function(){this.items=[]};$MA.BI.DA.Variables.VARIABLE=0;$MA.BI.DA.Variables.propertyIds=new $MA.Hash("variable",$MA.BI.DA.Variables.VARIABLE);$MA.BI.DA.Variables.prototype.createObject=function(a){a=$MA.BI.DA.Variables.propertyIds.get(a.toLowerCase());if(a==void 0)return null;var b=null;switch(a){case $MA.BI.DA.Variables.VARIABLE:b=new $MA.BI.DA.Variable,b.variableindex=this.items.length,this.items.push(b)}return b};
$MA.BI.DA.VariableChoice=function(){this.value=this.display=void 0};$MA.BI.DA.VariableChoice.DISPLAY=0;$MA.BI.DA.VariableChoice.VALUE=1;$MA.BI.DA.VariableChoice.propertyIds=new $MA.Hash("display",$MA.BI.DA.VariableChoice.DISPLAY,"value",$MA.BI.DA.VariableChoice.VALUE);
$MA.BI.DA.VariableChoice.prototype.setProperty=function(a,b){var c=$MA.BI.DA.VariableChoice.propertyIds.get(a.toLowerCase());if(c==void 0)return!1;switch(c){case $MA.BI.DA.VariableChoice.DISPLAY:this.display=b;break;case $MA.BI.DA.VariableChoice.VALUE:this.value=b}return!0};$MA.BI.DA.VariableChoices=function(){this.items=[]};$MA.BI.DA.VariableChoices.CHOICE=0;$MA.BI.DA.VariableChoices.propertyIds=new $MA.Hash("choice",$MA.BI.DA.VariableChoices.CHOICE);
$MA.BI.DA.VariableChoices.prototype.createObject=function(a){a=$MA.BI.DA.VariableChoices.propertyIds.get(a.toLowerCase());if(a==void 0)return null;var b=null;switch(a){case $MA.BI.DA.VariableChoices.CHOICE:b=new $MA.BI.DA.VariableChoice,this.items.push(b)}return b};
$MA.Chart=function(a,b){this.id=a;this.isComposite=b;this.categorySortOrder=this.events=void 0;this.numberOfVisibleCategory=this.refreshCount=0;var c=document.getElementById(a);if(c){c.className="chart";var d=c.macontrol;d&&d.reset();c.macontrol=this}else $MA.log.error(a+$MA.getLocalisation(null,"Error_InvalidID"," is an invalid id"))};
$MA.Chart.prototype.load=function(a){var b=$MA.createXHR();b!=void 0&&(b.open("GET",$MA.getMetadataUrl(a),!1),b.send(null),b.status==200||b.status==304||b.status==0?this.create(b.responseText):$MA.log.error($MA.getLocalisation(null,"Error_Load","Failed to load ")+a))};$MA.Chart.prototype.create=function(a){var b=new $MA.BI.ChartObject(this);(typeof a=="object"?new $MA.DataView.JsonMetaDataReader:new $MA.DataView.XmlMetaDataReader).parse(b,a);this.initialize(b)};
$MA.Chart.prototype.initialize=function(a){this.reset();var b=a.dvObj;b.initialize();var c=b.getGraphGob();a.zoomingLevels.length>0?(b=a.zoomingLevels[0].query,c.getObject("Category").setProperty("Column",a.zoomingLevels[0].categoryColumn)):b=a.getQuery();b&&(c.setFirstItem(0),c.setMaxItems(),a.retrieve(b));var d;switch(a.getChartType()){case "column":case "hierarchycolumn":case "waterfallcolumn":case "hierarchywaterfallcolumn":case "stackedcolumn":case "hundredpercentstackedcolumn":case "hierarchystackedcolumn":case "hierarchy100pctstackedcolumn":d=
this.isComposite?new $MA.BI.BarChartView(this.id,a):new $MA.BI.SimpleBarChartView(this.id,a);break;case "bar":case "waterfallbar":d=this.isComposite?new $MA.BI.HBarChartView(this.id,a):new $MA.BI.SimpleHBarChartView(this.id,a);break;case "line":case "hierarchyline":d=this.isComposite?new $MA.BI.LineChartView(this.id,a):new $MA.BI.SimpleLineChartView(this.id,a);break;case "bubble":d=this.isComposite?new $MA.BI.BubbleChartView(this.id,a):new $MA.BI.SimpleBubbleChartView(this.id,a);break;case "pie":d=
this.isComposite?new $MA.BI.PieChartView(this.id,a):new $MA.BI.SimplePieChartView(this.id,a);break;default:$MA.log.error($MA.getLocalisation(null,"Error_NoGraphType","Unsupported graph type"))}if(d)this.chartView=d,d.getGraphView().initialize(a.dvObj)};$MA.Chart.prototype.switchToFullView=function(a){var b=this.chartView.chartObj;this.isComposite=a;this.initialize(b)};$MA.Chart.prototype.isFullView=function(){return this.isComposite};
$MA.Chart.prototype.isToolBarVisible=function(){var a=!1;this.chartView&&this.isComposite&&this.chartView.toolBarElem&&(a=this.chartView.toolBarElem.style.display=="");return a};$MA.Chart.prototype.showToolBar=function(a){this.chartView&&this.isComposite&&this.isToolBarVisible()!=a&&this.chartView.showToolBar(a)};$MA.Chart.prototype.isValueBubbleVisible=function(){var a=!1;this.chartView&&this.isComposite&&(a=this.chartView.isValueBubbleVisible());return a};
$MA.Chart.prototype.showValueBubble=function(a){this.chartView&&this.isComposite&&this.isValueBubbleVisible()!=a&&this.chartView.showValueBubble(a)};$MA.Chart.prototype.setValueBubbleStyle=function(a){var b=!1;this.chartView&&this.isComposite&&(b=this.chartView.setValueBubbleStyle(a))&&this.refresh();return b};$MA.Chart.prototype.getValueBubbleStyle=function(){if(this.chartView&&this.isComposite)return this.chartView.getValueBubbleStyle();return null};
$MA.Chart.prototype.isTableViewVisible=function(){var a=!1;this.chartView&&this.isComposite&&this.chartView.tableViewElem&&(a=this.chartView.tableViewElem.offsetHeight!=0);return a};$MA.Chart.prototype.showTableView=function(a){this.chartView&&this.isComposite&&this.isTableViewVisible()!=a&&this.chartView.showTableView(a)};
$MA.Chart.prototype.isRangeSelectorViewVisible=function(){var a=!1;this.chartView&&this.isComposite&&this.chartView.rangeSelectorViewElem&&(a=this.chartView.rangeSelectorViewElem.offsetHeight!=0);return a};$MA.Chart.prototype.showRangeSelectorView=function(a){this.chartView&&this.isComposite&&this.isRangeSelectorViewVisible()!=a&&this.chartView.showRangeSelectorView(a)};
$MA.Chart.prototype.isWhatIfViewVisible=function(){var a=!1;this.chartView&&this.isComposite&&this.chartView.whatIfViewElem&&(a=this.chartView.whatIfViewElem.offsetHeight!=0);return a};$MA.Chart.prototype.showWhatIfView=function(a){this.chartView&&this.isComposite&&this.isWhatIfViewVisible()!=a&&this.chartView.showWhatIfView(a)};
$MA.Chart.prototype.isDynamicAnalysisViewVisible=function(){var a=!1;this.chartView&&this.isComposite&&this.chartView.dynamicAnalysisViewElem&&(a=this.chartView.dynamicAnalysisViewElem.offsetHeight>0);return a};$MA.Chart.prototype.showDynamicAnalysisView=function(a){this.chartView&&this.isComposite&&this.isDynamicAnalysisViewVisible()!=a&&this.chartView.showDynamicAnalysisView(a)};$MA.Chart.prototype.getZoomingLevel=function(){if(this.chartView)return this.chartView.getZoomingLevel()};
$MA.Chart.prototype.setZoomingLevel=function(a){this.chartView&&this.chartView.setZoomingLevel(a)};$MA.Chart.prototype.getNumberOfZoomingLevels=function(){if(this.chartView&&this.chartView.chartObj)return this.chartView.chartObj.zoomingLevels.length};$MA.Chart.prototype.setLegend=function(a){this.chartView&&this.chartView.setLegend(a)};$MA.Chart.prototype.setLegendOffset=function(a,b){this.chartView&&this.chartView.setLegendOffset(a,b)};
$MA.Chart.prototype.setDataPointsColor=function(a,b){this.chartView&&this.chartView.setDataPointsColor(a,b)};$MA.Chart.prototype.setCategorySortOrder=function(a){$MA.log.warning("This method is obsolete, it has been replaced by category.sortorder property");var b;if(a)switch(a){case "ascending":b="a";break;case "descending":b="d";break;case "partial":b="p";break;case "none":b="n"}if(b!=void 0)this.categorySortOrder=b};
$MA.Chart.prototype.refresh=function(a){if(a)this.refreshCount=0,this.chartView&&this.chartView.refresh(),$MA.Graph.Share&&$MA.Graph.Share.refresh();else{this.refreshCount++;var b=this,c=setTimeout(function(){clearTimeout(c);if(b.refreshCount>0)b.refreshCount=0,b.chartView&&b.chartView.refresh(),$MA.Graph.Share&&$MA.Graph.Share.refresh();b=null},50)}};$MA.Chart.prototype.applyCSS=function(){this.chartView&&this.chartView.applyCSS()};
$MA.Chart.prototype.setDataTable=function(a,b){this.chartView&&this.chartView.setDataTable(a,b)};$MA.Chart.prototype.reset=function(){if(this.chartView&&this.chartView.reset)this.chartView.reset(),this.chartView=void 0;var a=document.getElementById(this.id);if(a&&a.hasChildNodes())for(;a.childNodes.length>=1;)a.removeChild(a.firstChild)};
$MA.Chart.prototype.getProperty=function(a){if(this.chartView&&a){var b=a.toLowerCase(),c=b.substr(0,b.indexOf("."));c=="primaryaxis"&&(b=a.substr(c.length+1,a.length-c.length));if(c=="secondaryaxis")return this.chartView.getSecondaryAxisProperties(b);return this.chartView.getProperty(b)}};
$MA.Chart.prototype.setProperty=function(a,b,c){if(this.chartView&&a){var d=a.toLowerCase(),e=d.substr(0,d.indexOf("."));e=="primaryaxis"&&(d=a.substr(e.length+1,a.length-e.length));if(e=="secondaryaxis")this.chartView.setSecondaryAxisProperties(d,b);else if(this.chartView.setProperty(d,b))if(d.indexOf("charttype")>=0||d.indexOf("piestyle")>=0)c||this.initialize(this.chartView.chartObj);else if(d=="showtotal"||d=="parentastotal")this.chartView.applyWaterfallStyle(),this.chartView.refresh()}};
$MA.Chart.prototype.getSelectedCategory=function(){if(this.chartView)return this.chartView.getSelectedCategory()};$MA.Chart.prototype.getSelectedCategoryGroup=function(){if(this.chartView)return this.chartView.getSelectedCategoryGroup()};$MA.Chart.prototype.getSelectedCategoryIndex=function(){if(this.chartView)return this.chartView.getSelectedCategoryIndexRel()};$MA.Chart.prototype.getSelectedSeries=function(a){if(this.chartView)return this.chartView.getSelectedSeries(a)};
$MA.Chart.prototype.getNumberOfCategories=function(){if(this.chartView)return this.chartView.getCategoryCount()};$MA.Chart.prototype.getNumberOfVisibleCategories=function(){if(this.chartView)return this.chartView.getNumberOfVisibleCategories()};$MA.Chart.prototype.setNumberOfVisibleCategories=function(a){if(a>0)this.numberOfVisibleCategory=a,this.chartView&&this.chartView.setNumberOfVisibleCategories(this.numberOfVisibleCategory)};$MA.Chart.prototype.retrieve=function(a){this.chartView&&this.chartView.retrieve(a)};
$MA.Chart.prototype.bind=function(a,b){if(this.events==void 0)this.events=new $MA.Hash;this.events.set(a,b)};$MA.Chart.prototype.unbind=function(a){this.events&&this.events.remove(a)};$MA.Chart.prototype.trigger=function(a,b,c){this.events&&(a=this.events.get(a))&&a(b,c)};$MA.Chart.prototype.copyGraphTo=function(a){var b=this.chartView.getGraphElem();if(a.width==0)a.width=b.width,a.height=b.height;a.getContext("2d").drawImage(b,0,0,a.width,a.height)};
$MA.Chart.prototype.setPalette=function(a,b){this.chartView&&this.chartView.setPalette(a,b)};$MA.Chart.getStyles=function(){$MA.Graph.getStyles()};$MA.Chart.PieChartCategoryTextMaxLength=-1;
$MA.Chart.setPieChartCategoryTextMaxLength=function(a){var b=parseInt(a,10);isNaN(b)?$MA.log.error($MA.getLocalisation(null,"Error_DataParsing",a+" is not a number")):b>=0&&b<4?$MA.log.error("setPieChartCategoryTextMaxLength : "+$MA.getLocalisation(null,"Msg_UnderMin","The selected Value %1 is below minimum value %2.").replace("%1",b).replace("%2",4)):$MA.Chart.PieChartCategoryTextMaxLength=b};$MA.Chart.prototype.getCanvas=function(){return this.chartView.getGraph().getCanvas()};
$MA.Chart.prototype.getDrawArea=function(){return this.chartView.getGraph().getDrawArea()};$MA.Chart.prototype.getCategoryObject=function(a){return this.chartView.getGraph().getCategoryNodes(a)};$MA.Chart.prototype.getValueLoc=function(a){return this.chartView.getGraph().getValueLoc(a)};$MA.Chart.prototype.preventDefaultRendering=function(a){this.chartView&&this.chartView.getGraph().preventDefaultRendering(a)};$MA.Chart.prototype.getDrawingContentType=function(){return this.chartView.getGraph().getDrawingContentType()};
$MA.Chart.prototype.setSelectedCategoryIndex=function(a){this.chartView.setSelectedCategoryIndex(a,!0)};$MA.Chart.prototype.showTableValue=function(a){this.chartView&&this.chartView.showTableValue&&this.chartView.showTableValue(a)};$MA.Chart.prototype.setMonoColor=function(a){this.chartView&&this.chartView.setMonoColor(a)};$MA.Chart.prototype.getSelectedBubbleInfo=function(){if(this.chartView)return this.chartView.getSelectedBubbleInfo()};$MA.Chart.prototype.setShowDotsWidth=function(a){if(this.chartView)return this.chartView.setShowDotsWidth(a)};
$MA.Chart.prototype.setHorizontalBarHeight=function(a){if(this.chartView)return this.chartView.setHorizontalBarHeight(a)};$MA.Chart.prototype.setBubbleBorderColor=function(a){if(this.chartView)return this.chartView.setBubbleBorderColor(a)};$MA.Chart.prototype.setBubbleMinSize=function(a){if(this.chartView)return this.chartView.setBubbleMinSize(a)};$MA.Chart.prototype.setMonoSymbol=function(a){if(this.chartView)return this.chartView.setMonoSymbol(a)};$MA.Chart.prototype.setSymbolPalette=function(a){if(this.chartView)return this.chartView.setSymbolPalette(a)};
$MA.Chart.prototype.collapse=function(a){this.chartView.getGraph().collapse(a);this.refresh(!1)};$MA.Chart.prototype.expand=function(a){this.chartView.getGraph().expand(a);this.refresh(!1)};$MA.Chart.prototype.isRootLevel=function(){return this.chartView.getGraph().isRootLevel()};$MA.Chart.prototype.isLeafLevel=function(){return this.chartView.getGraph().isLeafLevel()};
$MA.Chart.prototype.updateWIView=function(a){if(this.chartView&&!this.chartView.chartObj.whatIfColumns.builtin)if(a.hasOwnProperty("name")&&a.hasOwnProperty("value"))this.chartView.onWhatIfChange(a.__seriesid__,a.__whatifid__,a.name,a.value);else $MA.log.error("The input control element does not have Name or Value attribute!")};$MA.Chart.prototype.setGraphLineWidth=function(a,b){this.chartView.getGraph().setGraphLineWidth(a,b)};$MA.Chart.prototype.setMaxPies=function(a){this.chartView.getGraph().setMaxPies(a)};
$MA.Chart.prototype.setTotalFormat=function(a){this.chartView.getGraph().setTotalFormat(a)};$MA.Chart.prototype.setBarChartTableWidth=function(a){this.chartView.getGraph().setBarChartTableWidth(a);this.chartView.refresh()};$MA.DrillDownGroup=function(a){this.id=a;this.level=0;this.events=this.filterValues=this.chartElems=void 0;var b=document.getElementById(a);b?((a=b.macontrol)&&a.reset(),b.macontrol=this):$MA.log.error(a+$MA.getLocalisation(null,"Error_InvalidID"," is an invalid id"))};
$MA.DrillDownGroup.getDrillDownGroup=function(a){return a.macontrol};$MA.DrillDownGroup.prototype.load=function(a){var b=$MA.createXHR();b!=void 0&&(b.open("GET",$MA.getMetadataUrl(a),!1),b.send(null),b.status==200||b.status==304||b.status==0?this.create(b.responseText):$MA.log.error($MA.getLocalisation(null,"Error_Load","Failed to load ")+a))};
$MA.DrillDownGroup.prototype.create=function(a){var b=new $MA.BI.DrillDownObject(this);(typeof a=="object"?new $MA.DataView.JsonMetaDataReader:new $MA.DataView.XmlMetaDataReader).parse(b,a);this.drillDownObj=b;this.reset();this.createChart(document.getElementById(this.id),b.chartObjs[0]);this.trigger("initialized",this.id)};$MA.DrillDownGroup.prototype.refresh=function(a){var b=document.getElementById(this.id),c=this.chartElems[this.level];c.style.height=b.offsetHeight+"px";$MA.BI.SimpleChartView.getChart(c).refresh(a)};
$MA.DrillDownGroup.prototype.showToolBar=function(a){$MA.BI.SimpleChartView.getChart(this.chartElems[this.level]).showToolBar(a)};
$MA.DrillDownGroup.prototype.drillDown=function(a,b){if(this.level+1==this.drillDownObj.chartObjs.length)return!1;if(typeof a=="object")this.updateChart(a,b);else{var c=$MA.BI.SimpleChartView.getChart(this.chartElems[this.level]);c.chartView.initializeTableView();var d=c.chartView.getTableView().dvObj,e=0;if(c.chartView.chartObj.zoomingLevels.length>0)e=this.chartObj.level;c=[];for(d=d.getRow(a);e>=0;e--)c.push(d[e]);this.updateChart(c,b)}return!0};
$MA.DrillDownGroup.prototype.drillBack=function(){var a=!1;this.level>0&&(a=this.drillUp(this.level-1));return a};$MA.DrillDownGroup.prototype.getCurrentChart=function(){return $MA.BI.SimpleChartView.getChart(this.chartElems[this.level])};$MA.DrillDownGroup.prototype.bind=function(a,b){if(this.events==void 0)this.events=new $MA.Hash;this.events.set(a,b)};$MA.DrillDownGroup.prototype.unbind=function(a){this.events&&this.events.remove(a)};
$MA.DrillDownGroup.prototype.trigger=function(a,b,c){this.events&&(a=this.events.get(a))&&a(b,c)};$MA.DrillDownGroup.prototype.reset=function(){this.level=0;this.chartElems=[];this.filterValues=[];var a=document.getElementById(this.id);if(a&&a.hasChildNodes())for(;a.childNodes.length>=1;)a.removeChild(a.firstChild)};
$MA.DrillDownGroup.prototype.createChart=function(a,b){var c=document.createElement("div");c.id=this.id+"_chart";c.className="chart";c.style.width="100%";c.style.height=a.offsetHeight+"px";a.appendChild(c);var d=$MA.DrillDownGroup.getDrillDownGroup(a);d.chartElems[d.level]=c;c=new $MA.Chart(c.id,!0);b._parent=c;c.ondrilldown=this.onDrillDown;c.ondrillup=this.onDrillUp;c.initialize(b);this.setTitle(b)};
$MA.DrillDownGroup.prototype.onDrillDown=function(a,b){var c=document.getElementById(this.id).parentNode,c=$MA.DrillDownGroup.getDrillDownGroup(c);c.events&&c.events.get("drilldown")?c.trigger("drilldown",{categoryValues:a,seriesName:b}):c.updateChart(a,b)};$MA.DrillDownGroup.prototype.getItemValues=function(){var a=[],b,c;for(b=0;b<this.filterValues.length;b++)c=this.filterValues[b],a.push($MA.format(c.itemValues[0]));return a};
$MA.DrillDownGroup.prototype.updateChart=function(a,b){if(this.level+1!=this.drillDownObj.chartObjs.length){var c=this.drillDownObj,d=this.chartElems[this.level],e=$MA.BI.SimpleChartView.getChart(d),f=e.isToolBarVisible(),g=e.isTableViewVisible(),h=d.offsetHeight,j=document.getElementById(this.id);j.removeChild(j.children[this.id+"_chart"]);this.level++;this.filterValues[this.level-1]={itemValues:a,seriesName:b};if(this.chartElems.length>this.level){if(d=this.chartElems[this.level],e=$MA.BI.SimpleChartView.getChart(d),
c=e.chartView.chartObj,c.filterValues=this.filterValues,this.setTitle(c),j.appendChild(d),c.zoomingLevels.length==0?e.chartView.retrieve(c.getQuery()):(c.level=0,e.chartView.retrieve(c.zoomingLevels[0].query)),e.chartView.updateToolbarBreadcrumbs(this.getItemValues()),e.showToolBar(f),e.showTableView(g),d.offsetHeight!=h)d.style.height=h+"px",e.refresh()}else c=c.chartObjs[this.level],c.filterValues=this.filterValues,this.createChart(j,c),d=this.chartElems[this.level],e=$MA.BI.SimpleChartView.getChart(d),
e.chartView.updateToolbarBreadcrumbs(this.getItemValues()),e.showToolBar(f),e.showTableView(g);e.chartView.isDrillLevelChanged=!0}};$MA.DrillDownGroup.prototype.onDrillBack=function(){var a=document.getElementById(this.id).parentNode;$MA.DrillDownGroup.getDrillDownGroup(a).drillBack()};$MA.DrillDownGroup.prototype.onDrillUp=function(a){var b=document.getElementById(this.id).parentNode,b=$MA.DrillDownGroup.getDrillDownGroup(b);a==-1?b.drillBack():b.drillUp(a)};
$MA.DrillDownGroup.prototype.setTitle=function(a){this.trigger("titlechanged",this.id,a._parent.chartView.getGraphGob().title)};
$MA.DrillDownGroup.prototype.drillUp=function(a){if(a==void 0||a==null||isNaN(a)||a<0||a>=this.level)return!1;var b=document.getElementById(this.id),c=this.chartElems[this.level],d=$MA.BI.SimpleChartView.getChart(c),e=d.isToolBarVisible(),f=d.isTableViewVisible(),g=c.offsetHeight;b.removeChild(b.children[this.id+"_chart"]);this.level=a;b.appendChild(this.chartElems[this.level]);for(b=this.filterValues.length-1;b>a;b--)this.filterValues.pop();this.setTitle(this.drillDownObj.chartObjs[this.level]);
c=this.chartElems[this.level];d=$MA.BI.SimpleChartView.getChart(c);d.showToolBar(e);d.showTableView(f);if(d.chartView&&(d.chartView.isDrillLevelChanged=!0,c.offsetHeight!=g))c.style.height=g+"px",d.refresh();return!0};$MA.DrillDownGroup.prototype.getCurrentLevel=function(){return this.level};$MA.DA={};$MA.DA.createVariables=function(a){var b=new $MA.BI.DA.Variables;(typeof a=="object"?new $MA.DataView.JsonMetaDataReader:new $MA.DataView.XmlMetaDataReader).parse(b,a);$MA.BI.DAVariables=b};
$MA.DA.load=function(a){var b=$MA.createXHR();b!=void 0&&(b.open("GET",a,!1),b.send(null),b.status==200||b.status==304||b.status==0?$MA.DA.createVariables(b.responseText):$MA.log.error($MA.getLocalisation(null,"Error_Load","Failed to load ")+a))};$MA.DA.getValue=function(a){if(a=$MA.BI.GetDAVariable(a))return a.getValue()};
$MA.DA.setValue=function(a,b){var c=$MA.BI.GetDAVariable(a);if(c)if(c.variableType.toLowerCase()=="enum"){var d,e=c.choices.items.length;for(d=0;d<e;d++)if(c.choices.items[d].value==b){c.selection=d;break}}else c.setProperty("value",b.toString())};
$MA.BI.ChartView.prototype.createDynamicAnalysisView=function(a){var b=document.createElement("div");b.id=this.id+"_dynamicanalysis";b.style.position="relative";b.style.width="100%";b.style.height="0px";b.style.overflowX="auto";b.style.overflowY="auto";b.className="chart_dynamicanalysis_view";a.appendChild(b);this.dynamicAnalysisViewElem=b};
$MA.BI.ChartView.prototype.showDynamicAnalysisView=function(a){if(this.showDynamicAnalysisFlag=a)this.showWhatIfFlag=!1;this.refreshViews();this.isZoomingLevelChanged?this.refreshValueBubbleView(!0):this.orientation==window.orientation?this.refreshValueBubbleView(!1):(this.refreshValueBubbleView(!0),this.orientation=window.orientation)};
$MA.BI.ChartView.prototype.hasDAVariables=function(a,b){var c=!1;if($MA.BI.DAVariables==void 0)return c;if(b){var d=b.length,e,f;for(e=0;e<d;e++)if(f=b[e],f instanceof $MA.Expression.VariableNode){if(f.variableindex!=void 0){c=!0;break}}else if(f.args&&(c=this.hasDAVariables(f,f.args)))break}else a instanceof $MA.Expression.VariableNode&&a.variableindex!=void 0&&(c=!0);return c};
$MA.BI.ChartView.prototype.searchDAVariables=function(a){if(a&&$MA.BI.DAVariables){var b=a.length,c,d;for(c=0;c<b;c++)d=a[c],d instanceof $MA.Expression.VariableNode?d.variableindex!=void 0&&this.initializeDAVariableControl(d):d&&d.args&&this.searchDAVariables(d.args)}};
$MA.BI.ChartView.prototype.initializeDAVariableControl=function(a){if(window.jQuery){$=jQuery.noConflict();var b=this.dynamicAnalysisViewElem.id+"_"+a.name.replace("$","_DA_");if($("#"+b)[0]==void 0){var c=document.getElementById(this.dynamicAnalysisViewElem.id+"__table"),d=document.createElement("tr");c.appendChild(d);var c=$MA.BI.DAVariables.items[a.variableindex],e=document.createElement("td"),f="";switch(c.variableType.toLowerCase()){case "double":case "float":f+='<div data-role="fieldcontain">';
f+='<input id="'+b+'"  digitpicker="true" Type="float" readonly Min="'+c.min.toString()+'" Max="'+c.max.toString()+'" Decimal="'+c.decimals.toString()+'" Description="'+c.displayName+'" value="'+c.value.toString()+'" />';f+="</div>";break;case "integer":f+='<div data-role="fieldcontain" id="'+b+'_MA_slider_fieldcontain">';f+='<label id="'+b+'_value" class="ui-input-text ui-slider" for="'+b+'">'+c.displayName+"</label>";f+='<input type="text" data-type="range"  name="'+b+'" id="'+b+'" class="ui-slider-input ui-input-text ui-body-b ui-corner-all ui-shadow-inset"  value="'+
c.value.toString()+'" min="'+c.min.toString()+'" max="'+c.max.toString()+'" />';f+="</div>";break;case "boolean":f+='<div data-role="fieldcontain">';f+='<label for="'+b+'">'+c.displayName+"</label>";f+='<select name="'+b+'" id="'+b+'" data-role="slider">';f+='<option value="0">'+$MA.getLocalisation(null,"False","False")+"</option>";f+='<option value="1">'+$MA.getLocalisation(null,"True","True")+"</option>";f+="</select></div>";break;case "date":f+='<div data-role="fieldcontain">';f+='<label class="ui-datepicker-date-label ui-slider" for="'+
b+'">'+c.displayName+"</label>";f+='<input type="text" name="'+b+'" id="'+b+'"  value=""  readonly />';f+="</div>";break;case "enum":f+='<div data-role="fieldcontain">';f+='<label for="'+b+'" class="select">'+c.displayName+"</label>";f+='<select name="'+b+'" id="'+b+'" data-native-menu="false" data-inline="true">';if(c.choices!=void 0){var g,h=c.choices.items.length;for(g=0;g<h;g++){if(c.choices.items[g].name==name)return $MA.BI.DAVariables.items[g];f+='<option value="'+c.choices.items[g].value+'">'+
c.choices.items[g].display+"</option>"}}f+="</select></div>"}e.innerHTML=f;d.appendChild(e);document.getElementById(b).__davariablename__=a.name;document.getElementById(b).__davariableindex__=a.variableindex;document.getElementById(b).setAttribute("ignored","true");var j=this;switch(c.variableType.toLowerCase()){case "double":case "float":$MAControl.DigitPickerControl.init();$("#"+b).bind("onValueChange",function(a,b){$MA.BI.DAVariables.items[this.__davariableindex__].value=b.toString();j.refreshAction=
"resetTable";$(window).trigger("dachanged",[this.__davariablename__,b])});break;case "integer":$("#"+b).slider();var l=document.getElementById(b),n=function(){if(l.__curvalue__!=l.value)l.__curvalue__=l.value,$MA.BI.DAVariables.items[l.__davariableindex__].value=l.value.toString(),j.refreshAction="resetTable",$(window).trigger("dachanged",[l.__davariablename__,l.value])};$("#"+b).parent().bind("mouseup",function(){document.activeElement!=l&&n()});$("#"+b).parent().bind("touchend",function(){document.activeElement!=
l&&n()});$(document).bind("vmouseup",function(){document.activeElement!=l&&n()});$("#"+b).bind("change",function(a){a.srcElement==a.target&&n()});break;case "boolean":$("#"+b)[0].selectedIndex=c.getValue()?1:0;$("#"+b).slider();$("#"+b).bind("change",function(){$MA.BI.DAVariables.items[this.__davariableindex__].value=this.value.toString();j.refreshAction="resetTable";setTimeout(function(){$(window).trigger("dachanged",[this.__davariablename__,this.value])},200)});break;case "date":a=$MA.BI.DAVariables.items[a.variableindex].value.match(RegExp(/(\d{4})-(\d{2})-(\d{2})/));
$("#"+b)[0].value=a[2]+"/"+a[3]+"/"+a[1];$("#"+b).datepicker();$("#"+b).bind("change",function(){var a=this.value.match(RegExp(/(\d{2})\/(\d{2})\/(\d{4})/));$MA.BI.DAVariables.items[this.__davariableindex__].value=a[3]+"-"+a[1]+"-"+a[2];j.refreshAction="resetTable";$(window).trigger("dachanged",[this.__davariablename__,this.value])});break;case "enum":$("#"+b)[0].selectedIndex=c.selection==void 0?0:parseInt(c.selection,10),$("#"+b).selectmenu(),$("#"+b).bind("change",function(){$MA.BI.DAVariables.items[this.__davariableindex__].value=
this.value.toString();$MA.BI.DAVariables.items[this.__davariableindex__].selection=this.selectedIndex;j.refreshAction="resetTable";$(window).trigger("dachanged",[this.__davariablename__,this.value])})}}}};
$MA.BI.ChartView.prototype.initializeDynamicAnalysisView=function(){if(this.dynamicAnalysisViewElem!=void 0){var a=document.createElement("table");a.id=this.dynamicAnalysisViewElem.id+"__table";a.style.marginLeft="5%";a.style.width="95%";this.dynamicAnalysisViewElem.appendChild(a);a=this.getGraphGob().getValueExpr(0);if(a!=void 0){var b=a.getArgs();b!=void 0?this.searchDAVariables(b):a instanceof $MA.Expression.VariableNode&&a.variableindex!=void 0&&this.initializeDAVariableControl(a);$MA.platform.blackberry&&
window.jQuery!==void 0&&$('a[role="slider"]').css({"box-shadow":"none"});this.dynamicAnalysisViewElem.addEventListener("touchstart",function(){window.iScroller&&(iScroller.disableEventHandlers?iScroller.disableEventHandlers():$MA.disableiScrollEventHandlers(iScroller));window.iScroll&&$('div[data-role="content"]').scrollview&&$('div[data-role="content"]').scrollview("disable")},!1);this.dynamicAnalysisViewElem.addEventListener("touchend",function(){window.iScroller&&(iScroller.enableEventHandlers?
iScroller.enableEventHandlers():$MA.enableiScrollEventHandlers(iScroller));window.iScroll&&$('div[data-role="content"]').scrollview&&$('div[data-role="content"]').scrollview("enable")},!1)}}};$MA.BI.ChartView.prototype.createWhatIfView=function(a){var b=document.createElement("div");b.id=this.id+"_whatif";b.style.position="relative";b.style.width="100%";b.style.height="0px";b.style.overflowX="auto";b.style.overflowY="auto";b.className="chart_whatif_view";a.appendChild(b);this.whatIfViewElem=b};
$MA.BI.ChartView.prototype.showWhatIfView=function(a){if(this.showWhatIfFlag=a)this.initializeWhatIfView(),this.showDynamicAnalysisFlag=!1;this.refreshViews();this.isZoomingLevelChanged?this.refreshValueBubbleView(!0):this.orientation==window.orientation?this.refreshValueBubbleView(!1):(this.refreshValueBubbleView(!0),this.orientation=window.orientation);this.updateWhatIfVariableControls()};$MA.BI.ChartView.prototype.onWhatIfEnd=function(){this.refreshRangeSelectorView()};
$MA.BI.ChartView.prototype.onWhatIfChange=function(a,b,c,d){d==""&&(d="0");var c=this.getGraphView().dvObj,e=this.valueBubbleViewElem.slider;if(!(e.value<0)){var f=this.getGraph(),g=this.getGraphGob(),h=f.getCategoryValue(e.value);this.whatIfViewElem._seriesnumber==1?h=g.getCategoryColumn()+"=='"+h+"'":(h="and ("+g.getCategoryColumn()+"=='"+h+"', ",h+=g.getSeriesColumn()+"=='"+f.getSeriesName(a)+"')");a=c.find(h);if(c.getItem(a,b)!=d&&(c.setItem(a,b,d),!this.wfTimeoutId)){var j=this;this.wfTimeoutId=
setTimeout(function(){j.refreshGraphView();e.text=f.getDataString(e.value,g.getValueFormat(0));var a=f.getSeriesList(),b=e.text.split("\n");e.reset&&e.reset();if(e.categoryText){e.categoryText=f.getCategoryString(e.value);var c;for(c=0;c<a.length;++c){var d=a[c],h=f.getSeriesString(d.name);e.addLegend(d,h,b[c],f.getSeriesFillBrush(c).toString(),d.isEnabled())}}j.setValueBubblePoints(e,a);e.plot();j.resetTable();j.wfTimeoutId=void 0},$MA.BI.ChartView.touchTimeSlot)}}};
$MA.BI.ChartView.prototype.searchWhatIfVariables=function(a){if(a&&this.chartObj.whatIfColumns){var b=a.length,c,d,e,f;for(e=0;e<b;e++)if(c=a[e],c instanceof $MA.Expression.VariableNode){var g=!1,h=this.chartObj.whatIfColumns.columns;for(f=0;f<h.length;f++)if(h[f].name==c.name){g=!0;d=h[f];break}g&&this.initializeWhatIfVariableControl(c,d)}else c.args&&this.searchWhatIfVariables(c.args)}};
$MA.BI.ChartView.prototype.initializeWhatIfVariableControl=function(a,b){function c(a,b){f.onWhatIfChange(this.__seriesid__,this.__whatifid__,this.__whatifname__,b);f.onWhatIfEnd()}function d(){f.onWhatIfChange(this.__seriesid__,this.__whatifid__,this.__whatifname__,this.value)}function e(){f.onWhatIfEnd()}if(window.jQuery){$=jQuery.noConflict();var f=this,g=a.dvObj.getTableColumns()[a.id],h=this.whatIfViewElem.id+"__series0__table_"+g.name;if($("#"+h)[0]==void 0){this.whatIfViewElem._whatifnames.push(g.name);
var j,l;for(j=0;j<this.whatIfViewElem._seriesnumber;j++){var h=document.getElementById(this.whatIfViewElem.id+"__series"+j+"__table"),n=document.createElement("tr");h.appendChild(n);h=h.id+"_"+g.name;l=document.createElement("td");var k=-1E5,m=1E5,o=0,p=2,q="";switch(b.variableType.toLowerCase()){case "float":k=parseFloat(b.min.toString());m=parseFloat(b.max.toString());o=b.value==void 0?(k+m)/2:parseFloat(b.value.toString());p=parseInt(b.decimals.toString(),10);parseFloat(b.step.toString());q+='<div data-role="fieldcontain">';
q+='<input id="'+h+'"  digitpicker="true" Type="float" readonly Min="'+k.toString()+'" Max="'+m.toString()+'" Decimal="'+p.toString()+'" Description="'+b.displayName+'" value="'+o.toString()+'" />';q+="</div>";break;case "integer":k=parseInt(b.min.toString(),10);m=parseInt(b.max.toString(),10);o=b.value==void 0?Math.floor((k+m)/2):parseInt(b.value.toString(),10);q+='<div class="ui-field-contain ui-body ui-br" data-role="fieldcontain" id="'+h+'_MA_slider_fieldcontain">';q+='<label id="'+h+'_value" class="ui-input-text ui-slider" for="'+
h+'">'+b.displayName+"</label>";q+='<input type="number" data-type="range" name="'+h+'" id="'+h+'"  data-theme="b" class="ui-slider-input ui-input-text ui-body-b ui-corner-all ui-shadow-inset" value="'+o.toString()+'" min="'+k.toString()+'" max="'+m.toString()+'"  />';q+="</div>";break;default:return}l.innerHTML=q;n.appendChild(l);document.getElementById(h).__whatifname__=g.name;document.getElementById(h).__whatifid__=g.id;document.getElementById(h).__seriesid__=j;document.getElementById(h).__chartview__=
this;document.getElementById(h).__whatifvariabletype__=b.variableType;document.getElementById(h).setAttribute("ignored","true");switch(b.variableType.toLowerCase()){case "float":$MAControl.DigitPickerControl.init();$("#"+h).bind("onValueChange",c);break;case "integer":$("#"+h).slider(),$("#"+h).bind("change",d),$("#"+h).bind("blur",e),$MA.isTouchEventSupported?$("#"+h+"_MA_slider_fieldcontain").bind("touchend",e):$("#"+h+"_MA_slider_fieldcontain").bind("mouseup",e)}}}}};
$MA.BI.ChartView.prototype.initializeWhatIfView=function(){if(this.whatIfViewElem!=void 0&&!this.whatIfViewElem.hasChildNodes()){var a=this.getGraphGob().getValueExpr(0);if(a!=void 0){var b=this.getGraph(),c=b.getSeriesCount();if(c!=0){var d=document.createElement("table");d.id=this.whatIfViewElem.id+"__table";d.style.marginLeft="5%";d.style.width="95%";this.whatIfViewElem.appendChild(d);this.whatIfViewElem._whatifnames=[];this.whatIfViewElem._seriesnumber=c;var d=document.getElementById(this.whatIfViewElem.id+
"__table"),b=b.getSeriesList(),e;for(e=0;e<this.whatIfViewElem._seriesnumber;e++){var f;e%2==0?(f=document.createElement("tr"),f.id=this.whatIfViewElem.id+"_table_row"+e/2,d.appendChild(f)):f=document.getElementById(this.whatIfViewElem.id+"_table_row"+(e-1)/2);var g=document.createElement("td");g.style.width=this.whatIfViewElem._seriesnumber>1?"50%":"100%";var h="";c>1&&(h+=b[e].name+"</br>");h+='<table id="'+this.whatIfViewElem.id+"__series"+e+'__table" width="100%"/>';g.innerHTML=h;f.appendChild(g)}if((c=
a.getArgs())&&this.chartObj.whatIfColumns)this.searchWhatIfVariables(c);else if(a instanceof $MA.Expression.ColumnNode&&this.chartObj.whatIfColumns){for(var c=!1,d=this.chartObj.whatIfColumns.columns,j,b=0;b<d.length;b++)if(d[b].name==a.dvObj.getTableColumns()[a.id].name){c=!0;j=d[b];break}c&&this.initializeWhatIfVariableControl(a,j)}$MA.platform.blackberry&&window.jQuery!==void 0&&$('a[role="slider"]').css({"box-shadow":"none"});this.whatIfViewElem.addEventListener("touchstart",function(){window.iScroller&&
(iScroller.disableEventHandlers?iScroller.disableEventHandlers():$MA.disableiScrollEventHandlers(iScroller));window.iScroll&&$('div[data-role="content"]').scrollview&&$('div[data-role="content"]').scrollview("disable")},!1);this.whatIfViewElem.addEventListener("touchend",function(){window.iScroller&&(iScroller.enableEventHandlers?iScroller.enableEventHandlers():$MA.enableiScrollEventHandlers(iScroller));window.iScroll&&$('div[data-role="content"]').scrollview&&$('div[data-role="content"]').scrollview("enable")},
!1)}}}};
$MA.BI.ChartView.prototype.initializeWIView=function(){var a=document.getElementById(this.getChart().id+"_wi_view");a._seriesnumber=this.getGraph().getSeriesCount();a._whatifnames=[];var b=this.chartObj.whatIfColumns.columns,c;for(c=0;c<b.length;c++){a._whatifnames[c]=b[c].name;var d=this.chartObj.dvObj.getTableColumns(),e,f;for(f=0;f<d.length;f++)if(d[f].name===b[c].name){e=d[f].id;break}d=a.querySelectorAll('td>input[type="number"][name^="'+b[c].name.toLowerCase()+'"]');for(f=0;f<d.length;f++){var g=parseInt(d[f].name.match(/\d+/),
10);if(g<a._seriesnumber){d[f].id=a.id+"__series"+g+"__table_"+b[c].name;d[f].__whatifvariabletype__=b[c].variableType;d[f].__seriesid__=g;d[f].__whatifid__=e;for(var h=d[f].nextSibling;h&&h.nodeType!=1;)h=h.nextSibling;if(h&&h.type=="range")h.id=d[f].id+"_slider",h.__whatifvariabletype__=b[c].variableType,h.__seriesid__=g,h.__whatifid__=e}}}this.whatIfViewElem=a};if(!$MA.BI.Control)$MA.BI.Control={};if(!window.$MAControl)$MAControl=$MA.BI.Control;$MAControl.DigitPickerControl=function(){$MAControl.DigitPickerControl.init()};
$MAControl.DigitPickerControl.init=function(){if(!document.getElementById("MADigitPickerControl"))this.setGlobalParams(),this.pickerContainer=document.createElement("div"),this.pickerContainer.id="MADigitPickerControl",this.pickerContainer.style.zIndex="50000",this.pickerContainer.style.position="absolute",this.pickerContainer.style.display="none",document.body.appendChild(this.pickerContainer),this.CheckPlatform(),this.isMobile?(window.addEventListener("touchstart",DPC_onContainerTap2,!0),this.pickerContainer.addEventListener("touchstart",
DPC_onContainerTouchStart,!1),this.pickerContainer.addEventListener("touchend",DPC_onContainerTouchEnd,!1),this.pickerContainer.addEventListener("touchmove",DPC_onContainerTouchMove,!1),this.isAndroid&&this.BindPageEvent()):this.pickerContainer.addEventListener&&(this.pickerContainer.addEventListener("mousedown",DPC_onContainerMouseDown,!1),this.pickerContainer.addEventListener("mouseup",DPC_onContainerMouseUp,!1),this.pickerContainer.addEventListener("mousemove",DPC_onContainerMouseMove,!1),window.addEventListener("mouseup",
DPC_onContainerTap2,!1)),$MAControl.DigitPickerControl.initPopup();var a=document.getElementsByTagName("input"),b=a.length,c;for(c=0;c<b;c++){var d=a[c],e=d.getAttribute("digitpicker");e!=null&&e=="true"?d.id?this.createDescriptionAndButton(d):$MA.log.error($MA.getLocalisation(null,"Error_NoDatepickerID","Attribute 'id' is mandatory for DigitPickerControl.")):d.id&&d.id.indexOf(this.editIdPrefix)==0&&this.createDescriptionAndButton(d)}};
$MAControl.DigitPickerControl.setGlobalParams=function(){this.isAndroid=this.isMobile=this.isIOS=!1;this.scrollOffsetY=10;this.scrollItemHeight=40;this.editIdPrefix="DPC_";this.displayed=!1;this.HIDE_TIMEOUT=200;this.buttonIdPrefix="DPCBUTTON";this.scrollIdPrefix="DPC_SCROLL_";this.originalValue="";this.pickerFrameId="digitpickerframe";this.highValueMessage=$MA.getLocalisation(null,"Msg_OverMax","The selected Value %1 is beyond maximum value %2.");this.lowValueMessage=$MA.getLocalisation(null,"Msg_BelowMin",
"The selected Value %1 is below minimum value %2.");this.dragBeginY=this.offsetV=0;this.isMouseDown=this.inDrag=!1;this.ani_startTime=this.curScrollDiv=null;this.ani_startY=this.ani_targetY=this.ani_duration=0;this.drag_startTimeOffset=this.drag_lastEventTime=this.drag_originalStartTime=this.drag_startTime=null;this.drag_momentumAniFramesHandled=0;this.drag_startMomentumResetTime=350;this.fps=80;this.friction=0.7;this.theta=Math.log(1-this.friction/10)};function DPC_autoInit(){}
window.addEventListener?window.addEventListener("load",DPC_autoInit,!1):window.attachEvent&&window.attachEvent("onload",DPC_autoInit);
$MAControl.DigitPickerControl.createDescriptionAndButton=function(a){var b=this.buttonIdPrefix+a.id;if(document.getElementById(b))return!1;var c=a.getAttribute("Description"),d=null;if(c!=null&&c!="")d=document.createElement("div"),d.className="digitpicker-description",d.innerText=c;a.className="digitpicker-value";var e=document.createElement("a");e.id=b;e.href="#";e.title=c;e.setAttribute("digitpicker_inputid",a.id);e.className="digitpicker-button";e.addEventListener?e.addEventListener("click",DPC_onButtonClick,
!1):e.attachEvent&&e.attachEvent("onclick",DPC_onButtonClick);b=a.parentNode;c=document.createElement("div");c.className="digitpicker-container";var f=document.createElement("div");f.className="digitpicker-value-button";var g=null;if(a.nextSibling)g=a.nextSibling;b.removeChild(a);d!=null&&c.appendChild(d);f.appendChild(a);f.appendChild(e);c.appendChild(f);g?b.insertBefore(c,g):b.appendChild(c);return!0};
$MAControl.DigitPickerControl.show=function(){if(!this.displayed){var a=this.buttonControl;if(a!=null){var b,c;window.jQuery?($=jQuery.noConflict(),b=$(a).offset(),c=parseInt($("#MADigitPickerControl").css("width").replace("px",""),10)-a.offsetWidth,a=parseInt($("#MADigitPickerControl").css("height").replace("px",""),10)-a.offsetHeight):(b=this.getOffset(a),c=300,a=182);c=b.left>c?b.left-c:0;this.pickerContainer.style.top=(b.top>a?b.top-a:0)+"px";this.pickerContainer.style.left=c+"px";this.pickerContainer.style.display=
"block";this.displayed=!0}}};$MAControl.DigitPickerControl.getOffset=function(a){var b=a.getBoundingClientRect(),c=a.ownerDocument,a=c.documentElement,d=c.body,c=c.defaultView||c.parentWindow;return{top:b.top+(c.pageYOffset||a.scrollTop||d.scrollTop)-(a.clientTop||d.clientTop||0),left:b.left+(c.pageXOffset||a.scrollLeft||d.scrollLeft)-(a.clientLeft||d.clientLeft||0)}};
$MAControl.DigitPickerControl.hide=function(){if(this.displayed&&(this.pickerContainer.style.display="none",this.displayed=!1,this.newValue&&this.newValue!="undefined"))this.inputControl.value=this.newValue,window.jQuery&&($=jQuery.noConflict(),$(this.inputControl).trigger("onValueChange",[this.newValue]))};
$MAControl.DigitPickerControl.getAllCode=function(){var a="";a+="<div class='calframe' id='"+this.pickerFrameId+"'>";a+="<div class='x-layout-box-left'>";a+="<div class='x-layout-box-left-inner'>";a+=this.getDigitsCode();a+="</div>";a+="</div>";a+="<div class='x-layout-box-right'/>";a+="</div>";return a};
$MAControl.DigitPickerControl.getDigitsCode=function(){var a,b="";for(a=0;a<this.intPart;a++)b+=this.getOneDigitColumnCode(a);if(this.decimalPart>0){b+=this.getPointColumnCode(this.intPart);for(a=0;a<this.decimalPart;a++)b+=this.getOneDigitColumnCode(this.intPart+1+a)}return b};
$MAControl.DigitPickerControl.getOneDigitColumnCode=function(a){var b="";b+="<div class='x-picker-slot' style='width: "+this.columWidth[a]+"%;'>";b+="<div class='x-picker-mask' ><div class='x-picker-bar' ></div></div>";b+="<div id="+this.scrollIdPrefix+a+" class='x-scroller' style='-webkit-transform: translate3d(0px, 0px, 0px); '>";for(a=0;a<=9;a++)b+="<div class='x-picker-item' role='button'>"+a+"</div>";b+="</div>";b+="</div>";return b};
$MAControl.DigitPickerControl.getPointColumnCode=function(a){var b="";b+="<div class='x-picker-slot' style='width: "+this.columWidth[a]+"%;'>";b+="<div class='x-picker-mask'><div class='x-picker-bar' ></div></div>";b+="<div id="+this.scrollIdPrefix+a+" class='x-scroller' style='-webkit-transform: translate3d(0px, 0px, 0px); '>";b+="<div class='x-picker-item'>.</div>";b+="</div>";b+="</div>";return b};
$MAControl.DigitPickerControl.build=function(){var a=this.getAllCode();document.getElementById(this.pickerContainer.id).innerHTML=a};$MAControl.DigitPickerControl.readData=function(){if(this.displayed){var a,b;b="";var c;for(c=0;c<this.originalValue.length;c++)a=this.originalValue[c],a!="."?(a=document.getElementById(this.scrollIdPrefix+c),a=this.getSelectedItemIndex(a),b+=a.toString()):b+=".";return b}};
$MAControl.DigitPickerControl.getSelectedItemIndex=function(a){var b=0,c;if(a){var d=this.getOffsetV(a),e;for(e=0;e<10;e++)if(c=this.getItemOffsetByIndex(a,e),c<d+this.scrollItemHeight/2&&c>d-this.scrollItemHeight/2){b=e;break}}return b};$MAControl.DigitPickerControl.getItemOffsetByIndex=function(a,b){return this.scrollOffsetY-a.children[b].offsetTop};
$MAControl.DigitPickerControl.checkData=function(){var a=this.readData(),b;this.valueType.toLowerCase()=="float"?b=parseFloat(a):this.valueType.toLowerCase()=="int"&&(b=parseInt(a,10));a="";if(b>this.maxValue)return a=this.highValueMessage.replace("%1",b),a=a.replace("%2",this.maxValue);if(b<this.minValue)return a=this.lowValueMessage.replace("%1",b),a=a.replace("%2",this.minValue);this.newValue=b;return a};
$MAControl.DigitPickerControl.selectData=function(){if(this.displayed){var a,b,c;for(a=0;a<this.originalValue.length;a++)if(b=this.originalValue[a],b!="."&&(c=document.getElementById(this.scrollIdPrefix+a)))c.style.webkitTransform="translate3d(0px, "+(-c.children[parseInt(b,10)].offsetTop+this.scrollOffsetY)+"px, 0px)"}};
$MAControl.DigitPickerControl.showPicker=function(a,b){if(!this.displayed&&a!=null&&!a.disabled){this.inputControl=a;this.buttonControl=b;var c=this.inputControl.getAttribute("Max"),d;this.originalValue=a.value;this.valueType=this.inputControl.getAttribute("Type");this.decimalPart=parseInt(this.inputControl.getAttribute("Decimal"),10);this.maxValue=parseInt(c,10);this.minValue=parseInt(this.inputControl.getAttribute("Min"),10);this.intPart=this.maxValue.toString().length;this.maxValue>10?this.maxValue==
Math.pow(10,c.length-1)&&(this.intPart-=1):this.intPart=1;if(this.valueType.toLowerCase()=="float")this.maxValue=parseFloat(c),this.minValue=parseFloat(this.inputControl.getAttribute("Min")),d=parseFloat(this.originalValue).toFixed(this.decimalPart),this.originalValue=d.toString(),d=this.decimalPart>0?this.intPart+1+this.decimalPart:c.length;else if(this.valueType.toLowerCase()=="int")d=this.intPart;this.columWidth=[];var c=Math.floor(100/d),e=100%d,f;for(f=0;f<d;f++)f>=d-e?this.columWidth.push(c+
1):this.columWidth.push(c);for(;this.originalValue.length<d;)this.originalValue="0"+this.originalValue;this.newValue="undefined";this.build();this.show();this.selectData()}};function DPC_onButtonClick(a){$MAControl.DigitPickerControl.onButtonClick(a)}
$MAControl.DigitPickerControl.onButtonClick=function(a){a.preventDefault();a.stopPropagation();if(this.displayed)a=this.checkData(),this.isMobile&&!this.isIOS?(this.hide(),a!=""&&$MAControl.DigitPickerControl.showPopup(a)):(a!=""&&$MAControl.DigitPickerControl.showPopup(a),this.hide());else{if(a==null)a=window.event;a=a.srcElement!=void 0?a.srcElement:a.originalTarget;this.showPicker(document.getElementById(a.getAttribute("digitpicker_inputid")),a)}};
function DPC_onContainerTap2(a){$MAControl.DigitPickerControl.onContainerTap2(a)}$MAControl.DigitPickerControl.onContainerTap2=function(a){if(this.displayed){var b=a.target,c=!1;if(this.isMobile)for(;b!=null;){if(b.id=="MADigitPickerControl"){c=!0;break}b=b.parentNode}c||(this.stopEvent(a),a=this.checkData(),this.isMobile&&!this.isIOS?(this.hide(),a!=""&&$MAControl.DigitPickerControl.showPopup(a)):(a!=""&&$MAControl.DigitPickerControl.showPopup(a),this.hide()))}return!1};
$MAControl.DigitPickerControl.onContainerTap=function(a){if(a==null)a=window.event;var a=a.target,b;a.innerText=="undefined"||a.innerText==null?(b=a.wholeText,a=a.parentNode):b=a.innerText;if(!a)return!1;if(b.length==1&&parseInt(b,10)>=0)b=a.parentNode,this.scrollWithAni(b,this.getOffsetV(b),-a.offsetTop+this.scrollOffsetY);return!1};
$MAControl.DigitPickerControl.scrollWithAni=function(a,b,c){this.ani_startTime=Date.now();this.ani_duration=this.HIDE_TIMEOUT;this.ani_startY=b;this.ani_targetY=c;this.curScrollDiv=a;this.doAnimationFrame(this)};$MAControl.DigitPickerControl.doAnimationFrame=function(a){var b=a.getAnimationNewOffsetY();a.curScrollDiv.style.webkitTransform="translate3d(0px, "+b+"px, 0px)";if(a.ani_targetY!=b)a.timeout=setTimeout($MAControl.DigitPickerControl.doAnimationFrame,10,a)};
$MAControl.DigitPickerControl.getAnimationNewOffsetY=function(){var a=this.ani_targetY-this.ani_startY,b=Date.now()-this.ani_startTime;return this.ani_startY+Math.min(1,b/this.ani_duration)*a};$MAControl.DigitPickerControl.getOffsetV=function(a){a=a.style.webkitTransform.toLowerCase();a=a.substring(a.indexOf("(")+1,a.indexOf(")")).split(",");return parseInt(a[1].substring(0,a[1].indexOf("p")),10)};function DPC_onContainerTouchEnd(a){$MAControl.DigitPickerControl.onContainerMouseUp(a)}
function DPC_onContainerMouseUp(a){$MAControl.DigitPickerControl.onContainerMouseUp(a)}$MAControl.DigitPickerControl.onContainerMouseUp=function(a){this.stopEvent(a);if(this.isMouseDown&&!this.inDrag)this.onContainerTap(a);if(this.inDrag)this.inDrag=!1,this.onContainerDragend(a);this.isMouseDown=!1};function DPC_onContainerTouchStart(a){$MAControl.DigitPickerControl.onContainerMouseDown(a,a.touches[0].pageY);$MAControl.DigitPickerControl.stopEvent(a)}
function DPC_onContainerMouseDown(a){$MAControl.DigitPickerControl.onContainerMouseDown(a,a.pageY);$MAControl.DigitPickerControl.stopEvent(a)}$MAControl.DigitPickerControl.onContainerMouseDown=function(a,b){if(a==null)a=window.event;var c=a.target;this.stopMomentumAnimation();if(!c)return!1;c=c.innerText=="undefined"||c.innerText==null?c.wholeText:c.innerText;if(c.length==1&&parseInt(c,10)>=0)this.isMouseDown=!0,this.dragBeginY=b;return!1};
function DPC_onContainerTouchMove(a){$MAControl.DigitPickerControl.onContainerMouseMove(a,a.touches[0].pageY)}function DPC_onContainerMouseMove(a){$MAControl.DigitPickerControl.onContainerMouseMove(a,a.pageY)}$MAControl.DigitPickerControl.onContainerMouseMove=function(a,b){if(this.isMouseDown)if(this.inDrag)this.onContainerDrag(a,b);else if(Math.abs(b-this.dragBeginY)>2)this.inDrag=!0,this.onContainerDragstart(a,b);this.stopEvent(a)};
$MAControl.DigitPickerControl.onContainerDragstart=function(a,b){if(a==null)a=window.event;var c=a.target.parentNode;this.offsetV=$MAControl.DigitPickerControl.getOffsetV(c);this.dragBeginY=b;this.curScrollDiv=c;this.drag_lastEventTime=this.drag_originalStartTime=this.drag_startTime=a.timeStamp;this.drag_startTimeOffset=$MAControl.DigitPickerControl.offsetV;this.drag_momentumAniFramesHandled=0};
$MAControl.DigitPickerControl.onContainerDrag=function(a,b){if(Math.abs(b-this.dragBeginY)>2){var c=this.curScrollDiv;this.offsetV=this.offsetV+b-this.dragBeginY;c.style.webkitTransform="translate3d(0px, "+this.offsetV+"px, 0px)";this.dragBeginY=b}this.drag_lastEventTime=a.timeStamp;if(this.drag_lastEventTime-this.drag_startTime>this.drag_startMomentumResetTime)this.drag_originalStartTime=this.drag_startTime=a.timeStamp,this.drag_startTimeOffset=this.offsetV};
$MAControl.DigitPickerControl.onContainerDragend=function(a){$MAControl.DigitPickerControl.startMomentumAnimation(a)};
$MAControl.DigitPickerControl.startMomentumAnimation=function(a){var b=a.timeStamp-this.drag_originalStartTime;if(b>this.drag_startMomentumResetTime&&!this.inOffsetBoundary(this.offsetV))return!1;this.drag_momentumAniStartVelocity=(this.offsetV-this.drag_startTimeOffset)/(b/30);this.drag_momentumAniStartTime=a.timeStamp;this.drag_momentumAniProcessingTime=0;this.drag_momentumAniStartOffset=this.offsetV;if(this.drag_isDecelerating=Math.abs(this.drag_momentumAniStartVelocity)>1)this.ani_dec_startVelocity=
this.drag_momentumAniStartVelocity,this.ani_dec_startOffset=this.drag_momentumAniStartOffset,this.ani_dec_startTime=this.drag_momentumAniStartTime;if(this.drag_isDecelerating)return this.isMomentumAnimating=!0,this.drag_momentumAniFramesHandled=0,this.timeout=setTimeout(this.doMomentumAnimationFrame,1E3/this.fps,this),!0;this.scrollWithAni(this.curScrollDiv,this.offsetV,this.getItemOffsetByIndex(this.curScrollDiv,this.getSelectedItemIndex(this.curScrollDiv)));return!1};
$MAControl.DigitPickerControl.stopMomentumAnimation=function(){if(this.isMomentumAnimating){this.timeout&&clearTimeout(this.timeout);this.isMomentumAnimating=this.drag_isDecelerating=!1;var a=this.curScrollDiv.offsetHeight/10,b=Math.round((this.offsetV-this.scrollOffsetY)/a)*a+this.scrollOffsetY,a=a-this.curScrollDiv.offsetHeight+this.scrollOffsetY,c=this.scrollOffsetY;b<a?b=a:b>c&&(b=c);this.scrollWithAni(this.curScrollDiv,this.offsetV,b)}};
$MAControl.DigitPickerControl.doMomentumAnimationFrame=function(a){if(a.isMomentumAnimating){this.timeout=setTimeout($MAControl.DigitPickerControl.doMomentumAnimationFrame,1E3/$MAControl.DigitPickerControl.fps,a);var b=Date.now(),c=a.offsetV,d,e;if(a.drag_isDecelerating)if(c=a.decel_getOffset(),d=a.drag_momentumAniStartVelocity*a.decel_getFrictionFactor(),e=a.inOffsetBoundary(c)){if(Math.abs(d)<=1)a.drag_isDecelerating=!1}else a.drag_isDecelerating=!1;a.drag_isDecelerating?(a.drag_momentumAniFramesHandled++,
a.drag_momentumAniProcessingTime+=Date.now()-b,a.setOffset(c)):a.stopMomentumAnimation()}};$MAControl.DigitPickerControl.decel_getOffset=function(){return this.ani_dec_startOffset-this.ani_dec_startVelocity*(1-this.decel_getFrictionFactor())/this.theta};$MAControl.DigitPickerControl.decel_getFrictionFactor=function(){var a=Date.now()-this.ani_dec_startTime;return Math.exp(a/30*this.theta)};
$MAControl.DigitPickerControl.setOffset=function(a,b){if(this.offsetV!=a&&!b){var c=this.curScrollDiv;this.offsetV=a;c.style.webkitTransform="translate3d(0px, "+this.offsetV+"px, 0px)"}return this};$MAControl.DigitPickerControl.inOffsetBoundary=function(a){if(a<-this.curScrollDiv.offsetHeight||a>0)return!1;return!0};
$MAControl.DigitPickerControl.CheckPlatform=function(){var a=navigator.userAgent;if(a.indexOf("iPad")>=0||a.indexOf("iPhone")>=0)this.isIOS=!0;if(a.indexOf("Android")>=0)this.isAndroid=!0;if(this.isIOS||this.isAndroid||a.indexOf("Lenovo-3GW100")>=0||a.indexOf("Pre")>=0||a.indexOf("XT806")>=0||a.indexOf("BB10")>=0)this.isMobile=!0};
$MAControl.DigitPickerControl.stopEvent=function(a){if(!a)a=window.event;a.cancelBubble=!0;a.returnValue=!1;a.stopPropagation&&(a.stopPropagation(),a.preventDefault());return!1};$MAControl.DigitPickerControl.BindPageEvent=function(){window.jQuery&&(GlobalDigitPicker=this,$=jQuery.noConflict(),$("div").live("pagebeforehide",function(){window.GlobalDigitPicker&&GlobalDigitPicker.hide()}))};
$MAControl.DigitPickerControl.initPopup=function(){this.pickerPopup=document.createElement("div");this.pickerPopup.style.backgroundColor="rgba(0, 0, 0, 0.5)";this.pickerPopup.style.width=window.innerWidth+"px";this.pickerPopup.style.height=window.innerHeight+"px";this.pickerPopup.style.position="absolute";this.pickerPopup.style.top="0px";this.pickerPopup.style.left="0px";this.pickerPopup.style.display="none";this.pickerPopup.style.zIndex="50001";this.pickerPopup.id="digitPickerPopup";document.body.appendChild(this.pickerPopup);
this.pickerPopupMsg=document.createElement("div");this.pickerPopupMsg.style.position="fixed";this.pickerPopupMsg.style.top="40%";this.pickerPopupMsg.style.borderRadius="15px";this.pickerPopupMsg.style.padding="15px";this.pickerPopupMsg.style.paddingLeft="10px";this.pickerPopupMsg.style.paddingRight="10px";this.pickerPopupMsg.style.maxWidth="80%";this.pickerPopupMsg.style.border="solid 1px black";this.pickerPopupMsg.style.backgroundColor="white";this.pickerPopup.appendChild(this.pickerPopupMsg);this.isMobile?
this.pickerPopup.addEventListener("touchstart",function(a){document.getElementById("digitPickerPopup").style.display="none";a.preventDefault();a.stopPropagation();return!1},!0):this.pickerPopup.addEventListener("mousedown",function(a){document.getElementById("digitPickerPopup").style.display="none";a.preventDefault();a.stopPropagation();return!1},!0);var a=this;window.addEventListener("resize",function(){if(a.pickerPopup.style.display!="none")a.pickerPopup.style.width=window.innerWidth+"px",a.pickerPopup.style.height=
window.innerHeight+"px",a.pickerPopupMsg.style.left=a.pickerPopup.offsetWidth/2-a.pickerPopupMsg.offsetWidth/2+"px"},!1)};$MAControl.DigitPickerControl.showPopup=function(a){this.pickerPopupMsg.innerHTML=a;this.pickerPopup.style.width=window.innerWidth+"px";this.pickerPopup.style.height=window.innerHeight+"px";this.pickerPopup.style.display="block";this.pickerPopupMsg.style.left=this.pickerPopup.offsetWidth/2-this.pickerPopupMsg.offsetWidth/2+"px"};$MA.Chart=$MA.Chart;$MA.Chart.getStyles=$MA.Chart.getStyles;
$MA.Chart.setPieChartCategoryTextMaxLength=$MA.Chart.setPieChartCategoryTextMaxLength;$MA.Chart.prototype.load=$MA.Chart.prototype.load;$MA.Chart.prototype.create=$MA.Chart.prototype.create;$MA.Chart.prototype.refresh=$MA.Chart.prototype.refresh;$MA.Chart.prototype.applyCSS=$MA.Chart.prototype.applyCSS;$MA.Chart.prototype.showToolBar=$MA.Chart.prototype.showToolBar;$MA.Chart.prototype.isToolBarVisible=$MA.Chart.prototype.isToolBarVisible;$MA.Chart.prototype.showTableView=$MA.Chart.prototype.showTableView;
$MA.Chart.prototype.isTableViewVisible=$MA.Chart.prototype.isTableViewVisible;$MA.Chart.prototype.showRangeSelectorView=$MA.Chart.prototype.showRangeSelectorView;$MA.Chart.prototype.isRangeSelectorViewVisible=$MA.Chart.prototype.isRangeSelectorViewVisible;$MA.Chart.prototype.showWhatIfView=$MA.Chart.prototype.showWhatIfView;$MA.Chart.prototype.isWhatIfViewVisible=$MA.Chart.prototype.isWhatIfViewVisible;$MA.Chart.prototype.showDynamicAnalysisView=$MA.Chart.prototype.showDynamicAnalysisView;
$MA.Chart.prototype.isDynamicAnalysisViewVisible=$MA.Chart.prototype.isDynamicAnalysisViewVisible;$MA.Chart.prototype.showValueBubble=$MA.Chart.prototype.showValueBubble;$MA.Chart.prototype.setValueBubbleStyle=$MA.Chart.prototype.setValueBubbleStyle;$MA.Chart.prototype.getValueBubbleStyle=$MA.Chart.prototype.getValueBubbleStyle;$MA.Chart.prototype.isValueBubbleVisible=$MA.Chart.prototype.isValueBubbleVisible;$MA.Chart.prototype.getProperty=$MA.Chart.prototype.getProperty;
$MA.Chart.prototype.setProperty=$MA.Chart.prototype.setProperty;$MA.Chart.prototype.getZoomingLevel=$MA.Chart.prototype.getZoomingLevel;$MA.Chart.prototype.setZoomingLevel=$MA.Chart.prototype.setZoomingLevel;$MA.Chart.prototype.getNumberOfZoomingLevels=$MA.Chart.prototype.getNumberOfZoomingLevels;$MA.Chart.prototype.setCategorySortOrder=$MA.Chart.prototype.setCategorySortOrder;$MA.Chart.prototype.setLegend=$MA.Chart.prototype.setLegend;$MA.Chart.prototype.setLegendOffset=$MA.Chart.prototype.setLegendOffset;
$MA.Chart.prototype.setDataTable=$MA.Chart.prototype.setDataTable;$MA.Chart.prototype.bind=$MA.Chart.prototype.bind;$MA.Chart.prototype.unbind=$MA.Chart.prototype.unbind;$MA.Chart.prototype.copyGraphTo=$MA.Chart.prototype.copyGraphTo;$MA.Chart.prototype.getSelectedCategory=$MA.Chart.prototype.getSelectedCategory;$MA.Chart.prototype.getSelectedCategoryGroup=$MA.Chart.prototype.getSelectedCategoryGroup;$MA.Chart.prototype.getSelectedSeries=$MA.Chart.prototype.getSelectedSeries;
$MA.Chart.prototype.switchToFullView=$MA.Chart.prototype.switchToFullView;$MA.Chart.prototype.isFullView=$MA.Chart.prototype.isFullView;$MA.Chart.prototype.getNumberOfCategories=$MA.Chart.prototype.getNumberOfCategories;$MA.Chart.prototype.setNumberOfVisibleCategories=$MA.Chart.prototype.setNumberOfVisibleCategories;$MA.Chart.prototype.getSelectedCategoryIndex=$MA.Chart.prototype.getSelectedCategoryIndex;$MA.Chart.prototype.getCanvas=$MA.Chart.prototype.getCanvas;$MA.Chart.prototype.getDrawArea=$MA.Chart.prototype.getDrawArea;
$MA.Chart.prototype.getNumberOfVisibleCategories=$MA.Chart.prototype.getNumberOfVisibleCategories;$MA.Chart.prototype.getCategoryObject=$MA.Chart.prototype.getCategoryObject;$MA.Chart.prototype.getValueLoc=$MA.Chart.prototype.getValueLoc;$MA.Chart.prototype.preventDefaultRendering=$MA.Chart.prototype.preventDefaultRendering;$MA.Chart.prototype.getDrawingContentType=$MA.Chart.prototype.getDrawingContentType;$MA.Chart.prototype.setSelectedCategoryIndex=$MA.Chart.prototype.setSelectedCategoryIndex;
$MA.Chart.prototype.retrieve=$MA.Chart.prototype.retrieve;$MA.Chart.prototype.setPalette=$MA.Chart.prototype.setPalette;$MA.Chart.prototype.showTableValue=$MA.Chart.prototype.showTableValue;$MA.Chart.prototype.setMonoColor=$MA.Chart.prototype.setMonoColor;$MA.Chart.prototype.getSelectedBubbleInfo=$MA.Chart.prototype.getSelectedBubbleInfo;$MA.Chart.prototype.setDataPointsColor=$MA.Chart.prototype.setDataPointsColor;$MA.Chart.prototype.setHorizontalBarHeight=$MA.Chart.prototype.setHorizontalBarHeight;
$MA.Chart.prototype.setShowDotsWidth=$MA.Chart.prototype.setShowDotsWidth;$MA.Chart.prototype.setBubbleBorderColor=$MA.Chart.prototype.setBubbleBorderColor;$MA.Chart.prototype.setBubbleMinSize=$MA.Chart.prototype.setBubbleMinSize;$MA.Chart.prototype.setSymbolPalette=$MA.Chart.prototype.setSymbolPalette;$MA.Chart.prototype.setMonoSymbol=$MA.Chart.prototype.setMonoSymbol;$MA.Chart.prototype.collapse=$MA.Chart.prototype.collapse;$MA.Chart.prototype.expand=$MA.Chart.prototype.expand;
$MA.Chart.prototype.isRootLevel=$MA.Chart.prototype.isRootLevel;$MA.Chart.prototype.isLeafLevel=$MA.Chart.prototype.isLeafLevel;$MA.Chart.prototype.updateWIView=$MA.Chart.prototype.updateWIView;$MA.Chart.prototype.setGraphLineWidth=$MA.Chart.prototype.setGraphLineWidth;$MA.Chart.prototype.setMaxPies=$MA.Chart.prototype.setMaxPies;$MA.Chart.prototype.setTotalFormat=$MA.Chart.prototype.setTotalFormat;$MA.Chart.prototype.setBarChartTableWidth=$MA.Chart.prototype.setBarChartTableWidth;
$MA.BI.Object.prototype.getParent=$MA.BI.Object.prototype.getParent;$MA.BI.ChartObject.prototype.getNumberOfZoomingLevels=$MA.BI.ChartObject.prototype.getNumberOfZoomingLevels;$MA.BI.ChartObject.prototype.setDataTable=$MA.BI.ChartObject.prototype.setDataTable;$MA.DrillDownGroup=$MA.DrillDownGroup;$MA.DrillDownGroup.prototype.drillDown=$MA.DrillDownGroup.prototype.drillDown;$MA.DrillDownGroup.prototype.drillBack=$MA.DrillDownGroup.prototype.drillBack;$MA.DrillDownGroup.prototype.drillUp=$MA.DrillDownGroup.prototype.drillUp;
$MA.DrillDownGroup.prototype.getCurrentChart=$MA.DrillDownGroup.prototype.getCurrentChart;$MA.DrillDownGroup.prototype.showToolBar=$MA.DrillDownGroup.prototype.showToolBar;$MA.DrillDownGroup.prototype.refresh=$MA.DrillDownGroup.prototype.refresh;$MA.DrillDownGroup.prototype.bind=$MA.DrillDownGroup.prototype.bind;$MA.DrillDownGroup.prototype.unbind=$MA.DrillDownGroup.prototype.unbind;$MA.DrillDownGroup.prototype.getCurrentLevel=$MA.DrillDownGroup.prototype.getCurrentLevel;
$MA.DrillDownGroup.getDrillDownGroup=$MA.DrillDownGroup.getDrillDownGroup;$MA.Expression=$MA.Expression;$MA.Expression.parse=$MA.Expression.parse;$MA.Expression.prototype.evaluate=$MA.Expression.prototype.evaluate;$MA.DA=$MA.DA;$MA.DA.load=$MA.DA.load;$MA.DA.createVariables=$MA.DA.createVariables;$MA.DA.getValue=$MA.DA.getValue;$MA.DA.setValue=$MA.DA.setValue;$MA.DataTable=$MA.DataTable;$MA.DataTable.prototype.addColumn=$MA.DataTable.prototype.addColumn;$MA.DataTable.prototype.addRow=$MA.DataTable.prototype.addRow;
$MA.DataTable.prototype.addRows=$MA.DataTable.prototype.addRows;$MA.DataTable.prototype.getNumberOfColumns=$MA.DataTable.prototype.getNumberOfColumns;$MA.DataTable.prototype.getNumberOfRows=$MA.DataTable.prototype.getNumberOfRows;$MA.DataTable.prototype.refresh=$MA.DataTable.prototype.refresh;$MA.DataTable.prototype.getProperty=$MA.DataTable.prototype.getProperty;$MA.FileDataTable=$MA.FileDataTable;$MA.FileDataTable.prototype.setData=$MA.FileDataTable.prototype.setData;$MA.Graph=$MA.Graph;
$MA.Graph.Share=$MA.Graph.Share;$MA.Graph.Share.prototype.setTool=$MA.Graph.Share.prototype.setTool;$MA.Graph.Share.prototype.setMoveTool=$MA.Graph.Share.prototype.setMoveTool;$MA.Graph.Share.prototype.deleteSelect=$MA.Graph.Share.prototype.deleteSelect;$MA.Graph.Share.prototype.selectColor=$MA.Graph.Share.prototype.selectColor;$MA.Graph.Share.prototype.goHistory=$MA.Graph.Share.prototype.goHistory;$MA.Graph.Share.prototype.isUndo=$MA.Graph.Share.prototype.isUndo;
$MA.Graph.Share.prototype.isRedo=$MA.Graph.Share.prototype.isRedo;$MA.Graph.Share.selectTool=$MA.Graph.Share.selectTool;$MA.Graph.Share.sendMail=$MA.Graph.Share.sendMail;$MA.Graph.Share.saveIt=$MA.Graph.Share.saveIt;$MA.Graph.Share.goHistory=$MA.Graph.Share.goHistory;$MA.Graph.Share.moveIt=$MA.Graph.Share.moveIt;$MA.Graph.Share.deleteIt=$MA.Graph.Share.deleteIt;$MA.Graph.Share.selectColor=$MA.Graph.Share.selectColor;$MA.sendGraphShareMail=$MA.sendGraphShareMail;if(typeof $!="undefined")window.$=window.$;
$MA.setLocale=$MA.setLocale;$MA.setCurrencySymbol=$MA.setCurrencySymbol;$MA.setImagesFolder=$MA.setImagesFolder;$MA.isBrowserCompatible=$MA.isBrowserCompatible;
